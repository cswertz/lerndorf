/*! For license information please see main.90bf93b9.chunk.js.LICENSE.txt */
(this.webpackJsonpclient = this.webpackJsonpclient || []).push([[0], {
  118(e, t, n) {
    let r; const i = n(322); const o = n(323); const a = n(107); const s = n(179); const l = n(180); const c = n(325); const u = n(329); const d = n(333); const h = n(23); const f = n(183); const m = n(184); const v = n(185); const g = n(186); const p = n(337); !(function (e) {
      const t = e.en = e.en || {}; t.dictionary = Object.assign(t.dictionary || {}, {
        '%0 of %1': '%0 of %1', 'Block quote': 'Block quote', Bold: 'Bold', 'Bulleted List': 'Bulleted List', Cancel: 'Cancel', 'Centered image': 'Centered image', 'Change image text alternative': 'Change image text alternative', 'Choose heading': 'Choose heading', Column: 'Column', 'Decrease indent': 'Decrease indent', 'Delete column': 'Delete column', 'Delete row': 'Delete row', Downloadable: 'Downloadable', 'Dropdown toolbar': 'Dropdown toolbar', 'Edit link': 'Edit link', 'Editor toolbar': 'Editor toolbar', 'Enter image caption': 'Enter image caption', 'Full size image': 'Full size image', 'Header column': 'Header column', 'Header row': 'Header row', Heading: 'Heading', 'Heading 1': 'Heading 1', 'Heading 2': 'Heading 2', 'Heading 3': 'Heading 3', 'Heading 4': 'Heading 4', 'Heading 5': 'Heading 5', 'Heading 6': 'Heading 6', 'Image resize list': 'Image resize list', 'Image toolbar': 'Image toolbar', 'image widget': 'image widget', 'Increase indent': 'Increase indent', 'Insert column left': 'Insert column left', 'Insert column right': 'Insert column right', 'Insert image': 'Insert image', 'Insert media': 'Insert media', 'Insert paragraph after block': 'Insert paragraph after block', 'Insert paragraph before block': 'Insert paragraph before block', 'Insert row above': 'Insert row above', 'Insert row below': 'Insert row below', 'Insert table': 'Insert table', Italic: 'Italic', 'Left aligned image': 'Left aligned image', Link: 'Link', 'Link URL': 'Link URL', 'Media URL': 'Media URL', 'media widget': 'media widget', 'Merge cell down': 'Merge cell down', 'Merge cell left': 'Merge cell left', 'Merge cell right': 'Merge cell right', 'Merge cell up': 'Merge cell up', 'Merge cells': 'Merge cells', Next: 'Next', 'Numbered List': 'Numbered List', 'Open in a new tab': 'Open in a new tab', 'Open link in new tab': 'Open link in new tab', Original: 'Original', Paragraph: 'Paragraph', 'Paste the media URL in the input.': 'Paste the media URL in the input.', Previous: 'Previous', Redo: 'Redo', 'Resize image': 'Resize image', 'Resize image to %0': 'Resize image to %0', 'Resize image to the original size': 'Resize image to the original size', 'Rich Text Editor': 'Rich Text Editor', 'Rich Text Editor, %0': 'Rich Text Editor, %0', 'Right aligned image': 'Right aligned image', Row: 'Row', Save: 'Save', 'Select all': 'Select all', 'Select column': 'Select column', 'Select row': 'Select row', 'Show more items': 'Show more items', 'Side image': 'Side image', 'Split cell horizontally': 'Split cell horizontally', 'Split cell vertically': 'Split cell vertically', 'Table toolbar': 'Table toolbar', 'Text alternative': 'Text alternative', 'The URL must not be empty.': 'The URL must not be empty.', 'This link has no URL': 'This link has no URL', 'This media URL is not supported.': 'This media URL is not supported.', 'Tip: Paste the URL into the content to embed faster.': 'Tip: Paste the URL into the content to embed faster.', Undo: 'Undo', Unlink: 'Unlink', 'Upload failed': 'Upload failed', 'Upload in progress': 'Upload in progress', 'Widget toolbar': 'Widget toolbar',
      });
    }(window.CKEDITOR_TRANSLATIONS || (window.CKEDITOR_TRANSLATIONS = {}))), window, r = function () {
      return (function (e) { const t = {}; function n(r) { if (t[r]) return t[r].exports; const i = t[r] = { i: r, l: !1, exports: {} }; return e[r].call(i.exports, i, i.exports, n), i.l = !0, i.exports; } return n.m = e, n.c = t, n.d = function (e, t, r) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }); }, n.r = function (e) { typeof Symbol !== 'undefined' && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }), Object.defineProperty(e, '__esModule', { value: !0 }); }, n.t = function (e, t) { if (1 & t && (e = n(e)), 8 & t) return e; if (4 & t && typeof e === 'object' && e && e.__esModule) return e; const r = Object.create(null); if (n.r(r), Object.defineProperty(r, 'default', { enumerable: !0, value: e }), 2 & t && typeof e !== 'string') for (const i in e)n.d(r, i, ((t) => e[t]).bind(null, i)); return r; }, n.n = function (e) { const t = e && e.__esModule ? function () { return e.default; } : function () { return e; }; return n.d(t, 'a', t), t; }, n.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t); }, n.p = '', n(n.s = 100); }([function (e, t, n) {
        n.d(t, 'b', (() => r)), n.d(t, 'a', (() => i)); var r = (function (e) { v(n, e); const t = g(n); function n(e, r, o) { let a; return f(this, n), e = i(e), o && (e += ` ${JSON.stringify(o)}`), (a = t.call(this, e)).name = 'CKEditorError', a.context = r, a.data = o, a; } return m(n, [{ key: 'is', value(e) { return e === 'CKEditorError'; } }], [{ key: 'rethrowUnexpectedError', value(e, t) { if (e.is && e.is('CKEditorError')) throw e; const r = new n(e.message, t); throw r.stack = e.stack, r; } }]), n; }(p(Error))); function i(e) { const t = e.match(/^([^:]+):/); return t ? e + ' Read more: '.concat('https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html', '#error-').concat(t[1], '\n') : e; }
      }, function (e, t, n) {
        const r = (function () { let e; return function () { return typeof e === 'undefined' && (e = Boolean(window && document && document.all && !window.atob)), e; }; }()); const i = (function () { const t = {}; return function (n) { if (typeof t[n] === 'undefined') { let r = document.querySelector(n); if (window.HTMLIFrameElement && r instanceof window.HTMLIFrameElement) try { r = r.contentDocument.head; } catch (e) { r = null; }t[n] = r; } return t[n]; }; }()); const o = []; function a(e) { for (var t = -1, n = 0; n < o.length; n++) if (o[n].identifier === e) { t = n; break; } return t; } function s(e, t) { for (var n = {}, r = [], i = 0; i < e.length; i++) { const s = e[i]; const l = t.base ? s[0] + t.base : s[0]; const c = n[l] || 0; const u = ''.concat(l, ' ').concat(c); n[l] = c + 1; const d = a(u); const h = { css: s[1], media: s[2], sourceMap: s[3] }; d !== -1 ? (o[d].references++, o[d].updater(h)) : o.push({ identifier: u, updater: m(h, t), references: 1 }), r.push(u); } return r; } function l(e) { const t = document.createElement('style'); const r = e.attributes || {}; if (typeof r.nonce === 'undefined') { const o = n.nc; o && (r.nonce = o); } if (Object.keys(r).forEach(((e) => { t.setAttribute(e, r[e]); })), typeof e.insert === 'function')e.insert(t); else { const a = i(e.insert || 'head'); if (!a) throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid."); a.appendChild(t); } return t; } const c = (function () { const e = []; return function (t, n) { return e[t] = n, e.filter(Boolean).join('\n'); }; }()); function u(e, t, n, r) { const i = n ? '' : r.media ? '@media '.concat(r.media, ' {').concat(r.css, '}') : r.css; if (e.styleSheet)e.styleSheet.cssText = c(t, i); else { const o = document.createTextNode(i); const a = e.childNodes; a[t] && e.removeChild(a[t]), a.length ? e.insertBefore(o, a[t]) : e.appendChild(o); } } function d(e, t, n) { let r = n.css; const i = n.media; const o = n.sourceMap; if (i ? e.setAttribute('media', i) : e.removeAttribute('media'), o && btoa && (r += '\n/*# sourceMappingURL=data:application/json;base64,'.concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))), ' */')), e.styleSheet)e.styleSheet.cssText = r; else { for (;e.firstChild;)e.removeChild(e.firstChild); e.appendChild(document.createTextNode(r)); } } let h = null; let f = 0; function m(e, t) { let n; let r; let i; if (t.singleton) { const o = f++; n = h || (h = l(t)), r = u.bind(null, n, o, !1), i = u.bind(null, n, o, !0); } else n = l(t), r = d.bind(null, n, t), i = function () { !(function (e) { if (e.parentNode === null) return !1; e.parentNode.removeChild(e); }(n)); }; return r(e), function (t) { if (t) { if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap) return; r(e = t); } else i(); }; }e.exports = function (e, t) { (t = t || {}).singleton || typeof t.singleton === 'boolean' || (t.singleton = r()); let n = s(e = e || [], t); return function (e) { if (e = e || [], Object.prototype.toString.call(e) === '[object Array]') { for (let r = 0; r < n.length; r++) { const i = a(n[r]); o[i].references--; } for (var l = s(e, t), c = 0; c < n.length; c++) { const u = a(n[c]); o[u].references === 0 && (o[u].updater(), o.splice(u, 1)); }n = l; } }; };
      },, function (e, t, n) {
          const r = n(7); const i = typeof self === 'object' && self && self.Object === Object && self; const o = r.a || i || Function('return this')(); t.a = o;
        }, function (e, n, r) {
          (function (e) { const i = r(3); const o = r(12); const a = t && !t.nodeType && t; const s = a && typeof e === 'object' && e && !e.nodeType && e; const l = s && s.exports === a ? i.a.Buffer : void 0; const c = (l ? l.isBuffer : void 0) || o.a; n.a = c; }).call(this, r(9)(e));
        }, function (e, n, r) {
          (function (e) { const i = r(7); const o = t && !t.nodeType && t; const a = o && typeof e === 'object' && e && !e.nodeType && e; const s = a && a.exports === o && i.a.process; const l = (function () { try { const e = a && a.require && a.require('util').types; return e || s && s.binding && s.binding('util'); } catch (e) {} }()); n.a = l; }).call(this, r(9)(e));
        }, function (e, t, n) {
          (function (e) { const t = n(0); const r = typeof window === 'object' ? window : e; if (r.CKEDITOR_VERSION) throw new t.b('ckeditor-duplicated-modules: Some CKEditor 5 modules are duplicated.', null); r.CKEDITOR_VERSION = '21.0.0'; }).call(this, n(10));
        }, function (e, t, n) {
          (function (e) { const n = typeof e === 'object' && e && e.Object === Object && e; t.a = n; }).call(this, n(10));
        }, function (e, n, r) {
          (function (e) { const i = r(3); const o = t && !t.nodeType && t; const a = o && typeof e === 'object' && e && !e.nodeType && e; const s = a && a.exports === o ? i.a.Buffer : void 0; const l = s ? s.allocUnsafe : void 0; n.a = function (e, t) { if (t) return e.slice(); const n = e.length; const r = l ? l(n) : new e.constructor(n); return e.copy(r), r; }; }).call(this, r(9)(e));
        }, function (e, t) { e.exports = function (e) { if (!e.webpackPolyfill) { var t = Object.create(e); t.children || (t.children = []), Object.defineProperty(t, 'loaded', { enumerable: !0, get() { return t.l; } }), Object.defineProperty(t, 'id', { enumerable: !0, get() { return t.i; } }), Object.defineProperty(t, 'exports', { enumerable: !0 }), t.webpackPolyfill = 1; } return t; }; }, function (e, t) { let n; n = (function () { return this; }()); try { n = n || new Function('return this')(); } catch (e) { typeof window === 'object' && (n = window); }e.exports = n; }, function (e, t, n) {
          const r = n(1); let i = n(45); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t, n) {
          t.a = function () { return !1; };
        }, function (e, t, n) {
          const r = n(1); let i = n(14); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}'; }, function (e, t, n) {
          const r = n(1); let i = n(16); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999);--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:208,79%,51%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-color-link-fake-selection:rgba(31,177,255,0.3);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}'; }, function (e, t, n) {
          const r = n(1); let i = n(18); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = ':root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}'; }, function (e, t, n) {
          const r = n(1); let i = n(20); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}'; }, function (e, t, n) {
          const r = n(1); let i = n(22); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}'; }, function (e, t, n) {
          const r = n(1); let i = n(24); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}:root{--ck-dropdown-arrow-size:calc(0.5*var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}'; }, function (e, t, n) {
          const r = n(1); let i = n(26); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}'; }, function (e, t, n) {
          const r = n(1); let i = n(28); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}'; }, function (e, t, n) {
          const r = n(1); let i = n(30); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1*var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(-1*var(--ck-spacing-small));margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}'; }, function (e, t, n) {
          const r = n(1); let i = n(32); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(0.2*var(--ck-line-height-base)*var(--ck-font-size-base)) calc(0.4*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(1.2*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}'; }, function (e, t, n) {
          const r = n(1); let i = n(34); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2*var(--ck-switch-button-toggle-spacing))}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2*var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2*var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(0.5*var(--ck-border-radius))}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(-1*var(--ck-switch-button-translation)))}'; }, function (e, t, n) {
          const r = n(1); let i = n(36); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-toolbar-dropdown .ck.ck-toolbar .ck.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}'; }, function (e, t, n) {
          const r = n(1); let i = n(38); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}'; }, function (e, t, n) {
          const r = n(1); let i = n(40); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items>*{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>*,.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}'; }, function (e, t, n) {
          const r = n(1); let i = n(42); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}'; }, function (e, t, n) {
          const r = n(1); let i = n(44); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}'; }, function (e, t) { e.exports = '.ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}'; }, function (e, t, n) {
          const r = n(1); let i = n(47); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = ':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}'; }, function (e, t, n) {
          const r = n(1); let i = n(49); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(-0.5*var(--ck-widget-outline-thickness));left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(-0.5*var(--ck-widget-outline-thickness));right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(-1*var(--ck-widget-outline-thickness));right:calc(-1*var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(-1*var(--ck-widget-outline-thickness) - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(-1*var(--ck-widget-outline-thickness) - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3))}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;outline:1px solid hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}'; }, function (e, t, n) {
          const r = n(1); let i = n(51); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = ':root{--ck-color-resizer:var(--ck-color-focus-border);--ck-resizer-size:10px;--ck-resizer-border-width:1px;--ck-resizer-border-radius:2px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-tooltip-offset:10px;--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}'; }, function (e, t, n) {
          const r = n(1); let i = n(53); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view>.ck.ck-label{width:100%;text-overflow:ellipsis;overflow:hidden}'; }, function (e, t, n) {
          const r = n(1); let i = n(55); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = ':root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{box-shadow:var(--ck-inner-shadow),0 0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .2s ease-in-out,border .2s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),var(--ck-inner-shadow)}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}'; }, function (e, t, n) {
          const r = n(1); let i = n(57); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-text-alternative-form{padding:var(--ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}[dir=ltr] .ck.ck-text-alternative-form>:not(:first-child),[dir=rtl] .ck.ck-text-alternative-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-text-alternative-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-text-alternative-form .ck-labeled-field-view{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-text-alternative-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-text-alternative-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-text-alternative-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-text-alternative-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}'; }, function (e, t, n) {
          const r = n(1); let i = n(59); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}'; }, function (e, t, n) {
          const r = n(1); let i = n(61); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}'; }, function (e, t, n) {
          const r = n(1); let i = n(63); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:50px}'; }, function (e, t, n) {
          const r = n(1); let i = n(65); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}'; }, function (e, t, n) {
          const r = n(1); let i = n(67); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0;outline:1px solid var(--ck-color-resizer)}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all;width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nesw-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nesw-resize}'; }, function (e, t, n) {
          const r = n(1); let i = n(69); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck-content .image.image_resized{max-width:100%;display:block;box-sizing:border-box}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}'; }, function (e, t, n) {
          const r = n(1); let i = n(71); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = ':root{--ck-image-style-spacing:1.5em}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}'; }, function (e, t, n) {
          const r = n(1); let i = n(73); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}'; }, function (e, t, n) {
          const r = n(1); let i = n(75); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}'; }, function (e, t, n) {
          const r = n(1); let i = n(77); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}'; }, function (e, t, n) {
          const r = n(1); let i = n(79); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}'; }, function (e, t, n) {
          const r = n(1); let i = n(81); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form{padding:var(--ck-spacing-standard)}.ck.ck-link-form:focus{outline:none}[dir=ltr] .ck.ck-link-form>:not(:first-child),[dir=rtl] .ck.ck-link-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-form .ck-labeled-field-view{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin-left:0}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}'; }, function (e, t, n) {
          const r = n(1); let i = n(83); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions{padding:var(--ck-spacing-standard)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}.ck.ck-link-actions:focus{outline:none}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):last-of-type{border-right:1px solid var(--ck-color-base-border)}}'; }, function (e, t, n) {
          const r = n(1); let i = n(85); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(3*var(--ck-spacing-standard));background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}'; }, function (e, t, n) {
          const r = n(1); let i = n(87); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}.ck.ck-media-form{padding:var(--ck-spacing-standard)}.ck.ck-media-form:focus{outline:none}[dir=ltr] .ck.ck-media-form>:not(:first-child),[dir=rtl] .ck.ck-media-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-media-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-media-form .ck-labeled-field-view{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-media-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-media-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-media-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-media-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-media-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-media-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-media-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}'; }, function (e, t, n) {
          const r = n(1); let i = n(89); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}'; }, function (e, t, n) {
          const r = n(1); let i = n(91); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = ':root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}'; }, function (e, t, n) {
          const r = n(1); let i = n(93); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-radius:0}.ck-rounded-corners [dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow,[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-left-color:var(--ck-color-split-button-hover-border)}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-right-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}'; }, function (e, t, n) {
          const r = n(1); let i = n(95); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}'; }, function (e, t, n) {
          const r = n(1); let i = n(97); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = ':root{--ck-table-selected-cell-background:rgba(158,207,250,0.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}'; }, function (e, t, n) {
          const r = n(1); let i = n(99); typeof (i = i.__esModule ? i.default : i) === 'string' && (i = [[e.i, i, '']]); const o = {
            injectType: 'singletonStyleTag', attributes: { 'data-cke': !0 }, insert: 'head', singleton: !0,
          }; r(i, o), e.exports = i.locals || {};
        }, function (e, t) { e.exports = '.ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid #bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}'; }, function (e, t, n) {
          const r = h.mark(cl); const p = h.mark(ul); const k = h.mark(pl); const b = h.mark(kl); const y = h.mark(Od); n.r(t); const w = n(3); const _ = w.a.Symbol; const E = Object.prototype; const x = E.hasOwnProperty; const T = E.toString; const C = _ ? _.toStringTag : void 0; const S = function (e) { const t = x.call(e, C); const n = e[C]; try { e[C] = void 0; var r = !0; } catch (e) {} const i = T.call(e); return r && (t ? e[C] = n : delete e[C]), i; }; const A = Object.prototype.toString; const P = function (e) { return A.call(e); }; const O = _ ? _.toStringTag : void 0; const I = function (e) { return e == null ? void 0 === e ? '[object Undefined]' : '[object Null]' : O && O in Object(e) ? S(e) : P(e); }; const M = function (e, t) { return function (n) { return e(t(n)); }; }; const N = M(Object.getPrototypeOf, Object); const R = function (e) { return e != null && typeof e === 'object'; }; const j = Function.prototype; const D = Object.prototype; const L = j.toString; const z = D.hasOwnProperty; const F = L.call(Object); const V = function (e) { if (!R(e) || I(e) != '[object Object]') return !1; const t = N(e); if (t === null) return !0; const n = z.call(t, 'constructor') && t.constructor; return typeof n === 'function' && n instanceof n && L.call(n) == F; }; const B = function () { this.__data__ = [], this.size = 0; }; const U = function (e, t) { return e === t || e !== e && t !== t; }; const H = function (e, t) { for (let n = e.length; n--;) if (U(e[n][0], t)) return n; return -1; }; const W = Array.prototype.splice; const q = function (e) { const t = this.__data__; const n = H(t, e); return !(n < 0) && (n == t.length - 1 ? t.pop() : W.call(t, n, 1), --this.size, !0); }; const G = function (e) { const t = this.__data__; const n = H(t, e); return n < 0 ? void 0 : t[n][1]; }; const $ = function (e) { return H(this.__data__, e) > -1; }; const Y = function (e, t) { const n = this.__data__; const r = H(n, e); return r < 0 ? (++this.size, n.push([e, t])) : n[r][1] = t, this; }; function K(e) { let t = -1; const n = e == null ? 0 : e.length; for (this.clear(); ++t < n;) { const r = e[t]; this.set(r[0], r[1]); } }K.prototype.clear = B, K.prototype.delete = q, K.prototype.get = G, K.prototype.has = $, K.prototype.set = Y; const Q = K; const J = function () { this.__data__ = new Q(), this.size = 0; }; const Z = function (e) { const t = this.__data__; const n = t.delete(e); return this.size = t.size, n; }; const X = function (e) { return this.__data__.get(e); }; const ee = function (e) { return this.__data__.has(e); }; const te = function (e) { const t = typeof e; return e != null && (t == 'object' || t == 'function'); }; const ne = function (e) { if (!te(e)) return !1; const t = I(e); return t == '[object Function]' || t == '[object GeneratorFunction]' || t == '[object AsyncFunction]' || t == '[object Proxy]'; }; const re = w.a['__core-js_shared__']; const ie = (function () { const e = /[^.]+$/.exec(re && re.keys && re.keys.IE_PROTO || ''); return e ? `Symbol(src)_1.${e}` : ''; }()); const oe = function (e) { return !!ie && ie in e; }; const ae = Function.prototype.toString; const se = function (e) { if (e != null) { try { return ae.call(e); } catch (e) {} try { return `${e}`; } catch (e) {} } return ''; }; const le = /^\[object .+?Constructor\]$/; const ce = Function.prototype; const ue = Object.prototype; const de = ce.toString; const he = ue.hasOwnProperty; const fe = RegExp(`^${de.call(he).replace(/[\\^$.*+?()[\]{}|]/g, '\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?')}$`); const me = function (e) { return !(!te(e) || oe(e)) && (ne(e) ? fe : le).test(se(e)); }; const ve = function (e, t) { return e == null ? void 0 : e[t]; }; const ge = function (e, t) { const n = ve(e, t); return me(n) ? n : void 0; }; const pe = ge(w.a, 'Map'); const ke = ge(Object, 'create'); const be = function () { this.__data__ = ke ? ke(null) : {}, this.size = 0; }; const ye = function (e) { const t = this.has(e) && delete this.__data__[e]; return this.size -= t ? 1 : 0, t; }; const we = Object.prototype.hasOwnProperty; const _e = function (e) { const t = this.__data__; if (ke) { const n = t[e]; return n === '__lodash_hash_undefined__' ? void 0 : n; } return we.call(t, e) ? t[e] : void 0; }; const Ee = Object.prototype.hasOwnProperty; const xe = function (e) { const t = this.__data__; return ke ? void 0 !== t[e] : Ee.call(t, e); }; const Te = function (e, t) { const n = this.__data__; return this.size += this.has(e) ? 0 : 1, n[e] = ke && void 0 === t ? '__lodash_hash_undefined__' : t, this; }; function Ce(e) { let t = -1; const n = e == null ? 0 : e.length; for (this.clear(); ++t < n;) { const r = e[t]; this.set(r[0], r[1]); } }Ce.prototype.clear = be, Ce.prototype.delete = ye, Ce.prototype.get = _e, Ce.prototype.has = xe, Ce.prototype.set = Te; const Se = Ce; const Ae = function () { this.size = 0, this.__data__ = { hash: new Se(), map: new (pe || Q)(), string: new Se() }; }; const Pe = function (e) { const t = typeof e; return t == 'string' || t == 'number' || t == 'symbol' || t == 'boolean' ? e !== '__proto__' : e === null; }; const Oe = function (e, t) { const n = e.__data__; return Pe(t) ? n[typeof t === 'string' ? 'string' : 'hash'] : n.map; }; const Ie = function (e) { const t = Oe(this, e).delete(e); return this.size -= t ? 1 : 0, t; }; const Me = function (e) { return Oe(this, e).get(e); }; const Ne = function (e) { return Oe(this, e).has(e); }; const Re = function (e, t) { const n = Oe(this, e); const r = n.size; return n.set(e, t), this.size += n.size == r ? 0 : 1, this; }; function je(e) { let t = -1; const n = e == null ? 0 : e.length; for (this.clear(); ++t < n;) { const r = e[t]; this.set(r[0], r[1]); } }je.prototype.clear = Ae, je.prototype.delete = Ie, je.prototype.get = Me, je.prototype.has = Ne, je.prototype.set = Re; const De = je; const Le = function (e, t) { let n = this.__data__; if (n instanceof Q) { const r = n.__data__; if (!pe || r.length < 199) return r.push([e, t]), this.size = ++n.size, this; n = this.__data__ = new De(r); } return n.set(e, t), this.size = n.size, this; }; function ze(e) { const t = this.__data__ = new Q(e); this.size = t.size; }ze.prototype.clear = J, ze.prototype.delete = Z, ze.prototype.get = X, ze.prototype.has = ee, ze.prototype.set = Le; const Fe = ze; const Ve = function (e, t) { for (let n = -1, r = e == null ? 0 : e.length; ++n < r && !1 !== t(e[n], n, e););return e; }; const Be = (function () { try { const e = ge(Object, 'defineProperty'); return e({}, '', {}), e; } catch (e) {} }()); const Ue = function (e, t, n) {
            t == '__proto__' && Be ? Be(e, t, {
              configurable: !0, enumerable: !0, value: n, writable: !0,
            }) : e[t] = n;
          }; const He = Object.prototype.hasOwnProperty; const We = function (e, t, n) { const r = e[t]; He.call(e, t) && U(r, n) && (void 0 !== n || t in e) || Ue(e, t, n); }; const qe = function (e, t, n, r) { const i = !n; n || (n = {}); for (let o = -1, a = t.length; ++o < a;) { const s = t[o]; let l = r ? r(n[s], e[s], s, n, e) : void 0; void 0 === l && (l = e[s]), i ? Ue(n, s, l) : We(n, s, l); } return n; }; const Ge = function (e, t) { for (var n = -1, r = Array(e); ++n < e;)r[n] = t(n); return r; }; const $e = function (e) { return R(e) && I(e) == '[object Arguments]'; }; const Ye = Object.prototype; const Ke = Ye.hasOwnProperty; const Qe = Ye.propertyIsEnumerable; const Je = $e(function () { return arguments; }()) ? $e : function (e) { return R(e) && Ke.call(e, 'callee') && !Qe.call(e, 'callee'); }; const Ze = Array.isArray; const Xe = n(4); const et = /^(?:0|[1-9]\d*)$/; const tt = function (e, t) { const n = typeof e; return !!(t = t == null ? 9007199254740991 : t) && (n == 'number' || n != 'symbol' && et.test(e)) && e > -1 && e % 1 == 0 && e < t; }; const nt = function (e) { return typeof e === 'number' && e > -1 && e % 1 == 0 && e <= 9007199254740991; }; const rt = {}; rt['[object Float32Array]'] = rt['[object Float64Array]'] = rt['[object Int8Array]'] = rt['[object Int16Array]'] = rt['[object Int32Array]'] = rt['[object Uint8Array]'] = rt['[object Uint8ClampedArray]'] = rt['[object Uint16Array]'] = rt['[object Uint32Array]'] = !0, rt['[object Arguments]'] = rt['[object Array]'] = rt['[object ArrayBuffer]'] = rt['[object Boolean]'] = rt['[object DataView]'] = rt['[object Date]'] = rt['[object Error]'] = rt['[object Function]'] = rt['[object Map]'] = rt['[object Number]'] = rt['[object Object]'] = rt['[object RegExp]'] = rt['[object Set]'] = rt['[object String]'] = rt['[object WeakMap]'] = !1; const it = function (e) { return R(e) && nt(e.length) && !!rt[I(e)]; }; const ot = function (e) { return function (t) { return e(t); }; }; const at = n(5); const st = at.a && at.a.isTypedArray; const lt = st ? ot(st) : it; const ct = Object.prototype.hasOwnProperty; const ut = function (e, t) { const n = Ze(e); const r = !n && Je(e); const i = !n && !r && Object(Xe.a)(e); const o = !n && !r && !i && lt(e); const a = n || r || i || o; const s = a ? Ge(e.length, String) : []; const l = s.length; for (const c in e)!t && !ct.call(e, c) || a && (c == 'length' || i && (c == 'offset' || c == 'parent') || o && (c == 'buffer' || c == 'byteLength' || c == 'byteOffset') || tt(c, l)) || s.push(c); return s; }; const dt = Object.prototype; const ht = function (e) { const t = e && e.constructor; return e === (typeof t === 'function' && t.prototype || dt); }; const ft = M(Object.keys, Object); const mt = Object.prototype.hasOwnProperty; const vt = function (e) { if (!ht(e)) return ft(e); const t = []; for (const n in Object(e))mt.call(e, n) && n != 'constructor' && t.push(n); return t; }; const gt = function (e) { return e != null && nt(e.length) && !ne(e); }; const pt = function (e) { return gt(e) ? ut(e) : vt(e); }; const kt = function (e, t) { return e && qe(t, pt(t), e); }; const bt = function (e) { const t = []; if (e != null) for (const n in Object(e))t.push(n); return t; }; const yt = Object.prototype.hasOwnProperty; const wt = function (e) { if (!te(e)) return bt(e); const t = ht(e); const n = []; for (const r in e)(r != 'constructor' || !t && yt.call(e, r)) && n.push(r); return n; }; const _t = function (e) { return gt(e) ? ut(e, !0) : wt(e); }; const Et = function (e, t) { return e && qe(t, _t(t), e); }; const xt = n(8); const Tt = function (e, t) { let n = -1; const r = e.length; for (t || (t = Array(r)); ++n < r;)t[n] = e[n]; return t; }; const Ct = function (e, t) { for (var n = -1, r = e == null ? 0 : e.length, i = 0, o = []; ++n < r;) { const a = e[n]; t(a, n, e) && (o[i++] = a); } return o; }; const St = function () { return []; }; const At = Object.prototype.propertyIsEnumerable; const Pt = Object.getOwnPropertySymbols; const Ot = Pt ? function (e) { return e == null ? [] : (e = Object(e), Ct(Pt(e), ((t) => At.call(e, t)))); } : St; const It = function (e, t) { return qe(e, Ot(e), t); }; const Mt = function (e, t) { for (let n = -1, r = t.length, i = e.length; ++n < r;)e[i + n] = t[n]; return e; }; const Nt = Object.getOwnPropertySymbols ? function (e) { for (var t = []; e;)Mt(t, Ot(e)), e = N(e); return t; } : St; const Rt = function (e, t) { return qe(e, Nt(e), t); }; const jt = function (e, t, n) { const r = t(e); return Ze(e) ? r : Mt(r, n(e)); }; const Dt = function (e) { return jt(e, pt, Ot); }; const Lt = function (e) { return jt(e, _t, Nt); }; const zt = ge(w.a, 'DataView'); const Ft = ge(w.a, 'Promise'); const Vt = ge(w.a, 'Set'); const Bt = ge(w.a, 'WeakMap'); const Ut = '[object Map]'; const Ht = '[object Promise]'; const Wt = '[object Set]'; const qt = '[object WeakMap]'; const Gt = '[object DataView]'; const $t = se(zt); const Yt = se(pe); const Kt = se(Ft); const Qt = se(Vt); const Jt = se(Bt); let Zt = I; (zt && Zt(new zt(new ArrayBuffer(1))) != Gt || pe && Zt(new pe()) != Ut || Ft && Zt(Ft.resolve()) != Ht || Vt && Zt(new Vt()) != Wt || Bt && Zt(new Bt()) != qt) && (Zt = function (e) { const t = I(e); const n = t == '[object Object]' ? e.constructor : void 0; const r = n ? se(n) : ''; if (r) switch (r) { case $t: return Gt; case Yt: return Ut; case Kt: return Ht; case Qt: return Wt; case Jt: return qt; } return t; }); const Xt = Zt; const en = Object.prototype.hasOwnProperty; const tn = function (e) { const t = e.length; const n = new e.constructor(t); return t && typeof e[0] === 'string' && en.call(e, 'index') && (n.index = e.index, n.input = e.input), n; }; const nn = w.a.Uint8Array; const rn = function (e) { const t = new e.constructor(e.byteLength); return new nn(t).set(new nn(e)), t; }; const on = function (e, t) { const n = t ? rn(e.buffer) : e.buffer; return new e.constructor(n, e.byteOffset, e.byteLength); }; const an = /\w*$/; const sn = function (e) { const t = new e.constructor(e.source, an.exec(e)); return t.lastIndex = e.lastIndex, t; }; const ln = _ ? _.prototype : void 0; const cn = ln ? ln.valueOf : void 0; const un = function (e) { return cn ? Object(cn.call(e)) : {}; }; const dn = function (e, t) { const n = t ? rn(e.buffer) : e.buffer; return new e.constructor(n, e.byteOffset, e.length); }; const hn = function (e, t, n) { const r = e.constructor; switch (t) { case '[object ArrayBuffer]': return rn(e); case '[object Boolean]': case '[object Date]': return new r(+e); case '[object DataView]': return on(e, n); case '[object Float32Array]': case '[object Float64Array]': case '[object Int8Array]': case '[object Int16Array]': case '[object Int32Array]': case '[object Uint8Array]': case '[object Uint8ClampedArray]': case '[object Uint16Array]': case '[object Uint32Array]': return dn(e, n); case '[object Map]': return new r(); case '[object Number]': case '[object String]': return new r(e); case '[object RegExp]': return sn(e); case '[object Set]': return new r(); case '[object Symbol]': return un(e); } }; const fn = Object.create; const mn = (function () { function e() {} return function (t) { if (!te(t)) return {}; if (fn) return fn(t); e.prototype = t; const n = new e(); return e.prototype = void 0, n; }; }()); const vn = function (e) { return typeof e.constructor !== 'function' || ht(e) ? {} : mn(N(e)); }; const gn = function (e) { return R(e) && Xt(e) == '[object Map]'; }; const pn = at.a && at.a.isMap; const kn = pn ? ot(pn) : gn; const bn = function (e) { return R(e) && Xt(e) == '[object Set]'; }; const yn = at.a && at.a.isSet; const wn = yn ? ot(yn) : bn; const _n = '[object Arguments]'; const En = '[object Function]'; const xn = '[object Object]'; const Tn = {}; Tn[_n] = Tn['[object Array]'] = Tn['[object ArrayBuffer]'] = Tn['[object DataView]'] = Tn['[object Boolean]'] = Tn['[object Date]'] = Tn['[object Float32Array]'] = Tn['[object Float64Array]'] = Tn['[object Int8Array]'] = Tn['[object Int16Array]'] = Tn['[object Int32Array]'] = Tn['[object Map]'] = Tn['[object Number]'] = Tn[xn] = Tn['[object RegExp]'] = Tn['[object Set]'] = Tn['[object String]'] = Tn['[object Symbol]'] = Tn['[object Uint8Array]'] = Tn['[object Uint8ClampedArray]'] = Tn['[object Uint16Array]'] = Tn['[object Uint32Array]'] = !0, Tn['[object Error]'] = Tn[En] = Tn['[object WeakMap]'] = !1; const Cn = function e(t, n, r, i, o, a) { let s; const l = 1 & n; const c = 2 & n; const u = 4 & n; if (r && (s = o ? r(t, i, o, a) : r(t)), void 0 !== s) return s; if (!te(t)) return t; const d = Ze(t); if (d) { if (s = tn(t), !l) return Tt(t, s); } else { const h = Xt(t); const f = h == En || h == '[object GeneratorFunction]'; if (Object(Xe.a)(t)) return Object(xt.a)(t, l); if (h == xn || h == _n || f && !o) { if (s = c || f ? {} : vn(t), !l) return c ? Rt(t, Et(s, t)) : It(t, kt(s, t)); } else { if (!Tn[h]) return o ? t : {}; s = hn(t, h, l); } }a || (a = new Fe()); const m = a.get(t); if (m) return m; a.set(t, s), wn(t) ? t.forEach(((i) => { s.add(e(i, n, r, i, t, a)); })) : kn(t) && t.forEach(((i, o) => { s.set(o, e(i, n, r, o, t, a)); })); const v = u ? c ? Lt : Dt : c ? keysIn : pt; const g = d ? void 0 : v(t); return Ve(g || t, ((i, o) => { g && (i = t[o = i]), We(s, o, e(i, n, r, o, t, a)); })), s; }; const Sn = function (e, t) { return Cn(e, 5, t = typeof t === 'function' ? t : void 0); }; const An = function (e) { return R(e) && e.nodeType === 1 && !V(e); }; const Pn = (function () { function e(t, n) { f(this, e), this._config = {}, n && this.define(On(n)), t && this._setObjectToTarget(this._config, t); } return m(e, [{ key: 'set', value(e, t) { this._setToTarget(this._config, e, t); } }, { key: 'define', value(e, t) { this._setToTarget(this._config, e, t, !0); } }, { key: 'get', value(e) { return this._getFromSource(this._config, e); } }, { key: 'names', value: h.mark((function e() { let t; let n; let r; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: t = 0, n = Object.keys(this._config); case 1: if (!(t < n.length)) { e.next = 8; break; } return r = n[t], e.next = 5, r; case 5: t++, e.next = 1; break; case 8: case 'end': return e.stop(); } }), e, this); })) }, { key: '_setToTarget', value(e, t, n) { const r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; if (V(t)) this._setObjectToTarget(e, t, r); else { const i = t.split('.'); t = i.pop(); let o; const a = d(i); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; V(e[s]) || (e[s] = {}), e = e[s]; } } catch (l) { a.e(l); } finally { a.f(); } if (V(n)) return V(e[t]) || (e[t] = {}), e = e[t], void this._setObjectToTarget(e, n, r); r && typeof e[t] !== 'undefined' || (e[t] = n); } } }, { key: '_getFromSource', value(e, t) { const n = t.split('.'); t = n.pop(); let r; const i = d(n); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; if (!V(e[o])) { e = null; break; }e = e[o]; } } catch (a) { i.e(a); } finally { i.f(); } return e ? On(e[t]) : void 0; } }, { key: '_setObjectToTarget', value(e, t, n) { const r = this; Object.keys(t).forEach(((i) => { r._setToTarget(e, i, t[i], n); })); } }]), e; }()); function On(e) { return Sn(e, In); } function In(e) { return An(e) ? e : void 0; } const Mn = function () { return function e() { e.called = !0; }; }; const Nn = function e(t, n) { f(this, e), this.source = t, this.name = n, this.path = [], this.stop = Mn(), this.off = Mn(); }; const Rn = new Array(256).fill().map(((e, t) => (`0${t.toString(16)}`).slice(-2))); function jn() { const e = 4294967296 * Math.random() >>> 0; const t = 4294967296 * Math.random() >>> 0; const n = 4294967296 * Math.random() >>> 0; const r = 4294967296 * Math.random() >>> 0; return `e${Rn[e >> 0 & 255]}${Rn[e >> 8 & 255]}${Rn[e >> 16 & 255]}${Rn[e >> 24 & 255]}${Rn[t >> 0 & 255]}${Rn[t >> 8 & 255]}${Rn[t >> 16 & 255]}${Rn[t >> 24 & 255]}${Rn[n >> 0 & 255]}${Rn[n >> 8 & 255]}${Rn[n >> 16 & 255]}${Rn[n >> 24 & 255]}${Rn[r >> 0 & 255]}${Rn[r >> 8 & 255]}${Rn[r >> 16 & 255]}${Rn[r >> 24 & 255]}`; } const Dn = {
            get(e) { return typeof e !== 'number' ? this[e] || this.normal : e; }, highest: 1e5, high: 1e3, normal: 0, low: -1e3, lowest: -1e5,
          }; const Ln = (n(6), n(0)); const zn = Symbol('listeningTo'); const Fn = Symbol('emitterId'); const Vn = {
            on(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; this.listenTo(this, e, t, n); }, once(e, t, n) { let r = !1; this.listenTo(this, e, (function (e) { if (!r) { r = !0, e.off(); for (var n = arguments.length, i = new Array(n > 1 ? n - 1 : 0), o = 1; o < n; o++)i[o - 1] = arguments[o]; t.call.apply(t, [this, e].concat(i)); } }), n); }, off(e, t) { this.stopListening(this, e, t); }, listenTo(e, t, n) { let r; let i; const o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}; this[zn] || (this[zn] = {}); const a = this[zn]; Un(e) || Bn(e); const s = Un(e); (r = a[s]) || (r = a[s] = { emitter: e, callbacks: {} }), (i = r.callbacks[t]) || (i = r.callbacks[t] = []), i.push(n), Wn(e, t); let l; const c = qn(e, t); const u = Dn.get(o.priority); const h = { callback: n, priority: u }; const f = d(c); try { for (f.s(); !(l = f.n()).done;) { for (var m = l.value, v = !1, g = 0; g < m.length; g++) if (m[g].priority < u) { m.splice(g, 0, h), v = !0; break; }v || m.push(h); } } catch (p) { f.e(p); } finally { f.f(); } }, stopListening(e, t, n) { const r = this[zn]; let i = e && Un(e); const o = r && i && r[i]; const a = o && t && o.callbacks[t]; if (!(!r || e && !o || t && !a)) if (n)Yn(e, t, n); else if (a) { for (;n = a.pop();)Yn(e, t, n); delete o.callbacks[t]; } else if (o) { for (t in o.callbacks) this.stopListening(e, t); delete r[i]; } else { for (i in r) this.stopListening(r[i].emitter); delete this[zn]; } }, fire(e) { try { const t = e instanceof Nn ? e : new Nn(this, e); const n = t.name; let r = Gn(this, n); t.path.push(this); for (var i = arguments.length, o = new Array(i > 1 ? i - 1 : 0), a = 1; a < i; a++)o[a - 1] = arguments[a]; if (r) { const s = [t].concat(o); r = Array.from(r); for (let l = 0; l < r.length && (r[l].callback.apply(this, s), t.off.called && (delete t.off.called, Yn(this, n, r[l].callback)), !t.stop.called); l++); } if (this._delegations) { const c = this._delegations.get(n); const u = this._delegations.get('*'); c && $n(c, t, o), u && $n(u, t, o); } return t.return; } catch (e) { Ln.b.rethrowUnexpectedError(e, this); } }, delegate() { for (var e = this, t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; return { to(t, r) { e._delegations || (e._delegations = new Map()), n.forEach(((n) => { const i = e._delegations.get(n); i ? i.set(t, r) : e._delegations.set(n, new Map([[t, r]])); })); } }; }, stopDelegating(e, t) { if (this._delegations) if (e) if (t) { const n = this._delegations.get(e); n && n.delete(t); } else this._delegations.delete(e); else this._delegations.clear(); },
          }; function Bn(e, t) { e[Fn] || (e[Fn] = t || jn()); } function Un(e) { return e[Fn]; } function Hn(e) { return e._events || Object.defineProperty(e, '_events', { value: {} }), e._events; } function Wn(e, t) { const n = Hn(e); if (!n[t]) { for (var r = t, i = null, o = []; r !== '' && !n[r];)n[r] = { callbacks: [], childEvents: [] }, o.push(n[r]), i && n[r].childEvents.push(i), i = r, r = r.substr(0, r.lastIndexOf(':')); if (r !== '') { let a; const s = d(o); try { for (s.s(); !(a = s.n()).done;)a.value.callbacks = n[r].callbacks.slice(); } catch (l) { s.e(l); } finally { s.f(); }n[r].childEvents.push(i); } } } function qn(e, t) { const n = Hn(e)[t]; if (!n) return []; for (var r = [n.callbacks], i = 0; i < n.childEvents.length; i++) { const o = qn(e, n.childEvents[i]); r = r.concat(o); } return r; } function Gn(e, t) { let n; return e._events && (n = e._events[t]) && n.callbacks.length ? n.callbacks : t.indexOf(':') > -1 ? Gn(e, t.substr(0, t.lastIndexOf(':'))) : null; } function $n(e, t, n) { let r; const i = d(e); try { for (i.s(); !(r = i.n()).done;) { const o = u(r.value, 2); const a = o[0]; let s = o[1]; s ? typeof s === 'function' && (s = s(t.name)) : s = t.name; const l = new Nn(t.source, s); l.path = c(t.path), a.fire.apply(a, [l].concat(c(n))); } } catch (h) { i.e(h); } finally { i.f(); } } function Yn(e, t, n) { let r; const i = qn(e, t); const o = d(i); try { for (o.s(); !(r = o.n()).done;) for (let a = r.value, s = 0; s < a.length; s++)a[s].callback == n && (a.splice(s, 1), s--); } catch (l) { o.e(l); } finally { o.f(); } } function Kn(e) { return !(!e || !e[Symbol.iterator]); } function Qn(e) { for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)n[r - 1] = arguments[r]; n.forEach(((t) => { Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(((n) => { if (!(n in e.prototype)) { const r = Object.getOwnPropertyDescriptor(t, n); r.enumerable = !1, Object.defineProperty(e.prototype, n, r); } })); })); } const Jn = (function () { function e() { const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; let n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; f(this, e); const r = Kn(t); if (r || (n = t), this._items = [], this._itemMap = new Map(), this._idProperty = n.idProperty || 'id', this._bindToExternalToInternalMap = new WeakMap(), this._bindToInternalToExternalMap = new WeakMap(), this._skippedIndexesFromExternal = [], r) { let i; const o = d(t); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; this._items.push(a), this._itemMap.set(this._getItemIdBeforeAdding(a), a); } } catch (s) { o.e(s); } finally { o.f(); } } } return m(e, [{ key: 'add', value(e, t) { return this.addMany([e], t); } }, { key: 'addMany', value(e, t) { if (void 0 === t)t = this._items.length; else if (t > this._items.length || t < 0) throw new Ln.b('collection-add-item-invalid-index', this); for (let n = 0; n < e.length; n++) { const r = e[n]; const i = this._getItemIdBeforeAdding(r); const o = t + n; this._items.splice(o, 0, r), this._itemMap.set(i, r), this.fire('add', r, o); } return this.fire('change', { added: e, removed: [], index: t }), this; } }, { key: 'get', value(e) { let t; if (typeof e === 'string')t = this._itemMap.get(e); else { if (typeof e !== 'number') throw new Ln.b('collection-get-invalid-arg: Index or id must be given.', this); t = this._items[e]; } return t || null; } }, { key: 'has', value(e) { if (typeof e === 'string') return this._itemMap.has(e); const t = e[this._idProperty]; return this._itemMap.has(t); } }, { key: 'getIndex', value(e) { let t; return t = typeof e === 'string' ? this._itemMap.get(e) : e, this._items.indexOf(t); } }, { key: 'remove', value(e) { const t = this._remove(e); const n = u(t, 2); const r = n[0]; const i = n[1]; return this.fire('change', { added: [], removed: [r], index: i }), r; } }, { key: 'map', value(e, t) { return this._items.map(e, t); } }, { key: 'find', value(e, t) { return this._items.find(e, t); } }, { key: 'filter', value(e, t) { return this._items.filter(e, t); } }, { key: 'clear', value() { this._bindToCollection && (this.stopListening(this._bindToCollection), this._bindToCollection = null); for (var e = Array.from(this._items); this.length;) this._remove(0); this.fire('change', { added: [], removed: e, index: 0 }); } }, { key: 'bindTo', value(e) { const t = this; if (this._bindToCollection) throw new Ln.b('collection-bind-to-rebind: The collection cannot be bound more than once.', this); return this._bindToCollection = e, { as(e) { t._setUpBindToBinding(((t) => new e(t))); }, using(e) { typeof e === 'function' ? t._setUpBindToBinding(((t) => e(t))) : t._setUpBindToBinding(((t) => t[e])); } }; } }, { key: '_setUpBindToBinding', value(e) { let t; const n = this; const r = this._bindToCollection; const i = function (t, i, o) { const a = r._bindToCollection == n; const s = r._bindToInternalToExternalMap.get(i); if (a && s)n._bindToExternalToInternalMap.set(i, s), n._bindToInternalToExternalMap.set(s, i); else { const l = e(i); if (!l) return void n._skippedIndexesFromExternal.push(o); let c; let u = o; const h = d(n._skippedIndexesFromExternal); try { for (h.s(); !(c = h.n()).done;)o > c.value && u--; } catch (g) { h.e(g); } finally { h.f(); } let f; const m = d(r._skippedIndexesFromExternal); try { for (m.s(); !(f = m.n()).done;)u >= f.value && u++; } catch (g) { m.e(g); } finally { m.f(); }n._bindToExternalToInternalMap.set(i, l), n._bindToInternalToExternalMap.set(l, i), n.add(l, u); for (let v = 0; v < r._skippedIndexesFromExternal.length; v++)u <= r._skippedIndexesFromExternal[v] && r._skippedIndexesFromExternal[v]++; } }; const o = d(r); try { for (o.s(); !(t = o.n()).done;) { const a = t.value; i(0, a, r.getIndex(a)); } } catch (s) { o.e(s); } finally { o.f(); } this.listenTo(r, 'add', i), this.listenTo(r, 'remove', ((e, t, r) => { const i = n._bindToExternalToInternalMap.get(t); i && n.remove(i), n._skippedIndexesFromExternal = n._skippedIndexesFromExternal.reduce(((e, t) => (r < t && e.push(t - 1), r > t && e.push(t), e)), []); })); } }, { key: '_getItemIdBeforeAdding', value(e) { let t; const n = this._idProperty; if (n in e) { if (typeof (t = e[n]) !== 'string') throw new Ln.b('collection-add-invalid-id', this); if (this.get(t)) throw new Ln.b('collection-add-item-already-exists', this); } else e[n] = t = jn(); return t; } }, { key: '_remove', value(e) { let t; let n; let r; let i = !1; const o = this._idProperty; if (typeof e === 'string' ? (n = e, i = !(r = this._itemMap.get(n)), r && (t = this._items.indexOf(r))) : typeof e === 'number' ? (t = e, i = !(r = this._items[t]), r && (n = r[o])) : (n = (r = e)[o], i = (t = this._items.indexOf(r)) == -1 || !this._itemMap.get(n)), i) throw new Ln.b('collection-remove-404: Item not found.', this); this._items.splice(t, 1), this._itemMap.delete(n); const a = this._bindToInternalToExternalMap.get(r); return this._bindToInternalToExternalMap.delete(r), this._bindToExternalToInternalMap.delete(a), this.fire('remove', r, t), [r, t]; } }, { key: Symbol.iterator, value() { return this._items[Symbol.iterator](); } }, { key: 'length', get() { return this._items.length; } }, { key: 'first', get() { return this._items[0] || null; } }, { key: 'last', get() { return this._items[this.length - 1] || null; } }]), e; }()); Qn(Jn, Vn); const Zn = (function () { function e(t) { const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; const r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : []; f(this, e), this._context = t, this._plugins = new Map(), this._availablePlugins = new Map(); let i; const o = d(n); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; a.pluginName && this._availablePlugins.set(a.pluginName, a); } } catch (v) { o.e(v); } finally { o.f(); } this._contextPlugins = new Map(); let s; const l = d(r); try { for (l.s(); !(s = l.n()).done;) { const c = u(s.value, 2); const h = c[0]; const m = c[1]; this._contextPlugins.set(h, m), this._contextPlugins.set(m, h), h.pluginName && this._availablePlugins.set(h.pluginName, h); } } catch (v) { l.e(v); } finally { l.f(); } } return m(e, [{ key: Symbol.iterator, value: h.mark((function e() { let t; let n; let r; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: t = d(this._plugins), e.prev = 1, t.s(); case 3: if ((n = t.n()).done) { e.next = 10; break; } if (typeof (r = n.value)[0] !== 'function') { e.next = 8; break; } return e.next = 8, r; case 8: e.next = 3; break; case 10: e.next = 15; break; case 12: e.prev = 12, e.t0 = e.catch(1), t.e(e.t0); case 15: return e.prev = 15, t.f(), e.finish(15); case 18: case 'end': return e.stop(); } }), e, this, [[1, 12, 15, 18]]); })) }, { key: 'get', value(e) { const t = this._plugins.get(e); if (!t) { let n = e; throw typeof e === 'function' && (n = e.pluginName || e.name), new Ln.b('plugincollection-plugin-not-loaded: The requested plugin is not loaded.', this._context, { plugin: n }); } return t; } }, { key: 'has', value(e) { return this._plugins.has(e); } }, { key: 'init', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; const n = this; const r = this._context; const i = new Set(); const o = []; const a = g(e); const s = g(t); const l = v(e); if (l) { const c = 'plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.'; return console.error(Object(Ln.a)(c), { plugins: l }), Promise.reject(new Ln.b(c, r, { plugins: l })); } return Promise.all(a.map(u)).then((() => h(o, 'init'))).then((() => h(o, 'afterInit'))).then((() => o)); function u(e) { if (!s.includes(e) && !n._plugins.has(e) && !i.has(e)) return f(e).catch(((t) => { throw console.error(Object(Ln.a)('plugincollection-load: It was not possible to load the plugin.'), { plugin: e }), t; })); } function h(e, t) { return e.reduce(((e, r) => (r[t] ? n._contextPlugins.has(r) ? e : e.then(r[t].bind(r)) : e)), Promise.resolve()); } function f(e) { return new Promise(((a) => { i.add(e), e.requires && e.requires.forEach(((n) => { const i = m(n); if (e.isContextPlugin && !i.isContextPlugin) throw new Ln.b('plugincollection-context-required: Context plugin can not require plugin which is not a context plugin', null, { plugin: i.name, requiredBy: e.name }); if (t.includes(i)) throw new Ln.b('plugincollection-required: Cannot load a plugin because one of its dependencies is listed inthe `removePlugins` option.', r, { plugin: i.name, requiredBy: e.name }); u(i); })); const s = n._contextPlugins.get(e) || new e(r); n._add(e, s), o.push(s), a(); })); } function m(e) { return typeof e === 'function' ? e : n._availablePlugins.get(e); } function v(e) { let t; const n = []; const r = d(e); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; m(i) || n.push(i); } } catch (o) { r.e(o); } finally { r.f(); } return n.length ? n : null; } function g(e) { return e.map(((e) => m(e))).filter(((e) => !!e)); } } }, { key: 'destroy', value() { let e; const t = []; const n = d(this); try { for (n.s(); !(e = n.n()).done;) { const r = u(e.value, 2)[1]; typeof r.destroy !== 'function' || this._contextPlugins.has(r) || t.push(r.destroy()); } } catch (i) { n.e(i); } finally { n.f(); } return Promise.all(t); } }, { key: '_add', value(e, t) { this._plugins.set(e, t); const n = e.pluginName; if (n) { if (this._plugins.has(n)) throw new Ln.b('plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.', null, { pluginName: n, plugin1: this._plugins.get(n).constructor, plugin2: e }); this._plugins.set(n, t); } } }]), e; }()); function Xn(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; if (typeof n !== 'number') throw new Ln.b('translation-service-quantity-not-a-number: Expecting `quantity` to be a number.', null, { quantity: n }); const r = tr(); r === 1 && (e = Object.keys(window.CKEDITOR_TRANSLATIONS)[0]); const i = t.id || t.string; if (r === 0 || !er(e, i)) return n !== 1 ? t.plural : t.string; const o = window.CKEDITOR_TRANSLATIONS[e].dictionary; const a = window.CKEDITOR_TRANSLATIONS[e].getPluralForm || function (e) { return e === 1 ? 0 : 1; }; if (typeof o[i] === 'string') return o[i]; const s = Number(a(n)); return o[i][s]; } function er(e, t) { return !!window.CKEDITOR_TRANSLATIONS[e] && !!window.CKEDITOR_TRANSLATIONS[e].dictionary[t]; } function tr() { return Object.keys(window.CKEDITOR_TRANSLATIONS).length; }Qn(Zn, Vn), window.CKEDITOR_TRANSLATIONS || (window.CKEDITOR_TRANSLATIONS = {}); const nr = ['ar', 'fa', 'he', 'ku', 'ug']; const rr = (function () { function e() { const t = this; const n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; f(this, e), this.uiLanguage = n.uiLanguage || 'en', this.contentLanguage = n.contentLanguage || this.uiLanguage, this.uiLanguageDirection = or(this.uiLanguage), this.contentLanguageDirection = or(this.contentLanguage), this.t = function (e, n) { return t._t(e, n); }; } return m(e, [{ key: '_t', value(e) { let t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; Array.isArray(t) || (t = [t]), typeof e === 'string' && (e = { string: e }); const n = !!e.plural; const r = n ? t[0] : 1; const i = Xn(this.uiLanguage, e, r); return ir(i, t); } }, { key: 'language', get() { return console.warn('locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead.'), this.uiLanguage; } }]), e; }()); function ir(e, t) { return e.replace(/%(\d+)/g, ((e, n) => (n < t.length ? t[n] : e))); } function or(e) { return nr.includes(e) ? 'rtl' : 'ltr'; } const ar = (function () { function e(t) { f(this, e), this.config = new Pn(t, this.constructor.defaultConfig); const n = this.constructor.builtinPlugins; this.config.define('plugins', n), this.plugins = new Zn(this, n); const r = this.config.get('language') || {}; this.locale = new rr({ uiLanguage: typeof r === 'string' ? r : r.ui, contentLanguage: this.config.get('language.content') }), this.t = this.locale.t, this.editors = new Jn(), this._contextOwner = null; } return m(e, [{ key: 'initPlugins', value() { let e; const t = this.config.get('plugins') || []; const n = d(t); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; if (typeof r !== 'function') throw new Ln.b('context-initplugins-constructor-only: Only a constructor function is allowed as a context plugin.', null, { Plugin: r }); if (!0 !== r.isContextPlugin) throw new Ln.b('context-initplugins-invalid-plugin: Only a plugin marked as a context plugin is allowed to be used with a context.', null, { Plugin: r }); } } catch (i) { n.e(i); } finally { n.f(); } return this.plugins.init(t); } }, { key: 'destroy', value() { const e = this; return Promise.all(Array.from(this.editors, ((e) => e.destroy()))).then((() => e.plugins.destroy())); } }, { key: '_addEditor', value(e, t) { if (this._contextOwner) throw new Ln.b('context-addEditor-private-context: Cannot add multiple editors to the context which is created by the editor.'); this.editors.add(e), t && (this._contextOwner = e); } }, { key: '_removeEditor', value(e) { return this.editors.has(e) && this.editors.remove(e), this._contextOwner === e ? this.destroy() : Promise.resolve(); } }, { key: '_getEditorConfig', value() { let e; const t = {}; const n = d(this.config.names()); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; ['plugins', 'removePlugins', 'extraPlugins'].includes(r) || (t[r] = this.config.get(r)); } } catch (i) { n.e(i); } finally { n.f(); } return t; } }], [{ key: 'create', value(e) { const t = this; return new Promise(((n) => { const r = new t(e); n(r.initPlugins().then((() => r))); })); } }]), e; }()); function sr(e, t) { for (let n = Math.min(e.length, t.length), r = 0; r < n; r++) if (e[r] != t[r]) return r; return e.length == t.length ? 'same' : e.length < t.length ? 'prefix' : 'extension'; } const lr = function (e) { return Cn(e, 4); }; const cr = (function () { function e(t) { f(this, e), this.document = t, this.parent = null; } return m(e, [{ key: 'isAttached', value() { return this.root.is('rootElement'); } }, { key: 'getPath', value() { for (var e = [], t = this; t.parent;)e.unshift(t.index), t = t.parent; return e; } }, { key: 'getAncestors', value() { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { includeSelf: !1, parentFirst: !1 }, t = [], n = e.includeSelf ? this : this.parent; n;)t[e.parentFirst ? 'push' : 'unshift'](n), n = n.parent; return t; } }, { key: 'getCommonAncestor', value(e) { for (var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = this.getAncestors(t), r = e.getAncestors(t), i = 0; n[i] == r[i] && n[i];)i++; return i === 0 ? null : n[i - 1]; } }, { key: 'isBefore', value(e) { if (this == e) return !1; if (this.root !== e.root) return !1; const t = this.getPath(); const n = e.getPath(); const r = sr(t, n); switch (r) { case 'prefix': return !0; case 'extension': return !1; default: return t[r] < n[r]; } } }, { key: 'isAfter', value(e) { return this != e && this.root === e.root && !this.isBefore(e); } }, { key: '_remove', value() { this.parent._removeChildren(this.index); } }, { key: '_fireChange', value(e, t) { this.fire(`change:${e}`, t), this.parent && this.parent._fireChange(e, t); } }, { key: 'toJSON', value() { const e = lr(this); return delete e.parent, e; } }, { key: 'is', value(e) { return e === 'node' || e === 'view:node'; } }, { key: 'index', get() { let e; if (!this.parent) return null; if ((e = this.parent.getChildIndex(this)) == -1) throw new Ln.b("view-node-not-found-in-parent: The node's parent does not contain this node.", this); return e; } }, { key: 'nextSibling', get() { const e = this.index; return e !== null && this.parent.getChild(e + 1) || null; } }, { key: 'previousSibling', get() { const e = this.index; return e !== null && this.parent.getChild(e - 1) || null; } }, { key: 'root', get() { for (var e = this; e.parent;)e = e.parent; return e; } }]), e; }()); Qn(cr, Vn); const ur = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e))._textData = r, i; } return m(n, [{ key: 'is', value(e) { return e === '$text' || e === 'view:$text' || e === 'text' || e === 'view:text' || e === 'node' || e === 'view:node'; } }, { key: 'isSimilar', value(e) { return e instanceof n && (this === e || this.data === e.data); } }, { key: '_clone', value() { return new n(this.document, this.data); } }, { key: 'data', get() { return this._textData; } }, { key: '_data', get() { return this.data; }, set(e) { this._fireChange('text', this), this._textData = e; } }]), n; }(cr)); const dr = (function () { function e(t, n, r) { if (f(this, e), this.textNode = t, n < 0 || n > t.data.length) throw new Ln.b('view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.', this); if (r < 0 || n + r > t.data.length) throw new Ln.b('view-textproxy-wrong-length: Given length value is incorrect.', this); this.data = t.data.substring(n, n + r), this.offsetInText = n; } return m(e, [{ key: 'is', value(e) { return e === '$textProxy' || e === 'view:$textProxy' || e === 'textProxy' || e === 'view:textProxy'; } }, { key: 'getAncestors', value() { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { includeSelf: !1, parentFirst: !1 }, t = [], n = e.includeSelf ? this.textNode : this.parent; n !== null;)t[e.parentFirst ? 'push' : 'unshift'](n), n = n.parent; return t; } }, { key: 'offsetSize', get() { return this.data.length; } }, { key: 'isPartial', get() { return this.data.length !== this.textNode.data.length; } }, { key: 'parent', get() { return this.textNode.parent; } }, { key: 'root', get() { return this.textNode.root; } }, { key: 'document', get() { return this.textNode.document; } }]), e; }()); function hr(e) { return Kn(e) ? new Map(e) : (function (e) { const t = new Map(); for (const n in e)t.set(n, e[n]); return t; }(e)); } const fr = (function () { function e() { f(this, e), this._patterns = [], this.add.apply(this, arguments); } return m(e, [{ key: 'add', value() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; for (let r = 0, i = t; r < i.length; r++) { let o = i[r]; (typeof o === 'string' || o instanceof RegExp) && (o = { name: o }), o.classes && (typeof o.classes === 'string' || o.classes instanceof RegExp) && (o.classes = [o.classes]), this._patterns.push(o); } } }, { key: 'match', value() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; for (let r = 0, i = t; r < i.length; r++) { var o; const a = i[r]; const s = d(this._patterns); try { for (s.s(); !(o = s.n()).done;) { const l = o.value; const c = mr(a, l); if (c) return { element: a, pattern: l, match: c }; } } catch (u) { s.e(u); } finally { s.f(); } } return null; } }, { key: 'matchAll', value() { for (var e = [], t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; for (let i = 0, o = n; i < o.length; i++) { var a; const s = o[i]; const l = d(this._patterns); try { for (l.s(); !(a = l.n()).done;) { const c = a.value; const u = mr(s, c); u && e.push({ element: s, pattern: c, match: u }); } } catch (h) { l.e(h); } finally { l.f(); } } return e.length > 0 ? e : null; } }, { key: 'getElementName', value() { if (this._patterns.length !== 1) return null; const e = this._patterns[0]; const t = e.name; return typeof e === 'function' || !t || t instanceof RegExp ? null : t; } }]), e; }()); function mr(e, t) { if (typeof t === 'function') return t(e); const n = {}; return t.name && (n.name = (function (e, t) { return e instanceof RegExp ? e.test(t) : e === t; }(t.name, e.name)), !n.name) || t.attributes && (n.attributes = (function (e, t) { const n = []; for (const r in e) { const i = e[r]; if (!t.hasAttribute(r)) return null; const o = t.getAttribute(r); if (!0 === i)n.push(r); else if (i instanceof RegExp) { if (!i.test(o)) return null; n.push(r); } else { if (o !== i) return null; n.push(r); } } return n; }(t.attributes, e)), !n.attributes) ? null : !(t.classes && (n.classes = (function (e, t) { let n; const r = []; const i = d(e); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; if (o instanceof RegExp) { var a; const s = t.getClassNames(); const l = d(s); try { for (l.s(); !(a = l.n()).done;) { const c = a.value; o.test(c) && r.push(c); } } catch (u) { l.e(u); } finally { l.f(); } if (r.length === 0) return null; } else { if (!t.hasClass(o)) return null; r.push(o); } } } catch (u) { i.e(u); } finally { i.f(); } return r; }(t.classes, e)), !n.classes)) && !(t.styles && (n.styles = (function (e, t) { const n = []; for (const r in e) { const i = e[r]; if (!t.hasStyle(r)) return null; const o = t.getStyle(r); if (i instanceof RegExp) { if (!i.test(o)) return null; n.push(r); } else { if (o !== i) return null; n.push(r); } } return n; }(t.styles, e)), !n.styles)) && n; } const vr = function (e) { return typeof e === 'symbol' || R(e) && I(e) == '[object Symbol]'; }; const gr = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/; const pr = /^\w*$/; const kr = function (e, t) { if (Ze(e)) return !1; const n = typeof e; return !(n != 'number' && n != 'symbol' && n != 'boolean' && e != null && !vr(e)) || pr.test(e) || !gr.test(e) || t != null && e in Object(t); }; function br(e, t) { if (typeof e !== 'function' || t != null && typeof t !== 'function') throw new TypeError('Expected a function'); const n = function n() { const r = arguments; const i = t ? t.apply(this, r) : r[0]; const o = n.cache; if (o.has(i)) return o.get(i); const a = e.apply(this, r); return n.cache = o.set(i, a) || o, a; }; return n.cache = new (br.Cache || De)(), n; }br.Cache = De; const yr = br; const wr = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g; const _r = /\\(\\)?/g; const Er = (function (e) { const t = yr(e, ((e) => (n.size === 500 && n.clear(), e))); var n = t.cache; return t; }(((e) => { const t = []; return e.charCodeAt(0) === 46 && t.push(''), e.replace(wr, ((e, n, r, i) => { t.push(r ? i.replace(_r, '$1') : n || e); })), t; }))); const xr = function (e, t) { for (var n = -1, r = e == null ? 0 : e.length, i = Array(r); ++n < r;)i[n] = t(e[n], n, e); return i; }; const Tr = _ ? _.prototype : void 0; const Cr = Tr ? Tr.toString : void 0; const Sr = function e(t) { if (typeof t === 'string') return t; if (Ze(t)) return `${xr(t, e)}`; if (vr(t)) return Cr ? Cr.call(t) : ''; const n = `${t}`; return n == '0' && 1 / t == -1 / 0 ? '-0' : n; }; const Ar = function (e) { return e == null ? '' : Sr(e); }; const Pr = function (e, t) { return Ze(e) ? e : kr(e, t) ? [e] : Er(Ar(e)); }; const Or = function (e) { const t = e == null ? 0 : e.length; return t ? e[t - 1] : void 0; }; const Ir = function (e) { if (typeof e === 'string' || vr(e)) return e; const t = `${e}`; return t == '0' && 1 / e == -1 / 0 ? '-0' : t; }; const Mr = function (e, t) { for (var n = 0, r = (t = Pr(t, e)).length; e != null && n < r;)e = e[Ir(t[n++])]; return n && n == r ? e : void 0; }; const Nr = function (e, t, n) { let r = -1; let i = e.length; t < 0 && (t = -t > i ? 0 : i + t), (n = n > i ? i : n) < 0 && (n += i), i = t > n ? 0 : n - t >>> 0, t >>>= 0; for (var o = Array(i); ++r < i;)o[r] = e[r + t]; return o; }; const Rr = function (e, t) { return t.length < 2 ? e : Mr(e, Nr(t, 0, -1)); }; const jr = function (e, t) { return t = Pr(t, e), (e = Rr(e, t)) == null || delete e[Ir(Or(t))]; }; const Dr = function (e, t) { return e == null || jr(e, t); }; const Lr = function (e, t, n) { const r = e == null ? void 0 : Mr(e, t); return void 0 === r ? n : r; }; const zr = function (e, t, n) { (void 0 !== n && !U(e[t], n) || void 0 === n && !(t in e)) && Ue(e, t, n); }; const Fr = (function (e) { return function (t, n, r) { for (let i = -1, o = Object(t), a = r(t), s = a.length; s--;) { const l = a[e ? s : ++i]; if (!1 === n(o[l], l, o)) break; } return t; }; }()); const Vr = function (e) { return R(e) && gt(e); }; const Br = function (e, t) { if ((t !== 'constructor' || typeof e[t] !== 'function') && t != '__proto__') return e[t]; }; const Ur = function (e) { return qe(e, _t(e)); }; const Hr = function (e, t, n, r, i, o, a) { const s = Br(e, n); const l = Br(t, n); const c = a.get(l); if (c)zr(e, n, c); else { let u = o ? o(s, l, `${n}`, e, t, a) : void 0; let d = void 0 === u; if (d) { const h = Ze(l); const f = !h && Object(Xe.a)(l); const m = !h && !f && lt(l); u = l, h || f || m ? Ze(s) ? u = s : Vr(s) ? u = Tt(s) : f ? (d = !1, u = Object(xt.a)(l, !0)) : m ? (d = !1, u = dn(l, !0)) : u = [] : V(l) || Je(l) ? (u = s, Je(s) ? u = Ur(s) : te(s) && !ne(s) || (u = vn(l))) : d = !1; }d && (a.set(l, u), i(u, l, r, o, a), a.delete(l)), zr(e, n, u); } }; const Wr = function e(t, n, r, i, o) { t !== n && Fr(n, ((a, s) => { if (o || (o = new Fe()), te(a))Hr(t, n, s, r, e, i, o); else { let l = i ? i(Br(t, s), a, `${s}`, t, n, o) : void 0; void 0 === l && (l = a), zr(t, s, l); } }), _t); }; const qr = function (e) { return e; }; const Gr = function (e, t, n) { switch (n.length) { case 0: return e.call(t); case 1: return e.call(t, n[0]); case 2: return e.call(t, n[0], n[1]); case 3: return e.call(t, n[0], n[1], n[2]); } return e.apply(t, n); }; const $r = Math.max; const Yr = function (e, t, n) { return t = $r(void 0 === t ? e.length - 1 : t, 0), function () { for (var r = arguments, i = -1, o = $r(r.length - t, 0), a = Array(o); ++i < o;)a[i] = r[t + i]; i = -1; for (var s = Array(t + 1); ++i < t;)s[i] = r[i]; return s[t] = n(a), Gr(e, this, s); }; }; const Kr = function (e) { return function () { return e; }; }; const Qr = Be ? function (e, t) {
            return Be(e, 'toString', {
              configurable: !0, enumerable: !1, value: Kr(t), writable: !0,
            });
          } : qr; const Jr = Date.now; const Zr = (function (e) { let t = 0; let n = 0; return function () { const r = Jr(); const i = 16 - (r - n); if (n = r, i > 0) { if (++t >= 800) return arguments[0]; } else t = 0; return e.apply(void 0, arguments); }; }(Qr)); const Xr = function (e, t) { return Zr(Yr(e, t, qr), `${e}`); }; const ei = function (e, t, n) { if (!te(n)) return !1; const r = typeof t; return !!(r == 'number' ? gt(n) && tt(t, n.length) : r == 'string' && t in n) && U(n[t], e); }; const ti = function (e) { return Xr(((t, n) => { let r = -1; let i = n.length; let o = i > 1 ? n[i - 1] : void 0; const a = i > 2 ? n[2] : void 0; for (o = e.length > 3 && typeof o === 'function' ? (i--, o) : void 0, a && ei(n[0], n[1], a) && (o = i < 3 ? void 0 : o, i = 1), t = Object(t); ++r < i;) { const s = n[r]; s && e(t, s, r, o); } return t; })); }; const ni = ti(((e, t, n) => { Wr(e, t, n); })); const ri = function (e, t, n, r) { if (!te(e)) return e; for (let i = -1, o = (t = Pr(t, e)).length, a = o - 1, s = e; s != null && ++i < o;) { const l = Ir(t[i]); let c = n; if (i != a) { const u = s[l]; void 0 === (c = r ? r(u, l, s) : void 0) && (c = te(u) ? u : tt(t[i + 1]) ? [] : {}); }We(s, l, c), s = s[l]; } return e; }; const ii = function (e, t, n) { return e == null ? e : ri(e, t, n); }; const oi = (function () { function e(t) { f(this, e), this._styles = {}, this._styleProcessor = t; } return m(e, [{ key: 'setTo', value(e) { this.clear(); for (let t = 0, n = Array.from((function (e) { let t = null; let n = 0; let r = 0; let i = null; const o = new Map(); if (e === '') return o; e.charAt(e.length - 1) != ';' && (e += ';'); for (let a = 0; a < e.length; a++) { const s = e.charAt(a); if (t === null) switch (s) { case ':': i || (i = e.substr(n, a - n), r = a + 1); break; case '"': case "'": t = s; break; case ';': var l = e.substr(r, a - r); i && o.set(i.trim(), l.trim()), i = null, n = a + 1; } else s === t && (t = null); } return o; }(e)).entries()); t < n.length; t++) { const r = u(n[t], 2); const i = r[0]; const o = r[1]; this._styleProcessor.toNormalizedForm(i, o, this._styles); } } }, { key: 'has', value(e) { if (this.isEmpty) return !1; const t = this._styleProcessor.getReducedForm(e, this._styles).find(((t) => u(t, 1)[0] === e)); return Array.isArray(t); } }, { key: 'set', value(e, t) { if (te(e)) for (let n = 0, r = Object.entries(e); n < r.length; n++) { const i = u(r[n], 2); const o = i[0]; const a = i[1]; this._styleProcessor.toNormalizedForm(o, a, this._styles); } else this._styleProcessor.toNormalizedForm(e, t, this._styles); } }, { key: 'remove', value(e) { const t = si(e); Dr(this._styles, t), delete this._styles[e], this._cleanEmptyObjectsOnPath(t); } }, { key: 'getNormalized', value(e) { return this._styleProcessor.getNormalized(e, this._styles); } }, { key: 'toString', value() { return this.isEmpty ? '' : `${this._getStylesEntries().map(((e) => e.join(':'))).sort().join(';')};`; } }, { key: 'getAsString', value(e) { if (!this.isEmpty) { if (this._styles[e] && !te(this._styles[e])) return this._styles[e]; const t = this._styleProcessor.getReducedForm(e, this._styles).find(((t) => u(t, 1)[0] === e)); return Array.isArray(t) ? t[1] : void 0; } } }, { key: 'getStyleNames', value() { return this.isEmpty ? [] : this._getStylesEntries().map(((e) => u(e, 1)[0])); } }, { key: 'clear', value() { this._styles = {}; } }, { key: '_getStylesEntries', value() { for (var e = [], t = 0, n = Object.keys(this._styles); t < n.length; t++) { const r = n[t]; e.push.apply(e, c(this._styleProcessor.getReducedForm(r, this._styles))); } return e; } }, { key: '_cleanEmptyObjectsOnPath', value(e) { const t = e.split('.'); if (t.length > 1) { const n = t.splice(0, t.length - 1).join('.'); const r = Lr(this._styles, n); r && !Array.from(Object.keys(r)).length && this.remove(n); } } }, { key: 'isEmpty', get() { const e = Object.entries(this._styles); return !Array.from(e).length; } }, { key: 'size', get() { return this.isEmpty ? 0 : this.getStyleNames().length; } }]), e; }()); const ai = (function () { function e() { f(this, e), this._normalizers = new Map(), this._extractors = new Map(), this._reducers = new Map(), this._consumables = new Map(); } return m(e, [{ key: 'toNormalizedForm', value(e, t, n) { if (te(t))li(n, si(e), t); else if (this._normalizers.has(e)) { const r = this._normalizers.get(e)(t); li(n, r.path, r.value); } else li(n, e, t); } }, { key: 'getNormalized', value(e, t) { if (!e) return ni({}, t); if (void 0 !== t[e]) return t[e]; if (this._extractors.has(e)) { const n = this._extractors.get(e); if (typeof n === 'string') return Lr(t, n); const r = n(e, t); if (r) return r; } return Lr(t, si(e)); } }, { key: 'getReducedForm', value(e, t) { const n = this.getNormalized(e, t); return void 0 === n ? [] : this._reducers.has(e) ? this._reducers.get(e)(n) : [[e, n]]; } }, { key: 'getRelatedStyles', value(e) { return this._consumables.get(e) || []; } }, { key: 'setNormalizer', value(e, t) { this._normalizers.set(e, t); } }, { key: 'setExtractor', value(e, t) { this._extractors.set(e, t); } }, { key: 'setReducer', value(e, t) { this._reducers.set(e, t); } }, { key: 'setStyleRelation', value(e, t) { this._mapStyleNames(e, t); let n; const r = d(t); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; this._mapStyleNames(i, [e]); } } catch (o) { r.e(o); } finally { r.f(); } } }, { key: '_mapStyleNames', value(e, t) { let n; this._consumables.has(e) || this._consumables.set(e, []), (n = this._consumables.get(e)).push.apply(n, c(t)); } }]), e; }()); function si(e) { return e.replace('-', '.'); } function li(e, t, n) { let r = n; te(n) && (r = ni({}, Lr(e, t), n)), ii(e, t, r); } const ci = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; if (f(this, n), (a = t.call(this, e)).name = r, a._attrs = (function (e) { e = hr(e); let t; const n = d(e); try { for (n.s(); !(t = n.n()).done;) { const r = u(t.value, 2); const i = r[0]; const o = r[1]; o === null ? e.delete(i) : typeof o !== 'string' && e.set(i, String(o)); } } catch (a) { n.e(a); } finally { n.f(); } return e; }(i)), a._children = [], o && a._insertChild(0, o), a._classes = new Set(), a._attrs.has('class')) { const s = a._attrs.get('class'); ui(a._classes, s), a._attrs.delete('class'); } return a._styles = new oi(a.document.stylesProcessor), a._attrs.has('style') && (a._styles.setTo(a._attrs.get('style')), a._attrs.delete('style')), a._customProperties = new Map(), a; } return m(n, [{ key: 'is', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t ? t === this.name && (e === 'element' || e === 'view:element') : e === 'element' || e === 'view:element' || e === 'node' || e === 'view:node'; } }, { key: 'getChild', value(e) { return this._children[e]; } }, { key: 'getChildIndex', value(e) { return this._children.indexOf(e); } }, { key: 'getChildren', value() { return this._children[Symbol.iterator](); } }, { key: 'getAttributeKeys', value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: if (!(this._classes.size > 0)) { e.next = 3; break; } return e.next = 3, 'class'; case 3: if (this._styles.isEmpty) { e.next = 6; break; } return e.next = 6, 'style'; case 6: return e.delegateYield(this._attrs.keys(), 't0', 7); case 7: case 'end': return e.stop(); } }), e, this); })) }, { key: 'getAttributes', value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return e.delegateYield(this._attrs.entries(), 't0', 1); case 1: if (!(this._classes.size > 0)) { e.next = 4; break; } return e.next = 4, ['class', this.getAttribute('class')]; case 4: if (this._styles.isEmpty) { e.next = 7; break; } return e.next = 7, ['style', this.getAttribute('style')]; case 7: case 'end': return e.stop(); } }), e, this); })) }, { key: 'getAttribute', value(e) { if (e == 'class') return this._classes.size > 0 ? c(this._classes).join(' ') : void 0; if (e == 'style') { const t = this._styles.toString(); return t == '' ? void 0 : t; } return this._attrs.get(e); } }, { key: 'hasAttribute', value(e) { return e == 'class' ? this._classes.size > 0 : e == 'style' ? !this._styles.isEmpty : this._attrs.has(e); } }, { key: 'isSimilar', value(e) { if (!(e instanceof n)) return !1; if (this === e) return !0; if (this.name != e.name) return !1; if (this._attrs.size !== e._attrs.size || this._classes.size !== e._classes.size || this._styles.size !== e._styles.size) return !1; let t; const r = d(this._attrs); try { for (r.s(); !(t = r.n()).done;) { const i = u(t.value, 2); const o = i[0]; const a = i[1]; if (!e._attrs.has(o) || e._attrs.get(o) !== a) return !1; } } catch (v) { r.e(v); } finally { r.f(); } let s; const l = d(this._classes); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; if (!e._classes.has(c)) return !1; } } catch (v) { l.e(v); } finally { l.f(); } let h; const f = d(this._styles.getStyleNames()); try { for (f.s(); !(h = f.n()).done;) { const m = h.value; if (!e._styles.has(m) || e._styles.getAsString(m) !== this._styles.getAsString(m)) return !1; } } catch (v) { f.e(v); } finally { f.f(); } return !0; } }, { key: 'hasClass', value() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; for (let r = 0, i = t; r < i.length; r++) { const o = i[r]; if (!this._classes.has(o)) return !1; } return !0; } }, { key: 'getClassNames', value() { return this._classes.keys(); } }, { key: 'getStyle', value(e) { return this._styles.getAsString(e); } }, { key: 'getNormalizedStyle', value(e) { return this._styles.getNormalized(e); } }, { key: 'getStyleNames', value() { return this._styles.getStyleNames(); } }, { key: 'hasStyle', value() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; for (let r = 0, i = t; r < i.length; r++) { const o = i[r]; if (!this._styles.has(o)) return !1; } return !0; } }, { key: 'findAncestor', value() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; for (let r = l(fr, t), i = this.parent; i;) { if (r.match(i)) return i; i = i.parent; } return null; } }, { key: 'getCustomProperty', value(e) { return this._customProperties.get(e); } }, { key: 'getCustomProperties', value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return e.delegateYield(this._customProperties.entries(), 't0', 1); case 1: case 'end': return e.stop(); } }), e, this); })) }, { key: 'getIdentity', value() { const e = Array.from(this._classes).sort().join(','); const t = this._styles.toString(); const n = Array.from(this._attrs).map(((e) => ''.concat(e[0], '="').concat(e[1], '"'))).sort().join(' '); return this.name + (e == '' ? '' : ' class="'.concat(e, '"')) + (t ? ' style="'.concat(t, '"') : '') + (n == '' ? '' : ' '.concat(n)); } }, { key: '_clone', value() { const e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; const t = []; if (e) { let n; const r = d(this.getChildren()); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; t.push(i._clone(e)); } } catch (a) { r.e(a); } finally { r.f(); } } const o = new this.constructor(this.document, this.name, this._attrs, t); return o._classes = new Set(this._classes), o._styles.set(this._styles.getNormalized()), o._customProperties = new Map(this._customProperties), o.getFillerOffset = this.getFillerOffset, o; } }, { key: '_appendChild', value(e) { return this._insertChild(this.childCount, e); } }, { key: '_insertChild', value(e, t) { this._fireChange('children', this); let n; let r = 0; const i = (function (e, t) { return typeof t === 'string' ? [new ur(e, t)] : (Kn(t) || (t = [t]), Array.from(t).map(((t) => (typeof t === 'string' ? new ur(e, t) : t instanceof dr ? new ur(e, t.data) : t)))); }(this.document, t)); const o = d(i); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; a.parent !== null && a._remove(), a.parent = this, a.document = this.document, this._children.splice(e, 0, a), e++, r++; } } catch (s) { o.e(s); } finally { o.f(); } return r; } }, { key: '_removeChildren', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; this._fireChange('children', this); for (let n = e; n < e + t; n++) this._children[n].parent = null; return this._children.splice(e, t); } }, { key: '_setAttribute', value(e, t) { t = String(t), this._fireChange('attributes', this), e == 'class' ? ui(this._classes, t) : e == 'style' ? this._styles.setTo(t) : this._attrs.set(e, t); } }, { key: '_removeAttribute', value(e) { return this._fireChange('attributes', this), e == 'class' ? this._classes.size > 0 && (this._classes.clear(), !0) : e == 'style' ? !this._styles.isEmpty && (this._styles.clear(), !0) : this._attrs.delete(e); } }, { key: '_addClass', value(e) { const t = this; this._fireChange('attributes', this), (e = Array.isArray(e) ? e : [e]).forEach(((e) => t._classes.add(e))); } }, { key: '_removeClass', value(e) { const t = this; this._fireChange('attributes', this), (e = Array.isArray(e) ? e : [e]).forEach(((e) => t._classes.delete(e))); } }, { key: '_setStyle', value(e, t) { this._fireChange('attributes', this), this._styles.set(e, t); } }, { key: '_removeStyle', value(e) { const t = this; this._fireChange('attributes', this), (e = Array.isArray(e) ? e : [e]).forEach(((e) => t._styles.remove(e))); } }, { key: '_setCustomProperty', value(e, t) { this._customProperties.set(e, t); } }, { key: '_removeCustomProperty', value(e) { return this._customProperties.delete(e); } }, { key: 'childCount', get() { return this._children.length; } }, { key: 'isEmpty', get() { return this._children.length === 0; } }]), n; }(cr)); function ui(e, t) { const n = t.split(/\s+/); e.clear(), n.forEach(((t) => e.add(t))); } const di = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; return f(this, n), (a = t.call(this, e, r, i, o)).getFillerOffset = hi, a; } return m(n, [{ key: 'is', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t ? t === this.name && (e === 'containerElement' || e === 'view:containerElement' || e === 'element' || e === 'view:element') : e === 'containerElement' || e === 'view:containerElement' || e === 'element' || e === 'view:element' || e === 'node' || e === 'view:node'; } }]), n; }(ci)); function hi() { const e = c(this.getChildren()); const t = e[this.childCount - 1]; if (t && t.is('element', 'br')) return this.childCount; let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) if (!n.value.is('uiElement')) return null; } catch (i) { r.e(i); } finally { r.f(); } return this.childCount; } const fi = ti(((e, t) => { qe(t, _t(t), e); })); const mi = Symbol('observableProperties'); const vi = Symbol('boundObservables'); const gi = Symbol('boundProperties'); const pi = {
            set(e, t) {
              const n = this; if (te(e))Object.keys(e).forEach(((t) => { n.set(t, e[t]); }), this); else {
                bi(this); const r = this[mi]; if (e in this && !r.has(e)) throw new Ln.b('observable-set-cannot-override: Cannot override an existing property.', this); Object.defineProperty(this, e, {
                  enumerable: !0, configurable: !0, get() { return r.get(e); }, set(t) { const n = r.get(e); let i = this.fire(`set:${e}`, e, t, n); void 0 === i && (i = t), n === i && r.has(e) || (r.set(e, i), this.fire(`change:${e}`, e, i, n)); },
                }), this[e] = t;
              }
            },
            bind() {
              for (var e = this, t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; if (!n.length || !_i(n)) throw new Ln.b('observable-bind-wrong-properties: All properties must be strings.', this); if (new Set(n).size !== n.length) throw new Ln.b('observable-bind-duplicate-properties: Properties must be unique.', this); bi(this); const i = this[gi]; n.forEach(((t) => { if (i.has(t)) throw new Ln.b('observable-bind-rebind: Cannot bind the same property more than once.', e); })); const o = new Map(); return n.forEach(((e) => { const t = { property: e, to: [] }; i.set(e, t), o.set(e, t); })), {
                to: yi, toMany: wi, _observable: this, _bindProperties: n, _to: [], _bindings: o,
              };
            },
            unbind() { const e = this; if (this[mi]) { for (var t = this[gi], n = this[vi], r = arguments.length, i = new Array(r), o = 0; o < r; o++)i[o] = arguments[o]; if (i.length) { if (!_i(i)) throw new Ln.b('observable-unbind-wrong-properties: Properties must be strings.', this); i.forEach(((r) => { let i; let o; let a; let s; const l = t.get(r); l && (l.to.forEach(((t) => { i = t[0], o = t[1], a = n.get(i), (s = a[o]).delete(l), s.size || delete a[o], Object.keys(a).length || (n.delete(i), e.stopListening(i, 'change')); })), t.delete(r)); })); } else n.forEach(((t, n) => { e.stopListening(n, 'change'); })), n.clear(), t.clear(); } },
            decorate(e) { const t = this; const n = this[e]; if (!n) throw new Ln.b('observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.', this, { object: this, methodName: e }); this.on(e, ((e, r) => { e.return = n.apply(t, r); })), this[e] = function () { for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; return this.fire(e, n); }; },
          }; fi(pi, Vn); const ki = pi; function bi(e) { e[mi] || (Object.defineProperty(e, mi, { value: new Map() }), Object.defineProperty(e, vi, { value: new Map() }), Object.defineProperty(e, gi, { value: new Map() })); } function yi() { const e = this; const t = Ei.apply(void 0, arguments); const n = Array.from(this._bindings.keys()); const r = n.length; if (!t.callback && t.to.length > 1) throw new Ln.b('observable-bind-to-no-callback: Binding multiple observables only possible with callback.', this); if (r > 1 && t.callback) throw new Ln.b('observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.', this); t.to.forEach(((t) => { if (t.properties.length && t.properties.length !== r) throw new Ln.b('observable-bind-to-properties-length: The number of properties must match.', e); t.properties.length || (t.properties = e._bindProperties); })), this._to = t.to, t.callback && (this._bindings.get(n[0]).callback = t.callback), Ci(this._observable, this._to), xi(this), this._bindProperties.forEach(((t) => { Ti(e._observable, t); })); } function wi(e, t, n) { if (this._bindings.size > 1) throw new Ln.b('observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().', this); this.to.apply(this, c(function (e, t) { const n = e.map(((e) => [e, t])); return Array.prototype.concat.apply([], n); }(e, t)).concat([n])); } function _i(e) { return e.every(((e) => typeof e === 'string')); } function Ei() { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; if (!t.length) throw new Ln.b('observable-bind-to-parse-error: Invalid argument syntax in `to()`.', null); let r; const i = { to: [] }; return typeof t[t.length - 1] === 'function' && (i.callback = t.pop()), t.forEach(((e) => { if (typeof e === 'string')r.properties.push(e); else { if (typeof e !== 'object') throw new Ln.b('observable-bind-to-parse-error: Invalid argument syntax in `to()`.', null); r = { observable: e, properties: [] }, i.to.push(r); } })), i; } function xi(e) { let t; e._bindings.forEach(((n, r) => { e._to.forEach(((i) => { t = i.properties[n.callback ? 0 : e._bindProperties.indexOf(r)], n.to.push([i.observable, t]), (function (e, t, n, r) { const i = e[vi]; const o = i.get(n); const a = o || {}; a[r] || (a[r] = new Set()), a[r].add(t), o || i.set(n, a); }(e._observable, n, i.observable, t)); })); })); } function Ti(e, t) { let n; const r = e[gi].get(t); n = r.callback ? r.callback.apply(e, r.to.map(((e) => e[0][e[1]]))) : (n = r.to[0])[0][n[1]], Object.prototype.hasOwnProperty.call(e, t) ? e[t] = n : e.set(t, n); } function Ci(e, t) { t.forEach(((t) => { let n; const r = e[vi]; r.get(t.observable) || e.listenTo(t.observable, 'change', ((i, o) => { (n = r.get(t.observable)[o]) && n.forEach(((t) => { Ti(e, t.property); })); })); })); } const Si = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; return f(this, n), (a = t.call(this, e, r, i, o)).set('isReadOnly', !1), a.set('isFocused', !1), a.bind('isReadOnly').to(e), a.bind('isFocused').to(e, 'isFocused', ((t) => t && e.selection.editableElement == s(a))), a.listenTo(e.selection, 'change', (() => { a.isFocused = e.isFocused && e.selection.editableElement == s(a); })), a; } return m(n, [{ key: 'is', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t ? t === this.name && (e === 'editableElement' || e === 'view:editableElement' || e === 'containerElement' || e === 'view:containerElement' || e === 'element' || e === 'view:element') : e === 'editableElement' || e === 'view:editableElement' || e === 'containerElement' || e === 'view:containerElement' || e === 'element' || e === 'view:element' || e === 'node' || e === 'view:node'; } }, { key: 'destroy', value() { this.stopListening(); } }]), n; }(di)); Qn(Si, ki); const Ai = Symbol('rootName'); const Pi = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e, r)).rootName = 'main', i; } return m(n, [{ key: 'is', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t ? t === this.name && (e === 'rootElement' || e === 'view:rootElement' || e === 'editableElement' || e === 'view:editableElement' || e === 'containerElement' || e === 'view:containerElement' || e === 'element' || e === 'view:element') : e === 'rootElement' || e === 'view:rootElement' || e === 'editableElement' || e === 'view:editableElement' || e === 'containerElement' || e === 'view:containerElement' || e === 'element' || e === 'view:element' || e === 'node' || e === 'view:node'; } }, { key: 'rootName', get() { return this.getCustomProperty(Ai); }, set(e) { this._setCustomProperty(Ai, e); } }, { key: '_name', set(e) { this.name = e; } }]), n; }(Si)); const Oi = (function () {
            function e() { const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; if (f(this, e), !t.boundaries && !t.startPosition) throw new Ln.b('view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.', null); if (t.direction && t.direction != 'forward' && t.direction != 'backward') throw new Ln.b('view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.', t.startPosition, { direction: t.direction }); this.boundaries = t.boundaries || null, t.startPosition ? this.position = Ii._createAt(t.startPosition) : this.position = Ii._createAt(t.boundaries[t.direction == 'backward' ? 'end' : 'start']), this.direction = t.direction || 'forward', this.singleCharacters = !!t.singleCharacters, this.shallow = !!t.shallow, this.ignoreElementEnd = !!t.ignoreElementEnd, this._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null, this._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null; } return m(e, [{ key: Symbol.iterator, value() { return this; } }, { key: 'skip', value(e) { let t; let n; let r; do { r = this.position; const i = this.next(); t = i.done, n = i.value; } while (!t && e(n)); t || (this.position = r); } }, { key: 'next', value() { return this.direction == 'forward' ? this._next() : this._previous(); } }, { key: '_next', value() { let e; let t = this.position.clone(); const n = this.position; const r = t.parent; if (r.parent === null && t.offset === r.childCount) return { done: !0 }; if (r === this._boundaryEndParent && t.offset == this.boundaries.end.offset) return { done: !0 }; if (r instanceof ur) { if (t.isAtEnd) return this.position = Ii._createAfter(r), this._next(); e = r.data[t.offset]; } else e = r.getChild(t.offset); if (e instanceof ci) return this.shallow ? t.offset++ : t = new Ii(e, 0), this.position = t, this._formatReturnValue('elementStart', e, n, t, 1); if (e instanceof ur) { if (this.singleCharacters) return t = new Ii(e, 0), this.position = t, this._next(); let i; let o = e.data.length; return e == this._boundaryEndParent ? (o = this.boundaries.end.offset, i = new dr(e, 0, o), t = Ii._createAfter(i)) : (i = new dr(e, 0, e.data.length), t.offset++), this.position = t, this._formatReturnValue('text', i, n, t, o); } if (typeof e === 'string') { let a; a = this.singleCharacters ? 1 : (r === this._boundaryEndParent ? this.boundaries.end.offset : r.data.length) - t.offset; const s = new dr(r, t.offset, a); return t.offset += a, this.position = t, this._formatReturnValue('text', s, n, t, a); } return t = Ii._createAfter(r), this.position = t, this.ignoreElementEnd ? this._next() : this._formatReturnValue('elementEnd', r, n, t); } }, { key: '_previous', value() { let e; let t = this.position.clone(); const n = this.position; const r = t.parent; if (r.parent === null && t.offset === 0) return { done: !0 }; if (r == this._boundaryStartParent && t.offset == this.boundaries.start.offset) return { done: !0 }; if (r instanceof ur) { if (t.isAtStart) return this.position = Ii._createBefore(r), this._previous(); e = r.data[t.offset - 1]; } else e = r.getChild(t.offset - 1); if (e instanceof ci) return this.shallow ? (t.offset--, this.position = t, this._formatReturnValue('elementStart', e, n, t, 1)) : (t = new Ii(e, e.childCount), this.position = t, this.ignoreElementEnd ? this._previous() : this._formatReturnValue('elementEnd', e, n, t)); if (e instanceof ur) { if (this.singleCharacters) return t = new Ii(e, e.data.length), this.position = t, this._previous(); let i; let o = e.data.length; if (e == this._boundaryStartParent) { const a = this.boundaries.start.offset; o = (i = new dr(e, a, e.data.length - a)).data.length, t = Ii._createBefore(i); } else i = new dr(e, 0, e.data.length), t.offset--; return this.position = t, this._formatReturnValue('text', i, n, t, o); } if (typeof e === 'string') { let s; if (this.singleCharacters)s = 1; else { const l = r === this._boundaryStartParent ? this.boundaries.start.offset : 0; s = t.offset - l; }t.offset -= s; const c = new dr(r, t.offset, s); return this.position = t, this._formatReturnValue('text', c, n, t, s); } return t = Ii._createBefore(r), this.position = t, this._formatReturnValue('elementStart', r, n, t, 1); } }, {
              key: '_formatReturnValue',
              value(e, t, n, r, i) {
                return t instanceof dr && (t.offsetInText + t.data.length == t.textNode.data.length && (this.direction != 'forward' || this.boundaries && this.boundaries.end.isEqual(this.position) ? n = Ii._createAfter(t.textNode) : (r = Ii._createAfter(t.textNode), this.position = r)), t.offsetInText === 0 && (this.direction != 'backward' || this.boundaries && this.boundaries.start.isEqual(this.position) ? n = Ii._createBefore(t.textNode) : (r = Ii._createBefore(t.textNode), this.position = r))), {
                  done: !1,
                  value: {
                    type: e, item: t, previousPosition: n, nextPosition: r, length: i,
                  },
                };
              },
            }]), e;
          }()); var Ii = (function () { function e(t, n) { f(this, e), this.parent = t, this.offset = n; } return m(e, [{ key: 'getShiftedBy', value(t) { const n = e._createAt(this); const r = n.offset + t; return n.offset = r < 0 ? 0 : r, n; } }, { key: 'getLastMatchingPosition', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; t.startPosition = this; const n = new Oi(t); return n.skip(e), n.position; } }, { key: 'getAncestors', value() { return this.parent.is('documentFragment') ? [this.parent] : this.parent.getAncestors({ includeSelf: !0 }); } }, { key: 'getCommonAncestor', value(e) { for (var t = this.getAncestors(), n = e.getAncestors(), r = 0; t[r] == n[r] && t[r];)r++; return r === 0 ? null : t[r - 1]; } }, { key: 'is', value(e) { return e === 'position' || e === 'view:position'; } }, { key: 'isEqual', value(e) { return this.parent == e.parent && this.offset == e.offset; } }, { key: 'isBefore', value(e) { return this.compareWith(e) == 'before'; } }, { key: 'isAfter', value(e) { return this.compareWith(e) == 'after'; } }, { key: 'compareWith', value(e) { if (this.root !== e.root) return 'different'; if (this.isEqual(e)) return 'same'; const t = this.parent.is('node') ? this.parent.getPath() : []; const n = e.parent.is('node') ? e.parent.getPath() : []; t.push(this.offset), n.push(e.offset); const r = sr(t, n); switch (r) { case 'prefix': return 'before'; case 'extension': return 'after'; default: return t[r] < n[r] ? 'before' : 'after'; } } }, { key: 'getWalker', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return e.startPosition = this, new Oi(e); } }, { key: 'clone', value() { return new e(this.parent, this.offset); } }, { key: 'nodeAfter', get() { return this.parent.is('$text') ? null : this.parent.getChild(this.offset) || null; } }, { key: 'nodeBefore', get() { return this.parent.is('$text') ? null : this.parent.getChild(this.offset - 1) || null; } }, { key: 'isAtStart', get() { return this.offset === 0; } }, { key: 'isAtEnd', get() { const e = this.parent.is('$text') ? this.parent.data.length : this.parent.childCount; return this.offset === e; } }, { key: 'root', get() { return this.parent.root; } }, { key: 'editableElement', get() { for (var e = this.parent; !(e instanceof Si);) { if (!e.parent) return null; e = e.parent; } return e; } }], [{ key: '_createAt', value(t, n) { if (t instanceof e) return new this(t.parent, t.offset); const r = t; if (n == 'end')n = r.is('$text') ? r.data.length : r.childCount; else { if (n == 'before') return this._createBefore(r); if (n == 'after') return this._createAfter(r); if (n !== 0 && !n) throw new Ln.b('view-createPositionAt-offset-required: View#createPositionAt() requires the offset when the first parameter is a view item.', r); } return new e(r, n); } }, { key: '_createAfter', value(t) { if (t.is('$textProxy')) return new e(t.textNode, t.offsetInText + t.data.length); if (!t.parent) throw new Ln.b('view-position-after-root: You can not make position after root.', t, { root: t }); return new e(t.parent, t.index + 1); } }, { key: '_createBefore', value(t) { if (t.is('$textProxy')) return new e(t.textNode, t.offsetInText); if (!t.parent) throw new Ln.b('view-position-before-root: You can not make position before root.', t, { root: t }); return new e(t.parent, t.index); } }]), e; }()); const Mi = (function () { function e(t) { const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; f(this, e), this.start = t.clone(), this.end = n ? n.clone() : t.clone(); } return m(e, [{ key: Symbol.iterator, value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return e.delegateYield(new Oi({ boundaries: this, ignoreElementEnd: !0 }), 't0', 1); case 1: case 'end': return e.stop(); } }), e, this); })) }, { key: 'getEnlarged', value() { let t = this.start.getLastMatchingPosition(Ni, { direction: 'backward' }); let n = this.end.getLastMatchingPosition(Ni); return t.parent.is('$text') && t.isAtStart && (t = Ii._createBefore(t.parent)), n.parent.is('$text') && n.isAtEnd && (n = Ii._createAfter(n.parent)), new e(t, n); } }, { key: 'getTrimmed', value() { let t = this.start.getLastMatchingPosition(Ni); if (t.isAfter(this.end) || t.isEqual(this.end)) return new e(t, t); let n = this.end.getLastMatchingPosition(Ni, { direction: 'backward' }); const r = t.nodeAfter; const i = n.nodeBefore; return r && r.is('$text') && (t = new Ii(r, 0)), i && i.is('$text') && (n = new Ii(i, i.data.length)), new e(t, n); } }, { key: 'isEqual', value(e) { return this == e || this.start.isEqual(e.start) && this.end.isEqual(e.end); } }, { key: 'containsPosition', value(e) { return e.isAfter(this.start) && e.isBefore(this.end); } }, { key: 'containsRange', value(e) { let t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; e.isCollapsed && (t = !1); const n = this.containsPosition(e.start) || t && this.start.isEqual(e.start); const r = this.containsPosition(e.end) || t && this.end.isEqual(e.end); return n && r; } }, { key: 'getDifference', value(t) { const n = []; return this.isIntersecting(t) ? (this.containsPosition(t.start) && n.push(new e(this.start, t.start)), this.containsPosition(t.end) && n.push(new e(t.end, this.end))) : n.push(this.clone()), n; } }, { key: 'getIntersection', value(t) { if (this.isIntersecting(t)) { let n = this.start; let r = this.end; return this.containsPosition(t.start) && (n = t.start), this.containsPosition(t.end) && (r = t.end), new e(n, r); } return null; } }, { key: 'getWalker', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return e.boundaries = this, new Oi(e); } }, { key: 'getCommonAncestor', value() { return this.start.getCommonAncestor(this.end); } }, { key: 'getContainedElement', value() { if (this.isCollapsed) return null; let e = this.start.nodeAfter; let t = this.end.nodeBefore; return this.start.parent.is('$text') && this.start.isAtEnd && this.start.parent.nextSibling && (e = this.start.parent.nextSibling), this.end.parent.is('$text') && this.end.isAtStart && this.end.parent.previousSibling && (t = this.end.parent.previousSibling), e && e.is('element') && e === t ? e : null; } }, { key: 'clone', value() { return new e(this.start, this.end); } }, { key: 'getItems', value: h.mark((function e() { let t; let n; let r; let i; let o; const a = arguments; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: (t = a.length > 0 && void 0 !== a[0] ? a[0] : {}).boundaries = this, t.ignoreElementEnd = !0, n = new Oi(t), r = d(n), e.prev = 5, r.s(); case 7: if ((i = r.n()).done) { e.next = 13; break; } return o = i.value, e.next = 11, o.item; case 11: e.next = 7; break; case 13: e.next = 18; break; case 15: e.prev = 15, e.t0 = e.catch(5), r.e(e.t0); case 18: return e.prev = 18, r.f(), e.finish(18); case 21: case 'end': return e.stop(); } }), e, this, [[5, 15, 18, 21]]); })) }, { key: 'getPositions', value: h.mark((function e() { let t; let n; let r; let i; let o; const a = arguments; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return (t = a.length > 0 && void 0 !== a[0] ? a[0] : {}).boundaries = this, n = new Oi(t), e.next = 5, n.position; case 5: r = d(n), e.prev = 6, r.s(); case 8: if ((i = r.n()).done) { e.next = 14; break; } return o = i.value, e.next = 12, o.nextPosition; case 12: e.next = 8; break; case 14: e.next = 19; break; case 16: e.prev = 16, e.t0 = e.catch(6), r.e(e.t0); case 19: return e.prev = 19, r.f(), e.finish(19); case 22: case 'end': return e.stop(); } }), e, this, [[6, 16, 19, 22]]); })) }, { key: 'is', value(e) { return e === 'range' || e === 'view:range'; } }, { key: 'isIntersecting', value(e) { return this.start.isBefore(e.end) && this.end.isAfter(e.start); } }, { key: 'isCollapsed', get() { return this.start.isEqual(this.end); } }, { key: 'isFlat', get() { return this.start.parent === this.end.parent; } }, { key: 'root', get() { return this.start.root; } }], [{ key: '_createFromParentsAndOffsets', value(e, t, n, r) { return new this(new Ii(e, t), new Ii(n, r)); } }, { key: '_createFromPositionAndShift', value(e, t) { const n = e; const r = e.getShiftedBy(t); return t > 0 ? new this(n, r) : new this(r, n); } }, { key: '_createIn', value(e) { return this._createFromParentsAndOffsets(e, 0, e, e.childCount); } }, { key: '_createOn', value(e) { const t = e.is('$textProxy') ? e.offsetSize : 1; return this._createFromPositionAndShift(Ii._createBefore(e), t); } }]), e; }()); function Ni(e) { return !(!e.item.is('attributeElement') && !e.item.is('uiElement')); } function Ri(e) { let t; let n = 0; const r = d(e); try { for (r.s(); !(t = r.n()).done;)t.value, n++; } catch (i) { r.e(i); } finally { r.f(); } return n; } const ji = (function () { function e() { const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; const n = arguments.length > 1 ? arguments[1] : void 0; const r = arguments.length > 2 ? arguments[2] : void 0; f(this, e), this._ranges = [], this._lastRangeBackward = !1, this._isFake = !1, this._fakeSelectionLabel = '', this.setTo(t, n, r); } return m(e, [{ key: 'getRanges', value: h.mark((function e() { let t; let n; let r; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: t = d(this._ranges), e.prev = 1, t.s(); case 3: if ((n = t.n()).done) { e.next = 9; break; } return r = n.value, e.next = 7, r.clone(); case 7: e.next = 3; break; case 9: e.next = 14; break; case 11: e.prev = 11, e.t0 = e.catch(1), t.e(e.t0); case 14: return e.prev = 14, t.f(), e.finish(14); case 17: case 'end': return e.stop(); } }), e, this, [[1, 11, 14, 17]]); })) }, { key: 'getFirstRange', value() { let e; let t = null; const n = d(this._ranges); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; t && !r.start.isBefore(t.start) || (t = r); } } catch (i) { n.e(i); } finally { n.f(); } return t ? t.clone() : null; } }, { key: 'getLastRange', value() { let e; let t = null; const n = d(this._ranges); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; t && !r.end.isAfter(t.end) || (t = r); } } catch (i) { n.e(i); } finally { n.f(); } return t ? t.clone() : null; } }, { key: 'getFirstPosition', value() { const e = this.getFirstRange(); return e ? e.start.clone() : null; } }, { key: 'getLastPosition', value() { const e = this.getLastRange(); return e ? e.end.clone() : null; } }, { key: 'isEqual', value(e) { if (this.isFake != e.isFake) return !1; if (this.isFake && this.fakeSelectionLabel != e.fakeSelectionLabel) return !1; if (this.rangeCount != e.rangeCount) return !1; if (this.rangeCount === 0) return !0; if (!this.anchor.isEqual(e.anchor) || !this.focus.isEqual(e.focus)) return !1; let t; const n = d(this._ranges); try { for (n.s(); !(t = n.n()).done;) { var r; const i = t.value; let o = !1; const a = d(e._ranges); try { for (a.s(); !(r = a.n()).done;) { const s = r.value; if (i.isEqual(s)) { o = !0; break; } } } catch (l) { a.e(l); } finally { a.f(); } if (!o) return !1; } } catch (l) { n.e(l); } finally { n.f(); } return !0; } }, { key: 'isSimilar', value(e) { if (this.isBackward != e.isBackward) return !1; const t = Ri(this.getRanges()); if (t != Ri(e.getRanges())) return !1; if (t == 0) return !0; let n; const r = d(this.getRanges()); try { for (r.s(); !(n = r.n()).done;) { let i = n.value; i = i.getTrimmed(); var o; let a = !1; const s = d(e.getRanges()); try { for (s.s(); !(o = s.n()).done;) { let l = o.value; if (l = l.getTrimmed(), i.start.isEqual(l.start) && i.end.isEqual(l.end)) { a = !0; break; } } } catch (c) { s.e(c); } finally { s.f(); } if (!a) return !1; } } catch (c) { r.e(c); } finally { r.f(); } return !0; } }, { key: 'getSelectedElement', value() { return this.rangeCount !== 1 ? null : this.getFirstRange().getContainedElement(); } }, { key: 'setTo', value(t, n, r) { if (t === null) this._setRanges([]), this._setFakeOptions(n); else if (t instanceof e || t instanceof Di) this._setRanges(t.getRanges(), t.isBackward), this._setFakeOptions({ fake: t.isFake, label: t.fakeSelectionLabel }); else if (t instanceof Mi) this._setRanges([t], n && n.backward), this._setFakeOptions(n); else if (t instanceof Ii) this._setRanges([new Mi(t)]), this._setFakeOptions(n); else if (t instanceof cr) { let i; const o = !!r && !!r.backward; if (void 0 === n) throw new Ln.b('view-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.', this); i = n == 'in' ? Mi._createIn(t) : n == 'on' ? Mi._createOn(t) : new Mi(Ii._createAt(t, n)), this._setRanges([i], o), this._setFakeOptions(r); } else { if (!Kn(t)) throw new Ln.b('view-selection-setTo-not-selectable: Cannot set selection to given place.', this); this._setRanges(t, n && n.backward), this._setFakeOptions(n); } this.fire('change'); } }, { key: 'setFocus', value(e, t) { if (this.anchor === null) throw new Ln.b('view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.', this); const n = Ii._createAt(e, t); if (n.compareWith(this.focus) != 'same') { const r = this.anchor; this._ranges.pop(), n.compareWith(r) == 'before' ? this._addRange(new Mi(n, r), !0) : this._addRange(new Mi(r, n)), this.fire('change'); } } }, { key: 'is', value(e) { return e === 'selection' || e === 'view:selection'; } }, { key: '_setRanges', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; e = Array.from(e), this._ranges = []; let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; this._addRange(i); } } catch (o) { r.e(o); } finally { r.f(); } this._lastRangeBackward = !!t; } }, { key: '_setFakeOptions', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; this._isFake = !!e.fake, this._fakeSelectionLabel = e.fake && e.label || ''; } }, { key: '_addRange', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (!(e instanceof Mi)) throw new Ln.b('view-selection-add-range-not-range: Selection range set to an object that is not an instance of view.Range', this); this._pushRange(e), this._lastRangeBackward = !!t; } }, { key: '_pushRange', value(e) { let t; const n = d(this._ranges); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; if (e.isIntersecting(r)) throw new Ln.b('view-selection-range-intersects: Trying to add a range that intersects with another range from selection.', this, { addedRange: e, intersectingRange: r }); } } catch (i) { n.e(i); } finally { n.f(); } this._ranges.push(new Mi(e.start, e.end)); } }, { key: 'isFake', get() { return this._isFake; } }, { key: 'fakeSelectionLabel', get() { return this._fakeSelectionLabel; } }, { key: 'anchor', get() { if (!this._ranges.length) return null; const e = this._ranges[this._ranges.length - 1]; return (this._lastRangeBackward ? e.end : e.start).clone(); } }, { key: 'focus', get() { if (!this._ranges.length) return null; const e = this._ranges[this._ranges.length - 1]; return (this._lastRangeBackward ? e.start : e.end).clone(); } }, { key: 'isCollapsed', get() { return this.rangeCount === 1 && this._ranges[0].isCollapsed; } }, { key: 'rangeCount', get() { return this._ranges.length; } }, { key: 'isBackward', get() { return !this.isCollapsed && this._lastRangeBackward; } }, { key: 'editableElement', get() { return this.anchor ? this.anchor.editableElement : null; } }]), e; }()); Qn(ji, Vn); var Di = (function () { function e() { const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; const n = arguments.length > 1 ? arguments[1] : void 0; const r = arguments.length > 2 ? arguments[2] : void 0; f(this, e), this._selection = new ji(), this._selection.delegate('change').to(this), this._selection.setTo(t, n, r); } return m(e, [{ key: 'getRanges', value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return e.delegateYield(this._selection.getRanges(), 't0', 1); case 1: case 'end': return e.stop(); } }), e, this); })) }, { key: 'getFirstRange', value() { return this._selection.getFirstRange(); } }, { key: 'getLastRange', value() { return this._selection.getLastRange(); } }, { key: 'getFirstPosition', value() { return this._selection.getFirstPosition(); } }, { key: 'getLastPosition', value() { return this._selection.getLastPosition(); } }, { key: 'getSelectedElement', value() { return this._selection.getSelectedElement(); } }, { key: 'isEqual', value(e) { return this._selection.isEqual(e); } }, { key: 'isSimilar', value(e) { return this._selection.isSimilar(e); } }, { key: 'is', value(e) { return e === 'selection' || e == 'documentSelection' || e == 'view:selection' || e == 'view:documentSelection'; } }, { key: '_setTo', value(e, t, n) { this._selection.setTo(e, t, n); } }, { key: '_setFocus', value(e, t) { this._selection.setFocus(e, t); } }, { key: 'isFake', get() { return this._selection.isFake; } }, { key: 'fakeSelectionLabel', get() { return this._selection.fakeSelectionLabel; } }, { key: 'anchor', get() { return this._selection.anchor; } }, { key: 'focus', get() { return this._selection.focus; } }, { key: 'isCollapsed', get() { return this._selection.isCollapsed; } }, { key: 'rangeCount', get() { return this._selection.rangeCount; } }, { key: 'isBackward', get() { return this._selection.isBackward; } }, { key: 'editableElement', get() { return this._selection.editableElement; } }, { key: '_ranges', get() { return this._selection._ranges; } }]), e; }()); Qn(Di, Vn); const Li = (function () { function e(t) { f(this, e), this.selection = new Di(), this.roots = new Jn({ idProperty: 'rootName' }), this.stylesProcessor = t, this.set('isReadOnly', !1), this.set('isFocused', !1), this.set('isComposing', !1), this._postFixers = new Set(); } return m(e, [{ key: 'getRoot', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 'main'; return this.roots.get(e); } }, { key: 'registerPostFixer', value(e) { this._postFixers.add(e); } }, { key: 'destroy', value() { this.roots.map(((e) => e.destroy())), this.stopListening(); } }, { key: '_callPostFixers', value(e) { let t = !1; do { var n; const r = d(this._postFixers); try { for (r.s(); !(n = r.n()).done && !(t = (0, n.value)(e));); } catch (i) { r.e(i); } finally { r.f(); } } while (t); } }]), e; }()); Qn(Li, ki); const zi = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; return f(this, n), (a = t.call(this, e, r, i, o)).getFillerOffset = Fi, a._priority = 10, a._id = null, a._clonesGroup = null, a; } return m(n, [{ key: 'getElementsWithSameId', value() { if (this.id === null) throw new Ln.b('attribute-element-get-elements-with-same-id-no-id: Cannot get elements with the same id for an attribute element without id.', this); return new Set(this._clonesGroup); } }, { key: 'is', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t ? t === this.name && (e === 'attributeElement' || e === 'view:attributeElement' || e === 'element' || e === 'view:element') : e === 'attributeElement' || e === 'view:attributeElement' || e === 'element' || e === 'view:element' || e === 'node' || e === 'view:node'; } }, { key: 'isSimilar', value(e) { return this.id !== null || e.id !== null ? this.id === e.id : o(a(n.prototype), 'isSimilar', this).call(this, e) && this.priority == e.priority; } }, { key: '_clone', value(e) { const t = o(a(n.prototype), '_clone', this).call(this, e); return t._priority = this._priority, t._id = this._id, t; } }, { key: 'priority', get() { return this._priority; } }, { key: 'id', get() { return this._id; } }]), n; }(ci)); function Fi() { if (Vi(this)) return null; for (var e = this.parent; e && e.is('attributeElement');) { if (Vi(e) > 1) return null; e = e.parent; } return !e || Vi(e) > 1 ? null : this.childCount; } function Vi(e) { return Array.from(e.getChildren()).filter(((e) => !e.is('uiElement'))).length; }zi.DEFAULT_PRIORITY = 10; const Bi = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; return f(this, n), (a = t.call(this, e, r, i, o)).getFillerOffset = Ui, a; } return m(n, [{ key: 'is', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t ? t === this.name && (e === 'emptyElement' || e === 'view:emptyElement' || e === 'element' || e === 'view:element') : e === 'emptyElement' || e === 'view:emptyElement' || e === 'element' || e === 'view:element' || e === 'node' || e === 'view:node'; } }, { key: '_insertChild', value(e, t) { if (t && (t instanceof cr || Array.from(t).length > 0)) throw new Ln.b('view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.', [this, t]); } }]), n; }(ci)); function Ui() { return null; } const Hi = navigator.userAgent.toLowerCase(); const Wi = {
            isMac: (function (e) { return e.indexOf('macintosh') > -1; }(Hi)), isGecko: (function (e) { return !!e.match(/gecko\/\d+/); }(Hi)), isSafari: (function (e) { return e.indexOf(' applewebkit/') > -1 && e.indexOf('chrome') === -1; }(Hi)), isAndroid: (function (e) { return e.indexOf('android') > -1; }(Hi)), features: { isRegExpUnicodePropertySupported: (function () { let e = !1; try { e = '\u0107'.search(new RegExp('[\\p{L}]', 'u')) === 0; } catch (e) {} return e; }()) },
          }; const qi = { '\u2318': 'ctrl', '\u21e7': 'shift', '\u2325': 'alt' }; const Gi = { ctrl: '\u2318', shift: '\u21e7', alt: '\u2325' }; const $i = (function () {
            for (var e = {
                arrowleft: 37, arrowup: 38, arrowright: 39, arrowdown: 40, backspace: 8, delete: 46, enter: 13, space: 32, esc: 27, tab: 9, ctrl: 1114112, cmd: 1114112, shift: 2228224, alt: 4456448,
              }, t = 65; t <= 90; t++) { const n = String.fromCharCode(t); e[n.toLowerCase()] = t; } for (let r = 48; r <= 57; r++)e[r - 48] = r; for (let i = 112; i <= 123; i++)e[`f${i - 111}`] = i; return e;
          }()); function Yi(e) { let t; if (typeof e === 'string') { if (!(t = $i[e.toLowerCase()])) throw new Ln.b('keyboard-unknown-key: Unknown key name.', null, { key: e }); } else t = e.keyCode + (e.altKey ? $i.alt : 0) + (e.ctrlKey ? $i.ctrl : 0) + (e.shiftKey ? $i.shift : 0); return t; } function Ki(e) { return typeof e === 'string' && (e = eo(e)), e.map(((e) => (typeof e === 'string' ? Yi(e) : e))).reduce(((e, t) => t + e), 0); } function Qi(e) { return Wi.isMac ? eo(e).map(((e) => Gi[e.toLowerCase()] || e)).reduce(((e, t) => (e.slice(-1) in qi ? e + t : `${e}+${t}`))) : e; } function Ji(e) { return e == $i.arrowright || e == $i.arrowleft || e == $i.arrowup || e == $i.arrowdown; } function Zi(e, t) { const n = t === 'ltr'; switch (e) { case $i.arrowleft: return n ? 'left' : 'right'; case $i.arrowright: return n ? 'right' : 'left'; case $i.arrowup: return 'up'; case $i.arrowdown: return 'down'; } } function Xi(e, t) { const n = Zi(e, t); return n === 'down' || n === 'right'; } function eo(e) { return e.split(/\s*\+\s*/); } const to = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; return f(this, n), (a = t.call(this, e, r, i, o)).getFillerOffset = ro, a; } return m(n, [{ key: 'is', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t ? t === this.name && (e === 'uiElement' || e === 'view:uiElement' || e === 'element' || e === 'view:element') : e === 'uiElement' || e === 'view:uiElement' || e === 'element' || e === 'view:element' || e === 'node' || e === 'view:node'; } }, { key: '_insertChild', value(e, t) { if (t && (t instanceof cr || Array.from(t).length > 0)) throw new Ln.b('view-uielement-cannot-add: Cannot add child nodes to UIElement instance.', this); } }, { key: 'render', value(e) { return this.toDomElement(e); } }, { key: 'toDomElement', value(e) { let t; const n = e.createElement(this.name); const r = d(this.getAttributeKeys()); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; n.setAttribute(i, this.getAttribute(i)); } } catch (o) { r.e(o); } finally { r.f(); } return n; } }]), n; }(ci)); function no(e) { e.document.on('keydown', ((t, n) => (function (e, t, n) { if (t.keyCode == $i.arrowright) { const r = t.domTarget.ownerDocument.defaultView.getSelection(); const i = r.rangeCount == 1 && r.getRangeAt(0).collapsed; if (i || t.shiftKey) { const o = r.focusNode; const a = r.focusOffset; const s = n.domPositionToView(o, a); if (s === null) return; let l = !1; const c = s.getLastMatchingPosition(((e) => (e.item.is('uiElement') && (l = !0), !(!e.item.is('uiElement') && !e.item.is('attributeElement'))))); if (l) { const u = n.viewPositionToDom(c); i ? r.collapse(u.parent, u.offset) : r.extend(u.parent, u.offset); } } } }(0, n, e.domConverter)))); } function ro() { return null; } const io = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; return f(this, n), (a = t.call(this, e, r, i, o)).getFillerOffset = oo, a; } return m(n, [{ key: 'is', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t ? t === this.name && (e === 'rawElement' || e === 'view:rawElement' || e === 'element' || e === 'view:element') : e === 'rawElement' || e === 'view:rawElement' || e === this.name || e === `view:${this.name}` || e === 'element' || e === 'view:element' || e === 'node' || e === 'view:node'; } }, { key: '_insertChild', value(e, t) { if (t && (t instanceof cr || Array.from(t).length > 0)) throw new Ln.b('view-rawelement-cannot-add: Cannot add child nodes to a RawElement instance.', [this, t]); } }]), n; }(ci)); function oo() { return null; } const ao = (function () { function e(t, n) { f(this, e), this.document = t, this._children = [], n && this._insertChild(0, n); } return m(e, [{ key: Symbol.iterator, value() { return this._children[Symbol.iterator](); } }, { key: 'is', value(e) { return e === 'documentFragment' || e === 'view:documentFragment'; } }, { key: '_appendChild', value(e) { return this._insertChild(this.childCount, e); } }, { key: 'getChild', value(e) { return this._children[e]; } }, { key: 'getChildIndex', value(e) { return this._children.indexOf(e); } }, { key: 'getChildren', value() { return this._children[Symbol.iterator](); } }, { key: '_insertChild', value(e, t) { this._fireChange('children', this); let n; let r = 0; const i = (function (e, t) { return typeof t === 'string' ? [new ur(e, t)] : (Kn(t) || (t = [t]), Array.from(t).map(((t) => (typeof t === 'string' ? new ur(e, t) : t instanceof dr ? new ur(e, t.data) : t)))); }(this.document, t)); const o = d(i); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; a.parent !== null && a._remove(), a.parent = this, this._children.splice(e, 0, a), e++, r++; } } catch (s) { o.e(s); } finally { o.f(); } return r; } }, { key: '_removeChildren', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; this._fireChange('children', this); for (let n = e; n < e + t; n++) this._children[n].parent = null; return this._children.splice(e, t); } }, { key: '_fireChange', value(e, t) { this.fire(`change:${e}`, t); } }, { key: 'childCount', get() { return this._children.length; } }, { key: 'isEmpty', get() { return this.childCount === 0; } }, { key: 'root', get() { return this; } }, { key: 'parent', get() { return null; } }]), e; }()); Qn(ao, Vn); const so = (function () { function e(t) { f(this, e), this.document = t, this._cloneGroups = new Map(); } return m(e, [{ key: 'setSelection', value(e, t, n) { this.document.selection._setTo(e, t, n); } }, { key: 'setSelectionFocus', value(e, t) { this.document.selection._setFocus(e, t); } }, { key: 'createText', value(e) { return new ur(this.document, e); } }, { key: 'createAttributeElement', value(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; const r = new zi(this.document, e, t); return n.priority && (r._priority = n.priority), n.id && (r._id = n.id), r; } }, { key: 'createContainerElement', value(e, t) { return new di(this.document, e, t); } }, { key: 'createEditableElement', value(e, t) { const n = new Si(this.document, e, t); return n._document = this.document, n; } }, { key: 'createEmptyElement', value(e, t) { return new Bi(this.document, e, t); } }, { key: 'createUIElement', value(e, t, n) { const r = new to(this.document, e, t); return n && (r.render = n), r; } }, { key: 'createRawElement', value(e, t, n) { const r = new io(this.document, e, t); return r.render = n || function () {}, r; } }, { key: 'setAttribute', value(e, t, n) { n._setAttribute(e, t); } }, { key: 'removeAttribute', value(e, t) { t._removeAttribute(e); } }, { key: 'addClass', value(e, t) { t._addClass(e); } }, { key: 'removeClass', value(e, t) { t._removeClass(e); } }, { key: 'setStyle', value(e, t, n) { V(e) && void 0 === n && (n = t), n._setStyle(e, t); } }, { key: 'removeStyle', value(e, t) { t._removeStyle(e); } }, { key: 'setCustomProperty', value(e, t, n) { n._setCustomProperty(e, t); } }, { key: 'removeCustomProperty', value(e, t) { return t._removeCustomProperty(e); } }, { key: 'breakAttributes', value(e) { return e instanceof Ii ? this._breakAttributes(e) : this._breakAttributesRange(e); } }, { key: 'breakContainer', value(e) { const t = e.parent; if (!t.is('containerElement')) throw new Ln.b('view-writer-break-non-container-element: Trying to break an element which is not a container element.', this.document); if (!t.parent) throw new Ln.b('view-writer-break-root: Trying to break root element.', this.document); if (e.isAtStart) return Ii._createBefore(t); if (!e.isAtEnd) { const n = t._clone(!1); this.insert(Ii._createAfter(t), n); const r = new Mi(e, Ii._createAt(t, 'end')); const i = new Ii(n, 0); this.move(r, i); } return Ii._createAfter(t); } }, { key: 'mergeAttributes', value(e) { const t = e.offset; const n = e.parent; if (n.is('$text')) return e; if (n.is('attributeElement') && n.childCount === 0) { const r = n.parent; const i = n.index; return n._remove(), this._removeFromClonedElementsGroup(n), this.mergeAttributes(new Ii(r, i)); } const o = n.getChild(t - 1); const a = n.getChild(t); if (!o || !a) return e; if (o.is('$text') && a.is('$text')) return fo(o, a); if (o.is('attributeElement') && a.is('attributeElement') && o.isSimilar(a)) { const s = o.childCount; return o._appendChild(a.getChildren()), a._remove(), this._removeFromClonedElementsGroup(a), this.mergeAttributes(new Ii(o, s)); } return e; } }, { key: 'mergeContainers', value(e) { const t = e.nodeBefore; const n = e.nodeAfter; if (!t || !n || !t.is('containerElement') || !n.is('containerElement')) throw new Ln.b('view-writer-merge-containers-invalid-position: Element before and after given position cannot be merged.', this.document); const r = t.getChild(t.childCount - 1); const i = r instanceof ur ? Ii._createAt(r, 'end') : Ii._createAt(t, 'end'); return this.move(Mi._createIn(n), Ii._createAt(t, 'end')), this.remove(Mi._createOn(n)), i; } }, { key: 'insert', value(e, t) { !(function e(t, n) { let r; const i = d(t); try { const o = function () { const t = r.value; if (!mo.some(((e) => t instanceof e))) throw new Ln.b('view-writer-insert-invalid-node', n); t.is('$text') || e(t.getChildren(), n); }; for (i.s(); !(r = i.n()).done;)o(); } catch (a) { i.e(a); } finally { i.f(); } }(t = Kn(t) ? c(t) : [t], this.document)); const n = lo(e); if (!n) throw new Ln.b('view-writer-invalid-position-container', this.document); let r; const i = this._breakAttributes(e, !0); const o = n._insertChild(i.offset, t); const a = d(t); try { for (a.s(); !(r = a.n()).done;) { const s = r.value; this._addToClonedElementsGroup(s); } } catch (f) { a.e(f); } finally { a.f(); } const l = i.getShiftedBy(o); const u = this.mergeAttributes(i); if (o === 0) return new Mi(u, u); u.isEqual(i) || l.offset--; const h = this.mergeAttributes(l); return new Mi(u, h); } }, { key: 'remove', value(e) { const t = e instanceof Mi ? e : Mi._createOn(e); if (go(t, this.document), t.isCollapsed) return new ao(this.document); let n; const r = this._breakAttributesRange(t, !0); const i = r.start; const o = r.end; const a = i.parent; const s = o.offset - i.offset; const l = a._removeChildren(i.offset, s); const c = d(l); try { for (c.s(); !(n = c.n()).done;) { const u = n.value; this._removeFromClonedElementsGroup(u); } } catch (f) { c.e(f); } finally { c.f(); } const h = this.mergeAttributes(i); return t.start = h, t.end = h.clone(), new ao(this.document, l); } }, { key: 'clear', value(e, t) { go(e, this.document); let n; const r = e.getWalker({ direction: 'backward', ignoreElementEnd: !0 }); const i = d(r); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; const a = o.item; let s = void 0; if (a.is('element') && t.isSimilar(a))s = Mi._createOn(a); else if (!o.nextPosition.isAfter(e.start) && a.is('$textProxy')) { const l = a.getAncestors().find(((e) => e.is('element') && t.isSimilar(e))); l && (s = Mi._createIn(l)); }s && (s.end.isAfter(e.end) && (s.end = e.end), s.start.isBefore(e.start) && (s.start = e.start), this.remove(s)); } } catch (c) { i.e(c); } finally { i.f(); } } }, { key: 'move', value(e, t) { let n; if (t.isAfter(e.end)) { const r = (t = this._breakAttributes(t, !0)).parent; const i = r.childCount; e = this._breakAttributesRange(e, !0), n = this.remove(e), t.offset += r.childCount - i; } else n = this.remove(e); return this.insert(t, n); } }, { key: 'wrap', value(e, t) { if (!(t instanceof zi)) throw new Ln.b('view-writer-wrap-invalid-attribute', this.document); if (go(e, this.document), e.isCollapsed) { let n = e.start; n.parent.is('element') && !(function (e) { return Array.from(e.getChildren()).some(((e) => !e.is('uiElement'))); }(n.parent)) && (n = n.getLastMatchingPosition(((e) => e.item.is('uiElement')))), n = this._wrapPosition(n, t); const r = this.document.selection; return r.isCollapsed && r.getFirstPosition().isEqual(e.start) && this.setSelection(n), new Mi(n); } return this._wrapRange(e, t); } }, { key: 'unwrap', value(e, t) { if (!(t instanceof zi)) throw new Ln.b('view-writer-unwrap-invalid-attribute', this.document); if (go(e, this.document), e.isCollapsed) return e; const n = this._breakAttributesRange(e, !0); const r = n.start; const i = n.end; const o = r.parent; const a = this._unwrapChildren(o, r.offset, i.offset, t); const s = this.mergeAttributes(a.start); s.isEqual(a.start) || a.end.offset--; const l = this.mergeAttributes(a.end); return new Mi(s, l); } }, { key: 'rename', value(e, t) { const n = new di(this.document, e, t.getAttributes()); return this.insert(Ii._createAfter(t), n), this.move(Mi._createIn(t), Ii._createAt(n, 0)), this.remove(Mi._createOn(t)), n; } }, { key: 'clearClonedElementsGroup', value(e) { this._cloneGroups.delete(e); } }, { key: 'createPositionAt', value(e, t) { return Ii._createAt(e, t); } }, { key: 'createPositionAfter', value(e) { return Ii._createAfter(e); } }, { key: 'createPositionBefore', value(e) { return Ii._createBefore(e); } }, { key: 'createRange', value(e, t) { return new Mi(e, t); } }, { key: 'createRangeOn', value(e) { return Mi._createOn(e); } }, { key: 'createRangeIn', value(e) { return Mi._createIn(e); } }, { key: 'createSelection', value(e, t, n) { return new ji(e, t, n); } }, { key: '_wrapChildren', value(e, t, n, r) { for (var i = t, o = []; i < n;) { const a = e.getChild(i); const s = a.is('$text'); const l = a.is('attributeElement'); const c = a.is('emptyElement'); const u = a.is('uiElement'); const d = a.is('rawElement'); if (l && this._wrapAttributeElement(r, a))o.push(new Ii(e, i)); else if (s || c || u || d || l && co(r, a)) { const h = r._clone(); a._remove(), h._appendChild(a), e._insertChild(i, h), this._addToClonedElementsGroup(h), o.push(new Ii(e, i)); } else l && this._wrapChildren(a, 0, a.childCount, r); i++; } for (let f = 0, m = 0, v = o; m < v.length; m++) { const g = v[m]; g.offset -= f, g.offset != t && (this.mergeAttributes(g).isEqual(g) || (f++, n--)); } return Mi._createFromParentsAndOffsets(e, t, e, n); } }, { key: '_unwrapChildren', value(e, t, n, r) { for (var i = t, o = []; i < n;) { const a = e.getChild(i); if (a.is('attributeElement')) if (a.isSimilar(r)) { const s = a.getChildren(); const l = a.childCount; a._remove(), e._insertChild(i, s), this._removeFromClonedElementsGroup(a), o.push(new Ii(e, i), new Ii(e, i + l)), i += l, n += l - 1; } else this._unwrapAttributeElement(r, a) ? (o.push(new Ii(e, i), new Ii(e, i + 1)), i++) : (this._unwrapChildren(a, 0, a.childCount, r), i++); else i++; } for (let c = 0, u = 0, d = o; u < d.length; u++) { const h = d[u]; h.offset -= c, h.offset != t && h.offset != n && (this.mergeAttributes(h).isEqual(h) || (c++, n--)); } return Mi._createFromParentsAndOffsets(e, t, e, n); } }, { key: '_wrapRange', value(e, t) { const n = this._breakAttributesRange(e, !0); const r = n.start; const i = n.end; const o = r.parent; const a = this._wrapChildren(o, r.offset, i.offset, t); const s = this.mergeAttributes(a.start); s.isEqual(a.start) || a.end.offset--; const l = this.mergeAttributes(a.end); return new Mi(s, l); } }, { key: '_wrapPosition', value(e, t) { if (t.isSimilar(e.parent)) return uo(e.clone()); e.parent.is('$text') && (e = ho(e)); const n = this.createAttributeElement(); n._priority = Number.POSITIVE_INFINITY, n.isSimilar = function () { return !1; }, e.parent._insertChild(e.offset, n); const r = new Mi(e, e.getShiftedBy(1)); this.wrap(r, t); const i = new Ii(n.parent, n.index); n._remove(); const o = i.nodeBefore; const a = i.nodeAfter; return o instanceof ur && a instanceof ur ? fo(o, a) : uo(i); } }, { key: '_wrapAttributeElement', value(e, t) { if (!po(e, t)) return !1; if (e.name !== t.name || e.priority !== t.priority) return !1; let n; const r = d(e.getAttributeKeys()); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (i !== 'class' && i !== 'style' && t.hasAttribute(i) && t.getAttribute(i) !== e.getAttribute(i)) return !1; } } catch (k) { r.e(k); } finally { r.f(); } let o; const a = d(e.getStyleNames()); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; if (t.hasStyle(s) && t.getStyle(s) !== e.getStyle(s)) return !1; } } catch (k) { a.e(k); } finally { a.f(); } let l; const c = d(e.getAttributeKeys()); try { for (c.s(); !(l = c.n()).done;) { const u = l.value; u !== 'class' && u !== 'style' && (t.hasAttribute(u) || this.setAttribute(u, e.getAttribute(u), t)); } } catch (k) { c.e(k); } finally { c.f(); } let h; const f = d(e.getStyleNames()); try { for (f.s(); !(h = f.n()).done;) { const m = h.value; t.hasStyle(m) || this.setStyle(m, e.getStyle(m), t); } } catch (k) { f.e(k); } finally { f.f(); } let v; const g = d(e.getClassNames()); try { for (g.s(); !(v = g.n()).done;) { const p = v.value; t.hasClass(p) || this.addClass(p, t); } } catch (k) { g.e(k); } finally { g.f(); } return !0; } }, { key: '_unwrapAttributeElement', value(e, t) { if (!po(e, t)) return !1; if (e.name !== t.name || e.priority !== t.priority) return !1; let n; const r = d(e.getAttributeKeys()); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (i !== 'class' && i !== 'style' && (!t.hasAttribute(i) || t.getAttribute(i) !== e.getAttribute(i))) return !1; } } catch (f) { r.e(f); } finally { r.f(); } if (!t.hasClass.apply(t, c(e.getClassNames()))) return !1; let o; const a = d(e.getStyleNames()); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; if (!t.hasStyle(s) || t.getStyle(s) !== e.getStyle(s)) return !1; } } catch (f) { a.e(f); } finally { a.f(); } let l; const u = d(e.getAttributeKeys()); try { for (u.s(); !(l = u.n()).done;) { const h = l.value; h !== 'class' && h !== 'style' && this.removeAttribute(h, t); } } catch (f) { u.e(f); } finally { u.f(); } return this.removeClass(Array.from(e.getClassNames()), t), this.removeStyle(Array.from(e.getStyleNames()), t), !0; } }, { key: '_breakAttributesRange', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; const n = e.start; const r = e.end; if (go(e, this.document), e.isCollapsed) { const i = this._breakAttributes(e.start, t); return new Mi(i, i); } const o = this._breakAttributes(r, t); const a = o.parent.childCount; const s = this._breakAttributes(n, t); return o.offset += o.parent.childCount - a, new Mi(s, o); } }, { key: '_breakAttributes', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; const n = e.offset; const r = e.parent; if (e.parent.is('emptyElement')) throw new Ln.b('view-writer-cannot-break-empty-element', this.document); if (e.parent.is('uiElement')) throw new Ln.b('view-writer-cannot-break-ui-element', this.document); if (e.parent.is('rawElement')) throw new Ln.b('view-writer-cannot-break-raw-element: Cannot break inside a RawElement instance.', this.document); if (!t && r.is('$text') && vo(r.parent)) return e.clone(); if (vo(r)) return e.clone(); if (r.is('$text')) return this._breakAttributes(ho(e), t); const i = r.childCount; if (n == i) { const o = new Ii(r.parent, r.index + 1); return this._breakAttributes(o, t); } if (n === 0) { const a = new Ii(r.parent, r.index); return this._breakAttributes(a, t); } const s = r.index + 1; const l = r._clone(); r.parent._insertChild(s, l), this._addToClonedElementsGroup(l); const c = r.childCount - n; const u = r._removeChildren(n, c); l._appendChild(u); const d = new Ii(r.parent, s); return this._breakAttributes(d, t); } }, { key: '_addToClonedElementsGroup', value(e) { if (e.root.is('rootElement')) { if (e.is('element')) { let t; const n = d(e.getChildren()); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; this._addToClonedElementsGroup(r); } } catch (a) { n.e(a); } finally { n.f(); } } const i = e.id; if (i) { let o = this._cloneGroups.get(i); o || (o = new Set(), this._cloneGroups.set(i, o)), o.add(e), e._clonesGroup = o; } } } }, { key: '_removeFromClonedElementsGroup', value(e) { if (e.is('element')) { let t; const n = d(e.getChildren()); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; this._removeFromClonedElementsGroup(r); } } catch (a) { n.e(a); } finally { n.f(); } } const i = e.id; if (i) { const o = this._cloneGroups.get(i); o && o.delete(e); } } }]), e; }()); function lo(e) { for (var t = e.parent; !vo(t);) { if (!t) return; t = t.parent; } return t; } function co(e, t) { return e.priority < t.priority || !(e.priority > t.priority) && e.getIdentity() < t.getIdentity(); } function uo(e) { const t = e.nodeBefore; if (t && t.is('$text')) return new Ii(t, t.data.length); const n = e.nodeAfter; return n && n.is('$text') ? new Ii(n, 0) : e; } function ho(e) { if (e.offset == e.parent.data.length) return new Ii(e.parent.parent, e.parent.index + 1); if (e.offset === 0) return new Ii(e.parent.parent, e.parent.index); const t = e.parent.data.slice(e.offset); return e.parent._data = e.parent.data.slice(0, e.offset), e.parent.parent._insertChild(e.parent.index + 1, new ur(e.root.document, t)), new Ii(e.parent.parent, e.parent.index + 1); } function fo(e, t) { const n = e.data.length; return e._data += t.data, t._remove(), new Ii(e, n); } var mo = [ur, zi, di, Bi, io, to]; function vo(e) { return e && (e.is('containerElement') || e.is('documentFragment')); } function go(e, t) { const n = lo(e.start); const r = lo(e.end); if (!n || !r || n !== r) throw new Ln.b('view-writer-invalid-range-container', t); } function po(e, t) { return e.id === null && t.id === null; } function ko(e) { return Object.prototype.toString.call(e) == '[object Text]'; } const bo = function (e) { return e.createTextNode('\xa0'); }; const yo = function (e) { const t = e.createElement('br'); return t.dataset.ckeFiller = !0, t; }; const wo = (function () { for (var e = '', t = 0; t < 7; t++)e += '\u200b'; return e; }()); function _o(e) { return ko(e) && e.data.substr(0, 7) === wo; } function Eo(e) { return e.data.length == 7 && _o(e); } function xo(e) { return _o(e) ? e.data.slice(7) : e.data; } function To(e, t) { if (t.keyCode == $i.arrowleft) { const n = t.domTarget.ownerDocument.defaultView.getSelection(); if (n.rangeCount == 1 && n.getRangeAt(0).collapsed) { const r = n.getRangeAt(0).startContainer; const i = n.getRangeAt(0).startOffset; _o(r) && i <= 7 && n.collapse(r, 0); } } } function Co(e, t, n) { const r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; n = n || function (e, t) { return e === t; }, Array.isArray(e) || (e = Array.prototype.slice.call(e)), Array.isArray(t) || (t = Array.prototype.slice.call(t)); const i = So(e, t, n); return r ? Io(i, t.length) : Oo(t, i); } function So(e, t, n) { const r = Ao(e, t, n); if (r === -1) return { firstIndex: -1, lastIndexOld: -1, lastIndexNew: -1 }; const i = Ao(Po(e, r), Po(t, r), n); return { firstIndex: r, lastIndexOld: e.length - i, lastIndexNew: t.length - i }; } function Ao(e, t, n) { for (let r = 0; r < Math.max(e.length, t.length); r++) if (void 0 === e[r] || void 0 === t[r] || !n(e[r], t[r])) return r; return -1; } function Po(e, t) { return e.slice(t).reverse(); } function Oo(e, t) { const n = []; const r = t.firstIndex; const i = t.lastIndexOld; const o = t.lastIndexNew; return o - r > 0 && n.push({ index: r, type: 'insert', values: e.slice(r, o) }), i - r > 0 && n.push({ index: r + (o - r), type: 'delete', howMany: i - r }), n; } function Io(e, t) { const n = e.firstIndex; const r = e.lastIndexOld; const i = e.lastIndexNew; if (n === -1) return Array(t).fill('equal'); let o = []; return n > 0 && (o = o.concat(Array(n).fill('equal'))), i - n > 0 && (o = o.concat(Array(i - n).fill('insert'))), r - n > 0 && (o = o.concat(Array(r - n).fill('delete'))), i < t && (o = o.concat(Array(t - i).fill('equal'))), o; } function Mo(e, t, n) { n = n || function (e, t) { return e === t; }; let r; let i; const o = e.length; const a = t.length; if (o > 200 || a > 200 || o + a > 300) return Mo.fastDiff(e, t, n, !0); if (a < o) { const s = e; e = t, t = s, r = 'delete', i = 'insert'; } else r = 'insert', i = 'delete'; const l = e.length; const c = t.length; const u = c - l; const d = {}; const h = {}; function f(o) { const a = (void 0 !== h[o - 1] ? h[o - 1] : -1) + 1; const s = void 0 !== h[o + 1] ? h[o + 1] : -1; const u = a > s ? -1 : 1; d[o + u] && (d[o] = d[o + u].slice(0)), d[o] || (d[o] = []), d[o].push(a > s ? r : i); for (var f = Math.max(a, s), m = f - o; m < l && f < c && n(e[m], t[f]);)m++, f++, d[o].push('equal'); return f; } let m; let v = 0; do { for (m = -v; m < u; m++)h[m] = f(m); for (m = u + v; m > u; m--)h[m] = f(m); h[u] = f(u), v++; } while (h[u] !== c); return d[u].slice(1); } function No(e, t, n) { e.insertBefore(n, e.childNodes[t] || null); } function Ro(e) { const t = e.parentNode; t && t.removeChild(e); } function jo(e) { if (e) { if (e.defaultView) return e instanceof e.defaultView.Document; if (e.ownerDocument && e.ownerDocument.defaultView) return e instanceof e.ownerDocument.defaultView.Node; } return !1; }Mo.fastDiff = Co; const Do = (function () {
            function e(t, n) { f(this, e), this.domDocuments = new Set(), this.domConverter = t, this.markedAttributes = new Set(), this.markedChildren = new Set(), this.markedTexts = new Set(), this.selection = n, this.isFocused = !1, this._inlineFiller = null, this._fakeSelectionContainer = null; } return m(e, [{ key: 'markToSync', value(e, t) { if (e === 'text') this.domConverter.mapViewToDom(t.parent) && this.markedTexts.add(t); else { if (!this.domConverter.mapViewToDom(t)) return; if (e === 'attributes') this.markedAttributes.add(t); else { if (e !== 'children') throw new Ln.b('view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.', this); this.markedChildren.add(t); } } } }, { key: 'render', value() { let e; let t; const n = d(this.markedChildren); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; this._updateChildrenMappings(r); } } catch (g) { n.e(g); } finally { n.f(); } this._inlineFiller && !this._isSelectionInInlineFiller() && this._removeInlineFiller(), this._inlineFiller ? e = this._getInlineFillerPosition() : this._needsInlineFillerAtSelection() && (e = this.selection.getFirstPosition(), this.markedChildren.add(e.parent)); let i; const o = d(this.markedAttributes); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; this._updateAttrs(a); } } catch (g) { o.e(g); } finally { o.f(); } let s; const l = d(this.markedChildren); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; this._updateChildren(c, { inlineFillerPosition: e }); } } catch (g) { l.e(g); } finally { l.f(); } let u; const h = d(this.markedTexts); try { for (h.s(); !(u = h.n()).done;) { const f = u.value; !this.markedChildren.has(f.parent) && this.domConverter.mapViewToDom(f.parent) && this._updateText(f, { inlineFillerPosition: e }); } } catch (g) { h.e(g); } finally { h.f(); } if (e) { const m = this.domConverter.viewPositionToDom(e); const v = m.parent.ownerDocument; _o(m.parent) ? this._inlineFiller = m.parent : this._inlineFiller = Lo(v, m.parent, m.offset); } else this._inlineFiller = null; this._updateSelection(), this._updateFocus(), this.markedTexts.clear(), this.markedAttributes.clear(), this.markedChildren.clear(); } }, { key: '_updateChildrenMappings', value(e) { const t = this.domConverter.mapViewToDom(e); if (t) { const n = this.domConverter.mapViewToDom(e).childNodes; const r = Array.from(this.domConverter.viewChildrenToDom(e, t.ownerDocument, { withChildren: !1 })); const i = this._diffNodeLists(n, r); const o = this._findReplaceActions(i, n, r); if (o.indexOf('replace') !== -1) { let a; const s = { equal: 0, insert: 0, delete: 0 }; const l = d(o); try { for (l.s(); !(a = l.n()).done;) { const c = a.value; if (c === 'replace') { const u = s.equal + s.insert; const h = s.equal + s.delete; const f = e.getChild(u); !f || f.is('uiElement') || f.is('rawElement') || this._updateElementMappings(f, n[h]), Ro(r[u]), s.equal++; } else s[c]++; } } catch (m) { l.e(m); } finally { l.f(); } } } } }, { key: '_updateElementMappings', value(e, t) { this.domConverter.unbindDomElement(t), this.domConverter.bindElements(t, e), this.markedChildren.add(e), this.markedAttributes.add(e); } }, { key: '_getInlineFillerPosition', value() { const e = this.selection.getFirstPosition(); return e.parent.is('$text') ? Ii._createBefore(this.selection.getFirstPosition().parent) : e; } }, { key: '_isSelectionInInlineFiller', value() { if (this.selection.rangeCount != 1 || !this.selection.isCollapsed) return !1; const e = this.selection.getFirstPosition(); const t = this.domConverter.viewPositionToDom(e); return !!(t && ko(t.parent) && _o(t.parent)); } }, { key: '_removeInlineFiller', value() { const e = this._inlineFiller; if (!_o(e)) throw new Ln.b('view-renderer-filler-was-lost: The inline filler node was lost.', this); Eo(e) ? e.parentNode.removeChild(e) : e.data = e.data.substr(7), this._inlineFiller = null; } }, { key: '_needsInlineFillerAtSelection', value() { if (this.selection.rangeCount != 1 || !this.selection.isCollapsed) return !1; const e = this.selection.getFirstPosition(); const t = e.parent; const n = e.offset; if (!this.domConverter.mapViewToDom(t.root)) return !1; if (!t.is('element')) return !1; if (!(function (e) { if (e.getAttribute('contenteditable') == 'false') return !1; const t = e.findAncestor(((e) => e.hasAttribute('contenteditable'))); return !t || t.getAttribute('contenteditable') == 'true'; }(t))) return !1; if (n === t.getFillerOffset()) return !1; const r = e.nodeBefore; const i = e.nodeAfter; return !(r instanceof ur || i instanceof ur); } }, { key: '_updateText', value(e, t) { const n = this.domConverter.findCorrespondingDomText(e); const r = this.domConverter.viewToDom(e, n.ownerDocument); const i = n.data; let o = r.data; const a = t.inlineFillerPosition; if (a && a.parent == e.parent && a.offset == e.index && (o = wo + o), i != o) { let s; const l = Co(i, o); const c = d(l); try { for (c.s(); !(s = c.n()).done;) { const u = s.value; u.type === 'insert' ? n.insertData(u.index, u.values.join('')) : n.deleteData(u.index, u.howMany); } } catch (h) { c.e(h); } finally { c.f(); } } } }, { key: '_updateAttrs', value(e) { const t = this.domConverter.mapViewToDom(e); if (t) { let n; const r = Array.from(t.attributes).map(((e) => e.name)); const i = e.getAttributeKeys(); const o = d(i); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; t.setAttribute(a, e.getAttribute(a)); } } catch (u) { o.e(u); } finally { o.f(); } let s; const l = d(r); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; e.hasAttribute(c) || t.removeAttribute(c); } } catch (u) { l.e(u); } finally { l.f(); } } } }, { key: '_updateChildren', value(e, t) { const n = this.domConverter.mapViewToDom(e); if (n) { const r = t.inlineFillerPosition; const i = this.domConverter.mapViewToDom(e).childNodes; const o = Array.from(this.domConverter.viewChildrenToDom(e, n.ownerDocument, { bind: !0, inlineFillerPosition: r })); r && r.parent === e && Lo(n.ownerDocument, o, r.offset); let a; const s = this._diffNodeLists(i, o); let l = 0; const c = new Set(); const u = d(s); try { for (u.s(); !(a = u.n()).done;) { const h = a.value; h === 'delete' ? (c.add(i[l]), Ro(i[l])) : h === 'equal' && l++; } } catch (b) { u.e(b); } finally { u.f(); }l = 0; let f; const m = d(s); try { for (m.s(); !(f = m.n()).done;) { const v = f.value; v === 'insert' ? (No(n, l, o[l]), l++) : v === 'equal' && (this._markDescendantTextToSync(this.domConverter.domToView(o[l])), l++); } } catch (b) { m.e(b); } finally { m.f(); } let g; const p = d(c); try { for (p.s(); !(g = p.n()).done;) { const k = g.value; k.parentNode || this.domConverter.unbindDomElement(k); } } catch (b) { p.e(b); } finally { p.f(); } } } }, { key: '_diffNodeLists', value(e, t) { return Mo(e = (function (e, t) { const n = Array.from(e); return n.length != 0 && t ? (n[n.length - 1] == t && n.pop(), n) : n; }(e, this._fakeSelectionContainer)), t, Fo.bind(null, this.domConverter)); } }, { key: '_findReplaceActions', value(e, t, n) { if (e.indexOf('insert') === -1 || e.indexOf('delete') === -1) return e; let r; let i = []; let o = []; let a = []; const s = { equal: 0, insert: 0, delete: 0 }; const l = d(e); try { for (l.s(); !(r = l.n()).done;) { const c = r.value; c === 'insert' ? a.push(n[s.equal + s.insert]) : c === 'delete' ? o.push(t[s.equal + s.delete]) : ((i = i.concat(Mo(o, a, zo).map(((e) => (e === 'equal' ? 'replace' : e))))).push('equal'), o = [], a = []), s[c]++; } } catch (u) { l.e(u); } finally { l.f(); } return i.concat(Mo(o, a, zo).map(((e) => (e === 'equal' ? 'replace' : e)))); } }, { key: '_markDescendantTextToSync', value(e) { if (e) if (e.is('$text')) this.markedTexts.add(e); else if (e.is('element')) { let t; const n = d(e.getChildren()); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; this._markDescendantTextToSync(r); } } catch (i) { n.e(i); } finally { n.f(); } } } }, { key: '_updateSelection', value() { if (this.selection.rangeCount === 0) return this._removeDomSelection(), void this._removeFakeSelection(); const e = this.domConverter.mapViewToDom(this.selection.editableElement); this.isFocused && e && (this.selection.isFake ? this._updateFakeSelection(e) : (this._removeFakeSelection(), this._updateDomSelection(e))); } }, {
              key: '_updateFakeSelection',
              value(e) {
                const t = e.ownerDocument; this._fakeSelectionContainer || (this._fakeSelectionContainer = (function (e) {
                  const t = e.createElement('div'); return Object.assign(t.style, {
                    position: 'fixed', top: 0, left: '-9999px', width: '42px',
                  }), t.textContent = '\xa0', t;
                }(t))); const n = this._fakeSelectionContainer; if (this.domConverter.bindFakeSelection(n, this.selection), this._fakeSelectionNeedsUpdate(e)) { n.parentElement && n.parentElement == e || e.appendChild(n), n.textContent = this.selection.fakeSelectionLabel || '\xa0'; const r = t.getSelection(); const i = t.createRange(); r.removeAllRanges(), i.selectNodeContents(n), r.addRange(i); }
              },
            }, { key: '_updateDomSelection', value(e) { const t = e.ownerDocument.defaultView.getSelection(); if (this._domSelectionNeedsUpdate(t)) { const n = this.domConverter.viewPositionToDom(this.selection.anchor); const r = this.domConverter.viewPositionToDom(this.selection.focus); e.focus(), t.collapse(n.parent, n.offset), t.extend(r.parent, r.offset), Wi.isGecko && (function (e, t) { const n = e.parent; if (n.nodeType == Node.ELEMENT_NODE && e.offset == n.childNodes.length - 1) { const r = n.childNodes[e.offset]; r && r.tagName == 'BR' && t.addRange(t.getRangeAt(0)); } }(r, t)); } } }, { key: '_domSelectionNeedsUpdate', value(e) { if (!this.domConverter.isDomSelectionCorrect(e)) return !0; const t = e && this.domConverter.domSelectionToView(e); return (!t || !this.selection.isEqual(t)) && !(!this.selection.isCollapsed && this.selection.isSimilar(t)); } }, { key: '_fakeSelectionNeedsUpdate', value(e) { const t = this._fakeSelectionContainer; const n = e.ownerDocument.getSelection(); return !t || t.parentElement !== e || n.anchorNode !== t && !t.contains(n.anchorNode) || t.textContent !== this.selection.fakeSelectionLabel; } }, { key: '_removeDomSelection', value() { let e; const t = d(this.domDocuments); try { for (t.s(); !(e = t.n()).done;) { const n = e.value; if (n.getSelection().rangeCount) { const r = n.activeElement; const i = this.domConverter.mapDomToView(r); r && i && n.getSelection().removeAllRanges(); } } } catch (o) { t.e(o); } finally { t.f(); } } }, { key: '_removeFakeSelection', value() { const e = this._fakeSelectionContainer; e && e.remove(); } }, { key: '_updateFocus', value() { if (this.isFocused) { const e = this.selection.editableElement; e && this.domConverter.focus(e); } } }]), e;
          }()); function Lo(e, t, n) { const r = t instanceof Array ? t : t.childNodes; const i = r[n]; if (ko(i)) return i.data = wo + i.data, i; const o = e.createTextNode(wo); return Array.isArray(t) ? r.splice(n, 0, o) : No(t, n, o), o; } function zo(e, t) { return jo(e) && jo(t) && !ko(e) && !ko(t) && e.nodeType !== Node.COMMENT_NODE && t.nodeType !== Node.COMMENT_NODE && e.tagName.toLowerCase() === t.tagName.toLowerCase(); } function Fo(e, t, n) { return t === n || (ko(t) && ko(n) ? t.data === n.data : !(!e.isBlockFiller(t) || !e.isBlockFiller(n))); }Qn(Do, ki); const Vo = { window, document }; function Bo(e) { for (var t = 0; e.previousSibling;)e = e.previousSibling, t++; return t; } function Uo(e) { for (var t = []; e && e.nodeType != Node.DOCUMENT_NODE;)t.unshift(e), e = e.parentNode; return t; } const Ho = yo(document); const Wo = (function () {
            function e(t) { const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; f(this, e), this.document = t, this.blockFillerMode = n.blockFillerMode || 'br', this.preElements = ['pre'], this.blockElements = ['p', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'li', 'dd', 'dt', 'figcaption', 'td', 'th'], this._blockFiller = this.blockFillerMode == 'br' ? yo : bo, this._domToViewMapping = new WeakMap(), this._viewToDomMapping = new WeakMap(), this._fakeSelectionMapping = new WeakMap(); } return m(e, [{ key: 'bindFakeSelection', value(e, t) { this._fakeSelectionMapping.set(e, new ji(t)); } }, { key: 'fakeSelectionToView', value(e) { return this._fakeSelectionMapping.get(e); } }, { key: 'bindElements', value(e, t) { this._domToViewMapping.set(e, t), this._viewToDomMapping.set(t, e); } }, { key: 'unbindDomElement', value(e) { const t = this._domToViewMapping.get(e); if (t) { this._domToViewMapping.delete(e), this._viewToDomMapping.delete(t); let n; const r = d(e.childNodes); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; this.unbindDomElement(i); } } catch (o) { r.e(o); } finally { r.f(); } } } }, { key: 'bindDocumentFragments', value(e, t) { this._domToViewMapping.set(e, t), this._viewToDomMapping.set(t, e); } }, { key: 'viewToDom', value(e, t) { let n; const r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; if (e.is('$text')) { const i = this._processDataFromViewText(e); return t.createTextNode(i); } if (this.mapViewToDom(e)) return this.mapViewToDom(e); if (e.is('documentFragment'))n = t.createDocumentFragment(), r.bind && this.bindDocumentFragments(n, e); else { if (e.is('uiElement')) return n = e.render(t), r.bind && this.bindElements(n, e), n; n = e.hasAttribute('xmlns') ? t.createElementNS(e.getAttribute('xmlns'), e.name) : t.createElement(e.name), e.is('rawElement') && e.render(n), r.bind && this.bindElements(n, e); let o; const a = d(e.getAttributeKeys()); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; n.setAttribute(s, e.getAttribute(s)); } } catch (h) { a.e(h); } finally { a.f(); } } if (r.withChildren || void 0 === r.withChildren) { let l; const c = d(this.viewChildrenToDom(e, t, r)); try { for (c.s(); !(l = c.n()).done;) { const u = l.value; n.appendChild(u); } } catch (h) { c.e(h); } finally { c.f(); } } return n; } }, { key: 'viewChildrenToDom', value: h.mark((function e(t, n) { let r; let i; let o; let a; let s; let l; const c = arguments; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: r = c.length > 2 && void 0 !== c[2] ? c[2] : {}, i = t.getFillerOffset && t.getFillerOffset(), o = 0, a = d(t.getChildren()), e.prev = 4, a.s(); case 6: if ((s = a.n()).done) { e.next = 16; break; } if (l = s.value, i !== o) { e.next = 11; break; } return e.next = 11, this._blockFiller(n); case 11: return e.next = 13, this.viewToDom(l, n, r); case 13: o++; case 14: e.next = 6; break; case 16: e.next = 21; break; case 18: e.prev = 18, e.t0 = e.catch(4), a.e(e.t0); case 21: return e.prev = 21, a.f(), e.finish(21); case 24: if (i !== o) { e.next = 27; break; } return e.next = 27, this._blockFiller(n); case 27: case 'end': return e.stop(); } }), e, this, [[4, 18, 21, 24]]); })) }, { key: 'viewRangeToDom', value(e) { const t = this.viewPositionToDom(e.start); const n = this.viewPositionToDom(e.end); const r = document.createRange(); return r.setStart(t.parent, t.offset), r.setEnd(n.parent, n.offset), r; } }, { key: 'viewPositionToDom', value(e) { let t; let n; let r; const i = e.parent; if (i.is('$text')) { const o = this.findCorrespondingDomText(i); if (!o) return null; let a = e.offset; return _o(o) && (a += 7), { parent: o, offset: a }; } if (e.offset === 0) { if (!(t = this.mapViewToDom(i))) return null; r = t.childNodes[0]; } else { const s = e.nodeBefore; if (!(n = s.is('$text') ? this.findCorrespondingDomText(s) : this.mapViewToDom(e.nodeBefore))) return null; t = n.parentNode, r = n.nextSibling; } return ko(r) && _o(r) ? { parent: r, offset: 7 } : { parent: t, offset: n ? Bo(n) + 1 : 0 }; } }, { key: 'domToView', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; if (this.isBlockFiller(e, this.blockFillerMode)) return null; let n; const r = this.getHostViewElement(e, this._domToViewMapping); if (r) return r; if (ko(e)) { if (Eo(e)) return null; const i = this._processDataFromDomText(e); return i === '' ? null : new ur(this.document, i); } if (this.isComment(e)) return null; if (this.mapDomToView(e)) return this.mapDomToView(e); if (this.isDocumentFragment(e))n = new ao(this.document), t.bind && this.bindDocumentFragments(e, n); else { const o = t.keepOriginalCase ? e.tagName : e.tagName.toLowerCase(); n = new ci(this.document, o), t.bind && this.bindElements(e, n); for (let a = e.attributes, s = a.length - 1; s >= 0; s--)n._setAttribute(a[s].name, a[s].value); } if (t.withChildren || void 0 === t.withChildren) { let l; const c = d(this.domChildrenToView(e, t)); try { for (c.s(); !(l = c.n()).done;) { const u = l.value; n._appendChild(u); } } catch (h) { c.e(h); } finally { c.f(); } } return n; } }, { key: 'domChildrenToView', value: h.mark((function e(t) { let n; let r; let i; let o; const a = arguments; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: n = a.length > 1 && void 0 !== a[1] ? a[1] : {}, r = 0; case 2: if (!(r < t.childNodes.length)) { e.next = 11; break; } if (i = t.childNodes[r], (o = this.domToView(i, n)) === null) { e.next = 8; break; } return e.next = 8, o; case 8: r++, e.next = 2; break; case 11: case 'end': return e.stop(); } }), e, this); })) }, { key: 'domSelectionToView', value(e) { if (e.rangeCount === 1) { let t = e.getRangeAt(0).startContainer; ko(t) && (t = t.parentNode); const n = this.fakeSelectionToView(t); if (n) return n; } for (var r = this.isDomSelectionBackward(e), i = [], o = 0; o < e.rangeCount; o++) { const a = e.getRangeAt(o); const s = this.domRangeToView(a); s && i.push(s); } return new ji(i, { backward: r }); } }, { key: 'domRangeToView', value(e) { const t = this.domPositionToView(e.startContainer, e.startOffset); const n = this.domPositionToView(e.endContainer, e.endOffset); return t && n ? new Mi(t, n) : null; } }, { key: 'domPositionToView', value(e, t) { if (this.isBlockFiller(e, this.blockFillerMode)) return this.domPositionToView(e.parentNode, Bo(e)); const n = this.mapDomToView(e); if (n && (n.is('uiElement') || n.is('rawElement'))) return Ii._createBefore(n); if (ko(e)) { if (Eo(e)) return this.domPositionToView(e.parentNode, Bo(e)); const r = this.findCorrespondingViewText(e); let i = t; return r ? (_o(e) && (i = (i -= 7) < 0 ? 0 : i), new Ii(r, i)) : null; } if (t === 0) { const o = this.mapDomToView(e); if (o) return new Ii(o, 0); } else { const a = e.childNodes[t - 1]; const s = ko(a) ? this.findCorrespondingViewText(a) : this.mapDomToView(a); if (s && s.parent) return new Ii(s.parent, s.index + 1); } return null; } }, { key: 'mapDomToView', value(e) { return this.getHostViewElement(e) || this._domToViewMapping.get(e); } }, { key: 'findCorrespondingViewText', value(e) { if (Eo(e)) return null; const t = this.getHostViewElement(e); if (t) return t; const n = e.previousSibling; if (n) { if (!this.isElement(n)) return null; const r = this.mapDomToView(n); if (r) return r.nextSibling instanceof ur ? r.nextSibling : null; } else { const i = this.mapDomToView(e.parentNode); if (i) { const o = i.getChild(0); return o instanceof ur ? o : null; } } return null; } }, { key: 'mapViewToDom', value(e) { return this._viewToDomMapping.get(e); } }, { key: 'findCorrespondingDomText', value(e) { const t = e.previousSibling; return t && this.mapViewToDom(t) ? this.mapViewToDom(t).nextSibling : !t && e.parent && this.mapViewToDom(e.parent) ? this.mapViewToDom(e.parent).childNodes[0] : null; } }, { key: 'focus', value(e) { const t = this.mapViewToDom(e); if (t && t.ownerDocument.activeElement !== t) { const n = Vo.window; const r = n.scrollX; const i = n.scrollY; const o = []; Go(t, ((e) => { const t = e.scrollLeft; const n = e.scrollTop; o.push([t, n]); })), t.focus(), Go(t, ((e) => { const t = o.shift(); const n = u(t, 2); const r = n[0]; const i = n[1]; e.scrollLeft = r, e.scrollTop = i; })), Vo.window.scrollTo(r, i); } } }, { key: 'isElement', value(e) { return e && e.nodeType == Node.ELEMENT_NODE; } }, { key: 'isDocumentFragment', value(e) { return e && e.nodeType == Node.DOCUMENT_FRAGMENT_NODE; } }, { key: 'isComment', value(e) { return e && e.nodeType == Node.COMMENT_NODE; } }, { key: 'isBlockFiller', value(e) { return this.blockFillerMode == 'br' ? e.isEqualNode(Ho) : !(e.tagName !== 'BR' || !$o(e, this.blockElements) || e.parentNode.childNodes.length !== 1) || (function (e, t) { return ko(e) && e.data == '\xa0' && $o(e, t) && e.parentNode.childNodes.length === 1; }(e, this.blockElements)); } }, { key: 'isDomSelectionBackward', value(e) { if (e.isCollapsed) return !1; const t = document.createRange(); t.setStart(e.anchorNode, e.anchorOffset), t.setEnd(e.focusNode, e.focusOffset); const n = t.collapsed; return t.detach(), n; } }, { key: 'getHostViewElement', value(e) { const t = Uo(e); for (t.pop(); t.length;) { const n = t.pop(); const r = this._domToViewMapping.get(n); if (r && (r.is('uiElement') || r.is('rawElement'))) return r; } return null; } }, { key: 'isDomSelectionCorrect', value(e) { return this._isDomSelectionPositionCorrect(e.anchorNode, e.anchorOffset) && this._isDomSelectionPositionCorrect(e.focusNode, e.focusOffset); } }, { key: '_isDomSelectionPositionCorrect', value(e, t) { if (ko(e) && _o(e) && t < 7) return !1; if (this.isElement(e) && _o(e.childNodes[t])) return !1; const n = this.mapDomToView(e); return !n || !n.is('uiElement') && !n.is('rawElement'); } }, { key: '_processDataFromViewText', value(e) { const t = this; let n = e.data; if (e.getAncestors().some(((e) => t.preElements.includes(e.name)))) return n; if (n.charAt(0) == ' ') { const r = this._getTouchingViewTextNode(e, !1); (!r || !this._nodeEndsWithSpace(r)) && r || (n = `\xa0${n.substr(1)}`); } if (n.charAt(n.length - 1) == ' ') { const i = this._getTouchingViewTextNode(e, !0); n.charAt(n.length - 2) != ' ' && i && i.data.charAt(0) != ' ' || (n = `${n.substr(0, n.length - 1)}\xa0`); } return n.replace(/ {2}/g, ' \xa0'); } }, { key: '_nodeEndsWithSpace', value(e) { const t = this; if (e.getAncestors().some(((e) => t.preElements.includes(e.name)))) return !1; const n = this._processDataFromViewText(e); return n.charAt(n.length - 1) == ' '; } }, { key: '_processDataFromDomText', value(e) { let t = e.data; if (qo(e, this.preElements)) return xo(e); t = t.replace(/[ \n\t\r]{1,}/g, ' '); const n = this._getTouchingInlineDomNode(e, !1); const r = this._getTouchingInlineDomNode(e, !0); const i = this._checkShouldLeftTrimDomText(n); const o = this._checkShouldRightTrimDomText(e, r); return i && (t = t.replace(/^ /, '')), o && (t = t.replace(/ $/, '')), t = (t = xo(new Text(t))).replace(/ \u00A0/g, '  '), (/( |\u00A0)\u00A0$/.test(t) || !r || r.data && r.data.charAt(0) == ' ') && (t = t.replace(/\u00A0$/, ' ')), i && (t = t.replace(/^\u00A0/, ' ')), t; } }, { key: '_checkShouldLeftTrimDomText', value(e) { return !e || !!An(e) || /[^\S\u00A0]/.test(e.data.charAt(e.data.length - 1)); } }, { key: '_checkShouldRightTrimDomText', value(e, t) { return !t && !_o(e); } }, { key: '_getTouchingViewTextNode', value(e, t) { let n; const r = new Oi({ startPosition: t ? Ii._createAfter(e) : Ii._createBefore(e), direction: t ? 'forward' : 'backward' }); const i = d(r); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; if (o.item.is('containerElement')) return null; if (o.item.is('element', 'br')) return null; if (o.item.is('$textProxy')) return o.item; } } catch (a) { i.e(a); } finally { i.f(); } return null; } }, {
              key: '_getTouchingInlineDomNode',
              value(e, t) {
                if (!e.parentNode) return null; const n = t ? 'nextNode' : 'previousNode'; const r = e.ownerDocument; const i = Uo(e)[0]; const
                  o = r.createTreeWalker(i, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, { acceptNode(e) { return ko(e) || e.tagName == 'BR' ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP; } }); o.currentNode = e; const a = o[n](); if (a !== null) { const s = (function (e, t) { for (var n = Uo(e), r = Uo(t), i = 0; n[i] == r[i] && n[i];)i++; return i === 0 ? null : n[i - 1]; }(e, a)); if (s && !qo(e, this.blockElements, s) && !qo(a, this.blockElements, s)) return a; } return null;
              },
            }]), e;
          }()); function qo(e, t, n) { let r = Uo(e); return n && (r = r.slice(r.indexOf(n) + 1)), r.some(((e) => e.tagName && t.includes(e.tagName.toLowerCase()))); } function Go(e, t) { for (;e && e != Vo.document;)t(e), e = e.parentNode; } function $o(e, t) { const n = e.parentNode; return n && n.tagName && t.includes(n.tagName.toLowerCase()); } function Yo(e) { const t = Object.prototype.toString.apply(e); return t == '[object Window]' || t == '[object global]'; } const Ko = fi({}, Vn, { listenTo(e) { for (var t, n = arguments.length, r = new Array(n > 1 ? n - 1 : 0), i = 1; i < n; i++)r[i - 1] = arguments[i]; if (jo(e) || Yo(e)) { const o = this._getProxyEmitter(e) || new Qo(e); o.attach.apply(o, r), e = o; }(t = Vn.listenTo).call.apply(t, [this, e].concat(r)); }, stopListening(e, t, n) { if (jo(e) || Yo(e)) { const r = this._getProxyEmitter(e); if (!r) return; e = r; }Vn.stopListening.call(this, e, t, n), e instanceof Qo && e.detach(t); }, _getProxyEmitter(e) { return (function (e, t) { return e[zn] && e[zn][t] ? e[zn][t].emitter : null; }(this, Jo(e))); } }); var Qo = function e(t) { f(this, e), Bn(this, Jo(t)), this._domNode = t; }; function Jo(e) { return e['data-ck-expando'] || (e['data-ck-expando'] = jn()); }fi(Qo.prototype, Vn, { attach(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; if (!this._domListeners || !this._domListeners[e]) { const r = this._createDomListener(e, !!n.useCapture); this._domNode.addEventListener(e, r, !!n.useCapture), this._domListeners || (this._domListeners = {}), this._domListeners[e] = r; } }, detach(e) { let t; !this._domListeners[e] || (t = this._events[e]) && t.callbacks.length || this._domListeners[e].removeListener(); }, _createDomListener(e, t) { const n = this; const r = function (t) { n.fire(e, t); }; return r.removeListener = function () { n._domNode.removeEventListener(e, r, t), delete n._domListeners[e]; }, r; } }); const Zo = (function () { function e(t) { f(this, e), this.view = t, this.document = t.document, this.isEnabled = !1; } return m(e, [{ key: 'enable', value() { this.isEnabled = !0; } }, { key: 'disable', value() { this.isEnabled = !1; } }, { key: 'destroy', value() { this.disable(), this.stopListening(); } }]), e; }()); Qn(Zo, Ko); const Xo = function (e) { return this.__data__.set(e, '__lodash_hash_undefined__'), this; }; const ea = function (e) { return this.__data__.has(e); }; function ta(e) { let t = -1; const n = e == null ? 0 : e.length; for (this.__data__ = new De(); ++t < n;) this.add(e[t]); }ta.prototype.add = ta.prototype.push = Xo, ta.prototype.has = ea; const na = ta; const ra = function (e, t) { for (let n = -1, r = e == null ? 0 : e.length; ++n < r;) if (t(e[n], n, e)) return !0; return !1; }; const ia = function (e, t) { return e.has(t); }; const oa = function (e, t, n, r, i, o) { const a = 1 & n; const s = e.length; const l = t.length; if (s != l && !(a && l > s)) return !1; const c = o.get(e); if (c && o.get(t)) return c == t; let u = -1; let d = !0; const h = 2 & n ? new na() : void 0; for (o.set(e, t), o.set(t, e); ++u < s;) { var f = e[u]; const m = t[u]; if (r) var v = a ? r(m, f, u, t, e, o) : r(f, m, u, e, t, o); if (void 0 !== v) { if (v) continue; d = !1; break; } if (h) { if (!ra(t, ((e, t) => { if (!ia(h, t) && (f === e || i(f, e, n, r, o))) return h.push(t); }))) { d = !1; break; } } else if (f !== m && !i(f, m, n, r, o)) { d = !1; break; } } return o.delete(e), o.delete(t), d; }; const aa = function (e) { let t = -1; const n = Array(e.size); return e.forEach(((e, r) => { n[++t] = [r, e]; })), n; }; const sa = function (e) { let t = -1; const n = Array(e.size); return e.forEach(((e) => { n[++t] = e; })), n; }; const la = _ ? _.prototype : void 0; const ca = la ? la.valueOf : void 0; const ua = function (e, t, n, r, i, o, a) { switch (n) { case '[object DataView]': if (e.byteLength != t.byteLength || e.byteOffset != t.byteOffset) return !1; e = e.buffer, t = t.buffer; case '[object ArrayBuffer]': return !(e.byteLength != t.byteLength || !o(new nn(e), new nn(t))); case '[object Boolean]': case '[object Date]': case '[object Number]': return U(+e, +t); case '[object Error]': return e.name == t.name && e.message == t.message; case '[object RegExp]': case '[object String]': return e == `${t}`; case '[object Map]': var s = aa; case '[object Set]': var l = 1 & r; if (s || (s = sa), e.size != t.size && !l) return !1; var c = a.get(e); if (c) return c == t; r |= 2, a.set(e, t); var u = oa(s(e), s(t), r, i, o, a); return a.delete(e), u; case '[object Symbol]': if (ca) return ca.call(e) == ca.call(t); } return !1; }; const da = Object.prototype.hasOwnProperty; const ha = function (e, t, n, r, i, o) { const a = 1 & n; const s = Dt(e); const l = s.length; if (l != Dt(t).length && !a) return !1; for (var c = l; c--;) { var u = s[c]; if (!(a ? u in t : da.call(t, u))) return !1; } const d = o.get(e); if (d && o.get(t)) return d == t; let h = !0; o.set(e, t), o.set(t, e); for (var f = a; ++c < l;) { const m = e[u = s[c]]; const v = t[u]; if (r) var g = a ? r(v, m, u, t, e, o) : r(m, v, u, e, t, o); if (!(void 0 === g ? m === v || i(m, v, n, r, o) : g)) { h = !1; break; }f || (f = u == 'constructor'); } if (h && !f) { const p = e.constructor; const k = t.constructor; p == k || !('constructor' in e) || !('constructor' in t) || typeof p === 'function' && p instanceof p && typeof k === 'function' && k instanceof k || (h = !1); } return o.delete(e), o.delete(t), h; }; const fa = '[object Arguments]'; const ma = '[object Array]'; const va = '[object Object]'; const ga = Object.prototype.hasOwnProperty; const pa = function (e, t, n, r, i, o) { let a = Ze(e); const s = Ze(t); let l = a ? ma : Xt(e); let c = s ? ma : Xt(t); let u = (l = l == fa ? va : l) == va; const d = (c = c == fa ? va : c) == va; const h = l == c; if (h && Object(Xe.a)(e)) { if (!Object(Xe.a)(t)) return !1; a = !0, u = !1; } if (h && !u) return o || (o = new Fe()), a || lt(e) ? oa(e, t, n, r, i, o) : ua(e, t, l, n, r, i, o); if (!(1 & n)) { const f = u && ga.call(e, '__wrapped__'); const m = d && ga.call(t, '__wrapped__'); if (f || m) { const v = f ? e.value() : e; const g = m ? t.value() : t; return o || (o = new Fe()), i(v, g, n, r, o); } } return !!h && (o || (o = new Fe()), ha(e, t, n, r, i, o)); }; const ka = function e(t, n, r, i, o) { return t === n || (t == null || n == null || !R(t) && !R(n) ? t !== t && n !== n : pa(t, n, r, i, e, o)); }; const ba = function (e, t, n) { const r = (n = typeof n === 'function' ? n : void 0) ? n(e, t) : void 0; return void 0 === r ? ka(e, t, void 0, n) : !!r; }; const ya = (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; return f(this, n), (r = t.call(this, e))._config = {
                childList: !0, characterData: !0, characterDataOldValue: !0, subtree: !0,
              }, r.domConverter = e.domConverter, r.renderer = e._renderer, r._domElements = [], r._mutationObserver = new window.MutationObserver(r._onMutations.bind(s(r))), r;
            } return m(n, [{ key: 'flush', value() { this._onMutations(this._mutationObserver.takeRecords()); } }, { key: 'observe', value(e) { this._domElements.push(e), this.isEnabled && this._mutationObserver.observe(e, this._config); } }, { key: 'enable', value() { o(a(n.prototype), 'enable', this).call(this); let e; const t = d(this._domElements); try { for (t.s(); !(e = t.n()).done;) { const r = e.value; this._mutationObserver.observe(r, this._config); } } catch (i) { t.e(i); } finally { t.f(); } } }, { key: 'disable', value() { o(a(n.prototype), 'disable', this).call(this), this._mutationObserver.disconnect(); } }, { key: 'destroy', value() { o(a(n.prototype), 'destroy', this).call(this), this._mutationObserver.disconnect(); } }, {
              key: '_onMutations',
              value(e) {
                if (e.length !== 0) {
                  let t; const n = this.domConverter; const r = new Map(); const i = new Set(); const o = d(e); try { for (o.s(); !(t = o.n()).done;) { const a = t.value; if (a.type === 'childList') { const s = n.mapDomToView(a.target); if (s && (s.is('uiElement') || s.is('rawElement'))) continue; s && !this._isBogusBrMutation(a) && i.add(s); } } } catch (P) { o.e(P); } finally { o.f(); } let l; const c = d(e); try {
                    for (c.s(); !(l = c.n()).done;) {
                      const u = l.value; const h = n.mapDomToView(u.target); if ((!h || !h.is('uiElement') && !h.is('rawElement')) && u.type === 'characterData') {
                        const f = n.findCorrespondingViewText(u.target); f && !i.has(f.parent) ? r.set(f, {
                          type: 'text', oldText: f.data, newText: xo(u.target), node: f,
                        }) : !f && _o(u.target) && i.add(n.mapDomToView(u.target.parentNode));
                      }
                    }
                  } catch (P) { c.e(P); } finally { c.f(); } let m; const v = []; const g = d(r.values()); try { for (g.s(); !(m = g.n()).done;) { const p = m.value; this.renderer.markToSync('text', p.node), v.push(p); } } catch (P) { g.e(P); } finally { g.f(); } let k; const b = d(i); try {
                    for (b.s(); !(k = b.n()).done;) {
                      const y = k.value; const w = n.mapViewToDom(y); const _ = Array.from(y.getChildren()); const E = Array.from(n.domChildrenToView(w, { withChildren: !1 })); ba(_, E, A) || (this.renderer.markToSync('children', y), v.push({
                        type: 'children', oldChildren: _, newChildren: E, node: y,
                      }));
                    }
                  } catch (P) { b.e(P); } finally { b.f(); } const x = e[0].target.ownerDocument.getSelection(); let T = null; if (x && x.anchorNode) { const C = n.domPositionToView(x.anchorNode, x.anchorOffset); const S = n.domPositionToView(x.focusNode, x.focusOffset); C && S && (T = new ji(C)).setFocus(S); }v.length && (this.document.fire('mutations', v, T), this.view.forceRender());
                } function A(e, t) { if (!Array.isArray(e)) return e === t || !(!e.is('$text') || !t.is('$text')) && e.data === t.data; }
              },
            }, { key: '_isBogusBrMutation', value(e) { let t = null; return e.nextSibling === null && e.removedNodes.length === 0 && e.addedNodes.length == 1 && (t = this.domConverter.domToView(e.addedNodes[0], { withChildren: !1 })), t && t.is('element', 'br'); } }]), n;
          }(Zo)); const wa = (function () { function e(t, n, r) { f(this, e), this.view = t, this.document = t.document, this.domEvent = n, this.domTarget = n.target, fi(this, r); } return m(e, [{ key: 'preventDefault', value() { this.domEvent.preventDefault(); } }, { key: 'stopPropagation', value() { this.domEvent.stopPropagation(); } }, { key: 'target', get() { return this.view.domConverter.mapDomToView(this.domTarget); } }]), e; }()); const _a = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).useCapture = !1, r; } return m(n, [{ key: 'observe', value(e) { const t = this; (typeof this.domEventType === 'string' ? [this.domEventType] : this.domEventType).forEach(((n) => { t.listenTo(e, n, ((e, n) => { t.isEnabled && t.onDomEvent(n); }), { useCapture: t.useCapture }); })); } }, { key: 'fire', value(e, t, n) { this.isEnabled && this.document.fire(e, new wa(this.view, t, n)); } }]), n; }(Zo)); const Ea = (function (e) {
            v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).domEventType = ['keydown', 'keyup'], r; } return m(n, [{
              key: 'onDomEvent',
              value(e) {
                this.fire(e.type, e, {
                  keyCode: e.keyCode, altKey: e.altKey, ctrlKey: e.ctrlKey || e.metaKey, shiftKey: e.shiftKey, get keystroke() { return Yi(this); },
                });
              },
            }]), n;
          }(_a)); const xa = function () { return w.a.Date.now(); }; const Ta = /^\s+|\s+$/g; const Ca = /^[-+]0x[0-9a-f]+$/i; const Sa = /^0b[01]+$/i; const Aa = /^0o[0-7]+$/i; const Pa = parseInt; const Oa = function (e) { if (typeof e === 'number') return e; if (vr(e)) return NaN; if (te(e)) { const t = typeof e.valueOf === 'function' ? e.valueOf() : e; e = te(t) ? `${t}` : t; } if (typeof e !== 'string') return e === 0 ? e : +e; e = e.replace(Ta, ''); const n = Sa.test(e); return n || Aa.test(e) ? Pa(e.slice(2), n ? 2 : 8) : Ca.test(e) ? NaN : +e; }; const Ia = Math.max; const Ma = Math.min; const Na = function (e, t, n) { let r; let i; let o; let a; let s; let l; let c = 0; let u = !1; let d = !1; let h = !0; if (typeof e !== 'function') throw new TypeError('Expected a function'); function f(t) { const n = r; const o = i; return r = i = void 0, c = t, a = e.apply(o, n); } function m(e) { return c = e, s = setTimeout(g, t), u ? f(e) : a; } function v(e) { const n = e - l; return void 0 === l || n >= t || n < 0 || d && e - c >= o; } function g() { const e = xa(); if (v(e)) return p(e); s = setTimeout(g, (function (e) { const n = t - (e - l); return d ? Ma(n, o - (e - c)) : n; }(e))); } function p(e) { return s = void 0, h && r ? f(e) : (r = i = void 0, a); } function k() { const e = xa(); const n = v(e); if (r = arguments, i = this, l = e, n) { if (void 0 === s) return m(l); if (d) return clearTimeout(s), s = setTimeout(g, t), f(l); } return void 0 === s && (s = setTimeout(g, t)), a; } return t = Oa(t) || 0, te(n) && (u = !!n.leading, o = (d = 'maxWait' in n) ? Ia(Oa(n.maxWait) || 0, t) : o, h = 'trailing' in n ? !!n.trailing : h), k.cancel = function () { void 0 !== s && clearTimeout(s), c = 0, r = l = i = s = void 0; }, k.flush = function () { return void 0 === s ? a : p(xa()); }, k; }; const Ra = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e))._fireSelectionChangeDoneDebounced = Na(((e) => r.document.fire('selectionChangeDone', e)), 200), r; } return m(n, [{ key: 'observe', value() { const e = this; const t = this.document; t.on('keydown', ((n, r) => { t.selection.isFake && (function (e) { return e == $i.arrowright || e == $i.arrowleft || e == $i.arrowup || e == $i.arrowdown; }(r.keyCode)) && e.isEnabled && (r.preventDefault(), e._handleSelectionMove(r.keyCode)); }), { priority: 'lowest' }); } }, { key: 'destroy', value() { o(a(n.prototype), 'destroy', this).call(this), this._fireSelectionChangeDoneDebounced.cancel(); } }, { key: '_handleSelectionMove', value(e) { const t = this.document.selection; const n = new ji(t.getRanges(), { backward: t.isBackward, fake: !1 }); e != $i.arrowleft && e != $i.arrowup || n.setTo(n.getFirstPosition()), e != $i.arrowright && e != $i.arrowdown || n.setTo(n.getLastPosition()); const r = { oldSelection: t, newSelection: n, domSelection: null }; this.document.fire('selectionChange', r), this._fireSelectionChangeDoneDebounced(r); } }]), n; }(Zo)); const ja = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).mutationObserver = e.getObserver(ya), r.selection = r.document.selection, r.domConverter = e.domConverter, r._documents = new WeakSet(), r._fireSelectionChangeDoneDebounced = Na(((e) => r.document.fire('selectionChangeDone', e)), 200), r._clearInfiniteLoopInterval = setInterval((() => r._clearInfiniteLoop()), 1e3), r._loopbackCounter = 0, r; } return m(n, [{ key: 'observe', value(e) { const t = this; const n = e.ownerDocument; this._documents.has(n) || (this.listenTo(n, 'selectionchange', (() => { t._handleSelectionChange(n); })), this._documents.add(n)); } }, { key: 'destroy', value() { o(a(n.prototype), 'destroy', this).call(this), clearInterval(this._clearInfiniteLoopInterval), this._fireSelectionChangeDoneDebounced.cancel(); } }, { key: '_handleSelectionChange', value(e) { if (this.isEnabled) { this.mutationObserver.flush(); const t = e.defaultView.getSelection(); const n = this.domConverter.domSelectionToView(t); if (n.rangeCount != 0) { if (this.view.hasDomSelection = !0, (!this.selection.isEqual(n) || !this.domConverter.isDomSelectionCorrect(t)) && !(++this._loopbackCounter > 60)) if (this.selection.isSimilar(n)) this.view.forceRender(); else { const r = { oldSelection: this.selection, newSelection: n, domSelection: t }; this.document.fire('selectionChange', r), this._fireSelectionChangeDoneDebounced(r); } } else this.view.hasDomSelection = !1; } } }, { key: '_clearInfiniteLoop', value() { this._loopbackCounter = 0; } }]), n; }(Zo)); const Da = (function (e) { v(n, e); const t = g(n); function n(e) { let r; f(this, n), (r = t.call(this, e)).domEventType = ['focus', 'blur'], r.useCapture = !0; const i = r.document; return i.on('focus', (() => { i.isFocused = !0, r._renderTimeoutId = setTimeout((() => e.forceRender()), 50); })), i.on('blur', ((t, n) => { const r = i.selection.editableElement; r !== null && r !== n.target || (i.isFocused = !1, e.forceRender()); })), r; } return m(n, [{ key: 'onDomEvent', value(e) { this.fire(e.type, e); } }, { key: 'destroy', value() { this._renderTimeoutId && clearTimeout(this._renderTimeoutId), o(a(n.prototype), 'destroy', this).call(this); } }]), n; }(_a)); const La = (function (e) { v(n, e); const t = g(n); function n(e) { let r; f(this, n), (r = t.call(this, e)).domEventType = ['compositionstart', 'compositionupdate', 'compositionend']; const i = r.document; return i.on('compositionstart', (() => { i.isComposing = !0; })), i.on('compositionend', (() => { i.isComposing = !1; })), r; } return m(n, [{ key: 'onDomEvent', value(e) { this.fire(e.type, e); } }]), n; }(_a)); const za = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).domEventType = ['beforeinput'], r; } return m(n, [{ key: 'onDomEvent', value(e) { this.fire(e.type, e); } }]), n; }(_a)); function Fa(e) { return Object.prototype.toString.apply(e) == '[object Range]'; } function Va(e) {
            const t = e.ownerDocument.defaultView.getComputedStyle(e); return {
              top: parseInt(t.borderTopWidth, 10), right: parseInt(t.borderRightWidth, 10), bottom: parseInt(t.borderBottomWidth, 10), left: parseInt(t.borderLeftWidth, 10),
            };
          } const Ba = ['top', 'right', 'bottom', 'left', 'width', 'height']; const Ua = (function () {
            function e(t) {
              f(this, e); const n = Fa(t); if (Object.defineProperty(this, '_source', { value: t._source || t, writable: !0, enumerable: !1 }), An(t) || n)Ha(this, n ? e.getDomRangeRects(t)[0] : t.getBoundingClientRect()); else if (Yo(t)) {
                const r = t.innerWidth; const i = t.innerHeight; Ha(this, {
                  top: 0, right: r, bottom: i, left: 0, width: r, height: i,
                });
              } else Ha(this, t);
            } return m(e, [{ key: 'clone', value() { return new e(this); } }, { key: 'moveTo', value(e, t) { return this.top = t, this.right = e + this.width, this.bottom = t + this.height, this.left = e, this; } }, { key: 'moveBy', value(e, t) { return this.top += t, this.right += e, this.left += e, this.bottom += t, this; } }, {
              key: 'getIntersection',
              value(t) {
                const n = {
                  top: Math.max(this.top, t.top), right: Math.min(this.right, t.right), bottom: Math.min(this.bottom, t.bottom), left: Math.max(this.left, t.left),
                }; return n.width = n.right - n.left, n.height = n.bottom - n.top, n.width < 0 || n.height < 0 ? null : new e(n);
              },
            }, { key: 'getIntersectionArea', value(e) { const t = this.getIntersection(e); return t ? t.getArea() : 0; } }, { key: 'getArea', value() { return this.width * this.height; } }, { key: 'getVisible', value() { const t = this._source; let n = this.clone(); if (!Wa(t)) for (let r = t.parentNode || t.commonAncestorContainer; r && !Wa(r);) { const i = new e(r); const o = n.getIntersection(i); if (!o) return null; o.getArea() < n.getArea() && (n = o), r = r.parentNode; } return n; } }, { key: 'isEqual', value(e) { let t; const n = d(Ba); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; if (this[r] !== e[r]) return !1; } } catch (i) { n.e(i); } finally { n.f(); } return !0; } }, { key: 'contains', value(e) { const t = this.getIntersection(e); return !(!t || !t.isEqual(e)); } }, { key: 'excludeScrollbarsAndBorders', value() { let e; let t; let n; const r = this._source; if (Yo(r))e = r.innerWidth - r.document.documentElement.clientWidth, t = r.innerHeight - r.document.documentElement.clientHeight, n = r.getComputedStyle(r.document.documentElement).direction; else { const i = Va(this._source); e = r.offsetWidth - r.clientWidth - i.left - i.right, t = r.offsetHeight - r.clientHeight - i.top - i.bottom, n = r.ownerDocument.defaultView.getComputedStyle(r).direction, this.left += i.left, this.top += i.top, this.right -= i.right, this.bottom -= i.bottom, this.width = this.right - this.left, this.height = this.bottom - this.top; } return this.width -= e, n === 'ltr' ? this.right -= e : this.left += e, this.height -= t, this.bottom -= t, this; } }], [{ key: 'getDomRangeRects', value(t) { const n = []; const r = Array.from(t.getClientRects()); if (r.length) { let i; const o = d(r); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; n.push(new e(a)); } } catch (c) { o.e(c); } finally { o.f(); } } else { let s = t.startContainer; ko(s) && (s = s.parentNode); const l = new e(s.getBoundingClientRect()); l.right = l.left, l.width = 0, n.push(l); } return n; } }]), e;
          }()); function Ha(e, t) { let n; const r = d(Ba); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; e[i] = t[i]; } } catch (o) { r.e(o); } finally { r.f(); } } function Wa(e) { return !!An(e) && e === e.ownerDocument.body; } function qa(e) { for (var t = e.target, n = e.viewportOffset, r = void 0 === n ? 0 : n, i = Za(t), o = i, a = null; o;) { $a(Xa(o == i ? t : a), (() => es(t, o))); const s = es(t, o); if (Ga(o, s, r), o.parent != o) { if (a = o.frameElement, o = o.parent, !a) return; } else o = null; } } function Ga(e, t, n) { const r = t.clone().moveBy(0, n); const i = t.clone().moveBy(0, -n); const o = new Ua(e).excludeScrollbarsAndBorders(); if (![i, r].every(((e) => o.contains(e)))) { let a = e.scrollX; let s = e.scrollY; Ka(i, o) ? s -= o.top - t.top + n : Ya(r, o) && (s += t.bottom - o.bottom + n), Qa(t, o) ? a -= o.left - t.left + n : Ja(t, o) && (a += t.right - o.right + n), e.scrollTo(a, s); } } function $a(e, t) { for (var n, r, i = Za(e); e != i.document.body;)r = t(), (n = new Ua(e).excludeScrollbarsAndBorders()).contains(r) || (Ka(r, n) ? e.scrollTop -= n.top - r.top : Ya(r, n) && (e.scrollTop += r.bottom - n.bottom), Qa(r, n) ? e.scrollLeft -= n.left - r.left : Ja(r, n) && (e.scrollLeft += r.right - n.right)), e = e.parentNode; } function Ya(e, t) { return e.bottom > t.bottom; } function Ka(e, t) { return e.top < t.top; } function Qa(e, t) { return e.left < t.left; } function Ja(e, t) { return e.right > t.right; } function Za(e) { return Fa(e) ? e.startContainer.ownerDocument.defaultView : e.ownerDocument.defaultView; } function Xa(e) { if (Fa(e)) { let t = e.commonAncestorContainer; return ko(t) && (t = t.parentNode), t; } return e.parentNode; } function es(e, t) { const n = Za(e); const r = new Ua(e); if (n === t) return r; for (let i = n; i != t;) { const o = i.frameElement; const a = new Ua(o).excludeScrollbarsAndBorders(); r.moveBy(a.left, a.top), i = i.parent; } return r; }({ scrollViewportToShowTarget: qa, scrollAncestorsToShowTarget(e) { $a(Xa(e), (() => new Ua(e))); } }); const ts = (function () { function e(t) { const n = this; f(this, e), this.document = new Li(t), this.domConverter = new Wo(this.document), this.domRoots = new Map(), this.set('isRenderingInProgress', !1), this.set('hasDomSelection', !1), this._renderer = new Do(this.domConverter, this.document.selection), this._renderer.bind('isFocused').to(this.document), this._initialDomRootAttributes = new WeakMap(), this._observers = new Map(), this._ongoingChange = !1, this._postFixersInProgress = !1, this._renderingDisabled = !1, this._hasChangedSinceTheLastRendering = !1, this._writer = new so(this.document), this.addObserver(ya), this.addObserver(ja), this.addObserver(Da), this.addObserver(Ea), this.addObserver(Ra), this.addObserver(La), Wi.isAndroid && this.addObserver(za), (function (e) { e.document.on('keydown', To); }(this)), no(this), this.on('render', (() => { n._render(), n.document.fire('layoutChanged'), n._hasChangedSinceTheLastRendering = !1; })), this.listenTo(this.document.selection, 'change', (() => { n._hasChangedSinceTheLastRendering = !0; })); } return m(e, [{ key: 'attachDomRoot', value(e) { const t = this; const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 'main'; const r = this.document.getRoot(n); r._name = e.tagName.toLowerCase(); for (var i = {}, o = 0, a = Array.from(e.attributes); o < a.length; o++) { const s = a[o]; const l = s.name; const c = s.value; i[l] = c, l === 'class' ? this._writer.addClass(c.split(' '), r) : this._writer.setAttribute(l, c, r); } this._initialDomRootAttributes.set(e, i); const u = function () { t._writer.setAttribute('contenteditable', !r.isReadOnly, r), r.isReadOnly ? t._writer.addClass('ck-read-only', r) : t._writer.removeClass('ck-read-only', r); }; u(), this.domRoots.set(n, e), this.domConverter.bindElements(e, r), this._renderer.markToSync('children', r), this._renderer.markToSync('attributes', r), this._renderer.domDocuments.add(e.ownerDocument), r.on('change:children', ((e, n) => t._renderer.markToSync('children', n))), r.on('change:attributes', ((e, n) => t._renderer.markToSync('attributes', n))), r.on('change:text', ((e, n) => t._renderer.markToSync('text', n))), r.on('change:isReadOnly', (() => t.change(u))), r.on('change', (() => { t._hasChangedSinceTheLastRendering = !0; })); let h; const f = d(this._observers.values()); try { for (f.s(); !(h = f.n()).done;) { const m = h.value; m.observe(e, n); } } catch (v) { f.e(v); } finally { f.f(); } } }, { key: 'detachDomRoot', value(e) { const t = this.domRoots.get(e); Array.from(t.attributes).forEach(((e) => { const n = e.name; return t.removeAttribute(n); })); const n = this._initialDomRootAttributes.get(t); for (const r in n)t.setAttribute(r, n[r]); this.domRoots.delete(e), this.domConverter.unbindDomElement(t); } }, { key: 'getDomRoot', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 'main'; return this.domRoots.get(e); } }, { key: 'addObserver', value(e) { let t = this._observers.get(e); if (t) return t; t = new e(this), this._observers.set(e, t); let n; const r = d(this.domRoots); try { for (r.s(); !(n = r.n()).done;) { const i = u(n.value, 2); const o = i[0]; const a = i[1]; t.observe(a, o); } } catch (s) { r.e(s); } finally { r.f(); } return t.enable(), t; } }, { key: 'getObserver', value(e) { return this._observers.get(e); } }, { key: 'disableObservers', value() { let e; const t = d(this._observers.values()); try { for (t.s(); !(e = t.n()).done;)e.value.disable(); } catch (n) { t.e(n); } finally { t.f(); } } }, { key: 'enableObservers', value() { let e; const t = d(this._observers.values()); try { for (t.s(); !(e = t.n()).done;)e.value.enable(); } catch (n) { t.e(n); } finally { t.f(); } } }, { key: 'scrollToTheSelection', value() { const e = this.document.selection.getFirstRange(); e && qa({ target: this.domConverter.viewRangeToDom(e), viewportOffset: 20 }); } }, { key: 'focus', value() { if (!this.document.isFocused) { const e = this.document.selection.editableElement; e && (this.domConverter.focus(e), this.forceRender()); } } }, { key: 'change', value(e) { if (this.isRenderingInProgress || this._postFixersInProgress) throw new Ln.b('cannot-change-view-tree: Attempting to make changes to the view when it is in an incorrect state: rendering or post-fixers are in progress. This may cause some unexpected behavior and inconsistency between the DOM and the view.', this); try { if (this._ongoingChange) return e(this._writer); this._ongoingChange = !0; const t = e(this._writer); return this._ongoingChange = !1, !this._renderingDisabled && this._hasChangedSinceTheLastRendering && (this._postFixersInProgress = !0, this.document._callPostFixers(this._writer), this._postFixersInProgress = !1, this.fire('render')), t; } catch (e) { Ln.b.rethrowUnexpectedError(e, this); } } }, { key: 'forceRender', value() { this._hasChangedSinceTheLastRendering = !0, this.change((() => {})); } }, { key: 'destroy', value() { let e; const t = d(this._observers.values()); try { for (t.s(); !(e = t.n()).done;)e.value.destroy(); } catch (n) { t.e(n); } finally { t.f(); } this.document.destroy(), this.stopListening(); } }, { key: 'createPositionAt', value(e, t) { return Ii._createAt(e, t); } }, { key: 'createPositionAfter', value(e) { return Ii._createAfter(e); } }, { key: 'createPositionBefore', value(e) { return Ii._createBefore(e); } }, { key: 'createRange', value(e, t) { return new Mi(e, t); } }, { key: 'createRangeOn', value(e) { return Mi._createOn(e); } }, { key: 'createRangeIn', value(e) { return Mi._createIn(e); } }, { key: 'createSelection', value(e, t, n) { return new ji(e, t, n); } }, { key: '_disableRendering', value(e) { this._renderingDisabled = e, e == 0 && this.change((() => {})); } }, { key: '_render', value() { this.isRenderingInProgress = !0, this.disableObservers(), this._renderer.render(), this.enableObservers(), this.isRenderingInProgress = !1; } }]), e; }()); Qn(ts, ki); const ns = (function () { function e(t) { f(this, e), this.parent = null, this._attrs = hr(t); } return m(e, [{ key: 'isAttached', value() { return this.root.is('rootElement'); } }, { key: 'getPath', value() { for (var e = [], t = this; t.parent;)e.unshift(t.startOffset), t = t.parent; return e; } }, { key: 'getAncestors', value() { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { includeSelf: !1, parentFirst: !1 }, t = [], n = e.includeSelf ? this : this.parent; n;)t[e.parentFirst ? 'push' : 'unshift'](n), n = n.parent; return t; } }, { key: 'getCommonAncestor', value(e) { for (var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = this.getAncestors(t), r = e.getAncestors(t), i = 0; n[i] == r[i] && n[i];)i++; return i === 0 ? null : n[i - 1]; } }, { key: 'isBefore', value(e) { if (this == e) return !1; if (this.root !== e.root) return !1; const t = this.getPath(); const n = e.getPath(); const r = sr(t, n); switch (r) { case 'prefix': return !0; case 'extension': return !1; default: return t[r] < n[r]; } } }, { key: 'isAfter', value(e) { return this != e && this.root === e.root && !this.isBefore(e); } }, { key: 'hasAttribute', value(e) { return this._attrs.has(e); } }, { key: 'getAttribute', value(e) { return this._attrs.get(e); } }, { key: 'getAttributes', value() { return this._attrs.entries(); } }, { key: 'getAttributeKeys', value() { return this._attrs.keys(); } }, { key: 'toJSON', value() { const e = {}; return this._attrs.size && (e.attributes = Array.from(this._attrs).reduce(((e, t) => (e[t[0]] = t[1], e)), {})), e; } }, { key: 'is', value(e) { return e === 'node' || e === 'model:node'; } }, { key: '_clone', value() { return new e(this._attrs); } }, { key: '_remove', value() { this.parent._removeChildren(this.index); } }, { key: '_setAttribute', value(e, t) { this._attrs.set(e, t); } }, { key: '_setAttributesTo', value(e) { this._attrs = hr(e); } }, { key: '_removeAttribute', value(e) { return this._attrs.delete(e); } }, { key: '_clearAttributes', value() { this._attrs.clear(); } }, { key: 'index', get() { let e; if (!this.parent) return null; if ((e = this.parent.getChildIndex(this)) === null) throw new Ln.b("model-node-not-found-in-parent: The node's parent does not contain this node.", this); return e; } }, { key: 'startOffset', get() { let e; if (!this.parent) return null; if ((e = this.parent.getChildStartOffset(this)) === null) throw new Ln.b("model-node-not-found-in-parent: The node's parent does not contain this node.", this); return e; } }, { key: 'offsetSize', get() { return 1; } }, { key: 'endOffset', get() { return this.parent ? this.startOffset + this.offsetSize : null; } }, { key: 'nextSibling', get() { const e = this.index; return e !== null && this.parent.getChild(e + 1) || null; } }, { key: 'previousSibling', get() { const e = this.index; return e !== null && this.parent.getChild(e - 1) || null; } }, { key: 'root', get() { for (var e = this; e.parent;)e = e.parent; return e; } }]), e; }()); const rs = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, r))._data = e || '', i; } return m(n, [{ key: 'is', value(e) { return e === '$text' || e === 'model:$text' || e === 'text' || e === 'model:text' || e === 'node' || e === 'model:node'; } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return e.data = this.data, e; } }, { key: '_clone', value() { return new n(this.data, this.getAttributes()); } }, { key: 'offsetSize', get() { return this.data.length; } }, { key: 'data', get() { return this._data; } }], [{ key: 'fromJSON', value(e) { return new n(e.data, e.attributes); } }]), n; }(ns)); const is = (function () { function e(t, n, r) { if (f(this, e), this.textNode = t, n < 0 || n > t.offsetSize) throw new Ln.b('model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.', this); if (r < 0 || n + r > t.offsetSize) throw new Ln.b('model-textproxy-wrong-length: Given length value is incorrect.', this); this.data = t.data.substring(n, n + r), this.offsetInText = n; } return m(e, [{ key: 'is', value(e) { return e === '$textProxy' || e === 'model:$textProxy' || e === 'textProxy' || e === 'model:textProxy'; } }, { key: 'getPath', value() { const e = this.textNode.getPath(); return e.length > 0 && (e[e.length - 1] += this.offsetInText), e; } }, { key: 'getAncestors', value() { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { includeSelf: !1, parentFirst: !1 }, t = [], n = e.includeSelf ? this : this.parent; n;)t[e.parentFirst ? 'push' : 'unshift'](n), n = n.parent; return t; } }, { key: 'hasAttribute', value(e) { return this.textNode.hasAttribute(e); } }, { key: 'getAttribute', value(e) { return this.textNode.getAttribute(e); } }, { key: 'getAttributes', value() { return this.textNode.getAttributes(); } }, { key: 'getAttributeKeys', value() { return this.textNode.getAttributeKeys(); } }, { key: 'startOffset', get() { return this.textNode.startOffset !== null ? this.textNode.startOffset + this.offsetInText : null; } }, { key: 'offsetSize', get() { return this.data.length; } }, { key: 'endOffset', get() { return this.startOffset !== null ? this.startOffset + this.offsetSize : null; } }, { key: 'isPartial', get() { return this.offsetSize !== this.textNode.offsetSize; } }, { key: 'parent', get() { return this.textNode.parent; } }, { key: 'root', get() { return this.textNode.root; } }]), e; }()); const os = (function () { function e(t) { f(this, e), this._nodes = [], t && this._insertNodes(0, t); } return m(e, [{ key: Symbol.iterator, value() { return this._nodes[Symbol.iterator](); } }, { key: 'getNode', value(e) { return this._nodes[e] || null; } }, { key: 'getNodeIndex', value(e) { const t = this._nodes.indexOf(e); return t == -1 ? null : t; } }, { key: 'getNodeStartOffset', value(e) { const t = this.getNodeIndex(e); return t === null ? null : this._nodes.slice(0, t).reduce(((e, t) => e + t.offsetSize), 0); } }, { key: 'indexToOffset', value(e) { if (e == this._nodes.length) return this.maxOffset; const t = this._nodes[e]; if (!t) throw new Ln.b('model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.', this); return this.getNodeStartOffset(t); } }, { key: 'offsetToIndex', value(e) { let t; let n = 0; const r = d(this._nodes); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; if (e >= n && e < n + i.offsetSize) return this.getNodeIndex(i); n += i.offsetSize; } } catch (o) { r.e(o); } finally { r.f(); } if (n != e) throw new Ln.b('model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.', this, { offset: e, nodeList: this }); return this.length; } }, { key: '_insertNodes', value(e, t) { let n; let r; const i = d(t); try { for (i.s(); !(r = i.n()).done;) if (!(r.value instanceof ns)) throw new Ln.b('model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.', this); } catch (o) { i.e(o); } finally { i.f(); }(n = this._nodes).splice.apply(n, [e, 0].concat(c(t))); } }, { key: '_removeNodes', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; return this._nodes.splice(e, t); } }, { key: 'toJSON', value() { return this._nodes.map(((e) => e.toJSON())); } }, { key: 'length', get() { return this._nodes.length; } }, { key: 'maxOffset', get() { return this._nodes.reduce(((e, t) => e + t.offsetSize), 0); } }]), e; }()); const as = (function (e) { v(n, e); const t = g(n); function n(e, r, i) { let o; return f(this, n), (o = t.call(this, r)).name = e, o._children = new os(), i && o._insertChild(0, i), o; } return m(n, [{ key: 'is', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; return t ? t === this.name && (e === 'element' || e === 'model:element') : e === 'element' || e === 'model:element' || e === 'node' || e === 'model:node'; } }, { key: 'getChild', value(e) { return this._children.getNode(e); } }, { key: 'getChildren', value() { return this._children[Symbol.iterator](); } }, { key: 'getChildIndex', value(e) { return this._children.getNodeIndex(e); } }, { key: 'getChildStartOffset', value(e) { return this._children.getNodeStartOffset(e); } }, { key: 'offsetToIndex', value(e) { return this._children.offsetToIndex(e); } }, { key: 'getNodeByPath', value(e) { let t; let n = this; const r = d(e); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; n = n.getChild(n.offsetToIndex(i)); } } catch (o) { r.e(o); } finally { r.f(); } return n; } }, { key: 'findAncestor', value(e) { for (let t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { includeSelf: !1 }, n = t.includeSelf ? this : this.parent; n;) { if (n.name === e) return n; n = n.parent; } return null; } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); if (e.name = this.name, this._children.length > 0) { e.children = []; let t; const r = d(this._children); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; e.children.push(i.toJSON()); } } catch (s) { r.e(s); } finally { r.f(); } } return e; } }, { key: '_clone', value() { const e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; const t = e ? Array.from(this._children).map(((e) => e._clone(!0))) : null; return new n(this.name, this.getAttributes(), t); } }, { key: '_appendChild', value(e) { this._insertChild(this.childCount, e); } }, { key: '_insertChild', value(e, t) { let n; const r = (function (e) { return typeof e === 'string' ? [new rs(e)] : (Kn(e) || (e = [e]), Array.from(e).map(((e) => (typeof e === 'string' ? new rs(e) : e instanceof is ? new rs(e.data, e.getAttributes()) : e)))); }(t)); const i = d(r); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; o.parent !== null && o._remove(), o.parent = this; } } catch (a) { i.e(a); } finally { i.f(); } this._children._insertNodes(e, r); } }, { key: '_removeChildren', value(e) { let t; const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; const r = this._children._removeNodes(e, n); const i = d(r); try { for (i.s(); !(t = i.n()).done;) { const o = t.value; o.parent = null; } } catch (a) { i.e(a); } finally { i.f(); } return r; } }, { key: 'childCount', get() { return this._children.length; } }, { key: 'maxOffset', get() { return this._children.maxOffset; } }, { key: 'isEmpty', get() { return this.childCount === 0; } }], [{ key: 'fromJSON', value(e) { let t = null; if (e.children) { t = []; let r; const i = d(e.children); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; o.name ? t.push(n.fromJSON(o)) : t.push(rs.fromJSON(o)); } } catch (a) { i.e(a); } finally { i.f(); } } return new n(e.name, e.attributes, t); } }]), n; }(ns)); const ss = (function () { function e() { const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; if (f(this, e), !t.boundaries && !t.startPosition) throw new Ln.b('model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.', null); const n = t.direction || 'forward'; if (n != 'forward' && n != 'backward') throw new Ln.b('model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.', t, { direction: n }); this.direction = n, this.boundaries = t.boundaries || null, t.startPosition ? this.position = t.startPosition.clone() : this.position = cs._createAt(this.boundaries[this.direction == 'backward' ? 'end' : 'start']), this.position.stickiness = 'toNone', this.singleCharacters = !!t.singleCharacters, this.shallow = !!t.shallow, this.ignoreElementEnd = !!t.ignoreElementEnd, this._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null, this._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null, this._visitedParent = this.position.parent; } return m(e, [{ key: Symbol.iterator, value() { return this; } }, { key: 'skip', value(e) { let t; let n; let r; let i; do { r = this.position, i = this._visitedParent; const o = this.next(); t = o.done, n = o.value; } while (!t && e(n)); t || (this.position = r, this._visitedParent = i); } }, { key: 'next', value() { return this.direction == 'forward' ? this._next() : this._previous(); } }, { key: '_next', value() { const e = this.position; const t = this.position.clone(); const n = this._visitedParent; if (n.parent === null && t.offset === n.maxOffset) return { done: !0 }; if (n === this._boundaryEndParent && t.offset == this.boundaries.end.offset) return { done: !0 }; const r = t.parent; const i = us(t, r); const o = i || ds(t, r, i); if (o instanceof as) return this.shallow ? t.offset++ : (t.path.push(0), this._visitedParent = o), this.position = t, ls('elementStart', o, e, t, 1); if (o instanceof rs) { let a; if (this.singleCharacters)a = 1; else { let s = o.endOffset; this._boundaryEndParent == n && this.boundaries.end.offset < s && (s = this.boundaries.end.offset), a = s - t.offset; } const l = t.offset - o.startOffset; const c = new is(o, l, a); return t.offset += a, this.position = t, ls('text', c, e, t, a); } return t.path.pop(), t.offset++, this.position = t, this._visitedParent = n.parent, this.ignoreElementEnd ? this._next() : ls('elementEnd', n, e, t); } }, { key: '_previous', value() { const e = this.position; const t = this.position.clone(); const n = this._visitedParent; if (n.parent === null && t.offset === 0) return { done: !0 }; if (n == this._boundaryStartParent && t.offset == this.boundaries.start.offset) return { done: !0 }; const r = t.parent; const i = us(t, r); const o = i || hs(t, r, i); if (o instanceof as) return t.offset--, this.shallow ? (this.position = t, ls('elementStart', o, e, t, 1)) : (t.path.push(o.maxOffset), this.position = t, this._visitedParent = o, this.ignoreElementEnd ? this._previous() : ls('elementEnd', o, e, t)); if (o instanceof rs) { let a; if (this.singleCharacters)a = 1; else { let s = o.startOffset; this._boundaryStartParent == n && this.boundaries.start.offset > s && (s = this.boundaries.start.offset), a = t.offset - s; } const l = t.offset - o.startOffset; const c = new is(o, l - a, a); return t.offset -= a, this.position = t, ls('text', c, e, t, a); } return t.path.pop(), this.position = t, this._visitedParent = n.parent, ls('elementStart', n, e, t, 1); } }]), e; }()); function ls(e, t, n, r, i) {
            return {
              done: !1,
              value: {
                type: e, item: t, previousPosition: n, nextPosition: r, length: i,
              },
            };
          } var cs = (function () { function e(t, n) { const r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 'toNone'; if (f(this, e), !t.is('element') && !t.is('documentFragment')) throw new Ln.b('model-position-root-invalid: Position root invalid.', t); if (!(n instanceof Array) || n.length === 0) throw new Ln.b('model-position-path-incorrect-format: Position path must be an array with at least one item.', t, { path: n }); t.is('rootElement') ? n = n.slice() : (n = [].concat(c(t.getPath()), c(n)), t = t.root), this.root = t, this.path = n, this.stickiness = r; } return m(e, [{ key: 'compareWith', value(e) { if (this.root != e.root) return 'different'; const t = sr(this.path, e.path); switch (t) { case 'same': return 'same'; case 'prefix': return 'before'; case 'extension': return 'after'; default: return this.path[t] < e.path[t] ? 'before' : 'after'; } } }, { key: 'getLastMatchingPosition', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; t.startPosition = this; const n = new ss(t); return n.skip(e), n.position; } }, { key: 'getParentPath', value() { return this.path.slice(0, -1); } }, { key: 'getAncestors', value() { const e = this.parent; return e.is('documentFragment') ? [e] : e.getAncestors({ includeSelf: !0 }); } }, { key: 'findAncestor', value(e) { const t = this.parent; return t.is('element') ? t.findAncestor(e, { includeSelf: !0 }) : null; } }, { key: 'getCommonPath', value(e) { if (this.root != e.root) return []; const t = sr(this.path, e.path); const n = typeof t === 'string' ? Math.min(this.path.length, e.path.length) : t; return this.path.slice(0, n); } }, { key: 'getCommonAncestor', value(e) { for (var t = this.getAncestors(), n = e.getAncestors(), r = 0; t[r] == n[r] && t[r];)r++; return r === 0 ? null : t[r - 1]; } }, { key: 'getShiftedBy', value(e) { const t = this.clone(); const n = t.offset + e; return t.offset = n < 0 ? 0 : n, t; } }, { key: 'isAfter', value(e) { return this.compareWith(e) == 'after'; } }, { key: 'isBefore', value(e) { return this.compareWith(e) == 'before'; } }, { key: 'isEqual', value(e) { return this.compareWith(e) == 'same'; } }, { key: 'isTouching', value(t) { let n = null; let r = null; switch (this.compareWith(t)) { case 'same': return !0; case 'before': n = e._createAt(this), r = e._createAt(t); break; case 'after': n = e._createAt(t), r = e._createAt(this); break; default: return !1; } for (let i = n.parent; n.path.length + r.path.length;) { if (n.isEqual(r)) return !0; if (n.path.length > r.path.length) { if (n.offset !== i.maxOffset) return !1; n.path = n.path.slice(0, -1), i = i.parent, n.offset++; } else { if (r.offset !== 0) return !1; r.path = r.path.slice(0, -1); } } } }, { key: 'is', value(e) { return e === 'position' || e === 'model:position'; } }, { key: 'hasSameParentAs', value(e) { return this.root === e.root && sr(this.getParentPath(), e.getParentPath()) == 'same'; } }, { key: 'getTransformedByOperation', value(t) { let n; switch (t.type) { case 'insert': n = this._getTransformedByInsertOperation(t); break; case 'move': case 'remove': case 'reinsert': n = this._getTransformedByMoveOperation(t); break; case 'split': n = this._getTransformedBySplitOperation(t); break; case 'merge': n = this._getTransformedByMergeOperation(t); break; default: n = e._createAt(this); } return n; } }, { key: '_getTransformedByInsertOperation', value(e) { return this._getTransformedByInsertion(e.position, e.howMany); } }, { key: '_getTransformedByMoveOperation', value(e) { return this._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany); } }, { key: '_getTransformedBySplitOperation', value(e) { const t = e.movedRange; return t.containsPosition(this) || t.start.isEqual(this) && this.stickiness == 'toNext' ? this._getCombined(e.splitPosition, e.moveTargetPosition) : e.graveyardPosition ? this._getTransformedByMove(e.graveyardPosition, e.insertionPosition, 1) : this._getTransformedByInsertion(e.insertionPosition, 1); } }, { key: '_getTransformedByMergeOperation', value(t) { let n; const r = t.movedRange; return r.containsPosition(this) || r.start.isEqual(this) ? (n = this._getCombined(t.sourcePosition, t.targetPosition), t.sourcePosition.isBefore(t.targetPosition) && (n = n._getTransformedByDeletion(t.deletionPosition, 1))) : n = this.isEqual(t.deletionPosition) ? e._createAt(t.deletionPosition) : this._getTransformedByMove(t.deletionPosition, t.graveyardPosition, 1), n; } }, { key: '_getTransformedByDeletion', value(t, n) { const r = e._createAt(this); if (this.root != t.root) return r; if (sr(t.getParentPath(), this.getParentPath()) == 'same') { if (t.offset < this.offset) { if (t.offset + n > this.offset) return null; r.offset -= n; } } else if (sr(t.getParentPath(), this.getParentPath()) == 'prefix') { const i = t.path.length - 1; if (t.offset <= this.path[i]) { if (t.offset + n > this.path[i]) return null; r.path[i] -= n; } } return r; } }, { key: '_getTransformedByInsertion', value(t, n) { const r = e._createAt(this); if (this.root != t.root) return r; if (sr(t.getParentPath(), this.getParentPath()) == 'same')(t.offset < this.offset || t.offset == this.offset && this.stickiness != 'toPrevious') && (r.offset += n); else if (sr(t.getParentPath(), this.getParentPath()) == 'prefix') { const i = t.path.length - 1; t.offset <= this.path[i] && (r.path[i] += n); } return r; } }, { key: '_getTransformedByMove', value(t, n, r) { if (n = n._getTransformedByDeletion(t, r), t.isEqual(n)) return e._createAt(this); const i = this._getTransformedByDeletion(t, r); return i === null || t.isEqual(this) && this.stickiness == 'toNext' || t.getShiftedBy(r).isEqual(this) && this.stickiness == 'toPrevious' ? this._getCombined(t, n) : i._getTransformedByInsertion(n, r); } }, { key: '_getCombined', value(t, n) { const r = t.path.length - 1; const i = e._createAt(n); return i.stickiness = this.stickiness, i.offset = i.offset + this.path[r] - t.offset, i.path = [].concat(c(i.path), c(this.path.slice(r + 1))), i; } }, { key: 'toJSON', value() { return { root: this.root.toJSON(), path: Array.from(this.path), stickiness: this.stickiness }; } }, { key: 'clone', value() { return new this.constructor(this.root, this.path, this.stickiness); } }, { key: 'offset', get() { return this.path[this.path.length - 1]; }, set(e) { this.path[this.path.length - 1] = e; } }, { key: 'parent', get() { for (var e = this.root, t = 0; t < this.path.length - 1; t++) if (!(e = e.getChild(e.offsetToIndex(this.path[t])))) throw new Ln.b("model-position-path-incorrect: The position's path is incorrect.", this, { position: this }); if (e.is('$text')) throw new Ln.b("model-position-path-incorrect: The position's path is incorrect.", this, { position: this }); return e; } }, { key: 'index', get() { return this.parent.offsetToIndex(this.offset); } }, { key: 'textNode', get() { return us(this, this.parent); } }, { key: 'nodeAfter', get() { const e = this.parent; return ds(this, e, us(this, e)); } }, { key: 'nodeBefore', get() { const e = this.parent; return hs(this, e, us(this, e)); } }, { key: 'isAtStart', get() { return this.offset === 0; } }, { key: 'isAtEnd', get() { return this.offset == this.parent.maxOffset; } }], [{ key: '_createAt', value(t, n) { const r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 'toNone'; if (t instanceof e) return new e(t.root, t.path, t.stickiness); const i = t; if (n == 'end')n = i.maxOffset; else { if (n == 'before') return this._createBefore(i, r); if (n == 'after') return this._createAfter(i, r); if (n !== 0 && !n) throw new Ln.b('model-createPositionAt-offset-required: Model#createPositionAt() requires the offset when the first parameter is a model item.', [this, t]); } if (!i.is('element') && !i.is('documentFragment')) throw new Ln.b('model-position-parent-incorrect: Position parent have to be a element or document fragment.', [this, t]); const o = i.getPath(); return o.push(n), new this(i.root, o, r); } }, { key: '_createAfter', value(e, t) { if (!e.parent) throw new Ln.b('model-position-after-root: You cannot make a position after root.', [this, e], { root: e }); return this._createAt(e.parent, e.endOffset, t); } }, { key: '_createBefore', value(e, t) { if (!e.parent) throw new Ln.b('model-position-before-root: You cannot make a position before root.', e, { root: e }); return this._createAt(e.parent, e.startOffset, t); } }, { key: 'fromJSON', value(t, n) { if (t.root === '$graveyard') { const r = new e(n.graveyard, t.path); return r.stickiness = t.stickiness, r; } if (!n.getRoot(t.root)) throw new Ln.b('model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.', n, { rootName: t.root }); return new e(n.getRoot(t.root), t.path, t.stickiness); } }]), e; }()); function us(e, t) { const n = t.getChild(t.offsetToIndex(e.offset)); return n && n.is('$text') && n.startOffset < e.offset ? n : null; } function ds(e, t, n) { return n !== null ? null : t.getChild(t.offsetToIndex(e.offset)); } function hs(e, t, n) { return n !== null ? null : t.getChild(t.offsetToIndex(e.offset) - 1); } const fs = (function () { function e(t) { const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; f(this, e), this.start = cs._createAt(t), this.end = n ? cs._createAt(n) : cs._createAt(t), this.start.stickiness = this.isCollapsed ? 'toNone' : 'toNext', this.end.stickiness = this.isCollapsed ? 'toNone' : 'toPrevious'; } return m(e, [{ key: Symbol.iterator, value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return e.delegateYield(new ss({ boundaries: this, ignoreElementEnd: !0 }), 't0', 1); case 1: case 'end': return e.stop(); } }), e, this); })) }, { key: 'containsPosition', value(e) { return e.isAfter(this.start) && e.isBefore(this.end); } }, { key: 'containsRange', value(e) { let t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; e.isCollapsed && (t = !1); const n = this.containsPosition(e.start) || t && this.start.isEqual(e.start); const r = this.containsPosition(e.end) || t && this.end.isEqual(e.end); return n && r; } }, { key: 'containsItem', value(e) { const t = cs._createBefore(e); return this.containsPosition(t) || this.start.isEqual(t); } }, { key: 'is', value(e) { return e === 'range' || e === 'model:range'; } }, { key: 'isEqual', value(e) { return this.start.isEqual(e.start) && this.end.isEqual(e.end); } }, { key: 'isIntersecting', value(e) { return this.start.isBefore(e.end) && this.end.isAfter(e.start); } }, { key: 'getDifference', value(t) { const n = []; return this.isIntersecting(t) ? (this.containsPosition(t.start) && n.push(new e(this.start, t.start)), this.containsPosition(t.end) && n.push(new e(t.end, this.end))) : n.push(new e(this.start, this.end)), n; } }, { key: 'getIntersection', value(t) { if (this.isIntersecting(t)) { let n = this.start; let r = this.end; return this.containsPosition(t.start) && (n = t.start), this.containsPosition(t.end) && (r = t.end), new e(n, r); } return null; } }, { key: 'getJoined', value(t) { const n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; let r = this.isIntersecting(t); if (r || (r = this.start.isBefore(t.start) ? n ? this.end.isTouching(t.start) : this.end.isEqual(t.start) : n ? t.end.isTouching(this.start) : t.end.isEqual(this.start)), !r) return null; let i = this.start; let o = this.end; return t.start.isBefore(i) && (i = t.start), t.end.isAfter(o) && (o = t.end), new e(i, o); } }, { key: 'getMinimalFlatRanges', value() { for (var t = [], n = this.start.getCommonPath(this.end).length, r = cs._createAt(this.start), i = r.parent; r.path.length > n + 1;) { const o = i.maxOffset - r.offset; o !== 0 && t.push(new e(r, r.getShiftedBy(o))), r.path = r.path.slice(0, -1), r.offset++, i = i.parent; } for (;r.path.length <= this.end.path.length;) { const a = this.end.path[r.path.length - 1]; const s = a - r.offset; s !== 0 && t.push(new e(r, r.getShiftedBy(s))), r.offset = a, r.path.push(0); } return t; } }, { key: 'getWalker', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return e.boundaries = this, new ss(e); } }, { key: 'getItems', value: h.mark((function e() { let t; let n; let r; let i; let o; const a = arguments; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: (t = a.length > 0 && void 0 !== a[0] ? a[0] : {}).boundaries = this, t.ignoreElementEnd = !0, n = new ss(t), r = d(n), e.prev = 5, r.s(); case 7: if ((i = r.n()).done) { e.next = 13; break; } return o = i.value, e.next = 11, o.item; case 11: e.next = 7; break; case 13: e.next = 18; break; case 15: e.prev = 15, e.t0 = e.catch(5), r.e(e.t0); case 18: return e.prev = 18, r.f(), e.finish(18); case 21: case 'end': return e.stop(); } }), e, this, [[5, 15, 18, 21]]); })) }, { key: 'getPositions', value: h.mark((function e() { let t; let n; let r; let i; let o; const a = arguments; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return (t = a.length > 0 && void 0 !== a[0] ? a[0] : {}).boundaries = this, n = new ss(t), e.next = 5, n.position; case 5: r = d(n), e.prev = 6, r.s(); case 8: if ((i = r.n()).done) { e.next = 14; break; } return o = i.value, e.next = 12, o.nextPosition; case 12: e.next = 8; break; case 14: e.next = 19; break; case 16: e.prev = 16, e.t0 = e.catch(6), r.e(e.t0); case 19: return e.prev = 19, r.f(), e.finish(19); case 22: case 'end': return e.stop(); } }), e, this, [[6, 16, 19, 22]]); })) }, { key: 'getTransformedByOperation', value(t) { switch (t.type) { case 'insert': return this._getTransformedByInsertOperation(t); case 'move': case 'remove': case 'reinsert': return this._getTransformedByMoveOperation(t); case 'split': return [this._getTransformedBySplitOperation(t)]; case 'merge': return [this._getTransformedByMergeOperation(t)]; } return [new e(this.start, this.end)]; } }, { key: 'getTransformedByOperations', value(t) { let n; const r = [new e(this.start, this.end)]; const i = d(t); try { for (i.s(); !(n = i.n()).done;) for (let o = n.value, a = 0; a < r.length; a++) { const s = r[a].getTransformedByOperation(o); r.splice.apply(r, [a, 1].concat(c(s))), a += s.length - 1; } } catch (m) { i.e(m); } finally { i.f(); } for (let l = 0; l < r.length; l++) for (let u = r[l], h = l + 1; h < r.length; h++) { const f = r[h]; (u.containsRange(f) || f.containsRange(u) || u.isEqual(f)) && r.splice(h, 1); } return r; } }, { key: 'getCommonAncestor', value() { return this.start.getCommonAncestor(this.end); } }, { key: 'getContainedElement', value() { if (this.isCollapsed) return null; const e = this.start.nodeAfter; const t = this.end.nodeBefore; return e && e.is('element') && e === t ? e : null; } }, { key: 'toJSON', value() { return { start: this.start.toJSON(), end: this.end.toJSON() }; } }, { key: 'clone', value() { return new this.constructor(this.start, this.end); } }, { key: '_getTransformedByInsertOperation', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return this._getTransformedByInsertion(e.position, e.howMany, t); } }, { key: '_getTransformedByMoveOperation', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; const n = e.sourcePosition; const r = e.howMany; const i = e.targetPosition; return this._getTransformedByMove(n, i, r, t); } }, { key: '_getTransformedBySplitOperation', value(t) { const n = this.start._getTransformedBySplitOperation(t); let r = this.end._getTransformedBySplitOperation(t); return this.end.isEqual(t.insertionPosition) && (r = this.end.getShiftedBy(1)), n.root != r.root && (r = this.end.getShiftedBy(-1)), new e(n, r); } }, { key: '_getTransformedByMergeOperation', value(t) { if (this.start.isEqual(t.targetPosition) && this.end.isEqual(t.deletionPosition)) return new e(this.start); let n = this.start._getTransformedByMergeOperation(t); let r = this.end._getTransformedByMergeOperation(t); return n.root != r.root && (r = this.end.getShiftedBy(-1)), n.isAfter(r) ? (t.sourcePosition.isBefore(t.targetPosition) ? (n = cs._createAt(r)).offset = 0 : (t.deletionPosition.isEqual(n) || (r = t.deletionPosition), n = t.targetPosition), new e(n, r)) : new e(n, r); } }, { key: '_getTransformedByInsertion', value(t, n) { const r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; if (r && this.containsPosition(t)) return [new e(this.start, t), new e(t.getShiftedBy(n), this.end._getTransformedByInsertion(t, n))]; const i = new e(this.start, this.end); return i.start = i.start._getTransformedByInsertion(t, n), i.end = i.end._getTransformedByInsertion(t, n), [i]; } }, { key: '_getTransformedByMove', value(t, n, r) { const i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; if (this.isCollapsed) { const o = this.start._getTransformedByMove(t, n, r); return [new e(o)]; } let a; const s = e._createFromPositionAndShift(t, r); const l = n._getTransformedByDeletion(t, r); if (this.containsPosition(n) && !i && (s.containsPosition(this.start) || s.containsPosition(this.end))) { const c = this.start._getTransformedByMove(t, n, r); const u = this.end._getTransformedByMove(t, n, r); return [new e(c, u)]; } const d = this.getDifference(s); let h = null; const f = this.getIntersection(s); if (d.length == 1 ? h = new e(d[0].start._getTransformedByDeletion(t, r), d[0].end._getTransformedByDeletion(t, r)) : d.length == 2 && (h = new e(this.start, this.end._getTransformedByDeletion(t, r))), a = h ? h._getTransformedByInsertion(l, r, f !== null || i) : [], f) { const m = new e(f.start._getCombined(s.start, l), f.end._getCombined(s.start, l)); a.length == 2 ? a.splice(1, 0, m) : a.push(m); } return a; } }, { key: '_getTransformedByDeletion', value(t, n) { let r = this.start._getTransformedByDeletion(t, n); let i = this.end._getTransformedByDeletion(t, n); return r == null && i == null ? null : (r == null && (r = t), i == null && (i = t), new e(r, i)); } }, { key: 'isCollapsed', get() { return this.start.isEqual(this.end); } }, { key: 'isFlat', get() { return sr(this.start.getParentPath(), this.end.getParentPath()) == 'same'; } }, { key: 'root', get() { return this.start.root; } }], [{ key: '_createFromPositionAndShift', value(e, t) { const n = e; const r = e.getShiftedBy(t); return t > 0 ? new this(n, r) : new this(r, n); } }, { key: '_createIn', value(e) { return new this(cs._createAt(e, 0), cs._createAt(e, e.maxOffset)); } }, { key: '_createOn', value(e) { return this._createFromPositionAndShift(cs._createBefore(e), e.offsetSize); } }, { key: '_createFromRanges', value(e) { if (e.length === 0) throw new Ln.b('range-create-from-ranges-empty-array: At least one range has to be passed.', null); if (e.length == 1) return e[0].clone(); const t = e[0]; e.sort(((e, t) => (e.start.isAfter(t.start) ? 1 : -1))); const n = e.indexOf(t); const r = new this(t.start, t.end); if (n > 0) for (let i = n - 1; e[i].end.isEqual(r.start); i++)r.start = cs._createAt(e[i].start); for (let o = n + 1; o < e.length && e[o].start.isEqual(r.end); o++)r.end = cs._createAt(e[o].end); return r; } }, { key: 'fromJSON', value(e, t) { return new this(cs.fromJSON(e.start, t), cs.fromJSON(e.end, t)); } }]), e; }()); const ms = (function () { function e() { const t = this; f(this, e), this._modelToViewMapping = new WeakMap(), this._viewToModelMapping = new WeakMap(), this._viewToModelLengthCallbacks = new Map(), this._markerNameToElements = new Map(), this._elementToMarkerNames = new Map(), this._unboundMarkerNames = new Set(), this.on('modelToViewPosition', ((e, n) => { if (!n.viewPosition) { const r = t._modelToViewMapping.get(n.modelPosition.parent); n.viewPosition = t.findPositionIn(r, n.modelPosition.offset); } }), { priority: 'low' }), this.on('viewToModelPosition', ((e, n) => { if (!n.modelPosition) { const r = t.findMappedViewAncestor(n.viewPosition); const i = t._viewToModelMapping.get(r); const o = t._toModelOffset(n.viewPosition.parent, n.viewPosition.offset, r); n.modelPosition = cs._createAt(i, o); } }), { priority: 'low' }); } return m(e, [{ key: 'bindElements', value(e, t) { this._modelToViewMapping.set(e, t), this._viewToModelMapping.set(t, e); } }, { key: 'unbindViewElement', value(e) { const t = this.toModelElement(e); if (this._viewToModelMapping.delete(e), this._elementToMarkerNames.has(e)) { let n; const r = d(this._elementToMarkerNames.get(e)); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; this._unboundMarkerNames.add(i); } } catch (o) { r.e(o); } finally { r.f(); } } this._modelToViewMapping.get(t) == e && this._modelToViewMapping.delete(t); } }, { key: 'unbindModelElement', value(e) { const t = this.toViewElement(e); this._modelToViewMapping.delete(e), this._viewToModelMapping.get(t) == e && this._viewToModelMapping.delete(t); } }, { key: 'bindElementToMarker', value(e, t) { const n = this._markerNameToElements.get(t) || new Set(); n.add(e); const r = this._elementToMarkerNames.get(e) || new Set(); r.add(t), this._markerNameToElements.set(t, n), this._elementToMarkerNames.set(e, r); } }, { key: 'unbindElementFromMarkerName', value(e, t) { const n = this._markerNameToElements.get(t); n && (n.delete(e), n.size == 0 && this._markerNameToElements.delete(t)); const r = this._elementToMarkerNames.get(e); r && (r.delete(t), r.size == 0 && this._elementToMarkerNames.delete(e)); } }, { key: 'flushUnboundMarkerNames', value() { const e = Array.from(this._unboundMarkerNames); return this._unboundMarkerNames.clear(), e; } }, { key: 'clearBindings', value() { this._modelToViewMapping = new WeakMap(), this._viewToModelMapping = new WeakMap(), this._markerNameToElements = new Map(), this._elementToMarkerNames = new Map(), this._unboundMarkerNames = new Set(); } }, { key: 'toModelElement', value(e) { return this._viewToModelMapping.get(e); } }, { key: 'toViewElement', value(e) { return this._modelToViewMapping.get(e); } }, { key: 'toModelRange', value(e) { return new fs(this.toModelPosition(e.start), this.toModelPosition(e.end)); } }, { key: 'toViewRange', value(e) { return new Mi(this.toViewPosition(e.start), this.toViewPosition(e.end)); } }, { key: 'toModelPosition', value(e) { const t = { viewPosition: e, mapper: this }; return this.fire('viewToModelPosition', t), t.modelPosition; } }, { key: 'toViewPosition', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { isPhantom: !1 }; const n = { modelPosition: e, mapper: this, isPhantom: t.isPhantom }; return this.fire('modelToViewPosition', n), n.viewPosition; } }, { key: 'markerNameToElements', value(e) { const t = this._markerNameToElements.get(e); if (!t) return null; let n; const r = new Set(); const i = d(t); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; if (o.is('attributeElement')) { var a; const s = d(o.getElementsWithSameId()); try { for (s.s(); !(a = s.n()).done;) { const l = a.value; r.add(l); } } catch (c) { s.e(c); } finally { s.f(); } } else r.add(o); } } catch (c) { i.e(c); } finally { i.f(); } return r; } }, { key: 'registerViewToModelLength', value(e, t) { this._viewToModelLengthCallbacks.set(e, t); } }, { key: 'findMappedViewAncestor', value(e) { for (var t = e.parent; !this._viewToModelMapping.has(t);)t = t.parent; return t; } }, { key: '_toModelOffset', value(e, t, n) { if (n != e) return this._toModelOffset(e.parent, e.index, n) + this._toModelOffset(e, t, e); if (e.is('$text')) return t; for (var r = 0, i = 0; i < t; i++)r += this.getModelLength(e.getChild(i)); return r; } }, { key: 'getModelLength', value(e) { if (this._viewToModelLengthCallbacks.get(e.name)) return this._viewToModelLengthCallbacks.get(e.name)(e); if (this._viewToModelMapping.has(e)) return 1; if (e.is('$text')) return e.data.length; if (e.is('uiElement')) return 0; let t; let n = 0; const r = d(e.getChildren()); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; n += this.getModelLength(i); } } catch (o) { r.e(o); } finally { r.f(); } return n; } }, { key: 'findPositionIn', value(e, t) { let n; let r = 0; let i = 0; let o = 0; if (e.is('$text')) return new Ii(e, t); for (;i < t;)n = e.getChild(o), i += r = this.getModelLength(n), o++; return i == t ? this._moveViewPositionToTextNode(new Ii(e, o)) : this.findPositionIn(n, t - (i - r)); } }, { key: '_moveViewPositionToTextNode', value(e) { const t = e.nodeBefore; const n = e.nodeAfter; return t instanceof ur ? new Ii(t, t.data.length) : n instanceof ur ? new Ii(n, 0) : e; } }]), e; }()); Qn(ms, Vn); const vs = (function () { function e() { f(this, e), this._consumable = new Map(), this._textProxyRegistry = new Map(); } return m(e, [{ key: 'add', value(e, t) { t = gs(t), e instanceof is && (e = this._getSymbolForTextProxy(e)), this._consumable.has(e) || this._consumable.set(e, new Map()), this._consumable.get(e).set(t, !0); } }, { key: 'consume', value(e, t) { return t = gs(t), e instanceof is && (e = this._getSymbolForTextProxy(e)), !!this.test(e, t) && (this._consumable.get(e).set(t, !1), !0); } }, { key: 'test', value(e, t) { t = gs(t), e instanceof is && (e = this._getSymbolForTextProxy(e)); const n = this._consumable.get(e); if (void 0 === n) return null; const r = n.get(t); return void 0 === r ? null : r; } }, { key: 'revert', value(e, t) { t = gs(t), e instanceof is && (e = this._getSymbolForTextProxy(e)); const n = this.test(e, t); return !1 === n ? (this._consumable.get(e).set(t, !0), !0) : !0 !== n && null; } }, { key: '_getSymbolForTextProxy', value(e) { let t = null; const n = this._textProxyRegistry.get(e.startOffset); if (n) { const r = n.get(e.endOffset); r && (t = r.get(e.parent)); } return t || (t = this._addSymbolForTextProxy(e.startOffset, e.endOffset, e.parent)), t; } }, { key: '_addSymbolForTextProxy', value(e, t, n) { let r; let i; const o = Symbol('textProxySymbol'); return (r = this._textProxyRegistry.get(e)) || (r = new Map(), this._textProxyRegistry.set(e, r)), (i = r.get(t)) || (i = new Map(), r.set(t, i)), i.set(n, o), o; } }]), e; }()); function gs(e) { const t = e.split(':'); return t.length > 1 ? `${t[0]}:${t[1]}` : t[0]; } const ps = (function () {
            function e(t) { f(this, e), this.conversionApi = fi({ dispatcher: this }, t); } return m(e, [{ key: 'convertChanges', value(e, t, n) { let r; const i = d(e.getMarkersToRemove()); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; this.convertMarkerRemove(o.name, o.range, n); } } catch (p) { i.e(p); } finally { i.f(); } let a; const s = d(e.getChanges()); try { for (s.s(); !(a = s.n()).done;) { const l = a.value; l.type == 'insert' ? this.convertInsert(fs._createFromPositionAndShift(l.position, l.length), n) : l.type == 'remove' ? this.convertRemove(l.position, l.length, l.name, n) : this.convertAttribute(l.range, l.attributeKey, l.attributeOldValue, l.attributeNewValue, n); } } catch (p) { s.e(p); } finally { s.f(); } let c; const u = d(this.conversionApi.mapper.flushUnboundMarkerNames()); try { for (u.s(); !(c = u.n()).done;) { const h = c.value; const f = t.get(h).getRange(); this.convertMarkerRemove(h, f, n), this.convertMarkerAdd(h, f, n); } } catch (p) { u.e(p); } finally { u.f(); } let m; const v = d(e.getMarkersToAdd()); try { for (v.s(); !(m = v.n()).done;) { const g = m.value; this.convertMarkerAdd(g.name, g.range, n); } } catch (p) { v.e(p); } finally { v.f(); } } }, { key: 'convertInsert', value(e, t) { this.conversionApi.writer = t, this.conversionApi.consumable = this._createInsertConsumable(e); let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; const o = i.item; const a = { item: o, range: fs._createFromPositionAndShift(i.previousPosition, i.length) }; this._testAndFire('insert', a); var s; const l = d(o.getAttributeKeys()); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; a.attributeKey = c, a.attributeOldValue = null, a.attributeNewValue = o.getAttribute(c), this._testAndFire('attribute:'.concat(c), a); } } catch (u) { l.e(u); } finally { l.f(); } } } catch (u) { r.e(u); } finally { r.f(); } this._clearConversionApi(); } }, { key: 'convertRemove', value(e, t, n, r) { this.conversionApi.writer = r, this.fire(`remove:${n}`, { position: e, length: t }, this.conversionApi), this._clearConversionApi(); } }, {
              key: 'convertAttribute',
              value(e, t, n, r, i) {
                this.conversionApi.writer = i, this.conversionApi.consumable = this._createConsumableForRange(e, 'attribute:'.concat(t)); let o; const a = d(e); try {
                  for (a.s(); !(o = a.n()).done;) {
                    const s = o.value; const l = {
                      item: s.item, range: fs._createFromPositionAndShift(s.previousPosition, s.length), attributeKey: t, attributeOldValue: n, attributeNewValue: r,
                    }; this._testAndFire('attribute:'.concat(t), l);
                  }
                } catch (c) { a.e(c); } finally { a.f(); } this._clearConversionApi();
              },
            }, {
              key: 'convertSelection',
              value(e, t, n) {
                const r = Array.from(t.getMarkersAtPosition(e.getFirstPosition())); if (this.conversionApi.writer = n, this.conversionApi.consumable = this._createSelectionConsumable(e, r), this.fire('selection', { selection: e }, this.conversionApi), e.isCollapsed) {
                  for (let i = 0, o = r; i < o.length; i++) { const a = o[i]; const s = a.getRange(); if (ks(e.getFirstPosition(), a, this.conversionApi.mapper)) { const l = { item: e, markerName: a.name, markerRange: s }; this.conversionApi.consumable.test(e, `addMarker:${a.name}`) && this.fire(`addMarker:${a.name}`, l, this.conversionApi); } } let c; const u = d(e.getAttributeKeys()); try {
                    for (u.s(); !(c = u.n()).done;) {
                      const h = c.value; const f = {
                        item: e, range: e.getFirstRange(), attributeKey: h, attributeOldValue: null, attributeNewValue: e.getAttribute(h),
                      }; this.conversionApi.consumable.test(e, `attribute:${f.attributeKey}`) && this.fire(`attribute:${f.attributeKey}:$text`, f, this.conversionApi);
                    }
                  } catch (m) { u.e(m); } finally { u.f(); } this._clearConversionApi();
                }
              },
            }, {
              key: 'convertMarkerAdd',
              value(e, t, n) {
                if (t.root.document && t.root.rootName != '$graveyard') {
                  this.conversionApi.writer = n; const r = `addMarker:${e}`; const i = new vs(); if (i.add(t, r), this.conversionApi.consumable = i, this.fire(r, { markerName: e, markerRange: t }, this.conversionApi), i.test(t, r)) {
                    this.conversionApi.consumable = this._createConsumableForRange(t, r); let o; const a = d(t.getItems()); try {
                      for (a.s(); !(o = a.n()).done;) {
                        const s = o.value; if (this.conversionApi.consumable.test(s, r)) {
                          const l = {
                            item: s, range: fs._createOn(s), markerName: e, markerRange: t,
                          }; this.fire(r, l, this.conversionApi);
                        }
                      }
                    } catch (c) { a.e(c); } finally { a.f(); } this._clearConversionApi();
                  }
                }
              },
            }, { key: 'convertMarkerRemove', value(e, t, n) { t.root.document && t.root.rootName != '$graveyard' && (this.conversionApi.writer = n, this.fire(`removeMarker:${e}`, { markerName: e, markerRange: t }, this.conversionApi), this._clearConversionApi()); } }, { key: '_createInsertConsumable', value(e) { let t; const n = new vs(); const r = d(e); try { for (r.s(); !(t = r.n()).done;) { const i = t.value.item; n.add(i, 'insert'); var o; const a = d(i.getAttributeKeys()); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; n.add(i, `attribute:${s}`); } } catch (l) { a.e(l); } finally { a.f(); } } } catch (l) { r.e(l); } finally { r.f(); } return n; } }, { key: '_createConsumableForRange', value(e, t) { let n; const r = new vs(); const i = d(e.getItems()); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; r.add(o, t); } } catch (a) { i.e(a); } finally { i.f(); } return r; } }, { key: '_createSelectionConsumable', value(e, t) { const n = new vs(); n.add(e, 'selection'); let r; const i = d(t); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; n.add(e, `addMarker:${o.name}`); } } catch (c) { i.e(c); } finally { i.f(); } let a; const s = d(e.getAttributeKeys()); try { for (s.s(); !(a = s.n()).done;) { const l = a.value; n.add(e, `attribute:${l}`); } } catch (c) { s.e(c); } finally { s.f(); } return n; } }, { key: '_testAndFire', value(e, t) { if (this.conversionApi.consumable.test(t.item, e)) { const n = t.item.name || '$text'; this.fire(`${e}:${n}`, t, this.conversionApi); } } }, { key: '_clearConversionApi', value() { delete this.conversionApi.writer, delete this.conversionApi.consumable; } }]), e;
          }()); function ks(e, t, n) { const r = t.getRange(); const i = Array.from(e.getAncestors()); return i.shift(), i.reverse(), !i.some(((e) => { if (r.containsItem(e)) return !!n.toViewElement(e).getCustomProperty('addHighlight'); })); }Qn(ps, Vn); const bs = (function () { function e(t, n, r) { f(this, e), this._lastRangeBackward = !1, this._ranges = [], this._attrs = new Map(), t && this.setTo(t, n, r); } return m(e, [{ key: 'isEqual', value(e) { if (this.rangeCount != e.rangeCount) return !1; if (this.rangeCount === 0) return !0; if (!this.anchor.isEqual(e.anchor) || !this.focus.isEqual(e.focus)) return !1; let t; const n = d(this._ranges); try { for (n.s(); !(t = n.n()).done;) { var r; const i = t.value; let o = !1; const a = d(e._ranges); try { for (a.s(); !(r = a.n()).done;) { const s = r.value; if (i.isEqual(s)) { o = !0; break; } } } catch (l) { a.e(l); } finally { a.f(); } if (!o) return !1; } } catch (l) { n.e(l); } finally { n.f(); } return !0; } }, { key: 'getRanges', value: h.mark((function e() { let t; let n; let r; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: t = d(this._ranges), e.prev = 1, t.s(); case 3: if ((n = t.n()).done) { e.next = 9; break; } return r = n.value, e.next = 7, new fs(r.start, r.end); case 7: e.next = 3; break; case 9: e.next = 14; break; case 11: e.prev = 11, e.t0 = e.catch(1), t.e(e.t0); case 14: return e.prev = 14, t.f(), e.finish(14); case 17: case 'end': return e.stop(); } }), e, this, [[1, 11, 14, 17]]); })) }, { key: 'getFirstRange', value() { let e; let t = null; const n = d(this._ranges); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; t && !r.start.isBefore(t.start) || (t = r); } } catch (i) { n.e(i); } finally { n.f(); } return t ? new fs(t.start, t.end) : null; } }, { key: 'getLastRange', value() { let e; let t = null; const n = d(this._ranges); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; t && !r.end.isAfter(t.end) || (t = r); } } catch (i) { n.e(i); } finally { n.f(); } return t ? new fs(t.start, t.end) : null; } }, { key: 'getFirstPosition', value() { const e = this.getFirstRange(); return e ? e.start.clone() : null; } }, { key: 'getLastPosition', value() { const e = this.getLastRange(); return e ? e.end.clone() : null; } }, { key: 'setTo', value(t, n, r) { if (t === null) this._setRanges([]); else if (t instanceof e) this._setRanges(t.getRanges(), t.isBackward); else if (t && typeof t.getRanges === 'function') this._setRanges(t.getRanges(), t.isBackward); else if (t instanceof fs) this._setRanges([t], !!n && !!n.backward); else if (t instanceof cs) this._setRanges([new fs(t)]); else if (t instanceof ns) { let i; const o = !!r && !!r.backward; if (n == 'in')i = fs._createIn(t); else if (n == 'on')i = fs._createOn(t); else { if (void 0 === n) throw new Ln.b('model-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.', [this, t]); i = new fs(cs._createAt(t, n)); } this._setRanges([i], o); } else { if (!Kn(t)) throw new Ln.b('model-selection-setTo-not-selectable: Cannot set the selection to the given place.', [this, t]); this._setRanges(t, n && !!n.backward); } } }, { key: '_setRanges', value(e) { const t = this; const n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; const r = (e = Array.from(e)).some(((n) => { if (!(n instanceof fs)) throw new Ln.b('model-selection-set-ranges-not-range: Selection range set to an object that is not an instance of model.Range.', [t, e]); return t._ranges.every(((e) => !e.isEqual(n))); })); if (e.length !== this._ranges.length || r) { this._removeAllRanges(); let i; const o = d(e); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; this._pushRange(a); } } catch (s) { o.e(s); } finally { o.f(); } this._lastRangeBackward = !!n, this.fire('change:range', { directChange: !0 }); } } }, { key: 'setFocus', value(e, t) { if (this.anchor === null) throw new Ln.b('model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.', [this, e]); const n = cs._createAt(e, t); if (n.compareWith(this.focus) != 'same') { const r = this.anchor; this._ranges.length && this._popRange(), n.compareWith(r) == 'before' ? (this._pushRange(new fs(n, r)), this._lastRangeBackward = !0) : (this._pushRange(new fs(r, n)), this._lastRangeBackward = !1), this.fire('change:range', { directChange: !0 }); } } }, { key: 'getAttribute', value(e) { return this._attrs.get(e); } }, { key: 'getAttributes', value() { return this._attrs.entries(); } }, { key: 'getAttributeKeys', value() { return this._attrs.keys(); } }, { key: 'hasAttribute', value(e) { return this._attrs.has(e); } }, { key: 'removeAttribute', value(e) { this.hasAttribute(e) && (this._attrs.delete(e), this.fire('change:attribute', { attributeKeys: [e], directChange: !0 })); } }, { key: 'setAttribute', value(e, t) { this.getAttribute(e) !== t && (this._attrs.set(e, t), this.fire('change:attribute', { attributeKeys: [e], directChange: !0 })); } }, { key: 'getSelectedElement', value() { return this.rangeCount !== 1 ? null : this.getFirstRange().getContainedElement(); } }, { key: 'is', value(e) { return e === 'selection' || e === 'model:selection'; } }, { key: 'getSelectedBlocks', value: h.mark((function e() { let t; let n; let r; let i; let o; let a; let s; let l; let c; let u; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: t = new WeakSet(), n = d(this.getRanges()), e.prev = 2, n.s(); case 4: if ((r = n.n()).done) { e.next = 35; break; } if (i = r.value, !(o = _s(i.start, t)) || !Es(o, i)) { e.next = 10; break; } return e.next = 10, o; case 10: a = d(i.getWalker()), e.prev = 11, a.s(); case 13: if ((s = a.n()).done) { e.next = 21; break; } if (l = s.value, c = l.item, l.type != 'elementEnd' || !ws(c, t, i)) { e.next = 19; break; } return e.next = 19, c; case 19: e.next = 13; break; case 21: e.next = 26; break; case 23: e.prev = 23, e.t0 = e.catch(11), a.e(e.t0); case 26: return e.prev = 26, a.f(), e.finish(26); case 29: if (!(u = _s(i.end, t)) || i.end.isTouching(cs._createAt(u, 0)) || !Es(u, i)) { e.next = 33; break; } return e.next = 33, u; case 33: e.next = 4; break; case 35: e.next = 40; break; case 37: e.prev = 37, e.t1 = e.catch(2), n.e(e.t1); case 40: return e.prev = 40, n.f(), e.finish(40); case 43: case 'end': return e.stop(); } }), e, this, [[2, 37, 40, 43], [11, 23, 26, 29]]); })) }, { key: 'containsEntireContent', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.anchor.root; const t = cs._createAt(e, 0); const n = cs._createAt(e, 'end'); return t.isTouching(this.getFirstPosition()) && n.isTouching(this.getLastPosition()); } }, { key: '_pushRange', value(e) { this._checkRange(e), this._ranges.push(new fs(e.start, e.end)); } }, { key: '_checkRange', value(e) { for (let t = 0; t < this._ranges.length; t++) if (e.isIntersecting(this._ranges[t])) throw new Ln.b('model-selection-range-intersects: Trying to add a range that intersects with another range in the selection.', [this, e], { addedRange: e, intersectingRange: this._ranges[t] }); } }, { key: '_removeAllRanges', value() { for (;this._ranges.length > 0;) this._popRange(); } }, { key: '_popRange', value() { this._ranges.pop(); } }, { key: 'anchor', get() { if (this._ranges.length > 0) { const e = this._ranges[this._ranges.length - 1]; return this._lastRangeBackward ? e.end : e.start; } return null; } }, { key: 'focus', get() { if (this._ranges.length > 0) { const e = this._ranges[this._ranges.length - 1]; return this._lastRangeBackward ? e.start : e.end; } return null; } }, { key: 'isCollapsed', get() { return this._ranges.length === 1 && this._ranges[0].isCollapsed; } }, { key: 'rangeCount', get() { return this._ranges.length; } }, { key: 'isBackward', get() { return !this.isCollapsed && this._lastRangeBackward; } }]), e; }()); function ys(e, t) { return !t.has(e) && (t.add(e), e.root.document.model.schema.isBlock(e) && e.parent); } function ws(e, t, n) { return ys(e, t) && Es(e, n); } function _s(e, t) { const n = e.parent.root.document.model.schema; const r = e.parent.getAncestors({ parentFirst: !0, includeSelf: !0 }); let i = !1; const o = r.find(((e) => !i && !(i = n.isLimit(e)) && ys(e, t))); return r.forEach(((e) => t.add(e))), o; } function Es(e, t) { const n = (function (e) { for (let t = e.root.document.model.schema, n = e.parent; n;) { if (t.isBlock(n)) return n; n = n.parent; } }(e)); return !n || !t.containsRange(fs._createOn(n), !0); }Qn(bs, Vn); const xs = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), i = t.call(this, e, r), Ts.call(s(i)), i; } return m(n, [{ key: 'detach', value() { this.stopListening(); } }, { key: 'is', value(e) { return e === 'liveRange' || e === 'model:liveRange' || e == 'range' || e === 'model:range'; } }, { key: 'toRange', value() { return new fs(this.start, this.end); } }], [{ key: 'fromRange', value(e) { return new n(e.start, e.end); } }]), n; }(fs)); function Ts() { const e = this; this.listenTo(this.root.document.model, 'applyOperation', ((t, n) => { const r = n[0]; r.isDocumentOperation && Cs.call(e, r); }), { priority: 'low' }); } function Cs(e) { const t = this.getTransformedByOperation(e); const n = fs._createFromRanges(t); const r = !n.isEqual(this); const i = (function (e, t) { switch (t.type) { case 'insert': return e.containsPosition(t.position); case 'move': case 'remove': case 'reinsert': case 'merge': return e.containsPosition(t.sourcePosition) || e.start.isEqual(t.sourcePosition) || e.containsPosition(t.targetPosition); case 'split': return e.containsPosition(t.splitPosition) || e.containsPosition(t.insertionPosition); } return !1; }(this, e)); let o = null; if (r) { n.root.rootName == '$graveyard' && (o = e.type == 'remove' ? e.sourcePosition : e.deletionPosition); const a = this.toRange(); this.start = n.start, this.end = n.end, this.fire('change:range', a, { deletionPosition: o }); } else i && this.fire('change:content', this.toRange(), { deletionPosition: o }); }Qn(xs, Vn); const Ss = 'selection:'; const As = (function () { function e(t) { f(this, e), this._selection = new Ps(t), this._selection.delegate('change:range').to(this), this._selection.delegate('change:attribute').to(this), this._selection.delegate('change:marker').to(this); } return m(e, [{ key: 'getRanges', value() { return this._selection.getRanges(); } }, { key: 'getFirstPosition', value() { return this._selection.getFirstPosition(); } }, { key: 'getLastPosition', value() { return this._selection.getLastPosition(); } }, { key: 'getFirstRange', value() { return this._selection.getFirstRange(); } }, { key: 'getLastRange', value() { return this._selection.getLastRange(); } }, { key: 'getSelectedBlocks', value() { return this._selection.getSelectedBlocks(); } }, { key: 'getSelectedElement', value() { return this._selection.getSelectedElement(); } }, { key: 'containsEntireContent', value(e) { return this._selection.containsEntireContent(e); } }, { key: 'destroy', value() { this._selection.destroy(); } }, { key: 'getAttributeKeys', value() { return this._selection.getAttributeKeys(); } }, { key: 'getAttributes', value() { return this._selection.getAttributes(); } }, { key: 'getAttribute', value(e) { return this._selection.getAttribute(e); } }, { key: 'hasAttribute', value(e) { return this._selection.hasAttribute(e); } }, { key: 'refresh', value() { this._selection._updateMarkers(), this._selection._updateAttributes(!1); } }, { key: 'is', value(e) { return e === 'selection' || e == 'model:selection' || e == 'documentSelection' || e == 'model:documentSelection'; } }, { key: '_setFocus', value(e, t) { this._selection.setFocus(e, t); } }, { key: '_setTo', value(e, t, n) { this._selection.setTo(e, t, n); } }, { key: '_setAttribute', value(e, t) { this._selection.setAttribute(e, t); } }, { key: '_removeAttribute', value(e) { this._selection.removeAttribute(e); } }, { key: '_getStoredAttributes', value() { return this._selection._getStoredAttributes(); } }, { key: '_overrideGravity', value() { return this._selection.overrideGravity(); } }, { key: '_restoreGravity', value(e) { this._selection.restoreGravity(e); } }, { key: 'isCollapsed', get() { return this._selection.isCollapsed; } }, { key: 'anchor', get() { return this._selection.anchor; } }, { key: 'focus', get() { return this._selection.focus; } }, { key: 'rangeCount', get() { return this._selection.rangeCount; } }, { key: 'hasOwnRange', get() { return this._selection.hasOwnRange; } }, { key: 'isBackward', get() { return this._selection.isBackward; } }, { key: 'isGravityOverridden', get() { return this._selection.isGravityOverridden; } }, { key: 'markers', get() { return this._selection.markers; } }, { key: '_ranges', get() { return this._selection._ranges; } }], [{ key: '_getStoreAttributeKey', value(e) { return Ss + e; } }, { key: '_isStoreAttributeKey', value(e) { return e.startsWith(Ss); } }]), e; }()); Qn(As, Vn); var Ps = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this)).markers = new Jn({ idProperty: 'name' }), r._model = e.model, r._document = e, r._attributePriority = new Map(), r._selectionRestorePosition = null, r._hasChangedRange = !1, r._overriddenGravityRegister = new Set(), r.listenTo(r._model, 'applyOperation', ((e, t) => { const n = t[0]; n.isDocumentOperation && n.type != 'marker' && n.type != 'rename' && n.type != 'noop' && (r._ranges.length == 0 && r._selectionRestorePosition && r._fixGraveyardSelection(r._selectionRestorePosition), r._selectionRestorePosition = null, r._hasChangedRange && (r._hasChangedRange = !1, r.fire('change:range', { directChange: !1 }))); }), { priority: 'lowest' }), r.on('change:range', (() => { let e; const t = d(r.getRanges()); try { for (t.s(); !(e = t.n()).done;) { const n = e.value; if (!r._document._validateSelectionRange(n)) throw new Ln.b('document-selection-wrong-position: Range from document selection starts or ends at incorrect position.', s(r), { range: n }); } } catch (i) { t.e(i); } finally { t.f(); } })), r.listenTo(r._model.markers, 'update', (() => r._updateMarkers())), r.listenTo(r._document, 'change', ((e, t) => { !(function (e, t) { let n; const r = e.document.differ; const i = d(r.getChanges()); try { const o = function () { const r = n.value; if (r.type != 'insert') return 'continue'; const i = r.position.parent; r.length === i.maxOffset && e.enqueueChange(t, ((e) => { let t; const n = Array.from(i.getAttributeKeys()).filter(((e) => e.startsWith(Ss))); const r = d(n); try { for (r.s(); !(t = r.n()).done;) { const o = t.value; e.removeAttribute(o, i); } } catch (a) { r.e(a); } finally { r.f(); } })); }; for (i.s(); !(n = i.n()).done;)o(); } catch (a) { i.e(a); } finally { i.f(); } }(r._model, t)); })), r; } return m(n, [{ key: 'destroy', value() { for (let e = 0; e < this._ranges.length; e++) this._ranges[e].detach(); this.stopListening(); } }, { key: 'getRanges', value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: if (!this._ranges.length) { e.next = 4; break; } return e.delegateYield(o(a(n.prototype), 'getRanges', this).call(this), 't0', 2); case 2: e.next = 6; break; case 4: return e.next = 6, this._document._getDefaultRange(); case 6: case 'end': return e.stop(); } }), e, this); })) }, { key: 'getFirstRange', value() { return o(a(n.prototype), 'getFirstRange', this).call(this) || this._document._getDefaultRange(); } }, { key: 'getLastRange', value() { return o(a(n.prototype), 'getLastRange', this).call(this) || this._document._getDefaultRange(); } }, { key: 'setTo', value(e, t, r) { o(a(n.prototype), 'setTo', this).call(this, e, t, r), this._updateAttributes(!0), this._updateMarkers(); } }, { key: 'setFocus', value(e, t) { o(a(n.prototype), 'setFocus', this).call(this, e, t), this._updateAttributes(!0), this._updateMarkers(); } }, { key: 'setAttribute', value(e, t) { if (this._setAttribute(e, t)) { const n = [e]; this.fire('change:attribute', { attributeKeys: n, directChange: !0 }); } } }, { key: 'removeAttribute', value(e) { if (this._removeAttribute(e)) { const t = [e]; this.fire('change:attribute', { attributeKeys: t, directChange: !0 }); } } }, { key: 'overrideGravity', value() { const e = jn(); return this._overriddenGravityRegister.add(e), this._overriddenGravityRegister.size === 1 && this._updateAttributes(!0), e; } }, { key: 'restoreGravity', value(e) { if (!this._overriddenGravityRegister.has(e)) throw new Ln.b('document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.', this, { uid: e }); this._overriddenGravityRegister.delete(e), this.isGravityOverridden || this._updateAttributes(!0); } }, { key: '_popRange', value() { this._ranges.pop().detach(); } }, { key: '_pushRange', value(e) { const t = this._prepareRange(e); t && this._ranges.push(t); } }, { key: '_prepareRange', value(e) { const t = this; if (this._checkRange(e), e.root != this._document.graveyard) { const n = xs.fromRange(e); return n.on('change:range', ((e, r, i) => { if (t._hasChangedRange = !0, n.root == t._document.graveyard) { t._selectionRestorePosition = i.deletionPosition; const o = t._ranges.indexOf(n); t._ranges.splice(o, 1), n.detach(); } })), n; } } }, { key: '_updateMarkers', value() { let e; const t = []; let n = !1; const r = d(this._model.markers); try { for (r.s(); !(e = r.n()).done;) { var i; const o = e.value; const a = o.getRange(); const s = d(this.getRanges()); try { for (s.s(); !(i = s.n()).done;) { const l = i.value; a.containsRange(l, !l.isCollapsed) && t.push(o); } } catch (p) { s.e(p); } finally { s.f(); } } } catch (p) { r.e(p); } finally { r.f(); } for (var c = Array.from(this.markers), u = 0, h = t; u < h.length; u++) { const f = h[u]; this.markers.has(f) || (this.markers.add(f), n = !0); } for (let m = 0, v = Array.from(this.markers); m < v.length; m++) { const g = v[m]; t.includes(g) || (this.markers.remove(g), n = !0); }n && this.fire('change:marker', { oldMarkers: c, directChange: !1 }); } }, { key: '_updateAttributes', value(e) { const t = hr(this._getSurroundingAttributes()); const n = hr(this.getAttributes()); if (e) this._attributePriority = new Map(), this._attrs = new Map(); else { let r; const i = d(this._attributePriority); try { for (i.s(); !(r = i.n()).done;) { const o = u(r.value, 2); const a = o[0]; o[1] == 'low' && (this._attrs.delete(a), this._attributePriority.delete(a)); } } catch (k) { i.e(k); } finally { i.f(); } } this._setAttributesTo(t); let s; const l = []; const c = d(this.getAttributes()); try { for (c.s(); !(s = c.n()).done;) { const h = u(s.value, 2); const f = h[0]; const m = h[1]; n.has(f) && n.get(f) === m || l.push(f); } } catch (k) { c.e(k); } finally { c.f(); } let v; const g = d(n); try { for (g.s(); !(v = g.n()).done;) { const p = u(v.value, 1)[0]; this.hasAttribute(p) || l.push(p); } } catch (k) { g.e(k); } finally { g.f(); }l.length > 0 && this.fire('change:attribute', { attributeKeys: l, directChange: !1 }); } }, { key: '_setAttribute', value(e, t) { const r = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; const i = r ? 'normal' : 'low'; if (i == 'low' && this._attributePriority.get(e) == 'normal') return !1; const s = o(a(n.prototype), 'getAttribute', this).call(this, e); return s !== t && (this._attrs.set(e, t), this._attributePriority.set(e, i), !0); } }, { key: '_removeAttribute', value(e) { const t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; const r = t ? 'normal' : 'low'; return (r != 'low' || this._attributePriority.get(e) != 'normal') && (this._attributePriority.set(e, r), !!o(a(n.prototype), 'hasAttribute', this).call(this, e) && (this._attrs.delete(e), !0)); } }, { key: '_setAttributesTo', value(e) { let t; const n = new Set(); const r = d(this.getAttributes()); try { for (r.s(); !(t = r.n()).done;) { const i = u(t.value, 2); const o = i[0]; const a = i[1]; e.get(o) !== a && this._removeAttribute(o, !1); } } catch (m) { r.e(m); } finally { r.f(); } let s; const l = d(e); try { for (l.s(); !(s = l.n()).done;) { const c = u(s.value, 2); const h = c[0]; const f = c[1]; this._setAttribute(h, f, !1) && n.add(h); } } catch (m) { l.e(m); } finally { l.f(); } return n; } }, { key: '_getStoredAttributes', value: h.mark((function e() { let t; let n; let r; let i; let o; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: if (t = this.getFirstPosition().parent, !this.isCollapsed || !t.isEmpty) { e.next = 21; break; }n = d(t.getAttributeKeys()), e.prev = 3, n.s(); case 5: if ((r = n.n()).done) { e.next = 13; break; } if (!(i = r.value).startsWith(Ss)) { e.next = 11; break; } return o = i.substr(Ss.length), e.next = 11, [o, t.getAttribute(i)]; case 11: e.next = 5; break; case 13: e.next = 18; break; case 15: e.prev = 15, e.t0 = e.catch(3), n.e(e.t0); case 18: return e.prev = 18, n.f(), e.finish(18); case 21: case 'end': return e.stop(); } }), e, this, [[3, 15, 18, 21]]); })) }, { key: '_getSurroundingAttributes', value() { const e = this.getFirstPosition(); const t = this._model.schema; let n = null; if (this.isCollapsed) { const r = e.textNode ? e.textNode : e.nodeBefore; const i = e.textNode ? e.textNode : e.nodeAfter; if (this.isGravityOverridden || (n = Os(r)), n || (n = Os(i)), !this.isGravityOverridden && !n) for (let o = r; o && !n;)n = Os(o = o.previousSibling); if (!n) for (let a = i; a && !n;)n = Os(a = a.nextSibling); n || (n = this._getStoredAttributes()); } else { let s; const l = this.getFirstRange(); const c = d(l); try { for (c.s(); !(s = c.n()).done;) { const u = s.value; if (u.item.is('element') && t.isObject(u.item)) break; if (u.type == 'text') { n = u.item.getAttributes(); break; } } } catch (h) { c.e(h); } finally { c.f(); } } return n; } }, { key: '_fixGraveyardSelection', value(e) { const t = this._model.schema.getNearestSelectionRange(e); t && this._pushRange(t); } }, { key: 'isCollapsed', get() { return this._ranges.length === 0 ? this._document._getDefaultRange().isCollapsed : o(a(n.prototype), 'isCollapsed', this); } }, { key: 'anchor', get() { return o(a(n.prototype), 'anchor', this) || this._document._getDefaultRange().start; } }, { key: 'focus', get() { return o(a(n.prototype), 'focus', this) || this._document._getDefaultRange().end; } }, { key: 'rangeCount', get() { return this._ranges.length ? this._ranges.length : 1; } }, { key: 'hasOwnRange', get() { return this._ranges.length > 0; } }, { key: 'isGravityOverridden', get() { return !!this._overriddenGravityRegister.size; } }]), n; }(bs)); function Os(e) { return e instanceof is || e instanceof rs ? e.getAttributes() : null; } const Is = (function () { function e(t) { f(this, e), this._dispatchers = t; } return m(e, [{ key: 'add', value(e) { let t; const n = d(this._dispatchers); try { for (n.s(); !(t = n.n()).done;)e(t.value); } catch (r) { n.e(r); } finally { n.f(); } return this; } }]), e; }()); const Ms = function (e) { return Cn(e, 5); }; const Ns = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'elementToElement', value(e) { return this.add(function (e) { return (e = Ms(e)).view = Ds(e.view, 'container'), function (t) { t.on(`insert:${e.model}`, (function (e) { return function (t, n, r) { const i = e(n.item, r.writer); if (i && r.consumable.consume(n.item, 'insert')) { const o = r.mapper.toViewPosition(n.range.start); r.mapper.bindElements(n.item, i), r.writer.insert(o, i); } }; }(e.view)), { priority: e.converterPriority || 'normal' }); }; }(e)); } }, { key: 'attributeToElement', value(e) { return this.add(function (e) { let t = `attribute:${(e = Ms(e)).model.key ? e.model.key : e.model}`; if (e.model.name && (t += `:${e.model.name}`), e.model.values) { let n; const r = d(e.model.values); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; e.view[i] = Ds(e.view[i], 'attribute'); } } catch (a) { r.e(a); } finally { r.f(); } } else e.view = Ds(e.view, 'attribute'); const o = Ls(e); return function (n) { n.on(t, (function (e) { return function (t, n, r) { const i = e(n.attributeOldValue, r.writer); const o = e(n.attributeNewValue, r.writer); if ((i || o) && r.consumable.consume(n.item, t.name)) { const a = r.writer; const s = a.document.selection; if (n.item instanceof bs || n.item instanceof As)a.wrap(s.getFirstRange(), o); else { let l = r.mapper.toViewRange(n.range); n.attributeOldValue !== null && i && (l = a.unwrap(l, i)), n.attributeNewValue !== null && o && a.wrap(l, o); } } }; }(o)), { priority: e.converterPriority || 'normal' }); }; }(e)); } }, { key: 'attributeToAttribute', value(e) { return this.add(function (e) { let t = `attribute:${(e = Ms(e)).model.key ? e.model.key : e.model}`; if (e.model.name && (t += `:${e.model.name}`), e.model.values) { let n; const r = d(e.model.values); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; e.view[i] = zs(e.view[i]); } } catch (a) { r.e(a); } finally { r.f(); } } else e.view = zs(e.view); const o = Ls(e); return function (n) { n.on(t, (function (e) { return function (t, n, r) { const i = e(n.attributeOldValue, n); const o = e(n.attributeNewValue, n); if ((i || o) && r.consumable.consume(n.item, t.name)) { const s = r.mapper.toViewElement(n.item); const l = r.writer; if (!s) throw new Ln.b("conversion-attribute-to-attribute-on-text: Trying to convert text node's attribute with attribute-to-attribute converter.", [n, r]); if (n.attributeOldValue !== null && i) if (i.key == 'class') { let c; const u = Array.isArray(i.value) ? i.value : [i.value]; const h = d(u); try { for (h.s(); !(c = h.n()).done;) { const f = c.value; l.removeClass(f, s); } } catch (a) { h.e(a); } finally { h.f(); } } else if (i.key == 'style') for (let m = 0, v = Object.keys(i.value); m < v.length; m++) { const g = v[m]; l.removeStyle(g, s); } else l.removeAttribute(i.key, s); if (n.attributeNewValue !== null && o) if (o.key == 'class') { let p; const k = Array.isArray(o.value) ? o.value : [o.value]; const b = d(k); try { for (b.s(); !(p = b.n()).done;) { const y = p.value; l.addClass(y, s); } } catch (a) { b.e(a); } finally { b.f(); } } else if (o.key == 'style') for (let w = 0, _ = Object.keys(o.value); w < _.length; w++) { const E = _[w]; l.setStyle(E, o.value[E], s); } else l.setAttribute(o.key, o.value, s); } }; }(o)), { priority: e.converterPriority || 'normal' }); }; }(e)); } }, { key: 'markerToElement', value(e) { return this.add(function (e) { return (e = Ms(e)).view = Ds(e.view, 'ui'), function (t) { t.on(`addMarker:${e.model}`, (function (e) { return function (t, n, r) { n.isOpening = !0; const i = e(n, r.writer); n.isOpening = !1; const o = e(n, r.writer); if (i && o) { const a = n.markerRange; if (!a.isCollapsed || r.consumable.consume(a, t.name)) { let s; const l = d(a); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; if (!r.consumable.consume(c.item, t.name)) return; } } catch (f) { l.e(f); } finally { l.f(); } const u = r.mapper; const h = r.writer; h.insert(u.toViewPosition(a.start), i), r.mapper.bindElementToMarker(i, n.markerName), a.isCollapsed || (h.insert(u.toViewPosition(a.end), o), r.mapper.bindElementToMarker(o, n.markerName)), t.stop(); } } }; }(e.view)), { priority: e.converterPriority || 'normal' }), t.on(`removeMarker:${e.model}`, (e.view, function (e, t, n) { const r = n.mapper.markerNameToElements(t.markerName); if (r) { let i; const o = d(r); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; n.mapper.unbindElementFromMarkerName(a, t.markerName), n.writer.clear(n.writer.createRangeOn(a), a); } } catch (s) { o.e(s); } finally { o.f(); }n.writer.clearClonedElementsGroup(t.markerName), e.stop(); } }), { priority: e.converterPriority || 'normal' }); }; }(e)); } }, { key: 'markerToHighlight', value(e) { return this.add(function (e) { return function (t) { t.on(`addMarker:${e.model}`, (function (e) { return function (t, n, r) { if (n.item && (n.item instanceof bs || n.item instanceof As || n.item.is('$textProxy'))) { const i = Fs(e, n, r); if (i && r.consumable.consume(n.item, t.name)) { const o = r.writer; const a = Rs(o, i); const s = o.document.selection; if (n.item instanceof bs || n.item instanceof As)o.wrap(s.getFirstRange(), a, s); else { let l; const c = r.mapper.toViewRange(n.range); const u = o.wrap(c, a); const h = d(u.getItems()); try { for (h.s(); !(l = h.n()).done;) { const f = l.value; if (f.is('attributeElement') && f.isSimilar(a)) { r.mapper.bindElementToMarker(f, n.markerName); break; } } } catch (m) { h.e(m); } finally { h.f(); } } } } }; }(e.view)), { priority: e.converterPriority || 'normal' }), t.on(`addMarker:${e.model}`, (function (e) { return function (t, n, r) { if (n.item && n.item instanceof as) { const i = Fs(e, n, r); if (i && r.consumable.test(n.item, t.name)) { const o = r.mapper.toViewElement(n.item); if (o && o.getCustomProperty('addHighlight')) { r.consumable.consume(n.item, t.name); let a; const s = d(fs._createIn(n.item)); try { for (s.s(); !(a = s.n()).done;) { const l = a.value; r.consumable.consume(l.item, t.name); } } catch (c) { s.e(c); } finally { s.f(); }o.getCustomProperty('addHighlight')(o, i, r.writer), r.mapper.bindElementToMarker(o, n.markerName); } } } }; }(e.view)), { priority: e.converterPriority || 'normal' }), t.on(`removeMarker:${e.model}`, (function (e) { return function (t, n, r) { if (!n.markerRange.isCollapsed) { const i = Fs(e, n, r); if (i) { const o = Rs(r.writer, i); const a = r.mapper.markerNameToElements(n.markerName); if (a) { let s; const l = d(a); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; r.mapper.unbindElementFromMarkerName(c, n.markerName), c.is('attributeElement') ? r.writer.unwrap(r.writer.createRangeOn(c), o) : c.getCustomProperty('removeHighlight')(c, i.id, r.writer); } } catch (u) { l.e(u); } finally { l.f(); }r.writer.clearClonedElementsGroup(n.markerName), t.stop(); } } } }; }(e.view)), { priority: e.converterPriority || 'normal' }); }; }(e)); } }, { key: 'markerToData', value(e) { return this.add(function (e) { const t = (e = Ms(e)).model; return e.view || (e.view = function (n) { return { group: t, name: n.substr(e.model.length + 1) }; }), function (n) { n.on(`addMarker:${t}`, (function (e) { return function (t, n, r) { const i = e(n.markerName); if (i) { const o = n.markerRange; r.consumable.consume(o, t.name) && (js(o, !1, r, n, i), js(o, !0, r, n, i), t.stop()); } }; }(e.view)), { priority: e.converterPriority || 'normal' }), n.on(`removeMarker:${t}`, (function (e) { return function (t, n, r) { const i = e(n.markerName); if (i) { const o = r.mapper.markerNameToElements(n.markerName); if (o) { let a; const s = d(o); try { for (s.s(); !(a = s.n()).done;) { const l = a.value; r.mapper.unbindElementFromMarkerName(l, n.markerName), l.is('containerElement') ? (c('data-'.concat(i.group, '-start-before'), l), c('data-'.concat(i.group, '-start-after'), l), c('data-'.concat(i.group, '-end-before'), l), c('data-'.concat(i.group, '-end-after'), l)) : r.writer.clear(r.writer.createRangeOn(l), l); } } catch (u) { s.e(u); } finally { s.f(); }r.writer.clearClonedElementsGroup(n.markerName), t.stop(); } } function c(e, t) { if (t.hasAttribute(e)) { const n = new Set(t.getAttribute(e).split(',')); n.delete(i.name), n.size == 0 ? r.writer.removeAttribute(e, t) : r.writer.setAttribute(e, Array.from(n).join(','), t); } } }; }(e.view)), { priority: e.converterPriority || 'normal' }); }; }(e)); } }]), n; }(Is)); function Rs(e, t) { const n = e.createAttributeElement('span', t.attributes); return t.classes && n._addClass(t.classes), t.priority && (n._priority = t.priority), n._id = t.id, n; } function js(e, t, n, r, i) { let o; let a; const s = t ? e.start : e.end; n.schema.checkChild(s, '$text') ? (function (e, t, n, r, i) { const o = ''.concat(i.group, '-').concat(t ? 'start' : 'end'); const a = i.name ? { name: i.name } : null; const s = n.writer.createUIElement(o, a); n.writer.insert(e, s), n.mapper.bindElementToMarker(s, r.markerName); }(n.mapper.toViewPosition(s), t, n, r, i)) : (t && s.nodeAfter || !t && !s.nodeBefore ? (o = s.nodeAfter, a = !0) : (o = s.nodeBefore, a = !1), (function (e, t, n, r, i, o) { const a = 'data-'.concat(o.group, '-').concat(t ? 'start' : 'end', '-').concat(n ? 'before' : 'after'); const s = e.hasAttribute(a) ? e.getAttribute(a).split(',') : []; s.unshift(o.name), r.writer.setAttribute(a, s.join(','), e), r.mapper.bindElementToMarker(e, i.markerName); }(n.mapper.toViewElement(o), t, a, n, r, i))); } function Ds(e, t) { return typeof e === 'function' ? e : function (n, r) { return (function (e, t, n) { typeof e === 'string' && (e = { name: e }); let r; const i = { ...e.attributes }; if (n == 'container')r = t.createContainerElement(e.name, i); else if (n == 'attribute') { const o = { priority: e.priority || zi.DEFAULT_PRIORITY }; r = t.createAttributeElement(e.name, i, o); } else r = t.createUIElement(e.name, i); if (e.styles) for (let a = Object.keys(e.styles), s = 0, l = a; s < l.length; s++) { const c = l[s]; t.setStyle(c, e.styles[c], r); } if (e.classes) { const u = e.classes; if (typeof u === 'string')t.addClass(u, r); else { let h; const f = d(u); try { for (f.s(); !(h = f.n()).done;) { const m = h.value; t.addClass(m, r); } } catch (v) { f.e(v); } finally { f.f(); } } } return r; }(e, r, t)); }; } function Ls(e) { return e.model.values ? function (t, n) { const r = e.view[t]; return r ? r(t, n) : null; } : e.view; } function zs(e) { return typeof e === 'string' ? function (t) { return { key: e, value: t }; } : typeof e === 'object' ? e.value ? function () { return e; } : function (t) { return { key: e.key, value: t }; } : e; } function Fs(e, t, n) { const r = typeof e === 'function' ? e(t, n) : e; return r ? (r.priority || (r.priority = 10), r.id || (r.id = t.markerName), r) : null; } const Vs = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'elementToElement', value(e) { return this.add(Bs(e)); } }, { key: 'elementToAttribute', value(e) { return this.add(function (e) { Ws(e = Ms(e)); const t = qs(e, !1); const n = Us(e.view); const r = n ? `element:${n}` : 'element'; return function (n) { n.on(r, t, { priority: e.converterPriority || 'low' }); }; }(e)); } }, { key: 'attributeToAttribute', value(e) { return this.add(function (e) { e = Ms(e); let t = null; (typeof e.view === 'string' || e.view.key) && (t = (function (e) { typeof e.view === 'string' && (e.view = { key: e.view }); let t; const n = e.view.key; if (n == 'class' || n == 'style')t = i({}, n == 'class' ? 'classes' : 'styles', e.view.value); else { const r = typeof e.view.value === 'undefined' ? /[\s\S]*/ : e.view.value; t = { attributes: i({}, n, r) }; } return e.view.name && (t.name = e.view.name), e.view = t, n; }(e))), Ws(e, t); const n = qs(e, !0); return function (t) { t.on('element', n, { priority: e.converterPriority || 'low' }); }; }(e)); } }, { key: 'elementToMarker', value(e) { return console.warn(Object(Ln.a)('upcast-helpers-element-to-marker-deprecated: The UpcastHelpers#elementToMarker() method has been deprecated and will be removed in the near future. Please use UpcastHelpers#dataToMarker() instead.')), this.add(function (e) { return (function (e) { const t = e.model; e.model = function (e, n) { const r = typeof t === 'string' ? t : t(e); return n.createElement('$marker', { 'data-name': r }); }; }(e = Ms(e))), Bs(e); }(e)); } }, { key: 'dataToMarker', value(e) { return this.add(function (e) { (e = Ms(e)).model || (e.model = function (t) { return t ? `${e.view}:${t}` : e.view; }); const t = Hs(Gs(e, 'start')); const n = Hs(Gs(e, 'end')); return function (r) { r.on(`element:${e.view}-start`, t, { priority: e.converterPriority || 'normal' }), r.on(`element:${e.view}-end`, n, { priority: e.converterPriority || 'normal' }); const i = Dn.get('low'); const o = Dn.get('highest'); const a = Dn.get(e.converterPriority) / o; r.on('element', (function (e) { return function (t, n, r) { const i = 'data-'.concat(e.view); function o(t, i) { let o; const a = d(i); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; const l = e.model(s); const c = r.writer.createElement('$marker', { 'data-name': l }); r.writer.insert(c, t), n.modelCursor.isEqual(t) ? n.modelCursor = n.modelCursor.getShiftedBy(1) : n.modelCursor = n.modelCursor._getTransformedByInsertion(t, 1), n.modelRange = n.modelRange._getTransformedByInsertion(t, 1)[0]; } } catch (u) { a.e(u); } finally { a.f(); } }n.modelRange || (n = Object.assign(n, r.convertChildren(n.viewItem, n.modelCursor))), r.consumable.consume(n.viewItem, { attributes: `${i}-end-after` }) && o(n.modelRange.end, n.viewItem.getAttribute(`${i}-end-after`).split(',')), r.consumable.consume(n.viewItem, { attributes: `${i}-start-after` }) && o(n.modelRange.end, n.viewItem.getAttribute(`${i}-start-after`).split(',')), r.consumable.consume(n.viewItem, { attributes: `${i}-end-before` }) && o(n.modelRange.start, n.viewItem.getAttribute(`${i}-end-before`).split(',')), r.consumable.consume(n.viewItem, { attributes: `${i}-start-before` }) && o(n.modelRange.start, n.viewItem.getAttribute(`${i}-start-before`).split(',')); }; }(e)), { priority: i + a }); }; }(e)); } }]), n; }(Is)); function Bs(e) { const t = Hs(e = Ms(e)); const n = Us(e.view); const r = n ? `element:${n}` : 'element'; return function (n) { n.on(r, t, { priority: e.converterPriority || 'normal' }); }; } function Us(e) { return typeof e === 'string' ? e : typeof e === 'object' && typeof e.name === 'string' ? e.name : null; } function Hs(e) { const t = e.view ? new fr(e.view) : null; return function (n, r, i) { let o = {}; if (t) { const a = t.match(r.viewItem); if (!a) return; o = a.match; }o.name = !0; const s = (function (e, t, n) { return e instanceof Function ? e(t, n) : n.createElement(e); }(e.model, r.viewItem, i.writer)); if (s && i.consumable.test(r.viewItem, o)) { const l = i.splitToAllowedParent(s, r.modelCursor); if (l) { i.writer.insert(s, l.position), i.convertChildren(r.viewItem, i.writer.createPositionAt(s, 0)), i.consumable.consume(r.viewItem, o); const c = i.getSplitParts(s); r.modelRange = new fs(i.writer.createPositionBefore(s), i.writer.createPositionAfter(c[c.length - 1])), l.cursorParent ? r.modelCursor = i.writer.createPositionAt(l.cursorParent, 0) : r.modelCursor = r.modelRange.end; } } }; } function Ws(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; const n = t === null || function (e) { return e.getAttribute(t); }; const r = typeof e.model !== 'object' ? e.model : e.model.key; const i = typeof e.model !== 'object' || typeof e.model.value === 'undefined' ? n : e.model.value; e.model = { key: r, value: i }; } function qs(e, t) { const n = new fr(e.view); return function (r, i, o) { const a = n.match(i.viewItem); if (a) { const s = e.model.key; const l = typeof e.model.value === 'function' ? e.model.value(i.viewItem) : e.model.value; l !== null && ((function (e, t) { const n = typeof e === 'function' ? e(t) : e; return !(typeof n === 'object' && !Us(n)) && (!n.classes && !n.attributes && !n.styles); }(e.view, i.viewItem)) ? a.match.name = !0 : delete a.match.name, o.consumable.test(i.viewItem, a.match) && (i.modelRange || (i = Object.assign(i, o.convertChildren(i.viewItem, i.modelCursor))), (function (e, t, n, r) { for (var i = !1, o = 0, a = Array.from(e.getItems({ shallow: n })); o < a.length; o++) { const s = a[o]; r.schema.checkAttribute(s, t.key) && (r.writer.setAttribute(t.key, t.value, s), i = !0); } return i; }(i.modelRange, { key: s, value: l }, t, o)) && o.consumable.consume(i.viewItem, a.match))); } }; } function Gs(e, t) { const n = {}; return n.view = `${e.view}-${t}`, n.model = function (t, n) { const r = t.getAttribute('name'); const i = e.model(r); return n.createElement('$marker', { 'data-name': i }); }, n; } const $s = (function () { function e(t, n) { const r = this; f(this, e), this.model = t, this.view = new ts(n), this.mapper = new ms(), this.downcastDispatcher = new ps({ mapper: this.mapper, schema: t.schema }); const i = this.model.document; const o = i.selection; const a = this.model.markers; this.listenTo(this.model, '_beforeChanges', (() => { r.view._disableRendering(!0); }), { priority: 'highest' }), this.listenTo(this.model, '_afterChanges', (() => { r.view._disableRendering(!1); }), { priority: 'lowest' }), this.listenTo(i, 'change', (() => { r.view.change(((e) => { r.downcastDispatcher.convertChanges(i.differ, a, e), r.downcastDispatcher.convertSelection(o, a, e); })); }), { priority: 'low' }), this.listenTo(this.view.document, 'selectionChange', (function (e, t) { return function (n, r) { let i; const o = r.newSelection; const a = new bs(); const s = []; const l = d(o.getRanges()); try { for (l.s(); !(i = l.n()).done;) { const c = i.value; s.push(t.toModelRange(c)); } } catch (u) { l.e(u); } finally { l.f(); }a.setTo(s, { backward: o.isBackward }), a.isEqual(e.document.selection) || e.change(((e) => { e.setSelection(a); })); }; }(this.model, this.mapper))), this.downcastDispatcher.on('insert:$text', ((e, t, n) => { if (n.consumable.consume(t.item, 'insert')) { const r = n.writer; const i = n.mapper.toViewPosition(t.range.start); const o = r.createText(t.item.data); r.insert(i, o); } }), { priority: 'lowest' }), this.downcastDispatcher.on('remove', ((e, t, n) => { let r; const i = n.mapper.toViewPosition(t.position); const o = t.position.getShiftedBy(t.length); const a = n.mapper.toViewPosition(o, { isPhantom: !0 }); const s = n.writer.createRange(i, a); const l = n.writer.remove(s.getTrimmed()); const c = d(n.writer.createRangeIn(l).getItems()); try { for (c.s(); !(r = c.n()).done;) { const u = r.value; n.mapper.unbindViewElement(u); } } catch (h) { c.e(h); } finally { c.f(); } }), { priority: 'low' }), this.downcastDispatcher.on('selection', ((e, t, n) => { let r; const i = n.writer; const o = i.document.selection; const a = d(o.getRanges()); try { for (a.s(); !(r = a.n()).done;) { const s = r.value; s.isCollapsed && s.end.parent.isAttached() && n.writer.mergeAttributes(s.start); } } catch (l) { a.e(l); } finally { a.f(); }i.setSelection(null); }), { priority: 'low' }), this.downcastDispatcher.on('selection', ((e, t, n) => { const r = t.selection; if (!r.isCollapsed && n.consumable.consume(r, 'selection')) { let i; const o = []; const a = d(r.getRanges()); try { for (a.s(); !(i = a.n()).done;) { const s = i.value; const l = n.mapper.toViewRange(s); o.push(l); } } catch (c) { a.e(c); } finally { a.f(); }n.writer.setSelection(o, { backward: r.isBackward }); } }), { priority: 'low' }), this.downcastDispatcher.on('selection', ((e, t, n) => { const r = t.selection; if (r.isCollapsed && n.consumable.consume(r, 'selection')) { const i = n.writer; const o = r.getFirstPosition(); const a = n.mapper.toViewPosition(o); const s = i.breakAttributes(a); i.setSelection(s); } }), { priority: 'low' }), this.view.document.roots.bindTo(this.model.document.roots).using(((e) => { if (e.rootName == '$graveyard') return null; const t = new Pi(r.view.document, e.name); return t.rootName = e.rootName, r.mapper.bindElements(e, t), t; })); } return m(e, [{ key: 'destroy', value() { this.view.destroy(), this.stopListening(); } }]), e; }()); Qn($s, ki); const Ys = (function () { function e() { f(this, e), this._commands = new Map(); } return m(e, [{ key: 'add', value(e, t) { this._commands.set(e, t); } }, { key: 'get', value(e) { return this._commands.get(e); } }, { key: 'execute', value(e) { const t = this.get(e); if (!t) throw new Ln.b('commandcollection-command-not-found: Command does not exist.', this, { commandName: e }); for (var n = arguments.length, r = new Array(n > 1 ? n - 1 : 0), i = 1; i < n; i++)r[i - 1] = arguments[i]; return t.execute.apply(t, r); } }, { key: 'names', value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return e.delegateYield(this._commands.keys(), 't0', 1); case 1: case 'end': return e.stop(); } }), e, this); })) }, { key: 'commands', value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return e.delegateYield(this._commands.values(), 't0', 1); case 1: case 'end': return e.stop(); } }), e, this); })) }, { key: Symbol.iterator, value() { return this._commands[Symbol.iterator](); } }, { key: 'destroy', value() { let e; const t = d(this.commands()); try { for (t.s(); !(e = t.n()).done;)e.value.destroy(); } catch (n) { t.e(n); } finally { t.f(); } } }]), e; }()); const Ks = (function () {
            function e() { f(this, e), this._consumables = new Map(); } return m(e, [{ key: 'add', value(e, t) { let n; e.is('$text') || e.is('documentFragment') ? this._consumables.set(e, !0) : (this._consumables.has(e) ? n = this._consumables.get(e) : (n = new Qs(e), this._consumables.set(e, n)), n.add(t)); } }, { key: 'test', value(e, t) { const n = this._consumables.get(e); return void 0 === n ? null : e.is('$text') || e.is('documentFragment') ? n : n.test(t); } }, { key: 'consume', value(e, t) { return !!this.test(e, t) && (e.is('$text') || e.is('documentFragment') ? this._consumables.set(e, !1) : this._consumables.get(e).consume(t), !0); } }, { key: 'revert', value(e, t) { const n = this._consumables.get(e); void 0 !== n && (e.is('$text') || e.is('documentFragment') ? this._consumables.set(e, !0) : n.revert(t)); } }], [{
              key: 'consumablesFromElement',
              value(e) {
                let t; const n = {
                  element: e, name: !0, attributes: [], classes: [], styles: [],
                }; const r = e.getAttributeKeys(); const i = d(r); try { for (i.s(); !(t = i.n()).done;) { const o = t.value; o != 'style' && o != 'class' && n.attributes.push(o); } } catch (v) { i.e(v); } finally { i.f(); } let a; const s = e.getClassNames(); const l = d(s); try { for (l.s(); !(a = l.n()).done;) { const c = a.value; n.classes.push(c); } } catch (v) { l.e(v); } finally { l.f(); } let u; const h = e.getStyleNames(); const f = d(h); try { for (f.s(); !(u = f.n()).done;) { const m = u.value; n.styles.push(m); } } catch (v) { f.e(v); } finally { f.f(); } return n;
              },
            }, { key: 'createFrom', value(t, n) { if (n || (n = new e(t)), t.is('$text')) return n.add(t), n; t.is('element') && n.add(t, e.consumablesFromElement(t)), t.is('documentFragment') && n.add(t); let r; const i = d(t.getChildren()); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; n = e.createFrom(o, n); } } catch (a) { i.e(a); } finally { i.f(); } return n; } }]), e;
          }()); var Qs = (function () {
            function e(t) { f(this, e), this.element = t, this._canConsumeName = null, this._consumables = { attributes: new Map(), styles: new Map(), classes: new Map() }; } return m(e, [{ key: 'add', value(e) { for (const t in e.name && (this._canConsumeName = !0), this._consumables)t in e && this._add(t, e[t]); } }, { key: 'test', value(e) { if (e.name && !this._canConsumeName) return this._canConsumeName; for (const t in this._consumables) if (t in e) { const n = this._test(t, e[t]); if (!0 !== n) return n; } return !0; } }, { key: 'consume', value(e) { for (const t in e.name && (this._canConsumeName = !1), this._consumables)t in e && this._consume(t, e[t]); } }, { key: 'revert', value(e) { for (const t in e.name && (this._canConsumeName = !0), this._consumables)t in e && this._revert(t, e[t]); } }, { key: '_add', value(e, t) { let n; const r = Ze(t) ? t : [t]; const i = this._consumables[e]; const o = d(r); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; if (e === 'attributes' && (a === 'class' || a === 'style')) throw new Ln.b('viewconsumable-invalid-attribute: Classes and styles should be handled separately.', this); if (i.set(a, !0), e === 'styles') { var s; const l = d(this.element.document.stylesProcessor.getRelatedStyles(a)); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; i.set(c, !0); } } catch (u) { l.e(u); } finally { l.f(); } } } } catch (u) { o.e(u); } finally { o.f(); } } }, {
              key: '_test',
              value(e, t) {
                let n; const r = Ze(t) ? t : [t]; const i = this._consumables[e]; const o = d(r); try {
                  for (o.s(); !(n = o.n()).done;) {
                    const a = n.value; if (e !== 'attributes' || a !== 'class' && a !== 'style') { const s = i.get(a); if (void 0 === s) return null; if (!s) return !1; } else {
                      const l = a == 'class' ? 'classes' : 'styles'; const
                        u = this._test(l, c(this._consumables[l].keys())); if (!0 !== u) return u;
                    }
                  }
                } catch (h) { o.e(h); } finally { o.f(); } return !0;
              },
            }, { key: '_consume', value(e, t) { let n; const r = Ze(t) ? t : [t]; const i = this._consumables[e]; const o = d(r); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; if (e !== 'attributes' || a !== 'class' && a !== 'style') { if (i.set(a, !1), e == 'styles') { var s; const l = d(this.element.document.stylesProcessor.getRelatedStyles(a)); try { for (l.s(); !(s = l.n()).done;) { const u = s.value; i.set(u, !1); } } catch (f) { l.e(f); } finally { l.f(); } } } else { const h = a == 'class' ? 'classes' : 'styles'; this._consume(h, c(this._consumables[h].keys())); } } } catch (f) { o.e(f); } finally { o.f(); } } }, { key: '_revert', value(e, t) { let n; const r = Ze(t) ? t : [t]; const i = this._consumables[e]; const o = d(r); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; if (e !== 'attributes' || a !== 'class' && a !== 'style')!1 === i.get(a) && i.set(a, !0); else { const s = a == 'class' ? 'classes' : 'styles'; this._revert(s, c(this._consumables[s].keys())); } } } catch (l) { o.e(l); } finally { o.f(); } } }]), e;
          }()); const Js = (function () { function e() { const t = this; f(this, e), this._sourceDefinitions = {}, this._attributeProperties = {}, this.decorate('checkChild'), this.decorate('checkAttribute'), this.on('checkAttribute', ((e, t) => { t[0] = new Zs(t[0]); }), { priority: 'highest' }), this.on('checkChild', ((e, n) => { n[0] = new Zs(n[0]), n[1] = t.getDefinition(n[1]); }), { priority: 'highest' }); } return m(e, [{ key: 'register', value(e, t) { if (this._sourceDefinitions[e]) throw new Ln.b('schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.', this, { itemName: e }); this._sourceDefinitions[e] = [{ ...t }], this._clearCache(); } }, { key: 'extend', value(e, t) { if (!this._sourceDefinitions[e]) throw new Ln.b('schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.', this, { itemName: e }); this._sourceDefinitions[e].push({ ...t }), this._clearCache(); } }, { key: 'getDefinitions', value() { return this._compiledDefinitions || this._compile(), this._compiledDefinitions; } }, { key: 'getDefinition', value(e) { let t; return t = typeof e === 'string' ? e : e.is && (e.is('$text') || e.is('$textProxy')) ? '$text' : e.name, this.getDefinitions()[t]; } }, { key: 'isRegistered', value(e) { return !!this.getDefinition(e); } }, { key: 'isBlock', value(e) { const t = this.getDefinition(e); return !(!t || !t.isBlock); } }, { key: 'isLimit', value(e) { const t = this.getDefinition(e); return !!t && !(!t.isLimit && !t.isObject); } }, { key: 'isObject', value(e) { const t = this.getDefinition(e); return !(!t || !t.isObject); } }, { key: 'isInline', value(e) { const t = this.getDefinition(e); return !(!t || !t.isInline); } }, { key: 'checkChild', value(e, t) { return !!t && this._checkContextMatch(t, e); } }, { key: 'checkAttribute', value(e, t) { const n = this.getDefinition(e.last); return !!n && n.allowAttributes.includes(t); } }, { key: 'checkMerge', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; if (e instanceof cs) { const n = e.nodeBefore; const r = e.nodeAfter; if (!(n instanceof as)) throw new Ln.b('schema-check-merge-no-element-before: The node before the merge position must be an element.', this); if (!(r instanceof as)) throw new Ln.b('schema-check-merge-no-element-after: The node after the merge position must be an element.', this); return this.checkMerge(n, r); } let i; const o = d(t.getChildren()); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; if (!this.checkChild(e, a)) return !1; } } catch (s) { o.e(s); } finally { o.f(); } return !0; } }, { key: 'addChildCheck', value(e) { this.on('checkChild', ((t, n) => { const r = u(n, 2); const i = r[0]; const o = r[1]; if (o) { const a = e(i, o); typeof a === 'boolean' && (t.stop(), t.return = a); } }), { priority: 'high' }); } }, { key: 'addAttributeCheck', value(e) { this.on('checkAttribute', ((t, n) => { const r = u(n, 2); const i = r[0]; const o = r[1]; const a = e(i, o); typeof a === 'boolean' && (t.stop(), t.return = a); }), { priority: 'high' }); } }, { key: 'setAttributeProperties', value(e, t) { this._attributeProperties[e] = Object.assign(this.getAttributeProperties(e), t); } }, { key: 'getAttributeProperties', value(e) { return this._attributeProperties[e] || {}; } }, { key: 'getLimitElement', value(e) { let t; for (t = e instanceof cs ? e.parent : (e instanceof fs ? [e] : Array.from(e.getRanges())).reduce(((e, t) => { const n = t.getCommonAncestor(); return e ? e.getCommonAncestor(n, { includeSelf: !0 }) : n; }), null); !this.isLimit(t) && t.parent;)t = t.parent; return t; } }, { key: 'checkAttributeInSelection', value(e, t) { if (e.isCollapsed) { const n = e.getFirstPosition(); const r = [].concat(c(n.getAncestors()), [new rs('', e.getAttributes())]); return this.checkAttribute(r, t); } let i; const o = e.getRanges(); const a = d(o); try { for (a.s(); !(i = a.n()).done;) { var s; const l = i.value; const u = d(l); try { for (u.s(); !(s = u.n()).done;) { const h = s.value; if (this.checkAttribute(h.item, t)) return !0; } } catch (f) { u.e(f); } finally { u.f(); } } } catch (f) { a.e(f); } finally { a.f(); } return !1; } }, { key: 'getValidRanges', value: h.mark((function e(t, n) { let r; let i; let o; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: t = ul(t), r = d(t), e.prev = 2, r.s(); case 4: if ((i = r.n()).done) { e.next = 9; break; } return o = i.value, e.delegateYield(this._getValidRangesForRange(o, n), 't0', 7); case 7: e.next = 4; break; case 9: e.next = 14; break; case 11: e.prev = 11, e.t1 = e.catch(2), r.e(e.t1); case 14: return e.prev = 14, r.f(), e.finish(14); case 17: case 'end': return e.stop(); } }), e, this, [[2, 11, 14, 17]]); })) }, { key: 'getNearestSelectionRange', value(e) { let t; let n; const r = this; const i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 'both'; if (this.checkChild(e, '$text')) return new fs(e); const o = e.getAncestors().reverse().find(((e) => r.isLimit(e))) || e.root; i != 'both' && i != 'backward' || (t = new ss({ boundaries: fs._createIn(o), startPosition: e, direction: 'backward' })), i != 'both' && i != 'forward' || (n = new ss({ boundaries: fs._createIn(o), startPosition: e })); let a; const s = d(cl(t, n)); try { for (s.s(); !(a = s.n()).done;) { const l = a.value; const c = l.walker == t ? 'elementEnd' : 'elementStart'; const u = l.value; if (u.type == c && this.isObject(u.item)) return fs._createOn(u.item); if (this.checkChild(u.nextPosition, '$text')) return new fs(u.nextPosition); } } catch (h) { s.e(h); } finally { s.f(); } return null; } }, { key: 'findAllowedParent', value(e, t) { for (let n = e.parent; n;) { if (this.checkChild(n, t)) return n; if (this.isLimit(n)) return null; n = n.parent; } return null; } }, { key: 'removeDisallowedAttributes', value(e, t) { let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (i.is('$text'))dl(this, i, t); else { var o; const a = fs._createIn(i).getPositions(); const s = d(a); try { for (s.s(); !(o = s.n()).done;) { const l = o.value; dl(this, l.nodeBefore || l.parent, t); } } catch (c) { s.e(c); } finally { s.f(); } } } } catch (c) { r.e(c); } finally { r.f(); } } }, { key: 'createContext', value(e) { return new Zs(e); } }, { key: '_clearCache', value() { this._compiledDefinitions = null; } }, { key: '_compile', value() { for (var e = {}, t = this._sourceDefinitions, n = Object.keys(t), r = 0, i = n; r < i.length; r++) { const o = i[r]; e[o] = Xs(t[o], o); } for (let a = 0, s = n; a < s.length; a++)el(e, s[a]); for (let l = 0, c = n; l < c.length; l++)tl(e, c[l]); for (let u = 0, d = n; u < d.length; u++) { const h = d[u]; nl(e, h), rl(e, h); } for (let f = 0, m = n; f < m.length; f++) { const v = m[f]; il(e, v), ol(e, v); } this._compiledDefinitions = e; } }, { key: '_checkContextMatch', value(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : t.length - 1; const r = t.getItem(n); if (e.allowIn.includes(r.name)) { if (n == 0) return !0; const i = this.getDefinition(r); return this._checkContextMatch(i, t, n - 1); } return !1; } }, { key: '_getValidRangesForRange', value: h.mark((function e(t, n) { let r; let i; let o; let a; let s; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: r = t.start, i = t.start, o = d(t.getItems({ shallow: !0 })), e.prev = 3, o.s(); case 5: if ((a = o.n()).done) { e.next = 17; break; } if (!(s = a.value).is('element')) { e.next = 9; break; } return e.delegateYield(this._getValidRangesForRange(fs._createIn(s), n), 't0', 9); case 9: if (this.checkAttribute(s, n)) { e.next = 14; break; } if (r.isEqual(i)) { e.next = 13; break; } return e.next = 13, new fs(r, i); case 13: r = cs._createAfter(s); case 14: i = cs._createAfter(s); case 15: e.next = 5; break; case 17: e.next = 22; break; case 19: e.prev = 19, e.t1 = e.catch(3), o.e(e.t1); case 22: return e.prev = 22, o.f(), e.finish(22); case 25: if (r.isEqual(i)) { e.next = 28; break; } return e.next = 28, new fs(r, i); case 28: case 'end': return e.stop(); } }), e, this, [[3, 19, 22, 25]]); })) }]), e; }()); Qn(Js, ki); var Zs = (function () { function e(t) { if (f(this, e), t instanceof e) return t; typeof t === 'string' ? t = [t] : Array.isArray(t) || (t = t.getAncestors({ includeSelf: !0 })), t[0] && typeof t[0] !== 'string' && t[0].is('documentFragment') && t.shift(), this._items = t.map(ll); } return m(e, [{ key: Symbol.iterator, value() { return this._items[Symbol.iterator](); } }, { key: 'push', value(t) { const n = new e([t]); return n._items = [].concat(c(this._items), c(n._items)), n; } }, { key: 'getItem', value(e) { return this._items[e]; } }, { key: 'getNames', value: h.mark((function e() { return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return e.delegateYield(this._items.map(((e) => e.name)), 't0', 1); case 1: case 'end': return e.stop(); } }), e, this); })) }, { key: 'endsWith', value(e) { return Array.from(this.getNames()).join(' ').endsWith(e); } }, { key: 'startsWith', value(e) { return Array.from(this.getNames()).join(' ').startsWith(e); } }, { key: 'length', get() { return this._items.length; } }, { key: 'last', get() { return this._items[this._items.length - 1]; } }]), e; }()); function Xs(e, t) {
            const n = {
              name: t, allowIn: [], allowContentOf: [], allowWhere: [], allowAttributes: [], allowAttributesOf: [], inheritTypesFrom: [],
            }; return (function (e, t) { let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) { var i; const o = n.value; const a = Object.keys(o).filter(((e) => e.startsWith('is'))); const s = d(a); try { for (s.s(); !(i = s.n()).done;) { const l = i.value; t[l] = o[l]; } } catch (c) { s.e(c); } finally { s.f(); } } } catch (c) { r.e(c); } finally { r.f(); } }(e, n)), al(e, n, 'allowIn'), al(e, n, 'allowContentOf'), al(e, n, 'allowWhere'), al(e, n, 'allowAttributes'), al(e, n, 'allowAttributesOf'), al(e, n, 'inheritTypesFrom'), (function (e, t) { let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) { const i = n.value.inheritAllFrom; i && (t.allowContentOf.push(i), t.allowWhere.push(i), t.allowAttributesOf.push(i), t.inheritTypesFrom.push(i)); } } catch (o) { r.e(o); } finally { r.f(); } }(e, n)), n;
          } function el(e, t) { let n; const r = d(e[t].allowContentOf); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; e[i] && sl(e, i).forEach(((e) => { e.allowIn.push(t); })); } } catch (o) { r.e(o); } finally { r.f(); } delete e[t].allowContentOf; } function tl(e, t) { let n; const r = d(e[t].allowWhere); try { for (r.s(); !(n = r.n()).done;) { const i = e[n.value]; if (i) { var o; const a = i.allowIn; (o = e[t].allowIn).push.apply(o, c(a)); } } } catch (s) { r.e(s); } finally { r.f(); } delete e[t].allowWhere; } function nl(e, t) { let n; const r = d(e[t].allowAttributesOf); try { for (r.s(); !(n = r.n()).done;) { const i = e[n.value]; if (i) { var o; const a = i.allowAttributes; (o = e[t].allowAttributes).push.apply(o, c(a)); } } } catch (s) { r.e(s); } finally { r.f(); } delete e[t].allowAttributesOf; } function rl(e, t) { let n; const r = e[t]; const i = d(r.inheritTypesFrom); try { for (i.s(); !(n = i.n()).done;) { const o = e[n.value]; if (o) { var a; const s = Object.keys(o).filter(((e) => e.startsWith('is'))); const l = d(s); try { for (l.s(); !(a = l.n()).done;) { const c = a.value; c in r || (r[c] = o[c]); } } catch (u) { l.e(u); } finally { l.f(); } } } } catch (u) { i.e(u); } finally { i.f(); } delete r.inheritTypesFrom; } function il(e, t) { const n = e[t]; const r = n.allowIn.filter(((t) => e[t])); n.allowIn = Array.from(new Set(r)); } function ol(e, t) { const n = e[t]; n.allowAttributes = Array.from(new Set(n.allowAttributes)); } function al(e, t, n) { let r; const i = d(e); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; if (typeof o[n] === 'string')t[n].push(o[n]); else if (Array.isArray(o[n])) { var a; (a = t[n]).push.apply(a, c(o[n])); } } } catch (s) { i.e(s); } finally { i.f(); } } function sl(e, t) { const n = e[t]; return (function (e) { return Object.keys(e).map(((t) => e[t])); }(e)).filter(((e) => e.allowIn.includes(n.name))); } function ll(e) { return typeof e === 'string' ? { name: e, getAttributeKeys: h.mark((function e() { return h.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: case 'end': return e.stop(); } }), e); })), getAttribute() {} } : { name: e.is('element') ? e.name : '$text', getAttributeKeys: h.mark((function t() { return h.wrap(((t) => { for (;;) switch (t.prev = t.next) { case 0: return t.delegateYield(e.getAttributeKeys(), 't0', 1); case 1: case 'end': return t.stop(); } }), t); })), getAttribute(t) { return e.getAttribute(t); } }; } function cl(e, t) { let n; let i; let o; return h.wrap(((r) => { for (;;) switch (r.prev = r.next) { case 0: n = !1; case 1: if (n) { r.next = 17; break; } if (n = !0, !e) { r.next = 9; break; } if ((i = e.next()).done) { r.next = 9; break; } return n = !1, r.next = 9, { walker: e, value: i.value }; case 9: if (!t) { r.next = 15; break; } if ((o = t.next()).done) { r.next = 15; break; } return n = !1, r.next = 15, { walker: t, value: o.value }; case 15: r.next = 1; break; case 17: case 'end': return r.stop(); } }), r); } function ul(e) { let t; let n; let r; return h.wrap(((i) => { for (;;) switch (i.prev = i.next) { case 0: t = d(e), i.prev = 1, t.s(); case 3: if ((n = t.n()).done) { i.next = 8; break; } return r = n.value, i.delegateYield(r.getMinimalFlatRanges(), 't0', 6); case 6: i.next = 3; break; case 8: i.next = 13; break; case 10: i.prev = 10, i.t1 = i.catch(1), t.e(i.t1); case 13: return i.prev = 13, t.f(), i.finish(13); case 16: case 'end': return i.stop(); } }), p, null, [[1, 10, 13, 16]]); } function dl(e, t, n) { let r; const i = d(t.getAttributeKeys()); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; e.checkAttribute(t, o) || n.removeAttribute(o, t); } } catch (a) { i.e(a); } finally { i.f(); } } const hl = (function () { function e() { const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; f(this, e), this._splitParts = new Map(), this._modelCursor = null, this.conversionApi = { ...t }, this.conversionApi.convertItem = this._convertItem.bind(this), this.conversionApi.convertChildren = this._convertChildren.bind(this), this.conversionApi.splitToAllowedParent = this._splitToAllowedParent.bind(this), this.conversionApi.getSplitParts = this._getSplitParts.bind(this); } return m(e, [{ key: 'convert', value(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ['$root']; this.fire('viewCleanup', e), this._modelCursor = ml(n, t), this.conversionApi.writer = t, this.conversionApi.consumable = Ks.createFrom(e), this.conversionApi.store = {}; const r = this._convertItem(e, this._modelCursor); const i = r.modelRange; const o = t.createDocumentFragment(); if (i) { this._removeEmptyElements(); for (let a = 0, s = Array.from(this._modelCursor.parent.getChildren()); a < s.length; a++) { const l = s[a]; t.append(l, o); }o.markers = fl(o, t); } return this._modelCursor = null, this._splitParts.clear(), this.conversionApi.writer = null, this.conversionApi.store = null, o; } }, { key: '_convertItem', value(e, t) { const n = { viewItem: e, modelCursor: t, modelRange: null }; if (e.is('element') ? this.fire(`element:${e.name}`, n, this.conversionApi) : e.is('$text') ? this.fire('text', n, this.conversionApi) : this.fire('documentFragment', n, this.conversionApi), n.modelRange && !(n.modelRange instanceof fs)) throw new Ln.b('view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.', this); return { modelRange: n.modelRange, modelCursor: n.modelCursor }; } }, { key: '_convertChildren', value(e, t) { for (var n = new fs(t), r = t, i = 0, o = Array.from(e.getChildren()); i < o.length; i++) { const a = o[i]; const s = this._convertItem(a, r); s.modelRange instanceof fs && (n.end = s.modelRange.end, r = s.modelCursor); } return { modelRange: n, modelCursor: r }; } }, { key: '_splitToAllowedParent', value(e, t) { const n = this.conversionApi.schema.findAllowedParent(t, e); if (!n) return null; if (n === t.parent) return { position: t }; if (this._modelCursor.parent.getAncestors().includes(n)) return null; let r; const i = this.conversionApi.writer.split(t, n); const o = []; const a = d(i.range.getWalker()); try { for (a.s(); !(r = a.n()).done;) { const s = r.value; if (s.type == 'elementEnd')o.push(s.item); else { const l = o.pop(); const c = s.item; this._registerSplitPair(l, c); } } } catch (u) { a.e(u); } finally { a.f(); } return { position: i.position, cursorParent: i.range.end.parent }; } }, { key: '_registerSplitPair', value(e, t) { this._splitParts.has(e) || this._splitParts.set(e, [e]); const n = this._splitParts.get(e); this._splitParts.set(t, n), n.push(t); } }, { key: '_getSplitParts', value(e) { return this._splitParts.has(e) ? this._splitParts.get(e) : [e]; } }, { key: '_removeEmptyElements', value() { let e; let t = !1; const n = d(this._splitParts.keys()); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; r.isEmpty && (this.conversionApi.writer.remove(r), this._splitParts.delete(r), t = !0); } } catch (i) { n.e(i); } finally { n.f(); }t && this._removeEmptyElements(); } }]), e; }()); function fl(e, t) { let n; const r = new Set(); const i = new Map(); const o = fs._createIn(e).getItems(); const a = d(o); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; s.name == '$marker' && r.add(s); } } catch (m) { a.e(m); } finally { a.f(); } let l; const c = d(r); try { for (c.s(); !(l = c.n()).done;) { const u = l.value; const h = u.getAttribute('data-name'); const f = t.createPositionBefore(u); i.has(h) ? i.get(h).end = f.clone() : i.set(h, new fs(f.clone())), t.remove(u); } } catch (m) { c.e(m); } finally { c.f(); } return i; } function ml(e, t) { let n; let r; const i = d(new Zs(e)); try { for (i.s(); !(r = i.n()).done;) { var o; const a = r.value; const s = {}; const l = d(a.getAttributeKeys()); try { for (l.s(); !(o = l.n()).done;) { const c = o.value; s[c] = a.getAttribute(c); } } catch (h) { l.e(h); } finally { l.f(); } const u = t.createElement(a.name, s); n && t.append(u, n), n = cs._createAt(u, 0); } } catch (h) { i.e(h); } finally { i.f(); } return n; }Qn(hl, Vn); const vl = (function () {
            function e(t, n) { const r = this; f(this, e), this.model = t, this.stylesProcessor = n, this.processor, this.mapper = new ms(), this.downcastDispatcher = new ps({ mapper: this.mapper, schema: t.schema }), this.downcastDispatcher.on('insert:$text', ((e, t, n) => { if (n.consumable.consume(t.item, 'insert')) { const r = n.writer; const i = n.mapper.toViewPosition(t.range.start); const o = r.createText(t.item.data); r.insert(i, o); } }), { priority: 'lowest' }), this.upcastDispatcher = new hl({ schema: t.schema }), this.viewDocument = new Li(n), this._viewWriter = new so(this.viewDocument), this.upcastDispatcher.on('text', ((e, t, n) => { if (n.schema.checkChild(t.modelCursor, '$text') && n.consumable.consume(t.viewItem)) { const r = n.writer.createText(t.viewItem.data); n.writer.insert(r, t.modelCursor), t.modelRange = fs._createFromPositionAndShift(t.modelCursor, r.offsetSize), t.modelCursor = t.modelRange.end; } }), { priority: 'lowest' }), this.upcastDispatcher.on('element', ((e, t, n) => { if (!t.modelRange && n.consumable.consume(t.viewItem, { name: !0 })) { const r = n.convertChildren(t.viewItem, t.modelCursor); const i = r.modelRange; const o = r.modelCursor; t.modelRange = i, t.modelCursor = o; } }), { priority: 'lowest' }), this.upcastDispatcher.on('documentFragment', ((e, t, n) => { if (!t.modelRange && n.consumable.consume(t.viewItem, { name: !0 })) { const r = n.convertChildren(t.viewItem, t.modelCursor); const i = r.modelRange; const o = r.modelCursor; t.modelRange = i, t.modelCursor = o; } }), { priority: 'lowest' }), this.decorate('init'), this.decorate('set'), this.on('init', (() => { r.fire('ready'); }), { priority: 'lowest' }); } return m(e, [{ key: 'get', value(e) { const t = e || {}; const n = t.rootName; const r = void 0 === n ? 'main' : n; const i = t.trim; const o = void 0 === i ? 'empty' : i; if (!this._checkIfRootsExists([r])) throw new Ln.b('datacontroller-get-non-existent-root: Attempting to get data from a non-existing root.', this); const a = this.model.document.getRoot(r); return o !== 'empty' || this.model.hasContent(a, { ignoreWhitespaces: !0 }) ? this.stringify(a) : ''; } }, { key: 'stringify', value(e) { const t = this.toView(e); return this.processor.toData(t); } }, { key: 'toView', value(e) { const t = this.viewDocument; const n = this._viewWriter; this.mapper.clearBindings(); const r = fs._createIn(e); const i = new ao(t); if (this.mapper.bindElements(e, i), this.downcastDispatcher.convertInsert(r, n), !e.is('documentFragment')) { let o; const a = (function (e) { const t = []; const n = e.root.document; if (!n) return []; let r; const i = fs._createIn(e); const o = d(n.model.markers); try { for (o.s(); !(r = o.n()).done;) { const a = r.value; const s = i.getIntersection(a.getRange()); s && t.push([a.name, s]); } } catch (l) { o.e(l); } finally { o.f(); } return t; }(e)); const s = d(a); try { for (s.s(); !(o = s.n()).done;) { const l = u(o.value, 2); const c = l[0]; const h = l[1]; this.downcastDispatcher.convertMarkerAdd(c, h, n); } } catch (f) { s.e(f); } finally { s.f(); } } return i; } }, { key: 'init', value(e) { const t = this; if (this.model.document.version) throw new Ln.b('datacontroller-init-document-not-empty: Trying to set initial data to not empty document.', this); let n = {}; if (typeof e === 'string' ? n.main = e : n = e, !this._checkIfRootsExists(Object.keys(n))) throw new Ln.b('datacontroller-init-non-existent-root: Attempting to init data on a non-existing root.', this); return this.model.enqueueChange('transparent', ((e) => { for (let r = 0, i = Object.keys(n); r < i.length; r++) { const o = i[r]; const a = t.model.document.getRoot(o); e.insert(t.parse(n[o], a), a, 0); } })), Promise.resolve(); } }, { key: 'set', value(e) { const t = this; let n = {}; if (typeof e === 'string' ? n.main = e : n = e, !this._checkIfRootsExists(Object.keys(n))) throw new Ln.b('datacontroller-set-non-existent-root: Attempting to set data on a non-existing root.', this); this.model.enqueueChange('transparent', ((e) => { e.setSelection(null), e.removeSelectionAttribute(t.model.document.selection.getAttributeKeys()); for (let r = 0, i = Object.keys(n); r < i.length; r++) { const o = i[r]; const a = t.model.document.getRoot(o); e.remove(e.createRangeIn(a)), e.insert(t.parse(n[o], a), a, 0); } })); } }, {
              key: 'parse',
              value(e) {
                const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : '$root'; const
                  n = this.processor.toView(e); return this.toModel(n, t);
              },
            }, { key: 'toModel', value(e) { const t = this; const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : '$root'; return this.model.change(((r) => t.upcastDispatcher.convert(e, r, n))); } }, { key: 'addStyleProcessorRules', value(e) { e(this.stylesProcessor); } }, { key: 'destroy', value() { this.stopListening(); } }, { key: '_checkIfRootsExists', value(e) { let t; const n = d(e); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; if (!this.model.document.getRootNames().includes(r)) return !1; } } catch (i) { n.e(i); } finally { n.f(); } return !0; } }]), e;
          }()); Qn(vl, ki); const gl = (function () { function e(t, n) { f(this, e), this._helpers = new Map(), this._downcast = Array.isArray(t) ? t : [t], this._createConversionHelpers({ name: 'downcast', dispatchers: this._downcast, isDowncast: !0 }), this._upcast = Array.isArray(n) ? n : [n], this._createConversionHelpers({ name: 'upcast', dispatchers: this._upcast, isDowncast: !1 }); } return m(e, [{ key: 'addAlias', value(e, t) { const n = this._downcast.includes(t); if (!this._upcast.includes(t) && !n) throw new Ln.b('conversion-add-alias-dispatcher-not-registered: Trying to register and alias for a dispatcher that nas not been registered.', this); this._createConversionHelpers({ name: e, dispatchers: [t], isDowncast: n }); } }, { key: 'for', value(e) { if (!this._helpers.has(e)) throw new Ln.b('conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.', this); return this._helpers.get(e); } }, { key: 'elementToElement', value(e) { this.for('downcast').elementToElement(e); let t; const n = d(pl(e)); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; const i = r.model; const o = r.view; this.for('upcast').elementToElement({ model: i, view: o, converterPriority: e.converterPriority }); } } catch (a) { n.e(a); } finally { n.f(); } } }, { key: 'attributeToElement', value(e) { this.for('downcast').attributeToElement(e); let t; const n = d(pl(e)); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; const i = r.model; const o = r.view; this.for('upcast').elementToAttribute({ view: o, model: i, converterPriority: e.converterPriority }); } } catch (a) { n.e(a); } finally { n.f(); } } }, { key: 'attributeToAttribute', value(e) { this.for('downcast').attributeToAttribute(e); let t; const n = d(pl(e)); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; const i = r.model; const o = r.view; this.for('upcast').attributeToAttribute({ view: o, model: i }); } } catch (a) { n.e(a); } finally { n.f(); } } }, { key: '_createConversionHelpers', value(e) { const t = e.name; const n = e.dispatchers; const r = e.isDowncast; if (this._helpers.has(t)) throw new Ln.b('conversion-group-exists: Trying to register a group name that has already been registered.', this); const i = r ? new Ns(n) : new Vs(n); this._helpers.set(t, i); } }]), e; }()); function pl(e) { let t; let n; let r; let i; let o; let a; return h.wrap(((s) => { for (;;) switch (s.prev = s.next) { case 0: if (!e.model.values) { s.next = 22; break; }t = d(e.model.values), s.prev = 2, t.s(); case 4: if ((n = t.n()).done) { s.next = 12; break; } return r = n.value, i = { key: e.model.key, value: r }, o = e.view[r], a = e.upcastAlso ? e.upcastAlso[r] : void 0, s.delegateYield(kl(i, o, a), 't0', 10); case 10: s.next = 4; break; case 12: s.next = 17; break; case 14: s.prev = 14, s.t1 = s.catch(2), t.e(s.t1); case 17: return s.prev = 17, t.f(), s.finish(17); case 20: s.next = 23; break; case 22: return s.delegateYield(kl(e.model, e.view, e.upcastAlso), 't2', 23); case 23: case 'end': return s.stop(); } }), k, null, [[2, 14, 17, 20]]); } function kl(e, t, n) { let r; let i; let o; return h.wrap(((a) => { for (;;) switch (a.prev = a.next) { case 0: return a.next = 2, { model: e, view: t }; case 2: if (!n) { a.next = 21; break; }n = Array.isArray(n) ? n : [n], r = d(n), a.prev = 5, r.s(); case 7: if ((i = r.n()).done) { a.next = 13; break; } return o = i.value, a.next = 11, { model: e, view: o }; case 11: a.next = 7; break; case 13: a.next = 18; break; case 15: a.prev = 15, a.t0 = a.catch(5), r.e(a.t0); case 18: return a.prev = 18, r.f(), a.finish(18); case 21: case 'end': return a.stop(); } }), b, null, [[5, 15, 18, 21]]); } const bl = (function () { function e() { const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 'default'; f(this, e), this.operations = [], this.type = t; } return m(e, [{ key: 'addOperation', value(e) { return e.batch = this, this.operations.push(e), e; } }, { key: 'baseVersion', get() { let e; const t = d(this.operations); try { for (t.s(); !(e = t.n()).done;) { const n = e.value; if (n.baseVersion !== null) return n.baseVersion; } } catch (r) { t.e(r); } finally { t.f(); } return null; } }]), e; }()); const yl = (function () { function e(t) { f(this, e), this.baseVersion = t, this.isDocumentOperation = this.baseVersion !== null, this.batch = null; } return m(e, [{ key: '_validate', value() {} }, { key: 'toJSON', value() { const e = { ...this }; return e.__className = this.constructor.className, delete e.batch, delete e.isDocumentOperation, e; } }], [{ key: 'fromJSON', value(e) { return new this(e.baseVersion); } }, { key: 'className', get() { return 'Operation'; } }]), e; }()); const wl = (function () { function e(t) { f(this, e), this.markers = new Map(), this._children = new os(), t && this._insertChild(0, t); } return m(e, [{ key: Symbol.iterator, value() { return this.getChildren(); } }, { key: 'is', value(e) { return e === 'documentFragment' || e === 'model:documentFragment'; } }, { key: 'getChild', value(e) { return this._children.getNode(e); } }, { key: 'getChildren', value() { return this._children[Symbol.iterator](); } }, { key: 'getChildIndex', value(e) { return this._children.getNodeIndex(e); } }, { key: 'getChildStartOffset', value(e) { return this._children.getNodeStartOffset(e); } }, { key: 'getPath', value() { return []; } }, { key: 'getNodeByPath', value(e) { let t; let n = this; const r = d(e); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; n = n.getChild(n.offsetToIndex(i)); } } catch (o) { r.e(o); } finally { r.f(); } return n; } }, { key: 'offsetToIndex', value(e) { return this._children.offsetToIndex(e); } }, { key: 'toJSON', value() { let e; const t = []; const n = d(this._children); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; t.push(r.toJSON()); } } catch (i) { n.e(i); } finally { n.f(); } return t; } }, { key: '_appendChild', value(e) { this._insertChild(this.childCount, e); } }, { key: '_insertChild', value(e, t) { let n; const r = (function (e) { return typeof e === 'string' ? [new rs(e)] : (Kn(e) || (e = [e]), Array.from(e).map(((e) => (typeof e === 'string' ? new rs(e) : e instanceof is ? new rs(e.data, e.getAttributes()) : e)))); }(t)); const i = d(r); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; o.parent !== null && o._remove(), o.parent = this; } } catch (a) { i.e(a); } finally { i.f(); } this._children._insertNodes(e, r); } }, { key: '_removeChildren', value(e) { let t; const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; const r = this._children._removeNodes(e, n); const i = d(r); try { for (i.s(); !(t = i.n()).done;) { const o = t.value; o.parent = null; } } catch (a) { i.e(a); } finally { i.f(); } return r; } }, { key: 'childCount', get() { return this._children.length; } }, { key: 'maxOffset', get() { return this._children.maxOffset; } }, { key: 'isEmpty', get() { return this.childCount === 0; } }, { key: 'root', get() { return this; } }, { key: 'parent', get() { return null; } }], [{ key: 'fromJSON', value(t) { let n; const r = []; const i = d(t); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; o.name ? r.push(as.fromJSON(o)) : r.push(rs.fromJSON(o)); } } catch (a) { i.e(a); } finally { i.f(); } return new e(r); } }]), e; }()); function _l(e, t) { const n = (t = Tl(t)).reduce(((e, t) => e + t.offsetSize), 0); const r = e.parent; Sl(e); const i = e.index; return r._insertChild(i, t), Cl(r, i + t.length), Cl(r, i), new fs(e, e.getShiftedBy(n)); } function El(e) { if (!e.isFlat) throw new Ln.b('operation-utils-remove-range-not-flat: Trying to remove a range which starts and ends in different element.', this); const t = e.start.parent; Sl(e.start), Sl(e.end); const n = t._removeChildren(e.start.index, e.end.index - e.start.index); return Cl(t, e.start.index), n; } function xl(e, t) { if (!e.isFlat) throw new Ln.b('operation-utils-move-range-not-flat: Trying to move a range which starts and ends in different element.', this); const n = El(e); return _l(t = t._getTransformedByDeletion(e.start, e.end.offset - e.start.offset), n); } function Tl(e) { const t = []; e instanceof Array || (e = [e]); for (let n = 0; n < e.length; n++) if (typeof e[n] === 'string')t.push(new rs(e[n])); else if (e[n] instanceof is)t.push(new rs(e[n].data, e[n].getAttributes())); else if (e[n] instanceof wl || e[n] instanceof os) { var r; const i = d(e[n]); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; t.push(o); } } catch (c) { i.e(c); } finally { i.f(); } } else e[n] instanceof ns && t.push(e[n]); for (let a = 1; a < t.length; a++) { const s = t[a]; const l = t[a - 1]; s instanceof rs && l instanceof rs && Al(s, l) && (t.splice(a - 1, 2, new rs(l.data + s.data, l.getAttributes())), a--); } return t; } function Cl(e, t) { const n = e.getChild(t - 1); const r = e.getChild(t); if (n && r && n.is('$text') && r.is('$text') && Al(n, r)) { const i = new rs(n.data + r.data, n.getAttributes()); e._removeChildren(t - 1, 2), e._insertChild(t - 1, i); } } function Sl(e) { const t = e.textNode; const n = e.parent; if (t) { const r = e.offset - t.startOffset; const i = t.index; n._removeChildren(i, 1); const o = new rs(t.data.substr(0, r), t.getAttributes()); const a = new rs(t.data.substr(r), t.getAttributes()); n._insertChild(i, [o, a]); } } function Al(e, t) { let n; const r = e.getAttributes(); const i = t.getAttributes(); const o = d(r); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; if (a[1] !== t.getAttribute(a[0])) return !1; i.next(); } } catch (s) { o.e(s); } finally { o.f(); } return i.next().done; } const Pl = function (e, t) { return ka(e, t); }; const Ol = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o, a) { let s; return f(this, n), (s = t.call(this, a)).range = e.clone(), s.key = r, s.oldValue = void 0 === i ? null : i, s.newValue = void 0 === o ? null : o, s; } return m(n, [{ key: 'clone', value() { return new n(this.range, this.key, this.oldValue, this.newValue, this.baseVersion); } }, { key: 'getReversed', value() { return new n(this.range, this.key, this.newValue, this.oldValue, this.baseVersion + 1); } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return e.range = this.range.toJSON(), e; } }, { key: '_validate', value() { if (!this.range.isFlat) throw new Ln.b('attribute-operation-range-not-flat: The range to change is not flat.', this); let e; const t = d(this.range.getItems({ shallow: !0 })); try { for (t.s(); !(e = t.n()).done;) { const n = e.value; if (this.oldValue !== null && !Pl(n.getAttribute(this.key), this.oldValue)) throw new Ln.b("attribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.", this, { item: n, key: this.key, value: this.oldValue }); if (this.oldValue === null && this.newValue !== null && n.hasAttribute(this.key)) throw new Ln.b('attribute-operation-attribute-exists: The attribute with given key already exists.', this, { node: n, key: this.key }); } } catch (r) { t.e(r); } finally { t.f(); } } }, { key: '_execute', value() { Pl(this.oldValue, this.newValue) || (function (e, t, n) { Sl(e.start), Sl(e.end); let r; const i = d(e.getItems({ shallow: !0 })); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; const a = o.is('$textProxy') ? o.textNode : o; n !== null ? a._setAttribute(t, n) : a._removeAttribute(t), Cl(a.parent, a.index); } } catch (s) { i.e(s); } finally { i.f(); }Cl(e.end.parent, e.end.index); }(this.range, this.key, this.newValue)); } }, { key: 'type', get() { return this.oldValue === null ? 'addAttribute' : this.newValue === null ? 'removeAttribute' : 'changeAttribute'; } }], [{ key: 'fromJSON', value(e, t) { return new n(fs.fromJSON(e.range, t), e.key, e.oldValue, e.newValue, e.baseVersion); } }, { key: 'className', get() { return 'AttributeOperation'; } }]), n; }(yl)); const Il = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, null)).sourcePosition = e.clone(), i.howMany = r, i; } return m(n, [{ key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return e.sourcePosition = this.sourcePosition.toJSON(), e; } }, { key: '_validate', value() { if (this.sourcePosition.root.document) throw new Ln.b('detach-operation-on-document-node: Cannot detach document node.', this); } }, { key: '_execute', value() { El(fs._createFromPositionAndShift(this.sourcePosition, this.howMany)); } }, { key: 'type', get() { return 'detach'; } }], [{ key: 'className', get() { return 'DetachOperation'; } }]), n; }(yl)); const Ml = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; return f(this, n), (a = t.call(this, o)).sourcePosition = e.clone(), a.sourcePosition.stickiness = 'toNext', a.howMany = r, a.targetPosition = i.clone(), a.targetPosition.stickiness = 'toNone', a; } return m(n, [{ key: 'clone', value() { return new this.constructor(this.sourcePosition, this.howMany, this.targetPosition, this.baseVersion); } }, { key: 'getMovedRangeStart', value() { return this.targetPosition._getTransformedByDeletion(this.sourcePosition, this.howMany); } }, { key: 'getReversed', value() { const e = this.sourcePosition._getTransformedByInsertion(this.targetPosition, this.howMany); return new this.constructor(this.getMovedRangeStart(), this.howMany, e, this.baseVersion + 1); } }, { key: '_validate', value() { const e = this.sourcePosition.parent; const t = this.targetPosition.parent; const n = this.sourcePosition.offset; const r = this.targetPosition.offset; if (n + this.howMany > e.maxOffset) throw new Ln.b('move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.', this); if (e === t && n < r && r < n + this.howMany) throw new Ln.b('move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.', this); if (this.sourcePosition.root == this.targetPosition.root && sr(this.sourcePosition.getParentPath(), this.targetPosition.getParentPath()) == 'prefix') { const i = this.sourcePosition.path.length - 1; if (this.targetPosition.path[i] >= n && this.targetPosition.path[i] < n + this.howMany) throw new Ln.b('move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.', this); } } }, { key: '_execute', value() { xl(fs._createFromPositionAndShift(this.sourcePosition, this.howMany), this.targetPosition); } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return e.sourcePosition = this.sourcePosition.toJSON(), e.targetPosition = this.targetPosition.toJSON(), e; } }, { key: 'type', get() { return this.targetPosition.root.rootName == '$graveyard' ? 'remove' : this.sourcePosition.root.rootName == '$graveyard' ? 'reinsert' : 'move'; } }], [{ key: 'fromJSON', value(e, t) { const n = cs.fromJSON(e.sourcePosition, t); const r = cs.fromJSON(e.targetPosition, t); return new this(n, e.howMany, r, e.baseVersion); } }, { key: 'className', get() { return 'MoveOperation'; } }]), n; }(yl)); const Nl = (function (e) { v(n, e); const t = g(n); function n(e, r, i) { let o; return f(this, n), (o = t.call(this, i)).position = e.clone(), o.position.stickiness = 'toNone', o.nodes = new os(Tl(r)), o.shouldReceiveAttributes = !1, o; } return m(n, [{ key: 'clone', value() { const e = new os(c(this.nodes).map(((e) => e._clone(!0)))); const t = new n(this.position, e, this.baseVersion); return t.shouldReceiveAttributes = this.shouldReceiveAttributes, t; } }, { key: 'getReversed', value() { const e = this.position.root.document.graveyard; const t = new cs(e, [0]); return new Ml(this.position, this.nodes.maxOffset, t, this.baseVersion + 1); } }, { key: '_validate', value() { const e = this.position.parent; if (!e || e.maxOffset < this.position.offset) throw new Ln.b('insert-operation-position-invalid: Insertion position is invalid.', this); } }, { key: '_execute', value() { const e = this.nodes; this.nodes = new os(c(e).map(((e) => e._clone(!0)))), _l(this.position, e); } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return e.position = this.position.toJSON(), e.nodes = this.nodes.toJSON(), e; } }, { key: 'type', get() { return 'insert'; } }, { key: 'howMany', get() { return this.nodes.maxOffset; } }], [{ key: 'fromJSON', value(e, t) { let r; const i = []; const o = d(e.nodes); try { for (o.s(); !(r = o.n()).done;) { const a = r.value; a.name ? i.push(as.fromJSON(a)) : i.push(rs.fromJSON(a)); } } catch (l) { o.e(l); } finally { o.f(); } const s = new n(cs.fromJSON(e.position, t), i, e.baseVersion); return s.shouldReceiveAttributes = e.shouldReceiveAttributes, s; } }, { key: 'className', get() { return 'InsertOperation'; } }]), n; }(yl)); const Rl = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o, a, s) { let l; return f(this, n), (l = t.call(this, s)).name = e, l.oldRange = r ? r.clone() : null, l.newRange = i ? i.clone() : null, l.affectsData = a, l._markers = o, l; } return m(n, [{ key: 'clone', value() { return new n(this.name, this.oldRange, this.newRange, this._markers, this.affectsData, this.baseVersion); } }, { key: 'getReversed', value() { return new n(this.name, this.newRange, this.oldRange, this._markers, this.affectsData, this.baseVersion + 1); } }, { key: '_execute', value() { const e = this.newRange ? '_set' : '_remove'; this._markers[e](this.name, this.newRange, !0, this.affectsData); } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return this.oldRange && (e.oldRange = this.oldRange.toJSON()), this.newRange && (e.newRange = this.newRange.toJSON()), delete e._markers, e; } }, { key: 'type', get() { return 'marker'; } }], [{ key: 'fromJSON', value(e, t) { return new n(e.name, e.oldRange ? fs.fromJSON(e.oldRange, t) : null, e.newRange ? fs.fromJSON(e.newRange, t) : null, t.model.markers, e.affectsData, e.baseVersion); } }, { key: 'className', get() { return 'MarkerOperation'; } }]), n; }(yl)); const jl = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; return f(this, n), (a = t.call(this, o)).position = e, a.position.stickiness = 'toNext', a.oldName = r, a.newName = i, a; } return m(n, [{ key: 'clone', value() { return new n(this.position.clone(), this.oldName, this.newName, this.baseVersion); } }, { key: 'getReversed', value() { return new n(this.position.clone(), this.newName, this.oldName, this.baseVersion + 1); } }, { key: '_validate', value() { const e = this.position.nodeAfter; if (!(e instanceof as)) throw new Ln.b('rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.', this); if (e.name !== this.oldName) throw new Ln.b("rename-operation-wrong-name: Element to change has different name than operation's old name.", this); } }, { key: '_execute', value() { this.position.nodeAfter.name = this.newName; } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return e.position = this.position.toJSON(), e; } }, { key: 'type', get() { return 'rename'; } }], [{ key: 'fromJSON', value(e, t) { return new n(cs.fromJSON(e.position, t), e.oldName, e.newName, e.baseVersion); } }, { key: 'className', get() { return 'RenameOperation'; } }]), n; }(yl)); const Dl = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o, a) { let s; return f(this, n), (s = t.call(this, a)).root = e, s.key = r, s.oldValue = i, s.newValue = o, s; } return m(n, [{ key: 'clone', value() { return new n(this.root, this.key, this.oldValue, this.newValue, this.baseVersion); } }, { key: 'getReversed', value() { return new n(this.root, this.key, this.newValue, this.oldValue, this.baseVersion + 1); } }, { key: '_validate', value() { if (this.root != this.root.root || this.root.is('documentFragment')) throw new Ln.b('rootattribute-operation-not-a-root: The element to change is not a root element.', this, { root: this.root, key: this.key }); if (this.oldValue !== null && this.root.getAttribute(this.key) !== this.oldValue) throw new Ln.b("rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's old attribute value.", this, { root: this.root, key: this.key }); if (this.oldValue === null && this.newValue !== null && this.root.hasAttribute(this.key)) throw new Ln.b('rootattribute-operation-attribute-exists: The attribute with given key already exists.', this, { root: this.root, key: this.key }); } }, { key: '_execute', value() { this.newValue !== null ? this.root._setAttribute(this.key, this.newValue) : this.root._removeAttribute(this.key); } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return e.root = this.root.toJSON(), e; } }, { key: 'type', get() { return this.oldValue === null ? 'addRootAttribute' : this.newValue === null ? 'removeRootAttribute' : 'changeRootAttribute'; } }], [{ key: 'fromJSON', value(e, t) { if (!t.getRoot(e.root)) throw new Ln.b('rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.', this, { rootName: e.root }); return new n(t.getRoot(e.root), e.key, e.oldValue, e.newValue, e.baseVersion); } }, { key: 'className', get() { return 'RootAttributeOperation'; } }]), n; }(yl)); const Ll = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o, a) { let s; return f(this, n), (s = t.call(this, a)).sourcePosition = e.clone(), s.sourcePosition.stickiness = 'toPrevious', s.howMany = r, s.targetPosition = i.clone(), s.targetPosition.stickiness = 'toNext', s.graveyardPosition = o.clone(), s; } return m(n, [{ key: 'clone', value() { return new this.constructor(this.sourcePosition, this.howMany, this.targetPosition, this.graveyardPosition, this.baseVersion); } }, { key: 'getReversed', value() { const e = this.targetPosition._getTransformedByMergeOperation(this); const t = this.sourcePosition.path.slice(0, -1); const n = new cs(this.sourcePosition.root, t)._getTransformedByMergeOperation(this); const r = new zl(e, this.howMany, this.graveyardPosition, this.baseVersion + 1); return r.insertionPosition = n, r; } }, { key: '_validate', value() { const e = this.sourcePosition.parent; const t = this.targetPosition.parent; if (!e.parent) throw new Ln.b('merge-operation-source-position-invalid: Merge source position is invalid.', this); if (!t.parent) throw new Ln.b('merge-operation-target-position-invalid: Merge target position is invalid.', this); if (this.howMany != e.maxOffset) throw new Ln.b('merge-operation-how-many-invalid: Merge operation specifies wrong number of nodes to move.', this); } }, { key: '_execute', value() { const e = this.sourcePosition.parent; xl(fs._createIn(e), this.targetPosition), xl(fs._createOn(e), this.graveyardPosition); } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return e.sourcePosition = e.sourcePosition.toJSON(), e.targetPosition = e.targetPosition.toJSON(), e.graveyardPosition = e.graveyardPosition.toJSON(), e; } }, { key: 'type', get() { return 'merge'; } }, { key: 'deletionPosition', get() { return new cs(this.sourcePosition.root, this.sourcePosition.path.slice(0, -1)); } }, { key: 'movedRange', get() { const e = this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY); return new fs(this.sourcePosition, e); } }], [{ key: 'fromJSON', value(e, t) { const n = cs.fromJSON(e.sourcePosition, t); const r = cs.fromJSON(e.targetPosition, t); const i = cs.fromJSON(e.graveyardPosition, t); return new this(n, e.howMany, r, i, e.baseVersion); } }, { key: 'className', get() { return 'MergeOperation'; } }]), n; }(yl)); var zl = (function (e) { v(n, e); const t = g(n); function n(e, r, i, o) { let a; return f(this, n), (a = t.call(this, o)).splitPosition = e.clone(), a.splitPosition.stickiness = 'toNext', a.howMany = r, a.insertionPosition = n.getInsertionPosition(e), a.insertionPosition.stickiness = 'toNone', a.graveyardPosition = i ? i.clone() : null, a.graveyardPosition && (a.graveyardPosition.stickiness = 'toNext'), a; } return m(n, [{ key: 'clone', value() { const e = new this.constructor(this.splitPosition, this.howMany, this.graveyardPosition, this.baseVersion); return e.insertionPosition = this.insertionPosition, e; } }, { key: 'getReversed', value() { const e = this.splitPosition.root.document.graveyard; const t = new cs(e, [0]); return new Ll(this.moveTargetPosition, this.howMany, this.splitPosition, t, this.baseVersion + 1); } }, { key: '_validate', value() { const e = this.splitPosition.parent; const t = this.splitPosition.offset; if (!e || e.maxOffset < t) throw new Ln.b('split-operation-position-invalid: Split position is invalid.', this); if (!e.parent) throw new Ln.b('split-operation-split-in-root: Cannot split root element.', this); if (this.howMany != e.maxOffset - this.splitPosition.offset) throw new Ln.b('split-operation-how-many-invalid: Split operation specifies wrong number of nodes to move.', this); if (this.graveyardPosition && !this.graveyardPosition.nodeAfter) throw new Ln.b('split-operation-graveyard-position-invalid: Graveyard position invalid.', this); } }, { key: '_execute', value() { const e = this.splitPosition.parent; if (this.graveyardPosition)xl(fs._createFromPositionAndShift(this.graveyardPosition, 1), this.insertionPosition); else { const t = e._clone(); _l(this.insertionPosition, t); }xl(new fs(cs._createAt(e, this.splitPosition.offset), cs._createAt(e, e.maxOffset)), this.moveTargetPosition); } }, { key: 'toJSON', value() { const e = o(a(n.prototype), 'toJSON', this).call(this); return e.splitPosition = this.splitPosition.toJSON(), e.insertionPosition = this.insertionPosition.toJSON(), this.graveyardPosition && (e.graveyardPosition = this.graveyardPosition.toJSON()), e; } }, { key: 'type', get() { return 'split'; } }, { key: 'moveTargetPosition', get() { const e = this.insertionPosition.path.slice(); return e.push(0), new cs(this.insertionPosition.root, e); } }, { key: 'movedRange', get() { const e = this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY); return new fs(this.splitPosition, e); } }], [{ key: 'getInsertionPosition', value(e) { const t = e.path.slice(0, -1); return t[t.length - 1]++, new cs(e.root, t); } }, { key: 'fromJSON', value(e, t) { const n = cs.fromJSON(e.splitPosition, t); const r = cs.fromJSON(e.insertionPosition, t); const i = e.graveyardPosition ? cs.fromJSON(e.graveyardPosition, t) : null; const o = new this(n, e.howMany, i, e.baseVersion); return o.insertionPosition = r, o; } }, { key: 'className', get() { return 'SplitOperation'; } }]), n; }(yl)); const Fl = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; const o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 'main'; return f(this, n), (i = t.call(this, r))._document = e, i.rootName = o, i; } return m(n, [{ key: 'is', value(e, t) { return t ? t === this.name && (e === 'rootElement' || e === 'model:rootElement' || e === 'element' || e === 'model:element') : e === 'rootElement' || e === 'model:rootElement' || e === 'element' || e === 'model:element' || e === 'node' || e === 'model:node'; } }, { key: 'toJSON', value() { return this.rootName; } }, { key: 'document', get() { return this._document; } }]), n; }(as)); const Vl = (function () { function e(t, n) { f(this, e), this.model = t, this.batch = n; } return m(e, [{ key: 'createText', value(e, t) { return new rs(e, t); } }, { key: 'createElement', value(e, t) { return new as(e, t); } }, { key: 'createDocumentFragment', value() { return new wl(); } }, { key: 'cloneElement', value(e) { const t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; return e._clone(t); } }, { key: 'insert', value(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; if (this._assertWriterUsedCorrectly(), !(e instanceof rs && e.data == '')) { const r = cs._createAt(t, n); if (e.parent) { if (ql(e.root, r.root)) return void this.move(fs._createOn(e), r); if (e.root.document) throw new Ln.b('model-writer-insert-forbidden-move: Cannot move a node from a document to a different tree. It is forbidden to move a node that was already in a document outside of it.', this); this.remove(e); } const i = r.root.document ? r.root.document.version : null; const o = new Nl(r, e, i); if (e instanceof rs && (o.shouldReceiveAttributes = !0), this.batch.addOperation(o), this.model.applyOperation(o), e instanceof wl) { let a; const s = d(e.markers); try { for (s.s(); !(a = s.n()).done;) { const l = u(a.value, 2); const c = l[0]; const h = l[1]; const f = cs._createAt(h.root, 0); const m = new fs(h.start._getCombined(f, r), h.end._getCombined(f, r)); const v = { range: m, usingOperation: !0, affectsData: !0 }; this.model.markers.has(c) ? this.updateMarker(c, v) : this.addMarker(c, v); } } catch (g) { s.e(g); } finally { s.f(); } } } } }, { key: 'insertText', value(e, t, n, r) { t instanceof wl || t instanceof as || t instanceof cs ? this.insert(this.createText(e), t, n) : this.insert(this.createText(e, t), n, r); } }, { key: 'insertElement', value(e, t, n, r) { t instanceof wl || t instanceof as || t instanceof cs ? this.insert(this.createElement(e), t, n) : this.insert(this.createElement(e, t), n, r); } }, { key: 'append', value(e, t) { this.insert(e, t, 'end'); } }, { key: 'appendText', value(e, t, n) { t instanceof wl || t instanceof as ? this.insert(this.createText(e), t, 'end') : this.insert(this.createText(e, t), n, 'end'); } }, { key: 'appendElement', value(e, t, n) { t instanceof wl || t instanceof as ? this.insert(this.createElement(e), t, 'end') : this.insert(this.createElement(e, t), n, 'end'); } }, { key: 'setAttribute', value(e, t, n) { if (this._assertWriterUsedCorrectly(), n instanceof fs) { let r; const i = n.getMinimalFlatRanges(); const o = d(i); try { for (o.s(); !(r = o.n()).done;)Bl(this, e, t, r.value); } catch (a) { o.e(a); } finally { o.f(); } } else Ul(this, e, t, n); } }, { key: 'setAttributes', value(e, t) { let n; const r = d(hr(e)); try { for (r.s(); !(n = r.n()).done;) { const i = u(n.value, 2); const o = i[0]; const a = i[1]; this.setAttribute(o, a, t); } } catch (s) { r.e(s); } finally { r.f(); } } }, { key: 'removeAttribute', value(e, t) { if (this._assertWriterUsedCorrectly(), t instanceof fs) { let n; const r = t.getMinimalFlatRanges(); const i = d(r); try { for (i.s(); !(n = i.n()).done;)Bl(this, e, null, n.value); } catch (o) { i.e(o); } finally { i.f(); } } else Ul(this, e, null, t); } }, { key: 'clearAttributes', value(e) { const t = this; this._assertWriterUsedCorrectly(); const n = function (e) { let n; const r = d(e.getAttributeKeys()); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; t.removeAttribute(i, e); } } catch (o) { r.e(o); } finally { r.f(); } }; if (e instanceof fs) { let r; const i = d(e.getItems()); try { for (i.s(); !(r = i.n()).done;)n(r.value); } catch (o) { i.e(o); } finally { i.f(); } } else n(e); } }, { key: 'move', value(e, t, n) { if (this._assertWriterUsedCorrectly(), !(e instanceof fs)) throw new Ln.b('writer-move-invalid-range: Invalid range to move.', this); if (!e.isFlat) throw new Ln.b('writer-move-range-not-flat: Range to move is not flat.', this); const r = cs._createAt(t, n); if (!r.isEqual(e.start)) { if (this._addOperationForAffectedMarkers('move', e), !ql(e.root, r.root)) throw new Ln.b('writer-move-different-document: Range is going to be moved between different documents.', this); const i = e.root.document ? e.root.document.version : null; const o = new Ml(e.start, e.end.offset - e.start.offset, r, i); this.batch.addOperation(o), this.model.applyOperation(o); } } }, { key: 'remove', value(e) { this._assertWriterUsedCorrectly(); let t; const n = (e instanceof fs ? e : fs._createOn(e)).getMinimalFlatRanges().reverse(); const r = d(n); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; this._addOperationForAffectedMarkers('move', i), Wl(i.start, i.end.offset - i.start.offset, this.batch, this.model); } } catch (o) { r.e(o); } finally { r.f(); } } }, { key: 'merge', value(e) { this._assertWriterUsedCorrectly(); const t = e.nodeBefore; const n = e.nodeAfter; if (this._addOperationForAffectedMarkers('merge', e), !(t instanceof as)) throw new Ln.b('writer-merge-no-element-before: Node before merge position must be an element.', this); if (!(n instanceof as)) throw new Ln.b('writer-merge-no-element-after: Node after merge position must be an element.', this); e.root.document ? this._merge(e) : this._mergeDetached(e); } }, { key: 'createPositionFromPath', value(e, t, n) { return this.model.createPositionFromPath(e, t, n); } }, { key: 'createPositionAt', value(e, t) { return this.model.createPositionAt(e, t); } }, { key: 'createPositionAfter', value(e) { return this.model.createPositionAfter(e); } }, { key: 'createPositionBefore', value(e) { return this.model.createPositionBefore(e); } }, { key: 'createRange', value(e, t) { return this.model.createRange(e, t); } }, { key: 'createRangeIn', value(e) { return this.model.createRangeIn(e); } }, { key: 'createRangeOn', value(e) { return this.model.createRangeOn(e); } }, { key: 'createSelection', value(e, t, n) { return this.model.createSelection(e, t, n); } }, { key: '_mergeDetached', value(e) { const t = e.nodeBefore; const n = e.nodeAfter; this.move(fs._createIn(n), cs._createAt(t, 'end')), this.remove(n); } }, { key: '_merge', value(e) { const t = cs._createAt(e.nodeBefore, 'end'); const n = cs._createAt(e.nodeAfter, 0); const r = e.root.document.graveyard; const i = new cs(r, [0]); const o = e.root.document.version; const a = new Ll(n, e.nodeAfter.maxOffset, t, i, o); this.batch.addOperation(a), this.model.applyOperation(a); } }, { key: 'rename', value(e, t) { if (this._assertWriterUsedCorrectly(), !(e instanceof as)) throw new Ln.b('writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.', this); const n = e.root.document ? e.root.document.version : null; const r = new jl(cs._createBefore(e), e.name, t, n); this.batch.addOperation(r), this.model.applyOperation(r); } }, { key: 'split', value(e, t) { this._assertWriterUsedCorrectly(); let n; let r; let i = e.parent; if (!i.parent) throw new Ln.b('writer-split-element-no-parent: Element with no parent can not be split.', this); if (t || (t = i.parent), !e.parent.getAncestors({ includeSelf: !0 }).includes(t)) throw new Ln.b('writer-split-invalid-limit-element: Limit element is not a position ancestor.', this); do { const o = i.root.document ? i.root.document.version : null; const a = i.maxOffset - e.offset; const s = new zl(e, a, null, o); this.batch.addOperation(s), this.model.applyOperation(s), n || r || (n = i, r = e.parent.nextSibling), i = (e = this.createPositionAfter(e.parent)).parent; } while (i !== t); return { position: e, range: new fs(cs._createAt(n, 'end'), cs._createAt(r, 0)) }; } }, { key: 'wrap', value(e, t) { if (this._assertWriterUsedCorrectly(), !e.isFlat) throw new Ln.b('writer-wrap-range-not-flat: Range to wrap is not flat.', this); const n = t instanceof as ? t : new as(t); if (n.childCount > 0) throw new Ln.b('writer-wrap-element-not-empty: Element to wrap with is not empty.', this); if (n.parent !== null) throw new Ln.b('writer-wrap-element-attached: Element to wrap with is already attached to tree model.', this); this.insert(n, e.start); const r = new fs(e.start.getShiftedBy(1), e.end.getShiftedBy(1)); this.move(r, cs._createAt(n, 0)); } }, { key: 'unwrap', value(e) { if (this._assertWriterUsedCorrectly(), e.parent === null) throw new Ln.b('writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.', this); this.move(fs._createIn(e), this.createPositionAfter(e)), this.remove(e); } }, { key: 'addMarker', value(e, t) { if (this._assertWriterUsedCorrectly(), !t || typeof t.usingOperation !== 'boolean') throw new Ln.b('writer-addMarker-no-usingOperation: The options.usingOperation parameter is required when adding a new marker.', this); const n = t.usingOperation; const r = t.range; const i = void 0 !== t.affectsData && t.affectsData; if (this.model.markers.has(e)) throw new Ln.b('writer-addMarker-marker-exists: Marker with provided name already exists.', this); if (!r) throw new Ln.b('writer-addMarker-no-range: Range parameter is required when adding a new marker.', this); return n ? (Hl(this, e, null, r, i), this.model.markers.get(e)) : this.model.markers._set(e, r, n, i); } }, { key: 'updateMarker', value(e, t) { this._assertWriterUsedCorrectly(); const n = typeof e === 'string' ? e : e.name; const r = this.model.markers.get(n); if (!r) throw new Ln.b('writer-updateMarker-marker-not-exists: Marker with provided name does not exists.', this); if (t) { const i = typeof t.usingOperation === 'boolean'; const o = typeof t.affectsData === 'boolean'; const a = o ? t.affectsData : r.affectsData; if (!i && !t.range && !o) throw new Ln.b('writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.', this); const s = r.getRange(); const l = t.range ? t.range : s; i && t.usingOperation !== r.managedUsingOperations ? t.usingOperation ? Hl(this, n, null, l, a) : (Hl(this, n, s, null, a), this.model.markers._set(n, l, void 0, a)) : r.managedUsingOperations ? Hl(this, n, s, l, a) : this.model.markers._set(n, l, void 0, a); } else this.model.markers._refresh(r); } }, { key: 'removeMarker', value(e) { this._assertWriterUsedCorrectly(); const t = typeof e === 'string' ? e : e.name; if (!this.model.markers.has(t)) throw new Ln.b('writer-removeMarker-no-marker: Trying to remove marker which does not exist.', this); const n = this.model.markers.get(t); n.managedUsingOperations ? Hl(this, t, n.getRange(), null, n.affectsData) : this.model.markers._remove(t); } }, { key: 'setSelection', value(e, t, n) { this._assertWriterUsedCorrectly(), this.model.document.selection._setTo(e, t, n); } }, { key: 'setSelectionFocus', value(e, t) { this._assertWriterUsedCorrectly(), this.model.document.selection._setFocus(e, t); } }, { key: 'setSelectionAttribute', value(e, t) { if (this._assertWriterUsedCorrectly(), typeof e === 'string') this._setSelectionAttribute(e, t); else { let n; const r = d(hr(e)); try { for (r.s(); !(n = r.n()).done;) { const i = u(n.value, 2); const o = i[0]; const a = i[1]; this._setSelectionAttribute(o, a); } } catch (s) { r.e(s); } finally { r.f(); } } } }, { key: 'removeSelectionAttribute', value(e) { if (this._assertWriterUsedCorrectly(), typeof e === 'string') this._removeSelectionAttribute(e); else { let t; const n = d(e); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; this._removeSelectionAttribute(r); } } catch (i) { n.e(i); } finally { n.f(); } } } }, { key: 'overrideSelectionGravity', value() { return this.model.document.selection._overrideGravity(); } }, { key: 'restoreSelectionGravity', value(e) { this.model.document.selection._restoreGravity(e); } }, { key: '_setSelectionAttribute', value(e, t) { const n = this.model.document.selection; if (n.isCollapsed && n.anchor.parent.isEmpty) { const r = As._getStoreAttributeKey(e); this.setAttribute(r, t, n.anchor.parent); }n._setAttribute(e, t); } }, { key: '_removeSelectionAttribute', value(e) { const t = this.model.document.selection; if (t.isCollapsed && t.anchor.parent.isEmpty) { const n = As._getStoreAttributeKey(e); this.removeAttribute(n, t.anchor.parent); }t._removeAttribute(e); } }, { key: '_assertWriterUsedCorrectly', value() { if (this.model._currentWriter !== this) throw new Ln.b('writer-incorrect-use: Trying to use a writer outside the change() block.', this); } }, { key: '_addOperationForAffectedMarkers', value(e, t) { let n; const r = d(this.model.markers); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (i.managedUsingOperations) { const o = i.getRange(); let a = !1; if (e === 'move')a = t.containsPosition(o.start) || t.start.isEqual(o.start) || t.containsPosition(o.end) || t.end.isEqual(o.end); else { const s = t.nodeBefore; const l = t.nodeAfter; const c = o.start.parent == s && o.start.isAtEnd; const u = o.end.parent == l && o.end.offset == 0; const h = o.end.nodeAfter == l; const f = o.start.nodeAfter == l; a = c || u || h || f; }a && this.updateMarker(i.name, { range: o }); } } } catch (m) { r.e(m); } finally { r.f(); } } }]), e; }()); function Bl(e, t, n, r) { let i; let o; let a; let s; const l = e.model; const c = l.document; let u = r.start; const h = d(r.getWalker({ shallow: !0 })); try { for (h.s(); !(s = h.n()).done;) { const f = s.value; a = f.item.getAttribute(t), i && o != a && (o != n && m(), u = i), i = f.nextPosition, o = a; } } catch (v) { h.e(v); } finally { h.f(); } function m() { const r = new fs(u, i); const a = r.root.document ? c.version : null; const s = new Ol(r, t, o, n, a); e.batch.addOperation(s), l.applyOperation(s); }i instanceof cs && i != u && o != n && m(); } function Ul(e, t, n, r) { let i; let o; const a = e.model; const s = a.document; const l = r.getAttribute(t); if (l != n) { if (r.root === r) { const c = r.document ? s.version : null; o = new Dl(r, t, l, n, c); } else { const u = (i = new fs(cs._createBefore(r), e.createPositionAfter(r))).root.document ? s.version : null; o = new Ol(i, t, l, n, u); }e.batch.addOperation(o), a.applyOperation(o); } } function Hl(e, t, n, r, i) { const o = e.model; const a = o.document; const s = new Rl(t, n, r, o.markers, i, a.version); e.batch.addOperation(s), o.applyOperation(s); } function Wl(e, t, n, r) { let i; if (e.root.document) { const o = r.document; const a = new cs(o.graveyard, [0]); i = new Ml(e, t, a, o.version); } else i = new Il(e, t); n.addOperation(i), r.applyOperation(i); } function ql(e, t) { return e === t || e instanceof Fl && t instanceof Fl; } const Gl = (function () {
            function e(t) { f(this, e), this._markerCollection = t, this._changesInElement = new Map(), this._elementSnapshots = new Map(), this._changedMarkers = new Map(), this._changeCount = 0, this._cachedChanges = null, this._cachedChangesWithGraveyard = null; } return m(e, [{ key: 'refreshItem', value(e) { if (!this._isInInsertedElement(e.parent)) { this._markRemove(e.parent, e.startOffset, e.offsetSize), this._markInsert(e.parent, e.startOffset, e.offsetSize); let t; const n = fs._createOn(e); const r = d(this._markerCollection.getMarkersIntersectingRange(n)); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; const o = i.getRange(); this.bufferMarkerChange(i.name, o, o, i.affectsData); } } catch (a) { r.e(a); } finally { r.f(); } this._cachedChanges = null; } } }, { key: 'bufferOperation', value(e) { switch (e.type) { case 'insert': if (this._isInInsertedElement(e.position.parent)) return; this._markInsert(e.position.parent, e.position.offset, e.nodes.maxOffset); break; case 'addAttribute': case 'removeAttribute': case 'changeAttribute': var t; var n = d(e.range.getItems({ shallow: !0 })); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; this._isInInsertedElement(r.parent) || this._markAttribute(r); } } catch (g) { n.e(g); } finally { n.f(); } break; case 'remove': case 'move': case 'reinsert': if (e.sourcePosition.isEqual(e.targetPosition) || e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition)) return; var i = this._isInInsertedElement(e.sourcePosition.parent); var o = this._isInInsertedElement(e.targetPosition.parent); i || this._markRemove(e.sourcePosition.parent, e.sourcePosition.offset, e.howMany), o || this._markInsert(e.targetPosition.parent, e.getMovedRangeStart().offset, e.howMany); break; case 'rename': if (this._isInInsertedElement(e.position.parent)) return; this._markRemove(e.position.parent, e.position.offset, 1), this._markInsert(e.position.parent, e.position.offset, 1); var a; var s = fs._createFromPositionAndShift(e.position, 1); var l = d(this._markerCollection.getMarkersIntersectingRange(s)); try { for (l.s(); !(a = l.n()).done;) { const c = a.value; const u = c.getRange(); this.bufferMarkerChange(c.name, u, u, c.affectsData); } } catch (g) { l.e(g); } finally { l.f(); } break; case 'split': var h = e.splitPosition.parent; this._isInInsertedElement(h) || this._markRemove(h, e.splitPosition.offset, e.howMany), this._isInInsertedElement(e.insertionPosition.parent) || this._markInsert(e.insertionPosition.parent, e.insertionPosition.offset, 1), e.graveyardPosition && this._markRemove(e.graveyardPosition.parent, e.graveyardPosition.offset, 1); break; case 'merge': var f = e.sourcePosition.parent; this._isInInsertedElement(f.parent) || this._markRemove(f.parent, f.startOffset, 1); var m = e.graveyardPosition.parent; this._markInsert(m, e.graveyardPosition.offset, 1); var v = e.targetPosition.parent; this._isInInsertedElement(v) || this._markInsert(v, e.targetPosition.offset, f.maxOffset); } this._cachedChanges = null; } }, { key: 'bufferMarkerChange', value(e, t, n, r) { const i = this._changedMarkers.get(e); i ? (i.newRange = n, i.affectsData = r, i.oldRange == null && i.newRange == null && this._changedMarkers.delete(e)) : this._changedMarkers.set(e, { oldRange: t, newRange: n, affectsData: r }); } }, { key: 'getMarkersToRemove', value() { let e; const t = []; const n = d(this._changedMarkers); try { for (n.s(); !(e = n.n()).done;) { const r = u(e.value, 2); const i = r[0]; const o = r[1]; o.oldRange != null && t.push({ name: i, range: o.oldRange }); } } catch (a) { n.e(a); } finally { n.f(); } return t; } }, { key: 'getMarkersToAdd', value() { let e; const t = []; const n = d(this._changedMarkers); try { for (n.s(); !(e = n.n()).done;) { const r = u(e.value, 2); const i = r[0]; const o = r[1]; o.newRange != null && t.push({ name: i, range: o.newRange }); } } catch (a) { n.e(a); } finally { n.f(); } return t; } }, { key: 'getChangedMarkers', value() { return Array.from(this._changedMarkers).map(((e) => ({ name: e[0], data: { oldRange: e[1].oldRange, newRange: e[1].newRange } }))); } }, { key: 'hasDataChanges', value() { let e; const t = d(this._changedMarkers); try { for (t.s(); !(e = t.n()).done;) if (u(e.value, 2)[1].affectsData) return !0; } catch (n) { t.e(n); } finally { t.f(); } return this._changesInElement.size > 0; } }, { key: 'getChanges', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : { includeChangesInGraveyard: !1 }; if (this._cachedChanges) return e.includeChangesInGraveyard ? this._cachedChangesWithGraveyard.slice() : this._cachedChanges.slice(); let t; const n = []; const r = d(this._changesInElement.keys()); try { for (r.s(); !(t = r.n()).done;) { var i; const o = t.value; const a = this._changesInElement.get(o).sort(((e, t) => (e.offset === t.offset ? e.type != t.type ? e.type == 'remove' ? -1 : 1 : 0 : e.offset < t.offset ? -1 : 1))); const s = this._elementSnapshots.get(o); const l = $l(o.getChildren()); const u = Yl(s.length, a); let h = 0; let f = 0; const m = d(u); try { for (m.s(); !(i = m.n()).done;) { const v = i.value; if (v === 'i')n.push(this._getInsertDiff(o, h, l[h].name)), h++; else if (v === 'r')n.push(this._getRemoveDiff(o, h, s[f].name)), f++; else if (v === 'a') { const g = l[h].attributes; const p = s[f].attributes; let k = void 0; if (l[h].name == '$text')k = new fs(cs._createAt(o, h), cs._createAt(o, h + 1)); else { const b = o.offsetToIndex(h); k = new fs(cs._createAt(o, h), cs._createAt(o.getChild(b), 0)); }n.push.apply(n, c(this._getAttributesDiff(k, p, g))), h++, f++; } else h++, f++; } } catch (P) { m.e(P); } finally { m.f(); } } } catch (P) { r.e(P); } finally { r.f(); }n.sort(((e, t) => (e.position.root != t.position.root ? e.position.root.rootName < t.position.root.rootName ? -1 : 1 : e.position.isEqual(t.position) ? e.changeCount - t.changeCount : e.position.isBefore(t.position) ? -1 : 1))); for (let y = 1; y < n.length; y++) { const w = n[y - 1]; const _ = n[y]; const E = w.type == 'remove' && _.type == 'remove' && w.name == '$text' && _.name == '$text' && w.position.isEqual(_.position); const x = w.type == 'insert' && _.type == 'insert' && w.name == '$text' && _.name == '$text' && w.position.parent == _.position.parent && w.position.offset + w.length == _.position.offset; const T = w.type == 'attribute' && _.type == 'attribute' && w.position.parent == _.position.parent && w.range.isFlat && _.range.isFlat && w.position.offset + w.length == _.position.offset && w.attributeKey == _.attributeKey && w.attributeOldValue == _.attributeOldValue && w.attributeNewValue == _.attributeNewValue; (E || x || T) && (n[y - 1].length++, T && (n[y - 1].range.end = n[y - 1].range.end.getShiftedBy(1)), n.splice(y, 1), y--); } for (let C = 0, S = n; C < S.length; C++) { const A = S[C]; delete A.changeCount, A.type == 'attribute' && (delete A.position, delete A.length); } return this._changeCount = 0, this._cachedChangesWithGraveyard = n.slice(), this._cachedChanges = n.slice().filter(Kl), e.includeChangesInGraveyard ? this._cachedChangesWithGraveyard : this._cachedChanges; } }, { key: 'reset', value() { this._changesInElement.clear(), this._elementSnapshots.clear(), this._changedMarkers.clear(), this._cachedChanges = null; } }, {
              key: '_markInsert',
              value(e, t, n) {
                const r = {
                  type: 'insert', offset: t, howMany: n, count: this._changeCount++,
                }; this._markChange(e, r);
              },
            }, {
              key: '_markRemove',
              value(e, t, n) {
                const r = {
                  type: 'remove', offset: t, howMany: n, count: this._changeCount++,
                }; this._markChange(e, r), this._removeAllNestedChanges(e, t, n);
              },
            }, {
              key: '_markAttribute',
              value(e) {
                const t = {
                  type: 'attribute', offset: e.startOffset, howMany: e.offsetSize, count: this._changeCount++,
                }; this._markChange(e.parent, t);
              },
            }, { key: '_markChange', value(e, t) { this._makeSnapshot(e); const n = this._getChangesForElement(e); this._handleChange(t, n), n.push(t); for (let r = 0; r < n.length; r++)n[r].howMany < 1 && (n.splice(r, 1), r--); } }, { key: '_getChangesForElement', value(e) { let t; return this._changesInElement.has(e) ? t = this._changesInElement.get(e) : (t = [], this._changesInElement.set(e, t)), t; } }, { key: '_makeSnapshot', value(e) { this._elementSnapshots.has(e) || this._elementSnapshots.set(e, $l(e.getChildren())); } }, {
              key: '_handleChange',
              value(e, t) {
                e.nodesToHandle = e.howMany; let n; const r = d(t); try {
                  for (r.s(); !(n = r.n()).done;) {
                    const i = n.value; const o = e.offset + e.howMany; const a = i.offset + i.howMany; if (e.type == 'insert' && (i.type == 'insert' && (e.offset <= i.offset ? i.offset += e.howMany : e.offset < a && (i.howMany += e.nodesToHandle, e.nodesToHandle = 0)), i.type == 'remove' && e.offset < i.offset && (i.offset += e.howMany), i.type == 'attribute')) {
                      if (e.offset <= i.offset)i.offset += e.howMany; else if (e.offset < a) {
                        const s = i.howMany; i.howMany = e.offset - i.offset, t.unshift({
                          type: 'attribute', offset: o, howMany: s - i.howMany, count: this._changeCount++,
                        });
                      }
                    } if (e.type == 'remove') {
                      if (i.type == 'insert') if (o <= i.offset)i.offset -= e.howMany; else if (o <= a) if (e.offset < i.offset) { const l = o - i.offset; i.offset = e.offset, i.howMany -= l, e.nodesToHandle -= l; } else i.howMany -= e.nodesToHandle, e.nodesToHandle = 0; else if (e.offset <= i.offset)e.nodesToHandle -= i.howMany, i.howMany = 0; else if (e.offset < a) { const c = a - e.offset; i.howMany -= c, e.nodesToHandle -= c; } if (i.type == 'remove' && (o <= i.offset ? i.offset -= e.howMany : e.offset < i.offset && (e.nodesToHandle += i.howMany, i.howMany = 0)), i.type == 'attribute') {
                        if (o <= i.offset)i.offset -= e.howMany; else if (e.offset < i.offset) { const u = o - i.offset; i.offset = e.offset, i.howMany -= u; } else if (e.offset < a) {
                          if (o <= a) {
                            const h = i.howMany; i.howMany = e.offset - i.offset; const f = h - i.howMany - e.nodesToHandle; t.unshift({
                              type: 'attribute', offset: e.offset, howMany: f, count: this._changeCount++,
                            });
                          } else i.howMany -= a - e.offset;
                        }
                      }
                    } if (e.type == 'attribute') {
                      if (i.type == 'insert') {
                        if (e.offset < i.offset && o > i.offset) {
                          if (o > a) {
                            const m = {
                              type: 'attribute', offset: a, howMany: o - a, count: this._changeCount++,
                            }; this._handleChange(m, t), t.push(m);
                          }e.nodesToHandle = i.offset - e.offset, e.howMany = e.nodesToHandle;
                        } else e.offset >= i.offset && e.offset < a && (o > a ? (e.nodesToHandle = o - a, e.offset = a) : e.nodesToHandle = 0);
                      } if (i.type == 'remove' && e.offset < i.offset && o > i.offset) {
                        const v = {
                          type: 'attribute', offset: i.offset, howMany: o - i.offset, count: this._changeCount++,
                        }; this._handleChange(v, t), t.push(v), e.nodesToHandle = i.offset - e.offset, e.howMany = e.nodesToHandle;
                      }i.type == 'attribute' && (e.offset >= i.offset && o <= a ? (e.nodesToHandle = 0, e.howMany = 0, e.offset = 0) : e.offset <= i.offset && o >= a && (i.howMany = 0));
                    }
                  }
                } catch (g) { r.e(g); } finally { r.f(); }e.howMany = e.nodesToHandle, delete e.nodesToHandle;
              },
            }, {
              key: '_getInsertDiff',
              value(e, t, n) {
                return {
                  type: 'insert', position: cs._createAt(e, t), name: n, length: 1, changeCount: this._changeCount++,
                };
              },
            }, {
              key: '_getRemoveDiff',
              value(e, t, n) {
                return {
                  type: 'remove', position: cs._createAt(e, t), name: n, length: 1, changeCount: this._changeCount++,
                };
              },
            }, {
              key: '_getAttributesDiff',
              value(e, t, n) {
                const r = []; n = new Map(n); let i; const o = d(t); try {
                  for (o.s(); !(i = o.n()).done;) {
                    const a = u(i.value, 2); const s = a[0]; const l = a[1]; const c = n.has(s) ? n.get(s) : null; c !== l && r.push({
                      type: 'attribute', position: e.start, range: e.clone(), length: 1, attributeKey: s, attributeOldValue: l, attributeNewValue: c, changeCount: this._changeCount++,
                    }), n.delete(s);
                  }
                } catch (p) { o.e(p); } finally { o.f(); } let h; const f = d(n); try {
                  for (f.s(); !(h = f.n()).done;) {
                    const m = u(h.value, 2); const v = m[0]; const g = m[1]; r.push({
                      type: 'attribute', position: e.start, range: e.clone(), length: 1, attributeKey: v, attributeOldValue: null, attributeNewValue: g, changeCount: this._changeCount++,
                    });
                  }
                } catch (p) { f.e(p); } finally { f.f(); } return r;
              },
            }, { key: '_isInInsertedElement', value(e) { const t = e.parent; if (!t) return !1; const n = this._changesInElement.get(t); const r = e.startOffset; if (n) { let i; const o = d(n); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; if (a.type == 'insert' && r >= a.offset && r < a.offset + a.howMany) return !0; } } catch (s) { o.e(s); } finally { o.f(); } } return this._isInInsertedElement(t); } }, { key: '_removeAllNestedChanges', value(e, t, n) { let r; const i = new fs(cs._createAt(e, t), cs._createAt(e, t + n)); const o = d(i.getItems({ shallow: !0 })); try { for (o.s(); !(r = o.n()).done;) { const a = r.value; a.is('element') && (this._elementSnapshots.delete(a), this._changesInElement.delete(a), this._removeAllNestedChanges(a, 0, a.maxOffset)); } } catch (s) { o.e(s); } finally { o.f(); } } }, { key: 'isEmpty', get() { return this._changesInElement.size == 0 && this._changedMarkers.size == 0; } }]), e;
          }()); function $l(e) { let t; const n = []; const r = d(e); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; if (i.is('$text')) for (let o = 0; o < i.data.length; o++)n.push({ name: '$text', attributes: new Map(i.getAttributes()) }); else n.push({ name: i.name, attributes: new Map(i.getAttributes()) }); } } catch (a) { r.e(a); } finally { r.f(); } return n; } function Yl(e, t) { let n; const r = []; let i = 0; let o = 0; const a = d(t); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; if (s.offset > i) { for (let l = 0; l < s.offset - i; l++)r.push('e'); o += s.offset - i; } if (s.type == 'insert') { for (let u = 0; u < s.howMany; u++)r.push('i'); i = s.offset + s.howMany; } else if (s.type == 'remove') { for (let h = 0; h < s.howMany; h++)r.push('r'); i = s.offset, o += s.howMany; } else r.push.apply(r, c('a'.repeat(s.howMany).split(''))), i = s.offset + s.howMany, o += s.howMany; } } catch (m) { a.e(m); } finally { a.f(); } if (o < e) for (let f = 0; f < e - o - i; f++)r.push('e'); return r; } function Kl(e) { const t = e.position && e.position.root.rootName == '$graveyard'; const n = e.range && e.range.root.rootName == '$graveyard'; return !t && !n; } const Ql = (function () { function e() { f(this, e), this._operations = [], this._undoPairs = new Map(), this._undoneOperations = new Set(); } return m(e, [{ key: 'addOperation', value(e) { this._operations.includes(e) || this._operations.push(e); } }, { key: 'getOperations', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0; const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Number.POSITIVE_INFINITY; return e < 0 ? [] : this._operations.slice(e, t); } }, { key: 'getOperation', value(e) { return this._operations[e]; } }, { key: 'setOperationAsUndone', value(e, t) { this._undoPairs.set(t, e), this._undoneOperations.add(e); } }, { key: 'isUndoingOperation', value(e) { return this._undoPairs.has(e); } }, { key: 'isUndoneOperation', value(e) { return this._undoneOperations.has(e); } }, { key: 'getUndoneOperation', value(e) { return this._undoPairs.get(e); } }]), e; }()); function Jl(e, t) { return (function (e) { return !!e && e.length == 1 && /[\ud800-\udbff]/.test(e); }(e.charAt(t - 1))) && (function (e) { return !!e && e.length == 1 && /[\udc00-\udfff]/.test(e); }(e.charAt(t))); } function Zl(e, t) { return (function (e) { return !!e && e.length == 1 && /[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(e); }(e.charAt(t))); } const Xl = '$graveyard'; const ec = (function () {
            function e(t) { const n = this; f(this, e), this.model = t, this.version = 0, this.history = new Ql(this), this.selection = new As(this), this.roots = new Jn({ idProperty: 'rootName' }), this.differ = new Gl(t.markers), this._postFixers = new Set(), this._hasSelectionChangedFromTheLastChangeBlock = !1, this.createRoot('$root', Xl), this.listenTo(t, 'applyOperation', ((e, t) => { const r = t[0]; if (r.isDocumentOperation && r.baseVersion !== n.version) throw new Ln.b('model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.', n, { operation: r }); }), { priority: 'highest' }), this.listenTo(t, 'applyOperation', ((e, t) => { const r = t[0]; r.isDocumentOperation && n.differ.bufferOperation(r); }), { priority: 'high' }), this.listenTo(t, 'applyOperation', ((e, t) => { const r = t[0]; r.isDocumentOperation && (n.version++, n.history.addOperation(r)); }), { priority: 'low' }), this.listenTo(this.selection, 'change', (() => { n._hasSelectionChangedFromTheLastChangeBlock = !0; })), this.listenTo(t.markers, 'update', ((e, t, r, i) => { n.differ.bufferMarkerChange(t.name, r, i, t.affectsData), r === null && t.on('change', ((e, r) => { n.differ.bufferMarkerChange(t.name, r, t.getRange(), t.affectsData); })); })); } return m(e, [{
              key: 'createRoot',
              value() {
                const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : '$root'; const
                  t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 'main'; if (this.roots.get(t)) throw new Ln.b('model-document-createRoot-name-exists: Root with specified name already exists.', this, { name: t }); const n = new Fl(this, e, t); return this.roots.add(n), n;
              },
            }, { key: 'destroy', value() { this.selection.destroy(), this.stopListening(); } }, { key: 'getRoot', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 'main'; return this.roots.get(e); } }, { key: 'getRootNames', value() { return Array.from(this.roots, ((e) => e.rootName)).filter(((e) => e != Xl)); } }, { key: 'registerPostFixer', value(e) { this._postFixers.add(e); } }, { key: 'toJSON', value() { const e = lr(this); return e.selection = '[engine.model.DocumentSelection]', e.model = '[engine.model.Model]', e; } }, { key: '_handleChangeBlock', value(e) { this._hasDocumentChangedFromTheLastChangeBlock() && (this._callPostFixers(e), this.selection.refresh(), this.differ.hasDataChanges() ? this.fire('change:data', e.batch) : this.fire('change', e.batch), this.selection.refresh(), this.differ.reset()), this._hasSelectionChangedFromTheLastChangeBlock = !1; } }, { key: '_hasDocumentChangedFromTheLastChangeBlock', value() { return !this.differ.isEmpty || this._hasSelectionChangedFromTheLastChangeBlock; } }, { key: '_getDefaultRoot', value() { let e; const t = d(this.roots); try { for (t.s(); !(e = t.n()).done;) { const n = e.value; if (n !== this.graveyard) return n; } } catch (r) { t.e(r); } finally { t.f(); } return this.graveyard; } }, { key: '_getDefaultRange', value() { const e = this._getDefaultRoot(); const t = this.model; const n = t.schema; const r = t.createPositionFromPath(e, [0]); return n.getNearestSelectionRange(r) || t.createRange(r); } }, { key: '_validateSelectionRange', value(e) { return tc(e.start) && tc(e.end); } }, { key: '_callPostFixers', value(e) { let t = !1; do { var n; const r = d(this._postFixers); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (this.selection.refresh(), t = i(e)) break; } } catch (o) { r.e(o); } finally { r.f(); } } while (t); } }, { key: 'graveyard', get() { return this.getRoot(Xl); } }]), e;
          }()); function tc(e) { const t = e.textNode; if (t) { const n = t.data; const r = e.offset - t.startOffset; return !Jl(n, r) && !Zl(n, r); } return !0; }Qn(ec, Vn); const nc = (function () { function e() { f(this, e), this._markers = new Map(); } return m(e, [{ key: Symbol.iterator, value() { return this._markers.values(); } }, { key: 'has', value(e) { return this._markers.has(e); } }, { key: 'get', value(e) { return this._markers.get(e) || null; } }, { key: '_set', value(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; const r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; const i = e instanceof rc ? e.name : e; if (i.includes(',')) throw new Ln.b('markercollection-incorrect-marker-name: Marker name cannot contain "," character.', this); const o = this._markers.get(i); if (o) { const a = o.getRange(); let s = !1; return a.isEqual(t) || (o._attachLiveRange(xs.fromRange(t)), s = !0), n != o.managedUsingOperations && (o._managedUsingOperations = n, s = !0), typeof r === 'boolean' && r != o.affectsData && (o._affectsData = r, s = !0), s && this.fire(`update:${i}`, o, a, t), o; } const l = xs.fromRange(t); const c = new rc(i, l, n, r); return this._markers.set(i, c), this.fire(`update:${i}`, c, null, t), c; } }, { key: '_remove', value(e) { const t = e instanceof rc ? e.name : e; const n = this._markers.get(t); return !!n && (this._markers.delete(t), this.fire(`update:${t}`, n, n.getRange(), null), this._destroyMarker(n), !0); } }, { key: '_refresh', value(e) { const t = e instanceof rc ? e.name : e; const n = this._markers.get(t); if (!n) throw new Ln.b('markercollection-refresh-marker-not-exists: Marker with provided name does not exists.', this); const r = n.getRange(); this.fire(`update:${t}`, n, r, r, n.managedUsingOperations, n.affectsData); } }, { key: 'getMarkersAtPosition', value: h.mark((function e(t) { let n; let r; let i; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: n = d(this), e.prev = 1, n.s(); case 3: if ((r = n.n()).done) { e.next = 10; break; } if (!(i = r.value).getRange().containsPosition(t)) { e.next = 8; break; } return e.next = 8, i; case 8: e.next = 3; break; case 10: e.next = 15; break; case 12: e.prev = 12, e.t0 = e.catch(1), n.e(e.t0); case 15: return e.prev = 15, n.f(), e.finish(15); case 18: case 'end': return e.stop(); } }), e, this, [[1, 12, 15, 18]]); })) }, { key: 'getMarkersIntersectingRange', value: h.mark((function e(t) { let n; let r; let i; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: n = d(this), e.prev = 1, n.s(); case 3: if ((r = n.n()).done) { e.next = 10; break; } if ((i = r.value).getRange().getIntersection(t) === null) { e.next = 8; break; } return e.next = 8, i; case 8: e.next = 3; break; case 10: e.next = 15; break; case 12: e.prev = 12, e.t0 = e.catch(1), n.e(e.t0); case 15: return e.prev = 15, n.f(), e.finish(15); case 18: case 'end': return e.stop(); } }), e, this, [[1, 12, 15, 18]]); })) }, { key: 'destroy', value() { let e; const t = d(this._markers.values()); try { for (t.s(); !(e = t.n()).done;) { const n = e.value; this._destroyMarker(n); } } catch (r) { t.e(r); } finally { t.f(); } this._markers = null, this.stopListening(); } }, { key: 'getMarkersGroup', value: h.mark((function e(t) { let n; let r; let i; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: n = d(this._markers.values()), e.prev = 1, n.s(); case 3: if ((r = n.n()).done) { e.next = 10; break; } if (!(i = r.value).name.startsWith(`${t}:`)) { e.next = 8; break; } return e.next = 8, i; case 8: e.next = 3; break; case 10: e.next = 15; break; case 12: e.prev = 12, e.t0 = e.catch(1), n.e(e.t0); case 15: return e.prev = 15, n.f(), e.finish(15); case 18: case 'end': return e.stop(); } }), e, this, [[1, 12, 15, 18]]); })) }, { key: '_destroyMarker', value(e) { e.stopListening(), e._detachLiveRange(); } }]), e; }()); Qn(nc, Vn); var rc = (function () { function e(t, n, r, i) { f(this, e), this.name = t, this._liveRange = this._attachLiveRange(n), this._managedUsingOperations = r, this._affectsData = i; } return m(e, [{ key: 'getStart', value() { if (!this._liveRange) throw new Ln.b('marker-destroyed: Cannot use a destroyed marker instance.', this); return this._liveRange.start.clone(); } }, { key: 'getEnd', value() { if (!this._liveRange) throw new Ln.b('marker-destroyed: Cannot use a destroyed marker instance.', this); return this._liveRange.end.clone(); } }, { key: 'getRange', value() { if (!this._liveRange) throw new Ln.b('marker-destroyed: Cannot use a destroyed marker instance.', this); return this._liveRange.toRange(); } }, { key: 'is', value(e) { return e === 'marker' || e === 'model:marker'; } }, { key: '_attachLiveRange', value(e) { return this._liveRange && this._detachLiveRange(), e.delegate('change:range').to(this), e.delegate('change:content').to(this), this._liveRange = e, e; } }, { key: '_detachLiveRange', value() { this._liveRange.stopDelegating('change:range', this), this._liveRange.stopDelegating('change:content', this), this._liveRange.detach(), this._liveRange = null; } }, { key: 'managedUsingOperations', get() { if (!this._liveRange) throw new Ln.b('marker-destroyed: Cannot use a destroyed marker instance.', this); return this._managedUsingOperations; } }, { key: 'affectsData', get() { if (!this._liveRange) throw new Ln.b('marker-destroyed: Cannot use a destroyed marker instance.', this); return this._affectsData; } }]), e; }()); Qn(rc, Vn); const ic = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'clone', value() { return new n(this.baseVersion); } }, { key: 'getReversed', value() { return new n(this.baseVersion + 1); } }, { key: '_execute', value() {} }, { key: 'type', get() { return 'noop'; } }], [{ key: 'className', get() { return 'NoOperation'; } }]), n; }(yl)); const oc = {}; oc[Ol.className] = Ol, oc[Nl.className] = Nl, oc[Rl.className] = Rl, oc[Ml.className] = Ml, oc[ic.className] = ic, oc[yl.className] = yl, oc[jl.className] = jl, oc[Dl.className] = Dl, oc[zl.className] = zl, oc[Ll.className] = Ll; const ac = (function () { function e() { f(this, e); } return m(e, null, [{ key: 'fromJSON', value(e, t) { return oc[e.__className].fromJSON(e, t); } }]), e; }()); const sc = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; const o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 'toNone'; if (f(this, n), !(i = t.call(this, e, r, o)).root.is('rootElement')) throw new Ln.b("model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.", e); return lc.call(s(i)), i; } return m(n, [{ key: 'detach', value() { this.stopListening(); } }, { key: 'is', value(e) { return e === 'livePosition' || e === 'model:livePosition' || e == 'position' || e === 'model:position'; } }, { key: 'toPosition', value() { return new cs(this.root, this.path.slice(), this.stickiness); } }], [{ key: 'fromPosition', value(e, t) { return new this(e.root, e.path.slice(), t || e.stickiness); } }]), n; }(cs)); function lc() { const e = this; this.listenTo(this.root.document.model, 'applyOperation', ((t, n) => { const r = n[0]; r.isDocumentOperation && cc.call(e, r); }), { priority: 'low' }); } function cc(e) { const t = this.getTransformedByOperation(e); if (!this.isEqual(t)) { const n = this.toPosition(); this.path = t.path, this.root = t.root, this.fire('change', n); } }Qn(sc, Vn); const uc = (function () { function e(t, n, r) { f(this, e), this.model = t, this.writer = n, this.position = r, this.canMergeWith = new Set([this.position.parent]), this.schema = t.schema, this._filterAttributesOf = [], this._affectedStart = null, this._affectedEnd = null; } return m(e, [{ key: 'handleNodes', value(e, t) { e = Array.from(e); for (let n = 0; n < e.length; n++) { const r = e[n]; this._handleNode(r, { isFirst: n === 0 && t.isFirst, isLast: n === e.length - 1 && t.isLast }); } this.schema.removeDisallowedAttributes(this._filterAttributesOf, this.writer), this._filterAttributesOf = []; } }, { key: 'getSelectionRange', value() { return this.nodeToSelect ? fs._createOn(this.nodeToSelect) : this.model.schema.getNearestSelectionRange(this.position); } }, { key: 'getAffectedRange', value() { return this._affectedStart ? new fs(this._affectedStart, this._affectedEnd) : null; } }, { key: 'destroy', value() { this._affectedStart && this._affectedStart.detach(), this._affectedEnd && this._affectedEnd.detach(); } }, { key: '_handleNode', value(e, t) { this.schema.isObject(e) ? this._handleObject(e, t) : this._checkAndSplitToAllowedPosition(e, t) ? (this._insert(e), this._mergeSiblingsOf(e, t)) : this._handleDisallowedNode(e, t); } }, { key: '_handleObject', value(e, t) { this._checkAndSplitToAllowedPosition(e) ? this._insert(e) : this._tryAutoparagraphing(e, t); } }, { key: '_handleDisallowedNode', value(e, t) { e.is('element') ? this.handleNodes(e.getChildren(), t) : this._tryAutoparagraphing(e, t); } }, { key: '_insert', value(e) { if (!this.schema.checkChild(this.position, e)) throw new Ln.b('insertcontent-wrong-position: Given node cannot be inserted on the given position.', this, { node: e, position: this.position }); const t = sc.fromPosition(this.position, 'toNext'); this._setAffectedBoundaries(this.position), this.writer.insert(e, this.position), this.position = t.toPosition(), t.detach(), this.schema.isObject(e) && !this.schema.checkChild(this.position, '$text') ? this.nodeToSelect = e : this.nodeToSelect = null, this._filterAttributesOf.push(e); } }, { key: '_setAffectedBoundaries', value(e) { this._affectedStart || (this._affectedStart = sc.fromPosition(e, 'toPrevious')), this._affectedEnd && !this._affectedEnd.isBefore(e) || (this._affectedEnd && this._affectedEnd.detach(), this._affectedEnd = sc.fromPosition(e, 'toNext')); } }, { key: '_mergeSiblingsOf', value(e, t) { if (e instanceof as) { const n = this._canMergeLeft(e, t); const r = this._canMergeRight(e, t); const i = sc._createBefore(e); i.stickiness = 'toNext'; const o = sc._createAfter(e); if (o.stickiness = 'toNext', n) { const a = sc.fromPosition(this.position); a.stickiness = 'toNext', this._affectedStart.isEqual(i) && (this._affectedStart.detach(), this._affectedStart = sc._createAt(i.nodeBefore, 'end', 'toPrevious')), this.writer.merge(i), i.isEqual(this._affectedEnd) && t.isLast && (this._affectedEnd.detach(), this._affectedEnd = sc._createAt(i.nodeBefore, 'end', 'toNext')), this.position = a.toPosition(), a.detach(); } if (r) { if (!this.position.isEqual(o)) throw new Ln.b('insertcontent-invalid-insertion-position', this); this.position = cs._createAt(o.nodeBefore, 'end'); const s = sc.fromPosition(this.position, 'toPrevious'); this._affectedEnd.isEqual(o) && (this._affectedEnd.detach(), this._affectedEnd = sc._createAt(o.nodeBefore, 'end', 'toNext')), this.writer.merge(o), o.getShiftedBy(-1).isEqual(this._affectedStart) && t.isFirst && (this._affectedStart.detach(), this._affectedStart = sc._createAt(o.nodeBefore, 0, 'toPrevious')), this.position = s.toPosition(), s.detach(); }(n || r) && this._filterAttributesOf.push(this.position.parent), i.detach(), o.detach(); } } }, { key: '_canMergeLeft', value(e, t) { const n = e.previousSibling; return t.isFirst && n instanceof as && this.canMergeWith.has(n) && this.model.schema.checkMerge(n, e); } }, { key: '_canMergeRight', value(e, t) { const n = e.nextSibling; return t.isLast && n instanceof as && this.canMergeWith.has(n) && this.model.schema.checkMerge(e, n); } }, { key: '_tryAutoparagraphing', value(e, t) { const n = this.writer.createElement('paragraph'); this._getAllowedIn(n, this.position.parent) && this.schema.checkChild(n, e) && (n._appendChild(e), this._handleNode(n, t)); } }, { key: '_checkAndSplitToAllowedPosition', value(e) { const t = this._getAllowedIn(e, this.position.parent); if (!t) return !1; for (;t != this.position.parent;) { if (this.schema.isLimit(this.position.parent)) return !1; if (this.position.isAtStart) { const n = this.position.parent; this.position = this.writer.createPositionBefore(n), n.isEmpty && n.parent === t && this.writer.remove(n); } else if (this.position.isAtEnd) this.position = this.writer.createPositionAfter(this.position.parent); else { const r = this.writer.createPositionAfter(this.position.parent); this._setAffectedBoundaries(this.position), this.writer.split(this.position), this.position = r, this.canMergeWith.add(this.position.nodeAfter); } } return !0; } }, { key: '_getAllowedIn', value(e, t) { return this.schema.checkChild(t, e) ? t : t.parent ? this._getAllowedIn(e, t.parent) : null; } }]), e; }()); function dc(e) { const t = e.root.document.model; const n = e.start; let r = e.end; if (t.hasContent(e, { ignoreMarkers: !0 })) { const i = (function (e) { let t; const n = e.parent; const r = n.root.document.model.schema; const i = n.getAncestors({ parentFirst: !0, includeSelf: !0 }); const o = d(i); try { for (o.s(); !(t = o.n()).done;) { const a = t.value; if (r.isLimit(a)) return null; if (r.isBlock(a)) return a; } } catch (s) { o.e(s); } finally { o.f(); } }(r)); if (i && r.isTouching(t.createPositionAt(i, 0))) { const o = t.createSelection(e); t.modifySelection(o, { direction: 'backward' }), r = o.getLastPosition(); } } return [sc.fromPosition(n, 'toPrevious'), sc.fromPosition(r, 'toNext')]; } function hc(e, t, n) { const r = e.model; if (fc(e.model.schema, t, n)) { const i = (function (e, t) { for (var n = e.getAncestors(), r = t.getAncestors(), i = 0; n[i] && n[i] == r[i];)i++; return [n[i], r[i]]; }(t, n)); const o = u(i, 2); const a = o[0]; const s = o[1]; !r.hasContent(a, { ignoreMarkers: !0 }) && r.hasContent(s, { ignoreMarkers: !0 }) ? (function e(t, n, r, i) { const o = n.parent; const a = r.parent; if (o != i && a != i) { for (n = t.createPositionAfter(o), (r = t.createPositionBefore(a)).isEqual(n) || t.insert(o, r); n.parent.isEmpty;) { const s = n.parent; n = t.createPositionBefore(s), t.remove(s); }r = t.createPositionBefore(a), (function (e, t) { const n = t.nodeBefore; const r = t.nodeAfter; n.name != r.name && e.rename(n, r.name), e.clearAttributes(n), e.setAttributes(Object.fromEntries(r.getAttributes()), n), e.merge(t); }(t, r)), fc(t.model.schema, n, r) && e(t, n, r, i); } }(e, t, n, a.parent)) : (function e(t, n, r, i) { const o = n.parent; const a = r.parent; if (o != i && a != i) { for (n = t.createPositionAfter(o), (r = t.createPositionBefore(a)).isEqual(n) || t.insert(a, n), t.merge(n); r.parent.isEmpty;) { const s = r.parent; r = t.createPositionBefore(s), t.remove(s); }fc(t.model.schema, n, r) && e(t, n, r, i); } }(e, t, n, a.parent)); } } function fc(e, t, n) { const r = t.parent; const i = n.parent; return r != i && !e.isLimit(r) && !e.isLimit(i) && (function (e, t, n) { let r; const i = new fs(e, t); const o = d(i.getWalker()); try { for (o.s(); !(r = o.n()).done;) { const a = r.value; if (n.isLimit(a.item)) return !1; } } catch (s) { o.e(s); } finally { o.f(); } return !0; }(t, n, e)); } function mc(e, t) { const n = e.checkChild(t, '$text'); const r = e.checkChild(t, 'paragraph'); return !n && r; } function vc(e, t, n) { const r = e.createElement('paragraph'); e.insert(r, t), kc(e, n, e.createPositionAt(r, 0)); } function gc(e, t) { const n = e.model.schema.getLimitElement(t); e.remove(e.createRangeIn(n)), vc(e, e.createPositionAt(n, 0), t); } function pc(e, t) { const n = e.getLimitElement(t); if (!t.containsEntireContent(n)) return !1; const r = t.getFirstRange(); return r.start.parent != r.end.parent && e.checkChild(n, 'paragraph'); } function kc(e, t, n) { t instanceof As ? e.setSelection(n) : t.setTo(n); } const bc = ' ,.?!:;"-()'; function yc(e, t) { if (t.type == 'text') return e.unit === 'word' ? (function (e, t) { let n = e.position.textNode; if (n) for (let r = e.position.offset - n.startOffset; !_c(n.data, r, t) && !Ec(n, r, t);) { e.next(); const i = t ? e.position.nodeAfter : e.position.nodeBefore; if (i && i.is('$text')) { const o = i.data.charAt(t ? 0 : i.data.length - 1); bc.includes(o) || (e.next(), n = e.position.textNode); }r = e.position.offset - n.startOffset; } return e.position; }(e.walker, e.isForward)) : (function (e, t) { const n = e.position.textNode; if (n) for (let r = n.data, i = e.position.offset - n.startOffset; Jl(r, i) || t == 'character' && Zl(r, i);)e.next(), i = e.position.offset - n.startOffset; return e.position; }(e.walker, e.unit, e.isForward)); if (t.type == (e.isForward ? 'elementStart' : 'elementEnd')) { if (e.schema.isObject(t.item)) return cs._createAt(t.item, e.isForward ? 'after' : 'before'); if (e.schema.checkChild(t.nextPosition, '$text')) return t.nextPosition; } else { if (e.schema.isLimit(t.item)) return void e.walker.skip((() => !0)); if (e.schema.checkChild(t.nextPosition, '$text')) return t.nextPosition; } } function wc(e, t) { const n = e.root; const r = cs._createAt(n, t ? 'end' : 0); return t ? new fs(e, r) : new fs(r, e); } function _c(e, t, n) { const r = t + (n ? 0 : -1); return bc.includes(e.charAt(r)); } function Ec(e, t, n) { return t === (n ? e.endOffset : 0); } function xc(e, t) { const n = []; Array.from(e.getItems({ direction: 'backward' })).map(((e) => t.createRangeOn(e))).filter(((t) => (t.start.isAfter(e.start) || t.start.isEqual(e.start)) && (t.end.isBefore(e.end) || t.end.isEqual(e.end)))).forEach(((e) => { n.push(e.start.parent), t.remove(e); })), n.forEach(((e) => { for (let n = e; n.parent && n.isEmpty;) { const r = t.createRangeOn(n); n = n.parent, t.remove(r); } })); } function Tc(e) { e.document.registerPostFixer(((t) => (function (e, t) { let n; const r = t.document.selection; const i = t.schema; const o = []; let a = !1; const s = d(r.getRanges()); try { for (s.s(); !(n = s.n()).done;) { const l = n.value; const c = Cc(l, i); c && !c.isEqual(l) ? (o.push(c), a = !0) : o.push(l); } } catch (u) { s.e(u); } finally { s.f(); }a && e.setSelection((function (e) { const t = []; t.push(e.shift()); let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; const o = t.pop(); if (i.isIntersecting(o)) { const a = o.start.isAfter(i.start) ? i.start : o.start; const s = o.end.isAfter(i.end) ? o.end : i.end; const l = new fs(a, s); t.push(l); } else t.push(o), t.push(i); } } catch (u) { r.e(u); } finally { r.f(); } return t; }(o)), { backward: r.isBackward }); }(t, e)))); } function Cc(e, t) { return e.isCollapsed ? (function (e, t) { const n = e.start; const r = t.getNearestSelectionRange(n); if (!r) return null; if (!r.isCollapsed) return r; const i = r.start; return n.isEqual(i) ? null : new fs(i); }(e, t)) : (function (e, t) { const n = e.start; const r = e.end; const i = t.checkChild(n, '$text'); const o = t.checkChild(r, '$text'); const a = t.getLimitElement(n); const s = t.getLimitElement(r); if (a === s) { if (i && o) return null; if (function (e, t, n) { const r = e.nodeAfter && !n.isLimit(e.nodeAfter) || n.checkChild(e, '$text'); const i = t.nodeBefore && !n.isLimit(t.nodeBefore) || n.checkChild(t, '$text'); return r || i; }(n, r, t)) { const l = n.nodeAfter && t.isObject(n.nodeAfter) ? null : t.getNearestSelectionRange(n, 'forward'); const c = r.nodeBefore && t.isObject(r.nodeBefore) ? null : t.getNearestSelectionRange(r, 'backward'); const u = l ? l.start : n; const d = c ? c.start : r; return new fs(u, d); } } const h = a && !a.is('rootElement'); const f = s && !s.is('rootElement'); if (h || f) { const m = n.nodeAfter && r.nodeBefore && n.nodeAfter.parent === r.nodeBefore.parent; const v = h && (!m || !Ac(n.nodeAfter, t)); const g = f && (!m || !Ac(r.nodeBefore, t)); let p = n; let k = r; return v && (p = cs._createBefore(Sc(a, t))), g && (k = cs._createAfter(Sc(s, t))), new fs(p, k); } return null; }(e, t)); } function Sc(e, t) { for (var n = e, r = n; t.isLimit(r) && r.parent;)n = r, r = r.parent; return n; } function Ac(e, t) { return e && t.isObject(e); } const Pc = (function () {
            function e() { const t = this; f(this, e), this.markers = new nc(), this.document = new ec(this), this.schema = new Js(), this._pendingChanges = [], this._currentWriter = null, ['insertContent', 'deleteContent', 'modifySelection', 'getSelectedContent', 'applyOperation'].forEach(((e) => t.decorate(e))), this.on('applyOperation', ((e, t) => { t[0]._validate(); }), { priority: 'highest' }), this.schema.register('$root', { isLimit: !0 }), this.schema.register('$block', { allowIn: '$root', isBlock: !0 }), this.schema.register('$text', { allowIn: '$block', isInline: !0 }), this.schema.register('$clipboardHolder', { allowContentOf: '$root', isLimit: !0 }), this.schema.extend('$text', { allowIn: '$clipboardHolder' }), this.schema.register('$marker'), this.schema.addChildCheck(((e, t) => { if (t.name === '$marker') return !0; })), Tc(this); } return m(e, [{ key: 'change', value(e) { try { return this._pendingChanges.length === 0 ? (this._pendingChanges.push({ batch: new bl(), callback: e }), this._runPendingChanges()[0]) : e(this._currentWriter); } catch (e) { Ln.b.rethrowUnexpectedError(e, this); } } }, { key: 'enqueueChange', value(e, t) { try { typeof e === 'string' ? e = new bl(e) : typeof e === 'function' && (t = e, e = new bl()), this._pendingChanges.push({ batch: e, callback: t }), this._pendingChanges.length == 1 && this._runPendingChanges(); } catch (e) { Ln.b.rethrowUnexpectedError(e, this); } } }, { key: 'applyOperation', value(e) { e._execute(); } }, { key: 'insertContent', value(e, t, n) { return (function (e, t, n, r) { return e.change(((i) => { let o; (o = n ? n instanceof bs || n instanceof As ? n : i.createSelection(n, r) : e.document.selection).isCollapsed || e.deleteContent(o, { doNotAutoparagraph: !0 }); let a; const s = new uc(e, i, o.anchor); a = t.is('documentFragment') ? t.getChildren() : [t], s.handleNodes(a, { isFirst: !0, isLast: !0 }); const l = s.getSelectionRange(); l && (o instanceof As ? i.setSelection(l) : o.setTo(l)); const c = s.getAffectedRange() || e.createRange(o.anchor); return s.destroy(), c; })); }(this, e, t, n)); } }, { key: 'deleteContent', value(e, t) { !(function (e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; if (!t.isCollapsed) { const r = t.getFirstRange(); if (r.root.rootName != '$graveyard') { const i = e.schema; e.change(((e) => { if (n.doNotResetEntireContent || !pc(i, t)) { const o = dc(r); const a = u(o, 2); const s = a[0]; const l = a[1]; r.start.isTouching(r.end) || e.remove(r), n.leaveUnmerged || (hc(e, s, l), i.removeDisallowedAttributes(s.parent.getChildren(), e)), kc(e, t, s), !n.doNotAutoparagraph && mc(i, s) && vc(e, s, t), s.detach(), l.detach(); } else gc(e, t); })); } } }(this, e, t)); } }, {
              key: 'modifySelection',
              value(e, t) {
                !(function (e, t) {
                  for (var n, r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, i = e.schema, o = r.direction != 'backward', a = r.unit ? r.unit : 'character', s = t.focus, l = new ss({ boundaries: wc(s, o), singleCharacters: !0, direction: o ? 'forward' : 'backward' }), c = {
                      walker: l, schema: i, isForward: o, unit: a,
                    }, u = function () { if (n.done) return { v: void 0 }; const r = yc(c, n.value); return r ? (t instanceof As ? e.change(((e) => { e.setSelectionFocus(r); })) : t.setFocus(r), { v: void 0 }) : void 0; }; n = l.next();) { const d = u(); if (typeof d === 'object') return d.v; }
                }(this, e, t));
              },
            }, { key: 'getSelectedContent', value(e) { return (function (e, t) { return e.change(((e) => { const n = e.createDocumentFragment(); const r = t.getFirstRange(); if (!r || r.isCollapsed) return n; let i; let o; const a = r.start.root; const s = r.start.getCommonPath(r.end); const l = a.getNodeByPath(s); const c = (i = r.start.parent == r.end.parent ? r : e.createRange(e.createPositionAt(l, r.start.path[s.length]), e.createPositionAt(l, r.end.path[s.length] + 1))).end.offset - i.start.offset; const u = d(i.getItems({ shallow: !0 })); try { for (u.s(); !(o = u.n()).done;) { const h = o.value; h.is('$textProxy') ? e.appendText(h.data, h.getAttributes(), n) : e.append(e.cloneElement(h, !0), n); } } catch (v) { u.e(v); } finally { u.f(); } if (i != r) { const f = r._getTransformedByMove(i.start, e.createPositionAt(n, 0), c)[0]; const m = e.createRange(e.createPositionAt(n, 0), f.start); xc(e.createRange(f.end, e.createPositionAt(n, 'end')), e), xc(m, e); } return n; })); }(this, e)); } }, { key: 'hasContent', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; const n = e instanceof as ? fs._createIn(e) : e; if (n.isCollapsed) return !1; const r = t.ignoreWhitespaces; const i = void 0 !== r && r; const o = t.ignoreMarkers; const a = void 0 !== o && o; if (!a) { let s; const l = d(this.markers.getMarkersIntersectingRange(n)); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; if (c.affectsData) return !0; } } catch (m) { l.e(m); } finally { l.f(); } } let u; const h = d(n.getItems()); try { for (h.s(); !(u = h.n()).done;) { const f = u.value; if (f.is('$textProxy')) { if (!i) return !0; if (f.data.search(/\S/) !== -1) return !0; } else if (this.schema.isObject(f)) return !0; } } catch (m) { h.e(m); } finally { h.f(); } return !1; } }, { key: 'createPositionFromPath', value(e, t, n) { return new cs(e, t, n); } }, { key: 'createPositionAt', value(e, t) { return cs._createAt(e, t); } }, { key: 'createPositionAfter', value(e) { return cs._createAfter(e); } }, { key: 'createPositionBefore', value(e) { return cs._createBefore(e); } }, { key: 'createRange', value(e, t) { return new fs(e, t); } }, { key: 'createRangeIn', value(e) { return fs._createIn(e); } }, { key: 'createRangeOn', value(e) { return fs._createOn(e); } }, { key: 'createSelection', value(e, t, n) { return new bs(e, t, n); } }, { key: 'createBatch', value(e) { return new bl(e); } }, { key: 'createOperationFromJSON', value(e) { return ac.fromJSON(e, this.document); } }, { key: 'destroy', value() { this.document.destroy(), this.stopListening(); } }, { key: '_runPendingChanges', value() { const e = []; for (this.fire('_beforeChanges'); this._pendingChanges.length;) { const t = this._pendingChanges[0].batch; this._currentWriter = new Vl(this, t); const n = this._pendingChanges[0].callback(this._currentWriter); e.push(n), this.document._handleChangeBlock(this._currentWriter), this._pendingChanges.shift(), this._currentWriter = null; } return this.fire('_afterChanges'), e; } }]), e;
          }()); Qn(Pc, ki); const Oc = (function () { function e() { f(this, e), this._listener = Object.create(Ko); } return m(e, [{ key: 'listenTo', value(e) { const t = this; this._listener.listenTo(e, 'keydown', ((e, n) => { t._listener.fire(`_keydown:${Yi(n)}`, n); })); } }, { key: 'set', value(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; const r = Ki(e); const i = n.priority; this._listener.listenTo(this._listener, `_keydown:${r}`, ((e, n) => { t(n, (() => { n.preventDefault(), n.stopPropagation(), e.stop(); })), e.return = !0; }), { priority: i }); } }, { key: 'press', value(e) { return !!this._listener.fire(`_keydown:${Yi(e)}`, e); } }, { key: 'destroy', value() { this._listener.stopListening(); } }]), e; }()); const Ic = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this)).editor = e, r; } return m(n, [{ key: 'set', value(e, t) { const r = this; const i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; if (typeof t === 'string') { const s = t; t = function (e, t) { r.editor.execute(s), t(); }; }o(a(n.prototype), 'set', this).call(this, e, t, i); } }]), n; }(Oc)); const Mc = (function () { function t() { const e = this; const n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; f(this, t), this._context = n.context || new ar({ language: n.language }), this._context._addEditor(this, !n.context); const r = Array.from(this.constructor.builtinPlugins || []); this.config = new Pn(n, this.constructor.defaultConfig), this.config.define('plugins', r), this.config.define(this._context._getEditorConfig()), this.plugins = new Zn(this, r, this._context.plugins), this.locale = this._context.locale, this.t = this.locale.t, this.commands = new Ys(), this.set('state', 'initializing'), this.once('ready', (() => e.state = 'ready'), { priority: 'high' }), this.once('destroy', (() => e.state = 'destroyed'), { priority: 'high' }), this.set('isReadOnly', !1), this.model = new Pc(); const i = new ai(); this.data = new vl(this.model, i), this.editing = new $s(this.model, i), this.editing.view.document.bind('isReadOnly').to(this), this.conversion = new gl([this.editing.downcastDispatcher, this.data.downcastDispatcher], this.data.upcastDispatcher), this.conversion.addAlias('dataDowncast', this.data.downcastDispatcher), this.conversion.addAlias('editingDowncast', this.editing.downcastDispatcher), this.keystrokes = new Ic(this), this.keystrokes.listenTo(this.editing.view.document); } return m(t, [{ key: 'initPlugins', value() { const e = this.config; const t = e.get('plugins'); const n = e.get('removePlugins') || []; const r = e.get('extraPlugins') || []; return this.plugins.init(t.concat(r), n); } }, { key: 'destroy', value() { const e = this; let t = Promise.resolve(); return this.state == 'initializing' && (t = new Promise(((t) => e.once('ready', t)))), t.then((() => { e.fire('destroy'), e.stopListening(), e.commands.destroy(); })).then((() => e.plugins.destroy())).then((() => { e.model.destroy(), e.data.destroy(), e.editing.destroy(), e.keystrokes.destroy(); })).then((() => e._context._removeEditor(e))); } }, { key: 'execute', value() { try { let t; return (t = this.commands).execute.apply(t, arguments); } catch (e) { Ln.b.rethrowUnexpectedError(e, this); } } }]), t; }()); Qn(Mc, ki); const Nc = { setData(e) { this.data.set(e); }, getData(e) { return this.data.get(e); } }; const Rc = { updateSourceElement() { if (!this.sourceElement) throw new Ln.b('editor-missing-sourceelement: Cannot update the source element of a detached editor.', this); !(function (e, t) { e instanceof HTMLTextAreaElement && (e.value = t), e.innerHTML = t; }(this.sourceElement, this.data.get())); } }; const jc = (function () { function e() { f(this, e); } return m(e, [{ key: 'getHtml', value(e) { const t = document.implementation.createHTMLDocument('').createElement('div'); return t.appendChild(e), t.innerHTML; } }]), e; }()); const Dc = (function () { function e(t) { f(this, e), this._domParser = new DOMParser(), this._domConverter = new Wo(t, { blockFillerMode: 'nbsp' }), this._htmlWriter = new jc(); } return m(e, [{ key: 'toData', value(e) { const t = this._domConverter.viewToDom(e, document); return this._htmlWriter.getHtml(t); } }, { key: 'toView', value(e) { const t = this._toDom(e); return this._domConverter.domToView(t); } }, { key: '_toDom', value(e) { for (var t = this._domParser.parseFromString(e, 'text/html'), n = t.createDocumentFragment(), r = t.body.childNodes; r.length > 0;)n.appendChild(r[0]); return n; } }]), e; }()); const Lc = (function () { function e(t) { f(this, e), this.editor = t, this._components = new Map(); } return m(e, [{ key: 'names', value: h.mark((function e() { let t; let n; let r; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: t = d(this._components.values()), e.prev = 1, t.s(); case 3: if ((n = t.n()).done) { e.next = 9; break; } return r = n.value, e.next = 7, r.originalName; case 7: e.next = 3; break; case 9: e.next = 14; break; case 11: e.prev = 11, e.t0 = e.catch(1), t.e(e.t0); case 14: return e.prev = 14, t.f(), e.finish(14); case 17: case 'end': return e.stop(); } }), e, this, [[1, 11, 14, 17]]); })) }, { key: 'add', value(e, t) { if (this.has(e)) throw new Ln.b('componentfactory-item-exists: The item already exists in the component factory.', this, { name: e }); this._components.set(zc(e), { callback: t, originalName: e }); } }, { key: 'create', value(e) { if (!this.has(e)) throw new Ln.b('componentfactory-item-missing: The required component is not registered in the factory.', this, { name: e }); return this._components.get(zc(e)).callback(this.editor.locale); } }, { key: 'has', value(e) { return this._components.has(zc(e)); } }]), e; }()); function zc(e) { return String(e).toLowerCase(); } const Fc = (function () { function e() { f(this, e), this.set('isFocused', !1), this.set('focusedElement', null), this._elements = new Set(), this._nextEventLoopTimeout = null; } return m(e, [{ key: 'add', value(e) { const t = this; if (this._elements.has(e)) throw new Ln.b('focusTracker-add-element-already-exist', this); this.listenTo(e, 'focus', (() => t._focus(e)), { useCapture: !0 }), this.listenTo(e, 'blur', (() => t._blur()), { useCapture: !0 }), this._elements.add(e); } }, { key: 'remove', value(e) { e === this.focusedElement && this._blur(e), this._elements.has(e) && (this.stopListening(e), this._elements.delete(e)); } }, { key: 'destroy', value() { this.stopListening(); } }, { key: '_focus', value(e) { clearTimeout(this._nextEventLoopTimeout), this.focusedElement = e, this.isFocused = !0; } }, { key: '_blur', value() { const e = this; clearTimeout(this._nextEventLoopTimeout), this._nextEventLoopTimeout = setTimeout((() => { e.focusedElement = null, e.isFocused = !1; }), 0); } }]), e; }()); Qn(Fc, Ko), Qn(Fc, ki); const Vc = (function () { function e(t) { const n = this; f(this, e), this.editor = t, this.componentFactory = new Lc(t), this.focusTracker = new Fc(), this._editableElementsMap = new Map(), this.listenTo(t.editing.view.document, 'layoutChanged', (() => n.update())); } return m(e, [{ key: 'update', value() { this.fire('update'); } }, { key: 'destroy', value() { this.stopListening(), this.focusTracker.destroy(); let e; const t = d(this._editableElementsMap.values()); try { for (t.s(); !(e = t.n()).done;)e.value.ckeditorInstance = null; } catch (n) { t.e(n); } finally { t.f(); } this._editableElementsMap = new Map(); } }, { key: 'setEditableElement', value(e, t) { this._editableElementsMap.set(e, t), t.ckeditorInstance || (t.ckeditorInstance = this.editor); } }, { key: 'getEditableElement', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 'main'; return this._editableElementsMap.get(e); } }, { key: 'getEditableElementsNames', value() { return this._editableElementsMap.keys(); } }, { key: 'element', get() { return null; } }, { key: '_editableElements', get() { return console.warn('editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.', { editorUI: this }), this._editableElementsMap; } }]), e; }()); Qn(Vc, Vn), n(13); const Bc = new WeakMap(); function Uc(e) { const t = e.view; const n = e.element; const r = e.text; const i = e.isDirectHost; const o = void 0 === i || i; const a = t.document; Bc.has(a) || (Bc.set(a, new Map()), a.registerPostFixer(((e) => Wc(a, e)))), Bc.get(a).set(n, { text: r, isDirectHost: o }), t.change(((e) => Wc(a, e))); } function Hc(e, t) { return !!t.hasClass('ck-placeholder') && (e.removeClass('ck-placeholder', t), !0); } function Wc(e, t) { let n; const r = Bc.get(e); let i = !1; const o = d(r); try { for (o.s(); !(n = o.n()).done;) { const a = u(n.value, 2); qc(t, a[0], a[1]) && (i = !0); } } catch (s) { o.e(s); } finally { o.f(); } return i; } function qc(e, t, n) { const r = n.text; const i = n.isDirectHost ? t : (function (e) { if (e.childCount === 1) { const t = e.getChild(0); if (t.is('element') && !t.is('uiElement')) return t; } return null; }(t)); let o = !1; return !!i && (n.hostElement = i, i.getAttribute('data-placeholder') !== r && (e.setAttribute('data-placeholder', r, i), o = !0), (function (e) { if (!e.isAttached()) return !1; const t = !Array.from(e.getChildren()).some(((e) => !e.is('uiElement'))); const n = e.document; if (!n.isFocused && t) return !0; const r = n.selection.anchor; return !(!t || !r || r.parent === e); }(i)) ? (function (e, t) { return !t.hasClass('ck-placeholder') && (e.addClass('ck-placeholder', t), !0); }(e, i)) && (o = !0) : Hc(e, i) && (o = !0), o); } const Gc = (function () { function e() { f(this, e), this._replacedElements = []; } return m(e, [{ key: 'replace', value(e, t) { this._replacedElements.push({ element: e, newElement: t }), e.style.display = 'none', t && e.parentNode.insertBefore(t, e.nextSibling); } }, { key: 'restore', value() { this._replacedElements.forEach(((e) => { const t = e.element; const n = e.newElement; t.style.display = '', n && n.remove(); })), this._replacedElements = []; } }]), e; }()); const $c = (function (e) {
            v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e)).view = r, i._toolbarConfig = (function (e) { return Array.isArray(e) ? { items: e } : e ? ({ items: [], ...e }) : { items: [] }; }(e.config.get('toolbar'))), i._elementReplacer = new Gc(), i; } return m(n, [{ key: 'init', value(e) { const t = this.editor; const n = this.view; const r = t.editing.view; const i = n.editable; const o = r.document.getRoot(); i.name = o.rootName, n.render(); const a = i.element; this.setEditableElement(i.name, a), this.focusTracker.add(a), n.editable.bind('isFocused').to(this.focusTracker), r.attachDomRoot(a), e && this._elementReplacer.replace(e, this.element), this._initPlaceholder(), this._initToolbar(), this.fire('ready'); } }, { key: 'destroy', value() { const e = this.view; const t = this.editor.editing.view; this._elementReplacer.restore(), t.detachDomRoot(e.editable.name), e.destroy(), o(a(n.prototype), 'destroy', this).call(this); } }, {
              key: '_initToolbar',
              value() {
                const e = this.editor; const t = this.view; const n = e.editing.view; t.stickyPanel.bind('isActive').to(this.focusTracker, 'isFocused'), t.stickyPanel.limiterElement = t.element, this._toolbarConfig.viewportTopOffset && (t.stickyPanel.viewportTopOffset = this._toolbarConfig.viewportTopOffset), t.toolbar.fillFromConfig(this._toolbarConfig.items, this.componentFactory), (function (e) { const t = e.origin; const n = e.originKeystrokeHandler; const r = e.originFocusTracker; const i = e.toolbar; const o = e.beforeFocus; const a = e.afterBlur; r.add(i.element), n.set('Alt+F10', ((e, t) => { r.isFocused && !i.focusTracker.isFocused && (o && o(), i.focus(), t()); })), i.keystrokes.set('Esc', ((e, n) => { i.focusTracker.isFocused && (t.focus(), a && a(), n()); })); }({
                  origin: n, originFocusTracker: this.focusTracker, originKeystrokeHandler: e.keystrokes, toolbar: t.toolbar,
                }));
              },
            }, {
              key: '_initPlaceholder',
              value() {
                const e = this.editor; const t = e.editing.view; const n = t.document.getRoot(); const r = e.sourceElement; const i = e.config.get('placeholder') || r && r.tagName.toLowerCase() === 'textarea' && r.getAttribute('placeholder'); i && Uc({
                  view: t, element: n, text: i, isDirectHost: !1,
                });
              },
            }, { key: 'element', get() { return this.view.element; } }]), n;
          }(Vc)); const Yc = (function (e) { v(n, e); const t = g(n); function n() { let e; const r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; return f(this, n), (e = t.call(this, r, { idProperty: 'viewUid' })).on('add', ((t, n, r) => { e._renderViewIntoCollectionParent(n, r); })), e.on('remove', ((t, n) => { n.element && e._parentElement && n.element.remove(); })), e._parentElement = null, e; } return m(n, [{ key: 'destroy', value() { this.map(((e) => e.destroy())); } }, { key: 'setParent', value(e) { this._parentElement = e; let t; const n = d(this); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; this._renderViewIntoCollectionParent(r); } } catch (i) { n.e(i); } finally { n.f(); } } }, { key: 'delegate', value() { for (var e = this, t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; if (!n.length || !Kc(n)) throw new Ln.b('ui-viewcollection-delegate-wrong-events: All event names must be strings.', this); return { to(t) { let r; const i = d(e); try { for (i.s(); !(r = i.n()).done;) { var o; const a = r.value; const s = d(n); try { for (s.s(); !(o = s.n()).done;) { const l = o.value; a.delegate(l).to(t); } } catch (c) { s.e(c); } finally { s.f(); } } } catch (c) { i.e(c); } finally { i.f(); }e.on('add', ((e, r) => { let i; const o = d(n); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; r.delegate(a).to(t); } } catch (c) { o.e(c); } finally { o.f(); } })), e.on('remove', ((e, r) => { let i; const o = d(n); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; r.stopDelegating(a, t); } } catch (c) { o.e(c); } finally { o.f(); } })); } }; } }, { key: '_renderViewIntoCollectionParent', value(e, t) { e.isRendered || e.render(), e.element && this._parentElement && this._parentElement.insertBefore(e.element, this._parentElement.children[t]); } }]), n; }(Jn)); function Kc(e) { return e.every(((e) => typeof e === 'string')); } const Qc = (function () {
            function e(t) { f(this, e), Object.assign(this, au(ou(t))), this._isRendered = !1, this._revertData = null; } return m(e, [{ key: 'render', value() { const e = this._renderNode({ intoFragment: !0 }); return this._isRendered = !0, e; } }, { key: 'apply', value(e) { return this._revertData = { children: [], bindings: [], attributes: {} }, this._renderNode({ node: e, isApplying: !0, revertData: this._revertData }), e; } }, { key: 'revert', value(e) { if (!this._revertData) throw new Ln.b('ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.', [this, e]); this._revertTemplateFromNode(e, this._revertData); } }, { key: 'getViews', value: h.mark((function e() { let t; let n; return h.wrap((function (e) { for (;;) switch (e.prev = e.next) { case 0: return n = function (e) { let r; let i; let o; return h.wrap(((t) => { for (;;) switch (t.prev = t.next) { case 0: if (!e.children) { t.next = 23; break; }r = d(e.children), t.prev = 2, r.s(); case 4: if ((i = r.n()).done) { t.next = 15; break; } if (!du(o = i.value)) { t.next = 11; break; } return t.next = 9, o; case 9: t.next = 13; break; case 11: if (!hu(o)) { t.next = 13; break; } return t.delegateYield(n(o), 't0', 13); case 13: t.next = 4; break; case 15: t.next = 20; break; case 17: t.prev = 17, t.t1 = t.catch(2), r.e(t.t1); case 20: return t.prev = 20, r.f(), t.finish(20); case 23: case 'end': return t.stop(); } }), t, null, [[2, 17, 20, 23]]); }, t = h.mark(n), e.delegateYield(n(this), 't0', 3); case 3: case 'end': return e.stop(); } }), e, this); })) }, { key: '_renderNode', value(e) { if (e.node ? this.tag && this.text : this.tag ? this.text : !this.text) throw new Ln.b('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.', this); return this.text ? this._renderText(e) : this._renderElement(e); } }, { key: '_renderElement', value(e) { let t = e.node; return t || (t = e.node = document.createElementNS(this.ns || 'http://www.w3.org/1999/xhtml', this.tag)), this._renderAttributes(e), this._renderElementChildren(e), this._setUpListeners(e), t; } }, { key: '_renderText', value(e) { let t = e.node; return t ? e.revertData.text = t.textContent : t = e.node = document.createTextNode(''), eu(this.text) ? this._bindToObservable({ schema: this.text, updater: nu(t), data: e }) : t.textContent = this.text.join(''), t; } }, { key: '_renderAttributes', value(e) { let t; let n; let r; let i; if (this.attributes) { const o = e.node; const a = e.revertData; for (t in this.attributes) if (r = o.getAttribute(t), n = this.attributes[t], a && (a.attributes[t] = r), i = te(n[0]) && n[0].ns ? n[0].ns : null, eu(n)) { const s = i ? n[0].value : n; a && mu(t) && s.unshift(r), this._bindToObservable({ schema: s, updater: ru(o, t, i), data: e }); } else t == 'style' && typeof n[0] !== 'string' ? this._renderStyleAttribute(n[0], e) : (a && r && mu(t) && n.unshift(r), uu(n = n.map(((e) => e && e.value || e)).reduce(((e, t) => e.concat(t)), []).reduce(lu, '')) || o.setAttributeNS(i, t, n)); } } }, { key: '_renderStyleAttribute', value(e, t) { const n = t.node; for (const r in e) { const i = e[r]; eu(i) ? this._bindToObservable({ schema: [i], updater: iu(n, r), data: t }) : n.style[r] = i; } } }, { key: '_renderElementChildren', value(e) { let t; const n = e.node; const r = e.intoFragment ? document.createDocumentFragment() : n; const i = e.isApplying; let o = 0; const a = d(this.children); try { for (a.s(); !(t = a.n()).done;) { const s = t.value; if (fu(s)) { if (!i) { s.setParent(n); var l; const c = d(s); try { for (c.s(); !(l = c.n()).done;) { const u = l.value; r.appendChild(u.element); } } catch (m) { c.e(m); } finally { c.f(); } } } else if (du(s))i || (s.isRendered || s.render(), r.appendChild(s.element)); else if (jo(s))r.appendChild(s); else if (i) { const h = e.revertData; const f = { children: [], bindings: [], attributes: {} }; h.children.push(f), s._renderNode({ node: r.childNodes[o++], isApplying: !0, revertData: f }); } else r.appendChild(s.render()); } } catch (m) { a.e(m); } finally { a.f(); }e.intoFragment && n.appendChild(r); } }, { key: '_setUpListeners', value(e) { const t = this; if (this.eventListeners) { const n = function (n) { const r = t.eventListeners[n].map(((t) => { const r = n.split('@'); const i = u(r, 2); const o = i[0]; const a = i[1]; return t.activateDomEventListener(o, a, e); })); e.revertData && e.revertData.bindings.push(r); }; for (const r in this.eventListeners)n(r); } } }, { key: '_bindToObservable', value(e) { const t = e.schema; const n = e.updater; const r = e.data; const i = r.revertData; tu(t, n, r); const o = t.filter(((e) => !uu(e))).filter(((e) => e.observable)).map(((e) => e.activateAttributeListener(t, n, r))); i && i.bindings.push(o); } }, { key: '_revertTemplateFromNode', value(e, t) { let n; const r = d(t.bindings); try { for (r.s(); !(n = r.n()).done;) { var i; const o = n.value; const a = d(o); try { for (a.s(); !(i = a.n()).done;)(0, i.value)(); } catch (u) { a.e(u); } finally { a.f(); } } } catch (u) { r.e(u); } finally { r.f(); } if (t.text)e.textContent = t.text; else { for (const s in t.attributes) { const l = t.attributes[s]; l === null ? e.removeAttribute(s) : e.setAttribute(s, l); } for (let c = 0; c < t.children.length; ++c) this._revertTemplateFromNode(e.childNodes[c], t.children[c]); } } }], [{
              key: 'bind',
              value(e, t) {
                return {
                  to(n, r) {
                    return new Zc({
                      eventNameOrFunction: n, attribute: n, observable: e, emitter: t, callback: r,
                    });
                  },
                  if(n, r, i) {
                    return new Xc({
                      observable: e, emitter: t, attribute: n, valueIfTrue: r, callback: i,
                    });
                  },
                };
              },
            }, { key: 'extend', value(e, t) { if (e._isRendered) throw new Ln.b('template-extend-render: Attempting to extend a template which has already been rendered.', [this, e]); !(function e(t, n) { let r; if (n.attributes && (t.attributes || (t.attributes = {}), cu(t.attributes, n.attributes)), n.eventListeners && (t.eventListeners || (t.eventListeners = {}), cu(t.eventListeners, n.eventListeners)), n.text && (r = t.text).push.apply(r, c(n.text)), n.children && n.children.length) { if (t.children.length != n.children.length) throw new Ln.b('ui-template-extend-children-mismatch: The number of children in extended definition does not match.', t); let i; let o = 0; const a = d(n.children); try { for (a.s(); !(i = a.n()).done;) { const s = i.value; e(t.children[o++], s); } } catch (l) { a.e(l); } finally { a.f(); } } }(e, au(ou(t)))); } }]), e;
          }()); Qn(Qc, Vn); const Jc = (function () { function e(t) { f(this, e), Object.assign(this, t); } return m(e, [{ key: 'getValue', value(e) { const t = this.observable[this.attribute]; return this.callback ? this.callback(t, e) : t; } }, { key: 'activateAttributeListener', value(e, t, n) { const r = this; const i = function () { return tu(e, t, n); }; return this.emitter.listenTo(this.observable, `change:${this.attribute}`, i), function () { r.emitter.stopListening(r.observable, `change:${r.attribute}`, i); }; } }]), e; }()); var Zc = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'activateDomEventListener', value(e, t, n) { const r = this; const i = function (e, n) { t && !n.target.matches(t) || (typeof r.eventNameOrFunction === 'function' ? r.eventNameOrFunction(n) : r.observable.fire(r.eventNameOrFunction, n)); }; return this.emitter.listenTo(n.node, e, i), function () { r.emitter.stopListening(n.node, e, i); }; } }]), n; }(Jc)); var Xc = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'getValue', value(e) { return !uu(o(a(n.prototype), 'getValue', this).call(this, e)) && (this.valueIfTrue || !0); } }]), n; }(Jc)); function eu(e) { return !!e && (e.value && (e = e.value), Array.isArray(e) ? e.some(eu) : e instanceof Jc); } function tu(e, t, n) { let r = (function (e, t) { return e.map(((e) => (e instanceof Jc ? e.getValue(t) : e))); }(e, n.node)); uu(r = e.length == 1 && e[0] instanceof Xc ? r[0] : r.reduce(lu, '')) ? t.remove() : t.set(r); } function nu(e) { return { set(t) { e.textContent = t; }, remove() { e.textContent = ''; } }; } function ru(e, t, n) { return { set(r) { e.setAttributeNS(n, t, r); }, remove() { e.removeAttributeNS(n, t); } }; } function iu(e, t) { return { set(n) { e.style[t] = n; }, remove() { e.style[t] = null; } }; } function ou(e) { return Sn(e, ((e) => { if (e && (e instanceof Jc || hu(e) || du(e) || fu(e))) return e; })); } function au(e) { if (typeof e === 'string' ? e = (function (e) { return { text: [e] }; }(e)) : e.text && (function (e) { Array.isArray(e.text) || (e.text = [e.text]); }(e)), e.on && (e.eventListeners = (function (e) { for (const t in e)su(e, t); return e; }(e.on)), delete e.on), !e.text) { e.attributes && (function (e) { for (const t in e)e[t].value && (e[t].value = [].concat(e[t].value)), su(e, t); }(e.attributes)); const t = []; if (e.children) if (fu(e.children))t.push(e.children); else { let n; const r = d(e.children); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; hu(i) || du(i) || jo(i) ? t.push(i) : t.push(new Qc(i)); } } catch (o) { r.e(o); } finally { r.f(); } }e.children = t; } return e; } function su(e, t) { Array.isArray(e[t]) || (e[t] = [e[t]]); } function lu(e, t) { return uu(t) ? e : uu(e) ? t : ''.concat(e, ' ').concat(t); } function cu(e, t) { for (const n in t) { var r; e[n] ? (r = e[n]).push.apply(r, c(t[n])) : e[n] = t[n]; } } function uu(e) { return !e && e !== 0; } function du(e) { return e instanceof vu; } function hu(e) { return e instanceof Qc; } function fu(e) { return e instanceof Yc; } function mu(e) { return e == 'class' || e == 'style'; }n(15); var vu = (function () { function e(t) { f(this, e), this.element = null, this.isRendered = !1, this.locale = t, this.t = t && t.t, this._viewCollections = new Jn(), this._unboundChildren = this.createCollection(), this._viewCollections.on('add', ((e, n) => { n.locale = t; })), this.decorate('render'); } return m(e, [{ key: 'createCollection', value(e) { const t = new Yc(e); return this._viewCollections.add(t), t; } }, { key: 'registerChild', value(e) { Kn(e) || (e = [e]); let t; const n = d(e); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; this._unboundChildren.add(r); } } catch (i) { n.e(i); } finally { n.f(); } } }, { key: 'deregisterChild', value(e) { Kn(e) || (e = [e]); let t; const n = d(e); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; this._unboundChildren.remove(r); } } catch (i) { n.e(i); } finally { n.f(); } } }, { key: 'setTemplate', value(e) { this.template = new Qc(e); } }, { key: 'extendTemplate', value(e) { Qc.extend(this.template, e); } }, { key: 'render', value() { if (this.isRendered) throw new Ln.b('ui-view-render-already-rendered: This View has already been rendered.', this); this.template && (this.element = this.template.render(), this.registerChild(this.template.getViews())), this.isRendered = !0; } }, { key: 'destroy', value() { this.stopListening(), this._viewCollections.map(((e) => e.destroy())), this.template && this.template._revertData && this.template.revert(this.element); } }, { key: 'bindTemplate', get() { return this._bindTemplate ? this._bindTemplate : this._bindTemplate = Qc.bind(this, this); } }]), e; }()); Qn(vu, Ko), Qn(vu, ki); const gu = function (e) { return typeof e === 'string' || !Ze(e) && R(e) && I(e) == '[object String]'; }; const pu = (function (e) { v(n, e); const t = g(n); function n(e) { let r; const i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; return f(this, n), (r = t.call(this, i)).locale = e, r; } return m(n, [{ key: 'attachToDom', value() { this._bodyCollectionContainer = new Qc({ tag: 'div', attributes: { class: ['ck', 'ck-reset_all', 'ck-body', 'ck-rounded-corners'], dir: this.locale.uiLanguageDirection }, children: this }).render(); let e = document.querySelector('.ck-body-wrapper'); e || (e = (function (e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; let r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : []; const i = n && n.xmlns; const o = i ? e.createElementNS(i, t) : e.createElement(t); for (const a in n)o.setAttribute(a, n[a]); !gu(r) && Kn(r) || (r = [r]); let s; const l = d(r); try { for (l.s(); !(s = l.n()).done;) { let c = s.value; gu(c) && (c = e.createTextNode(c)), o.appendChild(c); } } catch (u) { l.e(u); } finally { l.f(); } return o; }(document, 'div', { class: 'ck-body-wrapper' })), document.body.appendChild(e)), e.appendChild(this._bodyCollectionContainer); } }, { key: 'detachFromDom', value() { o(a(n.prototype), 'destroy', this).call(this), this._bodyCollectionContainer && this._bodyCollectionContainer.remove(); const e = document.querySelector('.ck-body-wrapper'); e && e.childElementCount == 0 && e.remove(); } }]), n; }(Yc)); const ku = (n(17), (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).body = new pu(e), r; } return m(n, [{ key: 'render', value() { o(a(n.prototype), 'render', this).call(this), this.body.attachToDom(); } }, { key: 'destroy', value() { return this.body.detachFromDom(), o(a(n.prototype), 'destroy', this).call(this); } }]), n; }(vu))); const bu = (n(19), (function (e) { v(n, e); const t = g(n); function n(e) { let r; f(this, n), (r = t.call(this, e)).set('text'), r.set('for'), r.id = 'ck-editor__label_'.concat(jn()); const i = r.bindTemplate; return r.setTemplate({ tag: 'label', attributes: { class: ['ck', 'ck-label'], id: r.id, for: i.to('for') }, children: [{ text: i.to('text') }] }), r; } return n; }(vu))); const yu = (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; return f(this, n), (r = t.call(this, e)).top = r.createCollection(), r.main = r.createCollection(), r._voiceLabelView = r._createVoiceLabel(), r.setTemplate({
                tag: 'div',
                attributes: {
                  class: ['ck', 'ck-reset', 'ck-editor', 'ck-rounded-corners'], role: 'application', dir: e.uiLanguageDirection, lang: e.uiLanguage, 'aria-labelledby': r._voiceLabelView.id,
                },
                children: [r._voiceLabelView, { tag: 'div', attributes: { class: ['ck', 'ck-editor__top', 'ck-reset_all'], role: 'presentation' }, children: r.top }, { tag: 'div', attributes: { class: ['ck', 'ck-editor__main'], role: 'presentation' }, children: r.main }],
              }), r;
            } return m(n, [{ key: '_createVoiceLabel', value() { const e = this.t; const t = new bu(); return t.text = e('Rich Text Editor'), t.extendTemplate({ attributes: { class: 'ck-voice-label' } }), t; } }]), n;
          }(ku)); const wu = (function (e) { v(n, e); const t = g(n); function n(e, r, i) { let o; return f(this, n), (o = t.call(this, e, r, i)).extendTemplate({ attributes: { role: 'textbox', class: 'ck-editor__editable_inline' } }), o; } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this); const t = this._editingView; const r = this.t; t.change(((n) => { const i = t.document.getRoot(e.name); n.setAttribute('aria-label', r('Rich Text Editor, %0', [e.name]), i); })); } }]), n; }(function (e) { v(n, e); const t = g(n); function n(e, r, i) { let o; return f(this, n), (o = t.call(this, e)).setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-content', 'ck-editor__editable', 'ck-rounded-corners'], lang: e.contentLanguage, dir: e.contentLanguageDirection } }), o.name = null, o.set('isFocused', !1), o._editableElement = i, o._hasExternalElement = !!o._editableElement, o._editingView = r, o; } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this), this._hasExternalElement ? this.template.apply(this.element = this._editableElement) : this._editableElement = this.element, this.on('change:isFocused', (() => e._updateIsFocusedClasses())), this._updateIsFocusedClasses(); } }, { key: 'destroy', value() { this._hasExternalElement && this.template.revert(this._editableElement), o(a(n.prototype), 'destroy', this).call(this); } }, { key: '_updateIsFocusedClasses', value() { const e = this._editingView; function t(t) { e.change(((n) => { const r = e.document.getRoot(t.name); n.addClass(t.isFocused ? 'ck-focused' : 'ck-blurred', r), n.removeClass(t.isFocused ? 'ck-blurred' : 'ck-focused', r); })); }e.isRenderingInProgress ? (function n(r) { e.once('change:isRenderingInProgress', ((e, i, o) => { o ? n(r) : t(r); })); }(this)) : t(this); } }]), n; }(vu))); function _u(e) { return function (t) { return t + e; }; }n(21); const Eu = _u('px'); const xu = (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; f(this, n); const i = (r = t.call(this, e)).bindTemplate; return r.set('isActive', !1), r.set('isSticky', !1), r.set('limiterElement', null), r.set('limiterBottomOffset', 50), r.set('viewportTopOffset', 0), r.set('_marginLeft', null), r.set('_isStickyToTheLimiter', !1), r.set('_hasViewportTopOffset', !1), r.content = r.createCollection(), r._contentPanelPlaceholder = new Qc({ tag: 'div', attributes: { class: ['ck', 'ck-sticky-panel__placeholder'], style: { display: i.to('isSticky', ((e) => (e ? 'block' : 'none'))), height: i.to('isSticky', ((e) => (e ? Eu(r._panelRect.height) : null))) } } }).render(), r._contentPanel = new Qc({
                tag: 'div',
                attributes: {
                  class: ['ck', 'ck-sticky-panel__content', i.if('isSticky', 'ck-sticky-panel__content_sticky'), i.if('_isStickyToTheLimiter', 'ck-sticky-panel__content_sticky_bottom-limit')],
                  style: {
                    width: i.to('isSticky', ((e) => (e ? Eu(r._contentPanelPlaceholder.getBoundingClientRect().width) : null))), top: i.to('_hasViewportTopOffset', ((e) => (e ? Eu(r.viewportTopOffset) : null))), bottom: i.to('_isStickyToTheLimiter', ((e) => (e ? Eu(r.limiterBottomOffset) : null))), marginLeft: i.to('_marginLeft'),
                  },
                },
                children: r.content,
              }).render(), r.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-sticky-panel'] }, children: [r._contentPanelPlaceholder, r._contentPanel] }), r;
            } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this), this._checkIfShouldBeSticky(), this.listenTo(Vo.window, 'scroll', (() => { e._checkIfShouldBeSticky(); })), this.listenTo(this, 'change:isActive', (() => { e._checkIfShouldBeSticky(); })); } }, { key: '_checkIfShouldBeSticky', value() { let e; const t = this._panelRect = this._contentPanel.getBoundingClientRect(); this.limiterElement ? (e = this._limiterRect = this.limiterElement.getBoundingClientRect(), this.isSticky = this.isActive && e.top < this.viewportTopOffset && this._panelRect.height + this.limiterBottomOffset < e.height) : this.isSticky = !1, this.isSticky ? (this._isStickyToTheLimiter = e.bottom < t.height + this.limiterBottomOffset + this.viewportTopOffset, this._hasViewportTopOffset = !this._isStickyToTheLimiter && !!this.viewportTopOffset, this._marginLeft = this._isStickyToTheLimiter ? null : Eu(-Vo.window.scrollX)) : (this._isStickyToTheLimiter = !1, this._hasViewportTopOffset = !1, this._marginLeft = null); } }]), n;
          }(vu)); const Tu = (function () { function e(t) { const n = this; if (f(this, e), Object.assign(this, t), t.actions && t.keystrokeHandler) { const r = function (e) { let r = t.actions[e]; typeof r === 'string' && (r = [r]); let i; const o = d(r); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; t.keystrokeHandler.set(a, ((t, r) => { n[e](), r(); })); } } catch (s) { o.e(s); } finally { o.f(); } }; for (const i in t.actions)r(i); } } return m(e, [{ key: 'focusFirst', value() { this._focus(this.first); } }, { key: 'focusLast', value() { this._focus(this.last); } }, { key: 'focusNext', value() { this._focus(this.next); } }, { key: 'focusPrevious', value() { this._focus(this.previous); } }, { key: '_focus', value(e) { e && e.focus(); } }, { key: '_getFocusableItem', value(e) { const t = this.current; const n = this.focusables.length; if (!n) return null; if (t === null) return this[e === 1 ? 'first' : 'last']; let r = (t + n + e) % n; do { const i = this.focusables.get(r); if (Cu(i)) return i; r = (r + n + e) % n; } while (r !== t); return null; } }, { key: 'first', get() { return this.focusables.find(Cu) || null; } }, { key: 'last', get() { return this.focusables.filter(Cu).slice(-1)[0] || null; } }, { key: 'next', get() { return this._getFocusableItem(1); } }, { key: 'previous', get() { return this._getFocusableItem(-1); } }, { key: 'current', get() { const e = this; let t = null; return this.focusTracker.focusedElement === null ? null : (this.focusables.find(((n, r) => { const i = n.element === e.focusTracker.focusedElement; return i && (t = r), i; })), t); } }]), e; }()); function Cu(e) { return !(!e.focus || Vo.window.getComputedStyle(e.element).display == 'none'); } const Su = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).setTemplate({ tag: 'span', attributes: { class: ['ck', 'ck-toolbar__separator'] } }), r; } return n; }(vu)); const Au = (function () { function e(t, n) { f(this, e), e._observerInstance || e._createObserver(), this._element = t, this._callback = n, e._addElementCallback(t, n), e._observerInstance.observe(t); } return m(e, [{ key: 'destroy', value() { e._deleteElementCallback(this._element, this._callback); } }], [{ key: '_addElementCallback', value(t, n) { e._elementCallbacks || (e._elementCallbacks = new Map()); let r = e._elementCallbacks.get(t); r || (r = new Set(), e._elementCallbacks.set(t, r)), r.add(n); } }, { key: '_deleteElementCallback', value(t, n) { const r = e._getElementCallbacks(t); r && (r.delete(n), r.size || (e._elementCallbacks.delete(t), e._observerInstance.unobserve(t))), e._elementCallbacks && !e._elementCallbacks.size && (e._observerInstance = null, e._elementCallbacks = null); } }, { key: '_getElementCallbacks', value(t) { return e._elementCallbacks ? e._elementCallbacks.get(t) : null; } }, { key: '_createObserver', value() { let t; t = typeof Vo.window.ResizeObserver === 'function' ? Vo.window.ResizeObserver : Pu, e._observerInstance = new t(((t) => { let n; const r = d(t); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (i.target.offsetParent) { const o = e._getElementCallbacks(i.target); if (o) { var a; const s = d(o); try { for (s.s(); !(a = s.n()).done;)(0, a.value)(i); } catch (l) { s.e(l); } finally { s.f(); } } } } } catch (l) { r.e(l); } finally { r.f(); } })); } }]), e; }()); Au._observerInstance = null, Au._elementCallbacks = null; var Pu = (function () { function e(t) { f(this, e), this._callback = t, this._elements = new Set(), this._previousRects = new Map(), this._periodicCheckTimeout = null; } return m(e, [{ key: 'observe', value(e) { this._elements.add(e), this._checkElementRectsAndExecuteCallback(), this._elements.size === 1 && this._startPeriodicCheck(); } }, { key: 'unobserve', value(e) { this._elements.delete(e), this._previousRects.delete(e), this._elements.size || this._stopPeriodicCheck(); } }, { key: '_startPeriodicCheck', value() { const e = this; this.listenTo(Vo.window, 'resize', (() => { e._checkElementRectsAndExecuteCallback(); })), this._periodicCheckTimeout = setTimeout((function t() { e._checkElementRectsAndExecuteCallback(), e._periodicCheckTimeout = setTimeout(t, 100); }), 100); } }, { key: '_stopPeriodicCheck', value() { clearTimeout(this._periodicCheckTimeout), this.stopListening(), this._previousRects.clear(); } }, { key: '_checkElementRectsAndExecuteCallback', value() { let e; const t = []; const n = d(this._elements); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; this._hasRectChanged(r) && t.push({ target: r, contentRect: this._previousRects.get(r) }); } } catch (i) { n.e(i); } finally { n.f(); }t.length && this._callback(t); } }, { key: '_hasRectChanged', value(e) { if (!e.ownerDocument.body.contains(e)) return !1; const t = new Ua(e); const n = this._previousRects.get(e); const r = !n || !n.isEqual(t); return this._previousRects.set(e, t), r; } }]), e; }()); function Ou(e) { return e.bindTemplate.to(((t) => { t.target === e.element && t.preventDefault(); })); }Qn(Pu, Ko); const Iu = (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; f(this, n); const i = (r = t.call(this, e)).bindTemplate; return r.set('isVisible', !1), r.set('position', 'se'), r.children = r.createCollection(), r.setTemplate({
                tag: 'div', attributes: { class: ['ck', 'ck-reset', 'ck-dropdown__panel', i.to('position', ((e) => 'ck-dropdown__panel_'.concat(e))), i.if('isVisible', 'ck-dropdown__panel-visible')] }, children: r.children, on: { selectstart: i.to(((e) => e.preventDefault())) },
              }), r;
            } return m(n, [{ key: 'focus', value() { this.children.length && this.children.first.focus(); } }, { key: 'focusLast', value() { if (this.children.length) { const e = this.children.last; typeof e.focusLast === 'function' ? e.focusLast() : e.focus(); } } }]), n;
          }(vu)); function Mu(e) {
            const t = e.element; let n = e.target; const r = e.positions; let i = e.limiter; const o = e.fitInViewport; ne(n) && (n = n()), ne(i) && (i = i()); let a; let s; const l = (function (e) { return e && e.parentNode ? e.offsetParent === Vo.document.body ? null : e.offsetParent : null; }(t)); const c = new Ua(t); const h = new Ua(n); if (i || o) {
              const f = (function (e, t) {
                const n = t.elementRect; const r = t.viewportRect; const i = n.getArea(); const o = (function (e, t) {
                  let n; const r = t.targetRect; const i = t.elementRect; const o = t.limiterRect; const a = t.viewportRect; const s = []; const l = i.getArea(); const c = d(e); try {
                    for (c.s(); !(n = c.n()).done;) {
                      const h = Nu(n.value, r, i); if (h) {
                        const f = u(h, 2); const m = f[0]; const v = f[1]; let g = 0; let p = 0; if (o) if (a) { const k = o.getIntersection(a); k && (g = k.getIntersectionArea(v)); } else g = o.getIntersectionArea(v); a && (p = a.getIntersectionArea(v)); const b = {
                          positionName: m, positionRect: v, limiterIntersectArea: g, viewportIntersectArea: p,
                        }; if (g === l) return [b]; s.push(b);
                      }
                    }
                  } catch (y) { c.e(y); } finally { c.f(); } return s;
                }(e, t)); if (r) { const a = Ru(o.filter(((e) => e.viewportIntersectArea === i)), i); if (a) return a; } return Ru(o, i);
              }(r, {
                targetRect: h, elementRect: c, limiterRect: i && new Ua(i).getVisible(), viewportRect: o && new Ua(Vo.window),
              })) || Nu(r[0], h, c); const m = u(f, 2); s = m[0], a = m[1];
            } else { const v = Nu(r[0], h, c); const g = u(v, 2); s = g[0], a = g[1]; } let p = ju(a); return l && (p = (function (e, t) { let n = e.left; let r = e.top; const i = ju(new Ua(t)); const o = Va(t); return n -= i.left, r -= i.top, n += t.scrollLeft, r += t.scrollTop, n -= o.left, r -= o.top, { left: n, top: r }; }(p, l))), { left: p.left, top: p.top, name: s };
          } function Nu(e, t, n) { const r = e(t, n); if (!r) return null; const i = r.left; const o = r.top; return [r.name, n.clone().moveTo(i, o)]; } function Ru(e, t) { let n; let r; let i; let o = 0; const a = d(e); try { for (a.s(); !(i = a.n()).done;) { const s = i.value; const l = s.positionName; const c = s.positionRect; const u = s.limiterIntersectArea; const h = s.viewportIntersectArea; if (u === t) return [l, c]; const f = Math.pow(h, 2) + Math.pow(u, 2); f > o && (o = f, n = c, r = l); } } catch (m) { a.e(m); } finally { a.f(); } return n ? [r, n] : null; } function ju(e) { const t = e.left; const n = e.top; const r = Vo.window; return { left: t + r.scrollX, top: n + r.scrollY }; }n(23); const Du = (function (e) {
            v(n, e); const t = g(n); function n(e, r, i) { let o; f(this, n); const a = (o = t.call(this, e)).bindTemplate; return o.buttonView = r, o.panelView = i, o.set('isOpen', !1), o.set('isEnabled', !0), o.set('class'), o.set('id'), o.set('panelPosition', 'auto'), o.keystrokes = new Oc(), o.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-dropdown', a.to('class'), a.if('isEnabled', 'ck-disabled', ((e) => !e))], id: a.to('id'), 'aria-describedby': a.to('ariaDescribedById') }, children: [r, i] }), r.extendTemplate({ attributes: { class: ['ck-dropdown__button'] } }), o; } return m(n, [{
              key: 'render',
              value() {
                const e = this; o(a(n.prototype), 'render', this).call(this), this.listenTo(this.buttonView, 'open', (() => { e.isOpen = !e.isOpen; })), this.panelView.bind('isVisible').to(this, 'isOpen'), this.on('change:isOpen', (() => {
                  e.isOpen && (e.panelPosition === 'auto' ? e.panelView.position = n._getOptimalPosition({
                    element: e.panelView.element, target: e.buttonView.element, fitInViewport: !0, positions: e._panelPositions,
                  }).name : e.panelView.position = e.panelPosition);
                })), this.keystrokes.listenTo(this.element); const t = (function (e) { function t(t, n) { return e.apply(this, arguments); } return t.toString = function () { return e.toString(); }, t; }(((t, n) => { e.isOpen && (e.buttonView.focus(), e.isOpen = !1, n()); }))); this.keystrokes.set('arrowdown', ((t, n) => { e.buttonView.isEnabled && !e.isOpen && (e.isOpen = !0, n()); })), this.keystrokes.set('arrowright', ((t, n) => { e.isOpen && n(); })), this.keystrokes.set('arrowleft', t), this.keystrokes.set('esc', t);
              },
            }, { key: 'focus', value() { this.buttonView.focus(); } }, { key: '_panelPositions', get() { const e = n.defaultPanelPositions; const t = e.southEast; const r = e.southWest; const i = e.northEast; const o = e.northWest; return this.locale.uiLanguageDirection === 'ltr' ? [t, r, i, o] : [r, t, o, i]; } }]), n;
          }(vu)); Du.defaultPanelPositions = {
            southEast(e) { return { top: e.bottom, left: e.left, name: 'se' }; }, southWest(e, t) { return { top: e.bottom, left: e.left - t.width + e.width, name: 'sw' }; }, northEast(e, t) { return { top: e.top - t.height, left: e.left, name: 'ne' }; }, northWest(e, t) { return { top: e.bottom - t.height, left: e.left - t.width + e.width, name: 'nw' }; },
          }, Du._getOptimalPosition = Mu, n(25); const Lu = (function (e) { v(n, e); const t = g(n); function n() { let e; f(this, n); const r = (e = t.call(this)).bindTemplate; return e.set('content', ''), e.set('viewBox', '0 0 20 20'), e.set('fillColor', ''), e.setTemplate({ tag: 'svg', ns: 'http://www.w3.org/2000/svg', attributes: { class: ['ck', 'ck-icon'], viewBox: r.to('viewBox') } }), e; } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this), this._updateXMLContent(), this._colorFillPaths(), this.on('change:content', (() => { e._updateXMLContent(), e._colorFillPaths(); })), this.on('change:fillColor', (() => { e._colorFillPaths(); })); } }, { key: '_updateXMLContent', value() { if (this.content) { const e = (new DOMParser()).parseFromString(this.content.trim(), 'image/svg+xml').querySelector('svg'); const t = e.getAttribute('viewBox'); for (t && (this.viewBox = t), this.element.innerHTML = ''; e.childNodes.length > 0;) this.element.appendChild(e.childNodes[0]); } } }, { key: '_colorFillPaths', value() { const e = this; this.fillColor && this.element.querySelectorAll('.ck-icon__fill').forEach(((t) => { t.style.fill = e.fillColor; })); } }]), n; }(vu)); const zu = (n(27), (function (e) { v(n, e); const t = g(n); function n(e) { let r; f(this, n), (r = t.call(this, e)).set('text', ''), r.set('position', 's'); const i = r.bindTemplate; return r.setTemplate({ tag: 'span', attributes: { class: ['ck', 'ck-tooltip', i.to('position', ((e) => `ck-tooltip_${e}`)), i.if('text', 'ck-hidden', ((e) => !e.trim()))] }, children: [{ tag: 'span', attributes: { class: ['ck', 'ck-tooltip__text'] }, children: [{ text: i.to('text') }] }] }), r; } return n; }(vu))); const Fu = (n(29), (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; f(this, n); const i = (r = t.call(this, e)).bindTemplate; const o = jn(); return r.set('class'), r.set('labelStyle'), r.set('icon'), r.set('isEnabled', !0), r.set('isOn', !1), r.set('isVisible', !0), r.set('isToggleable', !1), r.set('keystroke'), r.set('label'), r.set('tabindex', -1), r.set('tooltip'), r.set('tooltipPosition', 's'), r.set('type', 'button'), r.set('withText', !1), r.set('withKeystroke', !1), r.children = r.createCollection(), r.tooltipView = r._createTooltipView(), r.labelView = r._createLabelView(o), r.iconView = new Lu(), r.iconView.extendTemplate({ attributes: { class: 'ck-button__icon' } }), r.keystrokeView = r._createKeystrokeView(), r.bind('_tooltipString').to(s(r), 'tooltip', s(r), 'label', s(r), 'keystroke', r._getTooltipString.bind(s(r))), r.setTemplate({
                tag: 'button',
                attributes: {
                  class: ['ck', 'ck-button', i.to('class'), i.if('isEnabled', 'ck-disabled', ((e) => !e)), i.if('isVisible', 'ck-hidden', ((e) => !e)), i.to('isOn', ((e) => (e ? 'ck-on' : 'ck-off'))), i.if('withText', 'ck-button_with-text'), i.if('withKeystroke', 'ck-button_with-keystroke')], type: i.to('type', ((e) => e || 'button')), tabindex: i.to('tabindex'), 'aria-labelledby': 'ck-editor__aria-label_'.concat(o), 'aria-disabled': i.if('isEnabled', !0, ((e) => !e)), 'aria-pressed': i.to('isOn', ((e) => !!r.isToggleable && String(e))),
                },
                children: r.children,
                on: { mousedown: i.to(((e) => { e.preventDefault(); })), click: i.to(((e) => { r.isEnabled ? r.fire('execute') : e.preventDefault(); })) },
              }), r;
            } return m(n, [{ key: 'render', value() { o(a(n.prototype), 'render', this).call(this), this.icon && (this.iconView.bind('content').to(this, 'icon'), this.children.add(this.iconView)), this.children.add(this.tooltipView), this.children.add(this.labelView), this.withKeystroke && this.children.add(this.keystrokeView); } }, { key: 'focus', value() { this.element.focus(); } }, { key: '_createTooltipView', value() { const e = new zu(); return e.bind('text').to(this, '_tooltipString'), e.bind('position').to(this, 'tooltipPosition'), e; } }, {
              key: '_createLabelView',
              value(e) {
                const t = new vu(); const
                  n = this.bindTemplate; return t.setTemplate({ tag: 'span', attributes: { class: ['ck', 'ck-button__label'], style: n.to('labelStyle'), id: 'ck-editor__aria-label_'.concat(e) }, children: [{ text: this.bindTemplate.to('label') }] }), t;
              },
            }, { key: '_createKeystrokeView', value() { const e = new vu(); return e.setTemplate({ tag: 'span', attributes: { class: ['ck', 'ck-button__keystroke'] }, children: [{ text: this.bindTemplate.to('keystroke', ((e) => Qi(e))) }] }), e; } }, { key: '_getTooltipString', value(e, t, n) { return e ? typeof e === 'string' ? e : (n && (n = Qi(n)), e instanceof Function ? e(t, n) : ''.concat(t).concat(n ? ' ('.concat(n, ')') : '')) : ''; } }]), n;
          }(vu))); const Vu = '<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>'; const Bu = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).arrowView = r._createArrowView(), r.extendTemplate({ attributes: { 'aria-haspopup': !0 } }), r.delegate('execute').to(s(r), 'open'), r; } return m(n, [{ key: 'render', value() { o(a(n.prototype), 'render', this).call(this), this.children.add(this.arrowView); } }, { key: '_createArrowView', value() { const e = new Lu(); return e.content = Vu, e.extendTemplate({ attributes: { class: 'ck-dropdown__arrow' } }), e; } }]), n; }(Fu)); const Uu = (n(31), (function (e) {
            v(n, e); const t = g(n); function n() {
              let e; return f(this, n), (e = t.call(this)).items = e.createCollection(), e.focusTracker = new Fc(), e.keystrokes = new Oc(), e._focusCycler = new Tu({
                focusables: e.items, focusTracker: e.focusTracker, keystrokeHandler: e.keystrokes, actions: { focusPrevious: 'arrowup', focusNext: 'arrowdown' },
              }), e.setTemplate({ tag: 'ul', attributes: { class: ['ck', 'ck-reset', 'ck-list'] }, children: e.items }), e;
            } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this); let t; const r = d(this.items); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; this.focusTracker.add(i.element); } } catch (s) { r.e(s); } finally { r.f(); } this.items.on('add', ((t, n) => { e.focusTracker.add(n.element); })), this.items.on('remove', ((t, n) => { e.focusTracker.remove(n.element); })), this.keystrokes.listenTo(this.element); } }, { key: 'focus', value() { this._focusCycler.focusFirst(); } }, { key: 'focusLast', value() { this._focusCycler.focusLast(); } }]), n;
          }(vu))); const Hu = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).children = r.createCollection(), r.setTemplate({ tag: 'li', attributes: { class: ['ck', 'ck-list__item'] }, children: r.children }), r; } return m(n, [{ key: 'focus', value() { this.children.first.focus(); } }]), n; }(vu)); const Wu = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).setTemplate({ tag: 'li', attributes: { class: ['ck', 'ck-list__separator'] } }), r; } return n; }(vu)); const qu = (n(33), (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).isToggleable = !0, r.toggleSwitchView = r._createToggleView(), r.extendTemplate({ attributes: { class: 'ck-switchbutton' } }), r; } return m(n, [{ key: 'render', value() { o(a(n.prototype), 'render', this).call(this), this.children.add(this.toggleSwitchView); } }, { key: '_createToggleView', value() { const e = new vu(); return e.setTemplate({ tag: 'span', attributes: { class: ['ck', 'ck-button__toggle'] }, children: [{ tag: 'span', attributes: { class: ['ck', 'ck-button__toggle__inner'] } }] }), e; } }]), n; }(Fu))); function Gu(e) { const t = e.emitter; const n = e.activator; const r = e.callback; const i = e.contextElements; t.listenTo(document, 'mousedown', ((e, t) => { const o = t.target; if (n()) { let a; const s = d(i); try { for (s.s(); !(a = s.n()).done;) if (a.value.contains(o)) return; } catch (l) { s.e(l); } finally { s.f(); }r(); } })); } function $u(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Bu; const n = new t(e); const r = new Iu(e); const i = new Du(e, n, r); return n.bind('isEnabled').to(i), n instanceof Bu ? n.bind('isOn').to(i, 'isOpen') : n.arrowView.bind('isOn').to(i, 'isOpen'), Ku(i), i; } function Yu(e, t) { const n = e.locale; const r = e.listView = new Uu(n); r.items.bindTo(t).using(((e) => { const t = e.type; const r = e.model; if (t === 'separator') return new Wu(n); if (t === 'button' || t === 'switchbutton') { let i; let o; const a = new Hu(n); return (i = o = t === 'button' ? new Fu(n) : new qu(n)).bind.apply(i, c(Object.keys(r))).to(r), o.delegate('execute').to(a), a.children.add(o), a; } })), e.panelView.children.add(r), r.items.delegate('execute').to(e); } function Ku(e) {
            !(function (e) {
              e.on('render', (() => {
                Gu({
                  emitter: e, activator() { return e.isOpen; }, callback() { e.isOpen = !1; }, contextElements: [e.element],
                });
              }));
            }(e)), (function (e) { e.on('execute', ((t) => { t.source instanceof qu || (e.isOpen = !1); })); }(e)), (function (e) { e.keystrokes.set('arrowdown', ((t, n) => { e.isOpen && (e.panelView.focus(), n()); })), e.keystrokes.set('arrowup', ((t, n) => { e.isOpen && (e.panelView.focusLast(), n()); })); }(e));
          }n(35), n(37), n(39); const Qu = (function (e) {
            v(n, e); const t = g(n); function n(e, r) {
              let i; f(this, n); const o = (i = t.call(this, e)).bindTemplate; const a = i.t; return i.options = r || {}, i.set('ariaLabel', a('Editor toolbar')), i.set('maxWidth', 'auto'), i.items = i.createCollection(), i.focusTracker = new Fc(), i.keystrokes = new Oc(), i.set('class'), i.set('isCompact', !1), i.itemsView = new Ju(e), i.children = i.createCollection(), i.children.add(i.itemsView), i.focusables = i.createCollection(), i._focusCycler = new Tu({
                focusables: i.focusables, focusTracker: i.focusTracker, keystrokeHandler: i.keystrokes, actions: { focusPrevious: ['arrowleft', 'arrowup'], focusNext: ['arrowright', 'arrowdown'] },
              }), i.setTemplate({
                tag: 'div',
                attributes: {
                  class: ['ck', 'ck-toolbar', o.to('class'), o.if('isCompact', 'ck-toolbar_compact')], role: 'toolbar', 'aria-label': o.to('ariaLabel'), style: { maxWidth: o.to('maxWidth') },
                },
                children: i.children,
                on: { mousedown: Ou(s(i)) },
              }), i._behavior = i.options.shouldGroupWhenFull ? new Xu(s(i)) : new Zu(s(i)), i;
            } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this); let t; const r = d(this.items); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; this.focusTracker.add(i.element); } } catch (s) { r.e(s); } finally { r.f(); } this.items.on('add', ((t, n) => { e.focusTracker.add(n.element); })), this.items.on('remove', ((t, n) => { e.focusTracker.remove(n.element); })), this.keystrokes.listenTo(this.element), this._behavior.render(this); } }, { key: 'destroy', value() { return this._behavior.destroy(), o(a(n.prototype), 'destroy', this).call(this); } }, { key: 'focus', value() { this._focusCycler.focusFirst(); } }, { key: 'focusLast', value() { this._focusCycler.focusLast(); } }, { key: 'fillFromConfig', value(e, t) { this.items.addMany(e.map(((e) => (e == '|' ? new Su() : t.has(e) ? t.create(e) : void console.warn(Object(Ln.a)('toolbarview-item-unavailable: The requested toolbar item is unavailable.'), { name: e })))).filter(((e) => void 0 !== e))); } }]), n;
          }(vu)); var Ju = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).children = r.createCollection(), r.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-toolbar__items'] }, children: r.children }), r; } return n; }(vu)); var Zu = (function () { function e(t) { f(this, e); const n = t.bindTemplate; t.set('isVertical', !1), t.itemsView.children.bindTo(t.items).using(((e) => e)), t.focusables.bindTo(t.items).using(((e) => e)), t.extendTemplate({ attributes: { class: [n.if('isVertical', 'ck-toolbar_vertical')] } }); } return m(e, [{ key: 'render', value() {} }, { key: 'destroy', value() {} }]), e; }()); var Xu = (function () { function e(t) { const n = this; f(this, e), this.viewChildren = t.children, this.viewFocusables = t.focusables, this.viewItemsView = t.itemsView, this.viewFocusTracker = t.focusTracker, this.viewLocale = t.locale, this.ungroupedItems = t.createCollection(), this.groupedItems = t.createCollection(), this.groupedItemsDropdown = this._createGroupedItemsDropdown(), this.resizeObserver = null, this.cachedPadding = null, this.shouldUpdateGroupingOnNextResize = !1, t.itemsView.children.bindTo(this.ungroupedItems).using(((e) => e)), this.ungroupedItems.on('add', this._updateFocusCycleableItems.bind(this)), this.ungroupedItems.on('remove', this._updateFocusCycleableItems.bind(this)), t.children.on('add', this._updateFocusCycleableItems.bind(this)), t.children.on('remove', this._updateFocusCycleableItems.bind(this)), t.items.on('change', ((e, t) => { let r; const i = t.index; const o = d(t.removed); try { for (o.s(); !(r = o.n()).done;) { const a = r.value; i >= n.ungroupedItems.length ? n.groupedItems.remove(a) : n.ungroupedItems.remove(a); } } catch (c) { o.e(c); } finally { o.f(); } for (let s = i; s < i + t.added.length; s++) { const l = t.added[s - i]; s > n.ungroupedItems.length ? n.groupedItems.add(l, s - n.ungroupedItems.length) : n.ungroupedItems.add(l, s); }n._updateGrouping(); })), t.extendTemplate({ attributes: { class: ['ck-toolbar_grouping'] } }); } return m(e, [{ key: 'render', value(e) { this.viewElement = e.element, this._enableGroupingOnResize(), this._enableGroupingOnMaxWidthChange(e); } }, { key: 'destroy', value() { this.groupedItemsDropdown.destroy(), this.resizeObserver.destroy(); } }, { key: '_updateGrouping', value() { if (this.viewElement.ownerDocument.body.contains(this.viewElement)) if (this.viewElement.offsetParent) { for (var e; this._areItemsOverflowing;) this._groupLastItem(), e = !0; if (!e && this.groupedItems.length) { for (;this.groupedItems.length && !this._areItemsOverflowing;) this._ungroupFirstItem(); this._areItemsOverflowing && this._groupLastItem(); } } else this.shouldUpdateGroupingOnNextResize = !0; } }, { key: '_enableGroupingOnResize', value() { let e; const t = this; this.resizeObserver = new Au(this.viewElement, ((n) => { e && e === n.contentRect.width && !t.shouldUpdateGroupingOnNextResize || (t.shouldUpdateGroupingOnNextResize = !1, t._updateGrouping(), e = n.contentRect.width); })), this._updateGrouping(); } }, { key: '_enableGroupingOnMaxWidthChange', value(e) { const t = this; e.on('change:maxWidth', (() => { t._updateGrouping(); })); } }, { key: '_groupLastItem', value() { this.groupedItems.length || (this.viewChildren.add(new Su()), this.viewChildren.add(this.groupedItemsDropdown), this.viewFocusTracker.add(this.groupedItemsDropdown.element)), this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last), 0); } }, { key: '_ungroupFirstItem', value() { this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)), this.groupedItems.length || (this.viewChildren.remove(this.groupedItemsDropdown), this.viewChildren.remove(this.viewChildren.last), this.viewFocusTracker.remove(this.groupedItemsDropdown.element)); } }, { key: '_createGroupedItemsDropdown', value() { const e = this.viewLocale; const { t } = e; const n = $u(e); return n.class = 'ck-toolbar__grouped-dropdown', n.panelPosition = e.uiLanguageDirection === 'ltr' ? 'sw' : 'se', (function (e, t) { const n = e.locale; const r = n.t; const i = e.toolbarView = new Qu(n); i.set('ariaLabel', r('Dropdown toolbar')), e.extendTemplate({ attributes: { class: ['ck-toolbar-dropdown'] } }), t.map(((e) => i.items.add(e))), e.panelView.children.add(i), i.items.delegate('execute').to(e); }(n, [])), n.buttonView.set({ label: t('Show more items'), tooltip: !0, icon: '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>' }), n.toolbarView.items.bindTo(this.groupedItems).using(((e) => e)), n; } }, { key: '_updateFocusCycleableItems', value() { const e = this; this.viewFocusables.clear(), this.ungroupedItems.map(((t) => { e.viewFocusables.add(t); })), this.groupedItems.length && this.viewFocusables.add(this.groupedItemsDropdown); } }, { key: '_areItemsOverflowing', get() { if (!this.ungroupedItems.length) return !1; const e = this.viewElement; const t = this.viewLocale.uiLanguageDirection; const n = new Ua(e.lastChild); const r = new Ua(e); if (!this.cachedPadding) { const i = Vo.window.getComputedStyle(e); const o = t === 'ltr' ? 'paddingRight' : 'paddingLeft'; this.cachedPadding = Number.parseInt(i[o]); } return t === 'ltr' ? n.right > r.right - this.cachedPadding : n.left < r.left + this.cachedPadding; } }]), e; }()); const ed = (n(41), (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; const o = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; return f(this, n), (i = t.call(this, e)).stickyPanel = new xu(e), i.toolbar = new Qu(e, { shouldGroupWhenFull: o.shouldToolbarGroupWhenFull }), i.editable = new wu(e, r), i; } return m(n, [{ key: 'render', value() { o(a(n.prototype), 'render', this).call(this), this.stickyPanel.content.add(this.toolbar), this.top.add(this.stickyPanel), this.main.add(this.editable); } }]), n; }(yu))); const td = (function (e) {
            v(n, e); const t = g(n); function n(e, r) { let i; f(this, n), i = t.call(this, r), An(e) && (i.sourceElement = e), i.data.processor = new Dc(i.data.viewDocument), i.model.document.createRoot(); const o = !i.config.get('toolbar.shouldNotGroupWhenFull'); const a = new ed(i.locale, i.editing.view, { shouldToolbarGroupWhenFull: o }); return i.ui = new $c(s(i), a), (function (e) { if (!ne(e.updateSourceElement)) throw new Ln.b('attachtoform-missing-elementapi-interface: Editor passed to attachToForm() must implement ElementApi.', e); const t = e.sourceElement; if (t && t.tagName.toLowerCase() === 'textarea' && t.form) { let n; const r = t.form; const i = function () { return e.updateSourceElement(); }; ne(r.submit) && (n = r.submit, r.submit = function () { i(), n.apply(r); }), r.addEventListener('submit', i), e.on('destroy', (() => { r.removeEventListener('submit', i), n && (r.submit = n); })); } }(s(i))), i; } return m(n, [{ key: 'destroy', value() { return this.sourceElement && this.updateSourceElement(), this.ui.destroy(), o(a(n.prototype), 'destroy', this).call(this); } }], [{
              key: 'create',
              value(e) {
                const t = this; const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return new Promise(((r) => {
                  const i = new t(e, n); r(i.initPlugins().then((() => i.ui.init(An(e) ? e : null))).then((() => { if (!An(e) && n.initialData) throw new Ln.b('editor-create-initial-data: The config.initialData option cannot be used together with initial data passed in Editor.create().', null); const t = n.initialData || nd(e); return i.data.init(t); })).then((() => i.fire('ready')))
                    .then((() => i)));
                }));
              },
            }]), n;
          }(Mc)); function nd(e) { return An(e) ? (function (e) { return e instanceof HTMLTextAreaElement ? e.value : e.innerHTML; }(e)) : e; } function rd(e) { const t = e.next(); return t.done ? null : t.value; } function id(e, t, n, r) { let i; let o = null; typeof r === 'function' ? i = r : (o = e.commands.get(r), i = function () { e.execute(r); }), e.model.document.on('change:data', ((r, a) => { if ((!o || o.isEnabled) && t.isEnabled) { const s = rd(e.model.document.selection.getRanges()); if (s.isCollapsed && a.type != 'transparent') { const l = Array.from(e.model.document.differ.getChanges()); const c = l[0]; if (l.length == 1 && c.type === 'insert' && c.name == '$text' && c.length == 1) { const u = c.position.parent; if (!u.is('element', 'codeBlock') && (!o || !0 !== o.value)) { const d = u.getChild(0); const h = e.model.createRangeOn(d); if (h.containsRange(s) || s.end.isEqual(h.end)) { const f = n.exec(d.data.substr(0, s.end.offset)); f && e.model.enqueueChange(((e) => { const t = e.createPositionAt(u, 0); const n = e.createPositionAt(u, f[0].length); const r = new xs(t, n); !1 !== i({ match: f }) && e.remove(r), r.detach(); })); } } } } } })); } function od(e, t, n, r) { let i; let o; n instanceof RegExp ? i = n : o = n, o = o || function (e) { for (var t, n = [], r = []; (t = i.exec(e)) !== null && !(t && t.length < 4);) { const o = t; let a = o.index; const s = o[1]; const l = o[2]; const c = o[3]; const u = s + l + c; const d = [a += t[0].length - u.length, a + s.length]; const h = [a + s.length + l.length, a + s.length + l.length + c.length]; n.push(d), n.push(h), r.push([a + s.length, a + s.length + l.length]); } return { remove: n, format: r }; }, e.model.document.on('change:data', ((n, i) => { if (i.type != 'transparent' && t.isEnabled) { const a = e.model; const s = a.document.selection; if (s.isCollapsed) { const l = Array.from(a.document.differ.getChanges()); const c = l[0]; if (l.length == 1 && c.type === 'insert' && c.name == '$text' && c.length == 1) { const u = s.focus; const h = u.parent; const f = (function (e, t) { let n = e.start; return { text: Array.from(e.getItems()).reduce(((e, r) => (!r.is('$text') && !r.is('$textProxy') || r.getAttribute('code') ? (n = t.createPositionAfter(r), '') : e + r.data)), ''), range: t.createRange(n, e.end) }; }(a.createRange(a.createPositionAt(h, 0), u), a)); const m = f.text; const v = f.range; const g = o(m); const p = ad(v.start, g.format, a); const k = ad(v.start, g.remove, a); p.length && k.length && a.enqueueChange(((e) => { if (!1 !== r(e, p)) { let t; const n = d(k.reverse()); try { for (n.s(); !(t = n.n()).done;) { const i = t.value; e.remove(i); } } catch (o) { n.e(o); } finally { n.f(); } } })); } } } })); } function ad(e, t, n) { return t.filter(((e) => void 0 !== e[0] && void 0 !== e[1])).map(((t) => n.createRange(e.getShiftedBy(t[0]), e.getShiftedBy(t[1])))); }Qn(td, Nc), Qn(td, Rc); const sd = (function () { function e(t) { f(this, e), this.editor = t, this.set('isEnabled', !0), this._disableStack = new Set(); } return m(e, [{ key: 'forceDisabled', value(e) { this._disableStack.add(e), this._disableStack.size == 1 && (this.on('set:isEnabled', ld, { priority: 'highest' }), this.isEnabled = !1); } }, { key: 'clearForceDisabled', value(e) { this._disableStack.delete(e), this._disableStack.size == 0 && (this.off('set:isEnabled', ld), this.isEnabled = !0); } }, { key: 'destroy', value() { this.stopListening(); } }], [{ key: 'isContextPlugin', get() { return !1; } }]), e; }()); function ld(e) { e.return = !1, e.stop(); }Qn(sd, ki); const cd = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'afterInit', value() { this._addListAutoformats(), this._addBasicStylesAutoformats(), this._addHeadingAutoformats(), this._addBlockQuoteAutoformats(), this._addCodeBlockAutoformats(); } }, { key: '_addListAutoformats', value() { const e = this.editor.commands; e.get('bulletedList') && id(this.editor, this, /^[*-]\s$/, 'bulletedList'), e.get('numberedList') && id(this.editor, this, /^1[.|)]\s$/, 'numberedList'); } }, { key: '_addBasicStylesAutoformats', value() { const e = this.editor.commands; if (e.get('bold')) { const t = ud(this.editor, 'bold'); od(this.editor, this, /(\*\*)([^*]+)(\*\*)$/g, t), od(this.editor, this, /(__)([^_]+)(__)$/g, t); } if (e.get('italic')) { const n = ud(this.editor, 'italic'); od(this.editor, this, /(?:^|[^*])(\*)([^*_]+)(\*)$/g, n), od(this.editor, this, /(?:^|[^_])(_)([^_]+)(_)$/g, n); } if (e.get('code')) { const r = ud(this.editor, 'code'); od(this.editor, this, /(`)([^`]+)(`)$/g, r); } if (e.get('strikethrough')) { const i = ud(this.editor, 'strikethrough'); od(this.editor, this, /(~~)([^~]+)(~~)$/g, i); } } }, { key: '_addHeadingAutoformats', value() { const e = this; const t = this.editor.commands.get('heading'); t && t.modelElements.filter(((e) => e.match(/^heading[1-6]$/))).forEach(((n) => { const r = n[7]; const i = new RegExp('^(#{'.concat(r, '})\\s$')); id(e.editor, e, i, (() => { if (!t.isEnabled || t.value === n) return !1; e.editor.execute('heading', { value: n }); })); })); } }, { key: '_addBlockQuoteAutoformats', value() { this.editor.commands.get('blockQuote') && id(this.editor, this, /^>\s$/, 'blockQuote'); } }, { key: '_addCodeBlockAutoformats', value() { this.editor.commands.get('codeBlock') && id(this.editor, this, /^```$/, 'codeBlock'); } }], [{ key: 'pluginName', get() { return 'Autoformat'; } }]), n; }(sd)); function ud(e, t) { return function (n, r) { if (!e.commands.get(t).isEnabled) return !1; let i; const o = e.model.schema.getValidRanges(r, t); const a = d(o); try { for (a.s(); !(i = a.n()).done;) { const s = i.value; n.setAttribute(t, !0, s); } } catch (l) { a.e(l); } finally { a.f(); }n.removeSelectionAttribute(t); }; } const dd = (function () { function e(t) { const n = this; f(this, e), this.editor = t, this.set('value', void 0), this.set('isEnabled', !1), this._disableStack = new Set(), this.decorate('execute'), this.listenTo(this.editor.model.document, 'change', (() => { n.refresh(); })), this.on('execute', ((e) => { n.isEnabled || e.stop(); }), { priority: 'high' }), this.listenTo(t, 'change:isReadOnly', ((e, t, r) => { r ? n.forceDisabled('readOnlyMode') : n.clearForceDisabled('readOnlyMode'); })); } return m(e, [{ key: 'refresh', value() { this.isEnabled = !0; } }, { key: 'forceDisabled', value(e) { this._disableStack.add(e), this._disableStack.size == 1 && (this.on('set:isEnabled', hd, { priority: 'highest' }), this.isEnabled = !1); } }, { key: 'clearForceDisabled', value(e) { this._disableStack.delete(e), this._disableStack.size == 0 && (this.off('set:isEnabled', hd), this.refresh()); } }, { key: 'execute', value() {} }, { key: 'destroy', value() { this.stopListening(); } }]), e; }()); function hd(e) { e.return = !1, e.stop(); }Qn(dd, ki); const fd = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { this.value = this._getValue(), this.isEnabled = this._checkEnabled(); } }, { key: 'execute', value() { const e = this; const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; const n = this.editor.model; const r = n.schema; const i = n.document.selection; const o = Array.from(i.getSelectedBlocks()); const a = void 0 === t.forceValue ? !this.value : t.forceValue; n.change(((t) => { if (a) { const n = o.filter(((e) => md(e) || gd(r, e))); e._applyQuote(t, n); } else e._removeQuote(t, o.filter(md)); })); } }, { key: '_getValue', value() { const e = rd(this.editor.model.document.selection.getSelectedBlocks()); return !(!e || !md(e)); } }, { key: '_checkEnabled', value() { if (this.value) return !0; const e = this.editor.model.document.selection; const t = this.editor.model.schema; const n = rd(e.getSelectedBlocks()); return !!n && gd(t, n); } }, { key: '_removeQuote', value(e, t) { vd(e, t).reverse().forEach(((t) => { if (t.start.isAtStart && t.end.isAtEnd)e.unwrap(t.start.parent); else if (t.start.isAtStart) { const n = e.createPositionBefore(t.start.parent); e.move(t, n); } else { t.end.isAtEnd || e.split(t.end); const r = e.createPositionAfter(t.end.parent); e.move(t, r); } })); } }, { key: '_applyQuote', value(e, t) { const n = []; vd(e, t).reverse().forEach(((t) => { let r = md(t.start); r || (r = e.createElement('blockQuote'), e.wrap(t, r)), n.push(r); })), n.reverse().reduce(((t, n) => (t.nextSibling == n ? (e.merge(e.createPositionAfter(t)), t) : n))); } }]), n; }(dd)); function md(e) { return e.parent.name == 'blockQuote' ? e.parent : null; } function vd(e, t) { for (var n, r = 0, i = []; r < t.length;) { const o = t[r]; const a = t[r + 1]; n || (n = e.createPositionBefore(o)), a && o.nextSibling == a || (i.push(e.createRange(n, e.createPositionAfter(o))), n = null), r++; } return i; } function gd(e, t) { const n = e.checkChild(t.parent, 'blockQuote'); const r = e.checkChild(['$root', 'blockQuote'], t); return n && r; } const pd = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const t = e.model.schema; e.commands.add('blockQuote', new fd(e)), t.register('blockQuote', { allowWhere: '$block', allowContentOf: '$root' }), t.addChildCheck(((e, t) => { if (e.endsWith('blockQuote') && t.name == 'blockQuote') return !1; })), e.conversion.elementToElement({ model: 'blockQuote', view: 'blockquote' }), e.model.document.registerPostFixer(((n) => { let r; const i = e.model.document.differ.getChanges(); const o = d(i); try { for (o.s(); !(r = o.n()).done;) { const a = r.value; if (a.type == 'insert') { const s = a.position.nodeAfter; if (!s) continue; if (s.is('element', 'blockQuote') && s.isEmpty) return n.remove(s), !0; if (s.is('element', 'blockQuote') && !t.checkChild(a.position, s)) return n.unwrap(s), !0; if (s.is('element')) { var l; const c = n.createRangeIn(s); const u = d(c.getItems()); try { for (u.s(); !(l = u.n()).done;) { const h = l.value; if (h.is('element', 'blockQuote') && !t.checkChild(n.createPositionBefore(h), h)) return n.unwrap(h), !0; } } catch (m) { u.e(m); } finally { u.f(); } } } else if (a.type == 'remove') { const f = a.position.parent; if (f.is('element', 'blockQuote') && f.isEmpty) return n.remove(f), !0; } } } catch (m) { o.e(m); } finally { o.f(); } return !1; })); } }, { key: 'afterInit', value() { const e = this; const t = this.editor.commands.get('blockQuote'); this.listenTo(this.editor.editing.view.document, 'enter', ((n, r) => { const i = e.editor.model.document; const o = i.selection.getLastPosition().parent; i.selection.isCollapsed && o.isEmpty && t.value && (e.editor.execute('blockQuote'), e.editor.editing.view.scrollToTheSelection(), r.preventDefault(), n.stop()); })); } }], [{ key: 'pluginName', get() { return 'BlockQuoteEditing'; } }]), n; }(sd)); const kd = (n(43), (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
              key: 'init',
              value() {
                const e = this; const t = this.editor; const n = t.t; t.ui.componentFactory.add('blockQuote', ((r) => {
                  const i = t.commands.get('blockQuote'); const o = new Fu(r); return o.set({
                    label: n('Block quote'), icon: '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>', tooltip: !0, isToggleable: !0,
                  }), o.bind('isOn', 'isEnabled').to(i, 'value', 'isEnabled'), e.listenTo(o, 'execute', (() => { t.execute('blockQuote'), t.editing.view.focus(); })), o;
                }));
              },
            }]), n;
          }(sd))); const bd = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [pd, kd]; } }, { key: 'pluginName', get() { return 'BlockQuote'; } }]), n; }(sd)); const yd = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e)).attributeKey = r, i; } return m(n, [{ key: 'refresh', value() { const e = this.editor.model; const t = e.document; this.value = this._getValueFromFirstAllowedNode(), this.isEnabled = e.schema.checkAttributeInSelection(t.selection, this.attributeKey); } }, { key: 'execute', value() { const e = this; const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; const n = this.editor.model; const r = n.document; const i = r.selection; const o = void 0 === t.forceValue ? !this.value : t.forceValue; n.change(((t) => { if (i.isCollapsed)o ? t.setSelectionAttribute(e.attributeKey, !0) : t.removeSelectionAttribute(e.attributeKey); else { let r; const a = n.schema.getValidRanges(i.getRanges(), e.attributeKey); const s = d(a); try { for (s.s(); !(r = s.n()).done;) { const l = r.value; o ? t.setAttribute(e.attributeKey, o, l) : t.removeAttribute(e.attributeKey, l); } } catch (c) { s.e(c); } finally { s.f(); } } })); } }, { key: '_getValueFromFirstAllowedNode', value() { const e = this.editor.model; const t = e.schema; const n = e.document.selection; if (n.isCollapsed) return n.hasAttribute(this.attributeKey); let r; const i = d(n.getRanges()); try { for (i.s(); !(r = i.n()).done;) { var o; const a = r.value; const s = d(a.getItems()); try { for (s.s(); !(o = s.n()).done;) { const l = o.value; if (t.checkAttribute(l, this.attributeKey)) return l.hasAttribute(this.attributeKey); } } catch (c) { s.e(c); } finally { s.f(); } } } catch (c) { i.e(c); } finally { i.f(); } return !1; } }]), n; }(dd)); const wd = 'bold'; const _d = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; e.model.schema.extend('$text', { allowAttributes: wd }), e.model.schema.setAttributeProperties(wd, { isFormatting: !0, copyOnEnter: !0 }), e.conversion.attributeToElement({ model: wd, view: 'strong', upcastAlso: ['b', function (e) { const t = e.getStyle('font-weight'); return t ? t == 'bold' || Number(t) >= 600 ? { name: !0, styles: ['font-weight'] } : void 0 : null; }] }), e.commands.add(wd, new yd(e, wd)), e.keystrokes.set('CTRL+B', wd); } }], [{ key: 'pluginName', get() { return 'BoldEditing'; } }]), n; }(sd)); const Ed = 'bold'; const xd = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
              key: 'init',
              value() {
                const e = this; const t = this.editor; const n = t.t; t.ui.componentFactory.add(Ed, ((r) => {
                  const i = t.commands.get(Ed); const o = new Fu(r); return o.set({
                    label: n('Bold'), icon: '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>', keystroke: 'CTRL+B', tooltip: !0, isToggleable: !0,
                  }), o.bind('isOn', 'isEnabled').to(i, 'value', 'isEnabled'), e.listenTo(o, 'execute', (() => { t.execute(Ed), t.editing.view.focus(); })), o;
                }));
              },
            }]), n;
          }(sd)); const Td = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [_d, xd]; } }, { key: 'pluginName', get() { return 'Bold'; } }]), n; }(sd)); const Cd = (function () { function e(t) { f(this, e), this.files = (function (e) { const t = e.files ? Array.from(e.files) : []; const n = e.items ? Array.from(e.items) : []; return t.length ? t : n.filter(((e) => e.kind === 'file')).map(((e) => e.getAsFile())); }(t)), this._native = t; } return m(e, [{ key: 'getData', value(e) { return this._native.getData(e); } }, { key: 'setData', value(e, t) { this._native.setData(e, t); } }, { key: 'types', get() { return this._native.types; } }]), e; }()); const Sd = (function (e) { v(n, e); const t = g(n); function n(e) { let r; f(this, n); const i = (r = t.call(this, e)).document; function o(e, t) { t.preventDefault(); const n = t.dropRange ? [t.dropRange] : Array.from(i.selection.getRanges()); const r = new Nn(i, 'clipboardInput'); i.fire(r, { dataTransfer: t.dataTransfer, targetRanges: n }), r.stop.called && t.stopPropagation(); } return r.domEventType = ['paste', 'copy', 'cut', 'drop', 'dragover'], r.listenTo(i, 'paste', o, { priority: 'low' }), r.listenTo(i, 'drop', o, { priority: 'low' }), r; } return m(n, [{ key: 'onDomEvent', value(e) { const t = { dataTransfer: new Cd(e.clipboardData ? e.clipboardData : e.dataTransfer) }; e.type == 'drop' && (t.dropRange = (function (e, t) { let n; const r = t.target.ownerDocument; const i = t.clientX; const o = t.clientY; return r.caretRangeFromPoint && r.caretRangeFromPoint(i, o) ? n = r.caretRangeFromPoint(i, o) : t.rangeParent && ((n = r.createRange()).setStart(t.rangeParent, t.rangeOffset), n.collapse(!0)), n ? e.domConverter.domRangeToView(n) : e.document.selection.getFirstRange(); }(this.view, e))), this.fire(e.type, e, t); } }]), n; }(_a)); const Ad = ['figcaption', 'li']; const Pd = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
              key: 'init',
              value() {
                const e = this; const t = this.editor; const n = t.model.document; const r = t.editing.view; const i = r.document; function o(e, r) { const o = r.dataTransfer; r.preventDefault(); const a = t.data.toView(t.model.getSelectedContent(n.selection)); i.fire('clipboardOutput', { dataTransfer: o, content: a, method: e.name }); } this._htmlDataProcessor = new Dc(i), r.addObserver(Sd), this.listenTo(i, 'clipboardInput', ((e) => { t.isReadOnly && e.stop(); }), { priority: 'highest' }), this.listenTo(i, 'clipboardInput', ((t, n) => {
                  const i = n.dataTransfer; let o = ''; i.getData('text/html') ? o = (function (e) { return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g, ((e, t) => (t.length == 1 ? ' ' : t))); }(i.getData('text/html'))) : i.getData('text/plain') && (o = (function (e) {
                    return (e = e.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\n/g, '</p><p>').replace(/^\s/, '&nbsp;')
                      .replace(/\s$/, '&nbsp;')
                      .replace(/\s\s/g, ' &nbsp;')).indexOf('</p><p>') > -1 && (e = '<p>'.concat(e, '</p>')), e;
                  }(i.getData('text/plain')))), o = e._htmlDataProcessor.toView(o); const a = new Nn(e, 'inputTransformation'); e.fire(a, { content: o, dataTransfer: i }), a.stop.called && t.stop(), r.scrollToTheSelection();
                }), { priority: 'low' }), this.listenTo(this, 'inputTransformation', ((t, n) => { if (!n.content.isEmpty) { const r = e.editor.data; const i = e.editor.model; const o = r.toModel(n.content, '$clipboardHolder'); if (o.childCount == 0) return; i.insertContent(o), t.stop(); } }), { priority: 'low' }), this.listenTo(i, 'copy', o, { priority: 'low' }), this.listenTo(i, 'cut', ((e, n) => { t.isReadOnly ? n.preventDefault() : o(e, n); }), { priority: 'low' }), this.listenTo(i, 'clipboardOutput', ((r, i) => { i.content.isEmpty || (i.dataTransfer.setData('text/html', e._htmlDataProcessor.toData(i.content)), i.dataTransfer.setData('text/plain', (function e(t) { let n = ''; if (t.is('$text') || t.is('$textProxy'))n = t.data; else if (t.is('element', 'img') && t.hasAttribute('alt'))n = t.getAttribute('alt'); else { let r; let i = null; const o = d(t.getChildren()); try { for (o.s(); !(r = o.n()).done;) { const a = r.value; const s = e(a); i && (i.is('containerElement') || a.is('containerElement')) && (Ad.includes(i.name) || Ad.includes(a.name) ? n += '\n' : n += '\n\n'), n += s, i = a; } } catch (l) { o.e(l); } finally { o.f(); } } return n; }(i.content)))), i.method == 'cut' && t.model.deleteContent(n.selection); }), { priority: 'low' });
              },
            }], [{ key: 'pluginName', get() { return 'Clipboard'; } }]), n;
          }(sd)); function Od(e, t) { let n; let r; let i; return h.wrap(((o) => { for (;;) switch (o.prev = o.next) { case 0: n = d(t), o.prev = 1, n.s(); case 3: if ((r = n.n()).done) { o.next = 10; break; } if (!(i = r.value) || !e.getAttributeProperties(i[0]).copyOnEnter) { o.next = 8; break; } return o.next = 8, i; case 8: o.next = 3; break; case 10: o.next = 15; break; case 12: o.prev = 12, o.t0 = o.catch(1), n.e(o.t0); case 15: return o.prev = 15, n.f(), o.finish(15); case 18: case 'end': return o.stop(); } }), y, null, [[1, 12, 15, 18]]); } const Id = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'execute', value() { const e = this; const t = this.editor.model; const n = t.document; t.change(((r) => { !(function (e, t, n, r) { const i = n.isCollapsed; const o = n.getFirstRange(); const a = o.start.parent; const s = o.end.parent; if (r.isLimit(a) || r.isLimit(s))i || a != s || e.deleteContent(n); else if (i) { const l = Od(t.model.schema, n.getAttributes()); Md(t, o.start), t.setSelectionAttribute(l); } else { const c = !(o.start.isAtStart && o.end.isAtEnd); const u = a == s; e.deleteContent(n, { leaveUnmerged: c }), c && (u ? Md(t, n.focus) : t.setSelection(s, 0)); } }(e.editor.model, r, n.selection, t.schema)), e.fire('afterExecute', { writer: r }); })); } }]), n; }(dd)); function Md(e, t) { e.split(t), e.setSelection(t.parent.nextSibling, 0); } const Nd = (function (e) { v(n, e); const t = g(n); function n(e) { let r; f(this, n); const i = (r = t.call(this, e)).document; return i.on('keydown', ((e, t) => { let n; r.isEnabled && t.keyCode == $i.enter && (i.once('enter', ((e) => n = e), { priority: 'highest' }), i.fire('enter', new wa(i, t.domEvent, { isSoft: t.shiftKey })), n && n.stop.called && e.stop()); })), r; } return m(n, [{ key: 'observe', value() {} }]), n; }(Zo)); const Rd = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const t = e.editing.view; const n = t.document; t.addObserver(Nd), e.commands.add('enter', new Id(e)), this.listenTo(n, 'enter', ((n, r) => { r.preventDefault(), r.isSoft || (e.execute('enter'), t.scrollToTheSelection()); }), { priority: 'low' }); } }], [{ key: 'pluginName', get() { return 'Enter'; } }]), n; }(sd)); const jd = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'execute', value() { const e = this; const t = this.editor.model; const n = t.document; t.change(((r) => { !(function (e, t, n) { const r = n.isCollapsed; const i = n.getFirstRange(); const o = i.start.parent; const a = i.end.parent; const s = o == a; if (r) { const l = Od(e.schema, n.getAttributes()); Dd(e, t, i.end), t.removeSelectionAttribute(n.getAttributeKeys()), t.setSelectionAttribute(l); } else { const c = !(i.start.isAtStart && i.end.isAtEnd); e.deleteContent(n, { leaveUnmerged: c }), s ? Dd(e, t, n.focus) : c && t.setSelection(a, 0); } }(t, r, n.selection)), e.fire('afterExecute', { writer: r }); })); } }, { key: 'refresh', value() { const e = this.editor.model; const t = e.document; this.isEnabled = (function (e, t) { if (t.rangeCount > 1) return !1; const n = t.anchor; if (!n || !e.checkChild(n, 'softBreak')) return !1; const r = t.getFirstRange(); const i = r.start.parent; const o = r.end.parent; return !Ld(i, e) && !Ld(o, e) || i === o; }(e.schema, t.selection)); } }]), n; }(dd)); function Dd(e, t, n) { const r = t.createElement('softBreak'); e.insertContent(r, n), t.setSelection(r, 'after'); } function Ld(e, t) { return !e.is('rootElement') && (t.isLimit(e) || Ld(e.parent, t)); } const zd = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const t = e.model.schema; const n = e.conversion; const r = e.editing.view; const i = r.document; t.register('softBreak', { allowWhere: '$text', isInline: !0 }), n.for('upcast').elementToElement({ model: 'softBreak', view: 'br' }), n.for('downcast').elementToElement({ model: 'softBreak', view(e, t) { return t.createEmptyElement('br'); } }), r.addObserver(Nd), e.commands.add('shiftEnter', new jd(e)), this.listenTo(i, 'enter', ((t, n) => { n.preventDefault(), n.isSoft && (e.execute('shiftEnter'), r.scrollToTheSelection()); }), { priority: 'low' }); } }], [{ key: 'pluginName', get() { return 'ShiftEnter'; } }]), n; }(sd)); const Fd = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'execute', value() { const e = this.editor.model; const t = e.document.selection; let n = e.schema.getLimitElement(t); if (t.containsEntireContent(n) || !Vd(e.schema, n)) do { if (!(n = n.parent)) return; } while (!Vd(e.schema, n)); e.change(((e) => { e.setSelection(n, 'in'); })); } }]), n; }(dd)); function Vd(e, t) { return e.isLimit(t) && (e.checkChild(t, '$text') || e.checkChild(t, 'paragraph')); } for (var Bd = Ki('Ctrl+A'), Ud = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const t = e.editing.view.document; e.commands.add('selectAll', new Fd(e)), this.listenTo(t, 'keydown', ((t, n) => { Yi(n) === Bd && (e.execute('selectAll'), n.preventDefault()); })); } }], [{ key: 'pluginName', get() { return 'SelectAllEditing'; } }]), n; }(sd)), Hd = (function (e) {
              v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
                key: 'init',
                value() {
                  const e = this; const t = this.editor; t.ui.componentFactory.add('selectAll', ((n) => {
                    const r = t.commands.get('selectAll'); const i = new Fu(n); const o = n.t; return i.set({
                      label: o('Select all'), icon: '<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>', keystroke: 'Ctrl+A', tooltip: !0,
                    }), i.bind('isOn', 'isEnabled').to(r, 'value', 'isEnabled'), e.listenTo(i, 'execute', (() => { t.execute('selectAll'), t.editing.view.focus(); })), i;
                  }));
                },
              }], [{ key: 'pluginName', get() { return 'SelectAllUI'; } }]), n;
            }(sd)), Wd = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [Ud, Hd]; } }, { key: 'pluginName', get() { return 'SelectAll'; } }]), n; }(sd)), qd = (function () { function e(t) { const n = this; const r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 20; f(this, e), this.model = t, this.size = 0, this.limit = r, this.isLocked = !1, this._changeCallback = function (e, t) { t.type != 'transparent' && t !== n._batch && n._reset(!0); }, this._selectionChangeCallback = function () { n._reset(); }, this.model.document.on('change', this._changeCallback), this.model.document.selection.on('change:range', this._selectionChangeCallback), this.model.document.selection.on('change:attribute', this._selectionChangeCallback); } return m(e, [{ key: 'input', value(e) { this.size += e, this.size >= this.limit && this._reset(!0); } }, { key: 'lock', value() { this.isLocked = !0; } }, { key: 'unlock', value() { this.isLocked = !1; } }, { key: 'destroy', value() { this.model.document.off('change', this._changeCallback), this.model.document.selection.off('change:range', this._selectionChangeCallback), this.model.document.selection.off('change:attribute', this._selectionChangeCallback); } }, { key: '_reset', value(e) { this.isLocked && !e || (this._batch = null, this.size = 0); } }, { key: 'batch', get() { return this._batch || (this._batch = this.model.createBatch()), this._batch; } }]), e; }()), Gd = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e))._buffer = new qd(e.model, r), i._batches = new WeakSet(), i; } return m(n, [{ key: 'destroy', value() { o(a(n.prototype), 'destroy', this).call(this), this._buffer.destroy(); } }, { key: 'execute', value() { const e = this; const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; const n = this.editor.model; const r = n.document; const i = t.text || ''; const o = i.length; const a = t.range ? n.createSelection(t.range) : r.selection; const s = t.resultRange; n.enqueueChange(this._buffer.batch, ((t) => { e._buffer.lock(), e._batches.add(e._buffer.batch), n.deleteContent(a), i && n.insertContent(t.createText(i, r.selection.getAttributes()), a), s ? t.setSelection(s) : a.is('documentSelection') || t.setSelection(a), e._buffer.unlock(), e._buffer.input(o); })); } }, { key: 'buffer', get() { return this._buffer; } }]), n; }(dd)), $d = [Yi('arrowUp'), Yi('arrowRight'), Yi('arrowDown'), Yi('arrowLeft'), 9, 16, 17, 18, 19, 20, 27, 33, 34, 35, 36, 45, 91, 93, 144, 145, 173, 174, 175, 176, 177, 178, 179, 255], Yd = 112; Yd <= 135; Yd++)$d.push(Yd); function Kd(e) { return !!e.ctrlKey || $d.includes(e.keyCode); } function Qd(e) { if (e.newChildren.length - e.oldChildren.length == 1) { const t = (function (e, t) { let n; const r = []; let i = 0; return e.forEach(((e) => { e == 'equal' ? (o(), i++) : e == 'insert' ? (a('insert') ? n.values.push(t[i]) : (o(), n = { type: 'insert', index: i, values: [t[i]] }), i++) : a('delete') ? n.howMany++ : (o(), n = { type: 'delete', index: i, howMany: 1 }); })), o(), r; function o() { n && (r.push(n), n = null); } function a(e) { return n && n.type == e; } }(Mo(e.oldChildren, e.newChildren, Jd), e.newChildren)); if (!(t.length > 1)) { const n = t[0]; if (n.values[0] && n.values[0].is('$text')) return n; } } } function Jd(e, t) { return e && e.is('$text') && t && t.is('$text') ? e.data === t.data : e === t; } const Zd = (function () { function e(t) { f(this, e), this.editor = t, this.editing = this.editor.editing; } return m(e, [{ key: 'handle', value(e, t) { if (function (e) { if (e.length == 0) return !1; let t; const n = d(e); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; if (r.type === 'children' && !Qd(r)) return !0; } } catch (i) { n.e(i); } finally { n.f(); } return !1; }(e)) this._handleContainerChildrenMutations(e, t); else { let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; this._handleTextMutation(i, t), this._handleTextNodeInsertion(i); } } catch (o) { r.e(o); } finally { r.f(); } } } }, { key: '_handleContainerChildrenMutations', value(e, t) { const n = (function (e) { const t = e.map(((e) => e.node)).reduce(((e, t) => e.getCommonAncestor(t, { includeSelf: !0 }))); if (t) return t.getAncestors({ includeSelf: !0, parentFirst: !0 }).find(((e) => e.is('containerElement') || e.is('rootElement'))); }(e)); if (n) { const r = this.editor.editing.view.domConverter.mapViewToDom(n); const i = new Wo(this.editor.editing.view.document); const o = this.editor.data.toModel(i.domToView(r)).getChild(0); const a = this.editor.editing.mapper.toModelElement(n); if (a) { const s = Array.from(o.getChildren()); const l = Array.from(a.getChildren()); const c = s[s.length - 1]; const u = l[l.length - 1]; const d = c && c.is('element', 'softBreak'); const h = u && !u.is('element', 'softBreak'); d && h && s.pop(); const f = this.editor.model.schema; if (Xd(s, f) && Xd(l, f)) { const m = s.map(((e) => (e.is('$text') ? e.data : '@'))).join('').replace(/\u00A0/g, ' '); const v = l.map(((e) => (e.is('$text') ? e.data : '@'))).join('').replace(/\u00A0/g, ' '); if (v !== m) { const g = eh(Mo(v, m)); const p = g.firstChangeAt; const k = g.insertions; const b = g.deletions; let y = null; t && (y = this.editing.mapper.toModelRange(t.getFirstRange())); const w = m.substr(p, k); const _ = this.editor.model.createRange(this.editor.model.createPositionAt(a, p), this.editor.model.createPositionAt(a, p + b)); this.editor.execute('input', { text: w, range: _, resultRange: y }); } } } } } }, { key: '_handleTextMutation', value(e, t) { if (e.type == 'text') { const n = e.newText.replace(/\u00A0/g, ' '); const r = e.oldText.replace(/\u00A0/g, ' '); if (r !== n) { const i = eh(Mo(r, n)); const o = i.firstChangeAt; const a = i.insertions; const s = i.deletions; let l = null; t && (l = this.editing.mapper.toModelRange(t.getFirstRange())); const c = this.editing.view.createPositionAt(e.node, o); const u = this.editing.mapper.toModelPosition(c); const d = this.editor.model.createRange(u, u.getShiftedBy(s)); const h = n.substr(o, a); this.editor.execute('input', { text: h, range: d, resultRange: l }); } } } }, { key: '_handleTextNodeInsertion', value(e) { if (e.type == 'children') { const t = Qd(e); const n = this.editing.view.createPositionAt(e.node, t.index); const r = this.editing.mapper.toModelPosition(n); const i = t.values[0].data; this.editor.execute('input', { text: i.replace(/\u00A0/g, ' '), range: this.editor.model.createRange(r) }); } } }]), e; }()); function Xd(e, t) { return e.every(((e) => t.isInline(e))); } function eh(e) { for (var t = null, n = null, r = 0; r < e.length; r++)e[r] != 'equal' && (t = t === null ? r : t, n = r); for (var i = 0, o = 0, a = t; a <= n; a++)e[a] != 'insert' && i++, e[a] != 'delete' && o++; return { insertions: o, deletions: i, firstChangeAt: t }; } const th = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const t = new Gd(e, e.config.get('typing.undoStep') || 20); e.commands.add('input', t), (function (e) { let t = null; const n = e.model; const r = e.editing.view; const i = e.commands.get('input'); function o(e) { const o = n.document; const s = r.document.isComposing; const l = t && t.isEqual(o.selection); t = null, i.isEnabled && (Kd(e) || o.selection.isCollapsed || s && e.keyCode === 229 || !s && e.keyCode === 229 && l || a()); } function a() { const e = i.buffer; e.lock(); const t = e.batch; i._batches.add(t), n.enqueueChange(t, (() => { n.deleteContent(n.document.selection); })), e.unlock(); }Wi.isAndroid ? r.document.on('beforeinput', ((e, t) => o(t)), { priority: 'lowest' }) : r.document.on('keydown', ((e, t) => o(t)), { priority: 'lowest' }), r.document.on('compositionstart', (() => { const e = n.document; const t = e.selection.rangeCount !== 1 || e.selection.getFirstRange().isFlat; e.selection.isCollapsed || t || a(); }), { priority: 'lowest' }), r.document.on('compositionend', (() => { t = n.createSelection(n.document.selection); }), { priority: 'lowest' }); }(e)), (function (e) { e.editing.view.document.on('mutations', ((t, n, r) => { new Zd(e).handle(n, r); })); }(e)); } }, { key: 'isInput', value(e) { return this.editor.commands.get('input')._batches.has(e); } }], [{ key: 'pluginName', get() { return 'Input'; } }]), n; }(sd)); const nh = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e)).direction = r, i._buffer = new qd(e.model, e.config.get('typing.undoStep')), i; } return m(n, [{ key: 'execute', value() { const e = this; const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; const n = this.editor.model; const r = n.document; n.enqueueChange(this._buffer.batch, ((i) => { e._buffer.lock(); const o = i.createSelection(t.selection || r.selection); const a = o.isCollapsed; if (o.isCollapsed && n.modifySelection(o, { direction: e.direction, unit: t.unit }), e._shouldEntireContentBeReplacedWithParagraph(t.sequence || 1))e._replaceEntireContentWithParagraph(i); else if (!o.isCollapsed) { let s = 0; o.getFirstRange().getMinimalFlatRanges().forEach(((e) => { s += Ri(e.getWalker({ singleCharacters: !0, ignoreElementEnd: !0, shallow: !0 })); })), n.deleteContent(o, { doNotResetEntireContent: a, direction: e.direction }), e._buffer.input(s), i.setSelection(o), e._buffer.unlock(); } })); } }, { key: '_shouldEntireContentBeReplacedWithParagraph', value(e) { if (e > 1) return !1; const t = this.editor.model; const n = t.document.selection; const r = t.schema.getLimitElement(n); if (!n.isCollapsed || !n.containsEntireContent(r)) return !1; if (!t.schema.checkChild(r, 'paragraph')) return !1; const i = r.getChild(0); return !i || i.name !== 'paragraph'; } }, { key: '_replaceEntireContentWithParagraph', value(e) { const t = this.editor.model; const n = t.document.selection; const r = t.schema.getLimitElement(n); const i = e.createElement('paragraph'); e.remove(e.createRangeIn(r)), e.insert(i, r), e.setSelection(i, 0); } }, { key: 'buffer', get() { return this._buffer; } }]), n; }(dd)); const rh = (function (e) { v(n, e); const t = g(n); function n(e) { let r; f(this, n), r = t.call(this, e); const i = e.document; let o = 0; function a(e, t, n) { let r; i.once('delete', ((e) => r = e), { priority: Number.POSITIVE_INFINITY }), i.fire('delete', new wa(i, t, n)), r && r.stop.called && e.stop(); } return i.on('keyup', ((e, t) => { t.keyCode != $i.delete && t.keyCode != $i.backspace || (o = 0); })), i.on('keydown', ((e, t) => { const n = {}; if (t.keyCode == $i.delete)n.direction = 'forward', n.unit = 'character'; else { if (t.keyCode != $i.backspace) return; n.direction = 'backward', n.unit = 'codePoint'; } const r = Wi.isMac ? t.altKey : t.ctrlKey; n.unit = r ? 'word' : n.unit, n.sequence = ++o, a(e, t.domEvent, n); })), Wi.isAndroid && i.on('beforeinput', ((t, n) => { if (n.domEvent.inputType == 'deleteContentBackward') { const r = { unit: 'codepoint', direction: 'backward', sequence: 1 }; const i = n.domTarget.ownerDocument.defaultView.getSelection(); i.anchorNode == i.focusNode && i.anchorOffset + 1 != i.focusOffset && (r.selectionToRemove = e.domConverter.domSelectionToView(i)), a(t, n.domEvent, r); } })), r; } return m(n, [{ key: 'observe', value() {} }]), n; }(Zo)); const ih = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
              key: 'init',
              value() {
                const e = this.editor; const t = e.editing.view; const n = t.document; if (t.addObserver(rh), e.commands.add('forwardDelete', new nh(e, 'forward')), e.commands.add('delete', new nh(e, 'backward')), this.listenTo(n, 'delete', ((n, r) => { const i = { unit: r.unit, sequence: r.sequence }; if (r.selectionToRemove) { let o; const a = e.model.createSelection(); const s = []; const l = d(r.selectionToRemove.getRanges()); try { for (l.s(); !(o = l.n()).done;) { const c = o.value; s.push(e.editing.mapper.toModelRange(c)); } } catch (u) { l.e(u); } finally { l.f(); }a.setTo(s), i.selection = a; }e.execute(r.direction == 'forward' ? 'forwardDelete' : 'delete', i), r.preventDefault(), t.scrollToTheSelection(); })), Wi.isAndroid) {
                  let r = null; this.listenTo(n, 'delete', ((e, t) => {
                    const n = t.domTarget.ownerDocument.defaultView.getSelection(); r = {
                      anchorNode: n.anchorNode, anchorOffset: n.anchorOffset, focusNode: n.focusNode, focusOffset: n.focusOffset,
                    };
                  }), { priority: 'lowest' }), this.listenTo(n, 'keyup', ((e, t) => { if (r) { const n = t.domTarget.ownerDocument.defaultView.getSelection(); n.collapse(r.anchorNode, r.anchorOffset), n.extend(r.focusNode, r.focusOffset), r = null; } }));
                }
              },
            }], [{ key: 'pluginName', get() { return 'Delete'; } }]), n;
          }(sd)); const oh = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [th, ih]; } }, { key: 'pluginName', get() { return 'Typing'; } }]), n; }(sd)); const ah = new Map(); function sh(e, t, n) { let r = ah.get(e); r || (r = new Map(), ah.set(e, r)), r.set(t, n); } function lh(e, t) { const n = ah.get(e); return n && n.has(t) ? n.get(t) : ch; } function ch(e) { return [e]; } function uh(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; const r = lh(e.constructor, t.constructor); try { return r(e = e.clone(), t, n); } catch (e) { throw e; } } function dh(e, t, n) {
            e = e.slice(), t = t.slice(); const r = new hh(n.document, n.useRelations, n.forceWeakRemove); r.setOriginalOperations(e), r.setOriginalOperations(t); const i = r.originalOperations; if (e.length == 0 || t.length == 0) return { operationsA: e, operationsB: t, originalOperations: i }; let o; const a = new WeakMap(); const s = d(e); try { for (s.s(); !(o = s.n()).done;) { const l = o.value; a.set(l, 0); } } catch (T) { s.e(T); } finally { s.f(); } for (var u = {
                nextBaseVersionA: e[e.length - 1].baseVersion + 1, nextBaseVersionB: t[t.length - 1].baseVersion + 1, originalOperationsACount: e.length, originalOperationsBCount: t.length,
              }, h = 0; h < e.length;) { var f; var m; const v = e[h]; const g = a.get(v); if (g != t.length) { const p = t[g]; const k = uh(v, p, r.getContext(v, p, !0)); const b = uh(p, v, r.getContext(p, v, !1)); r.updateRelation(v, p), r.setOriginalOperations(k, v), r.setOriginalOperations(b, p); var y; const w = d(k); try { for (w.s(); !(y = w.n()).done;) { const _ = y.value; a.set(_, g + b.length); } } catch (T) { w.e(T); } finally { w.f(); }(f = e).splice.apply(f, [h, 1].concat(c(k))), (m = t).splice.apply(m, [g, 1].concat(c(b))); } else h++; } if (n.padWithNoOps) { const E = e.length - u.originalOperationsACount; const x = t.length - u.originalOperationsBCount; mh(e, x - E), mh(t, E - x); } return fh(e, u.nextBaseVersionB), fh(t, u.nextBaseVersionA), { operationsA: e, operationsB: t, originalOperations: i };
          } var hh = (function () {
            function e(t, n) { const r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; f(this, e), this.originalOperations = new Map(), this._history = t.history, this._useRelations = n, this._forceWeakRemove = !!r, this._relations = new Map(); } return m(e, [{ key: 'setOriginalOperations', value(e) { let t; const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null; const r = n ? this.originalOperations.get(n) : null; const i = d(e); try { for (i.s(); !(t = i.n()).done;) { const o = t.value; this.originalOperations.set(o, r || o); } } catch (a) { i.e(a); } finally { i.f(); } } }, {
              key: 'updateRelation',
              value(e, t) {
                switch (e.constructor) {
                  case Ml: switch (t.constructor) { case Ll: e.targetPosition.isEqual(t.sourcePosition) || t.movedRange.containsPosition(e.targetPosition) ? this._setRelation(e, t, 'insertAtSource') : e.targetPosition.isEqual(t.deletionPosition) ? this._setRelation(e, t, 'insertBetween') : e.targetPosition.isAfter(t.sourcePosition) && this._setRelation(e, t, 'moveTargetAfter'); break; case Ml: e.targetPosition.isEqual(t.sourcePosition) || e.targetPosition.isBefore(t.sourcePosition) ? this._setRelation(e, t, 'insertBefore') : this._setRelation(e, t, 'insertAfter'); } break; case zl: switch (t.constructor) { case Ll: e.splitPosition.isBefore(t.sourcePosition) && this._setRelation(e, t, 'splitBefore'); break; case Ml: (e.splitPosition.isEqual(t.sourcePosition) || e.splitPosition.isBefore(t.sourcePosition)) && this._setRelation(e, t, 'splitBefore'); } break; case Ll: switch (t.constructor) { case Ll: e.targetPosition.isEqual(t.sourcePosition) || this._setRelation(e, t, 'mergeTargetNotMoved'), e.sourcePosition.isEqual(t.targetPosition) && this._setRelation(e, t, 'mergeSourceNotMoved'), e.sourcePosition.isEqual(t.sourcePosition) && this._setRelation(e, t, 'mergeSameElement'); break; case zl: e.sourcePosition.isEqual(t.splitPosition) && this._setRelation(e, t, 'splitAtSource'); } break; case Rl: var n = e.newRange; if (!n) return; switch (t.constructor) {
                    case Ml: var r = fs._createFromPositionAndShift(t.sourcePosition, t.howMany); var i = r.containsPosition(n.start) || r.start.isEqual(n.start); var o = r.containsPosition(n.end) || r.end.isEqual(n.end); !i && !o || r.containsRange(n) || this._setRelation(e, t, { side: i ? 'left' : 'right', path: i ? n.start.path.slice() : n.end.path.slice() }); break; case Ll: var a = n.start.isEqual(t.targetPosition); var s = n.start.isEqual(t.deletionPosition); var l = n.end.isEqual(t.deletionPosition); var c = n.end.isEqual(t.sourcePosition); (a || s || l || c) && this._setRelation(e, t, {
                      wasInLeftElement: a, wasStartBeforeMergedElement: s, wasEndBeforeMergedElement: l, wasInRightElement: c,
                    });
                  }
                }
              },
            }, {
              key: 'getContext',
              value(e, t, n) {
                return {
                  aIsStrong: n, aWasUndone: this._wasUndone(e), bWasUndone: this._wasUndone(t), abRelation: this._useRelations ? this._getRelation(e, t) : null, baRelation: this._useRelations ? this._getRelation(t, e) : null, forceWeakRemove: this._forceWeakRemove,
                };
              },
            }, { key: '_wasUndone', value(e) { const t = this.originalOperations.get(e); return t.wasUndone || this._history.isUndoneOperation(t); } }, { key: '_getRelation', value(e, t) { const n = this.originalOperations.get(t); const r = this._history.getUndoneOperation(n); if (!r) return null; const i = this.originalOperations.get(e); const o = this._relations.get(i); return o && o.get(r) || null; } }, { key: '_setRelation', value(e, t, n) { const r = this.originalOperations.get(e); const i = this.originalOperations.get(t); let o = this._relations.get(r); o || (o = new Map(), this._relations.set(r, o)), o.set(i, n); } }]), e;
          }()); function fh(e, t) { let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;)n.value.baseVersion = t++; } catch (i) { r.e(i); } finally { r.f(); } } function mh(e, t) { for (let n = 0; n < t; n++)e.push(new ic(0)); } function vh(e, t, n) { const r = e.nodes.getNode(0).getAttribute(t); if (r == n) return null; const i = new fs(e.position, e.position.getShiftedBy(e.howMany)); return new Ol(i, t, r, n, 0); } function gh(e, t) { return e.targetPosition._getTransformedByDeletion(t.sourcePosition, t.howMany) === null; } function ph(e, t) { for (var n = [], r = 0; r < e.length; r++) { const i = e[r]; const o = new Ml(i.start, i.end.offset - i.start.offset, t, 0); n.push(o); for (let a = r + 1; a < e.length; a++)e[a] = e[a]._getTransformedByMove(o.sourcePosition, o.targetPosition, o.howMany)[0]; t = t._getTransformedByMove(o.sourcePosition, o.targetPosition, o.howMany); } return n; }sh(Ol, Ol, ((e, t, n) => { if (e.key === t.key && e.range.start.hasSameParentAs(t.range.start)) { const r = e.range.getDifference(t.range).map(((t) => new Ol(t, e.key, e.oldValue, e.newValue, 0))); const i = e.range.getIntersection(t.range); return i && n.aIsStrong && r.push(new Ol(i, t.key, t.newValue, e.newValue, 0)), r.length == 0 ? [new ic(0)] : r; } return [e]; })), sh(Ol, Nl, ((e, t) => { if (e.range.start.hasSameParentAs(t.position) && e.range.containsPosition(t.position)) { const n = e.range._getTransformedByInsertion(t.position, t.howMany, !t.shouldReceiveAttributes).map(((t) => new Ol(t, e.key, e.oldValue, e.newValue, e.baseVersion))); if (t.shouldReceiveAttributes) { const r = vh(t, e.key, e.oldValue); r && n.unshift(r); } return n; } return e.range = e.range._getTransformedByInsertion(t.position, t.howMany, !1)[0], [e]; })), sh(Ol, Ll, ((e, t) => { const n = []; e.range.start.hasSameParentAs(t.deletionPosition) && (e.range.containsPosition(t.deletionPosition) || e.range.start.isEqual(t.deletionPosition)) && n.push(fs._createFromPositionAndShift(t.graveyardPosition, 1)); const r = e.range._getTransformedByMergeOperation(t); return r.isCollapsed || n.push(r), n.map(((t) => new Ol(t, e.key, e.oldValue, e.newValue, e.baseVersion))); })), sh(Ol, Ml, ((e, t) => (function (e, t) { const n = fs._createFromPositionAndShift(t.sourcePosition, t.howMany); let r = null; let i = []; n.containsRange(e, !0) ? r = e : e.start.hasSameParentAs(n.start) ? (i = e.getDifference(n), r = e.getIntersection(n)) : i = [e]; let o; const a = []; const s = d(i); try { for (s.s(); !(o = s.n()).done;) { let l = o.value; l = l._getTransformedByDeletion(t.sourcePosition, t.howMany); const u = t.getMovedRangeStart(); const h = l.start.hasSameParentAs(u); l = l._getTransformedByInsertion(u, t.howMany, h), a.push.apply(a, c(l)); } } catch (f) { s.e(f); } finally { s.f(); } return r && a.push(r._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany, !1)[0]), a; }(e.range, t)).map(((t) => new Ol(t, e.key, e.oldValue, e.newValue, e.baseVersion))))), sh(Ol, zl, ((e, t) => { if (e.range.end.isEqual(t.insertionPosition)) return t.graveyardPosition || e.range.end.offset++, [e]; if (e.range.start.hasSameParentAs(t.splitPosition) && e.range.containsPosition(t.splitPosition)) { const n = e.clone(); return n.range = new fs(t.moveTargetPosition.clone(), e.range.end._getCombined(t.splitPosition, t.moveTargetPosition)), e.range.end = t.splitPosition.clone(), e.range.end.stickiness = 'toPrevious', [e, n]; } return e.range = e.range._getTransformedBySplitOperation(t), [e]; })), sh(Nl, Ol, ((e, t) => { const n = [e]; if (e.shouldReceiveAttributes && e.position.hasSameParentAs(t.range.start) && t.range.containsPosition(e.position)) { const r = vh(e, t.key, t.newValue); r && n.push(r); } return n; })), sh(Nl, Nl, ((e, t, n) => (e.position.isEqual(t.position) && n.aIsStrong || (e.position = e.position._getTransformedByInsertOperation(t)), [e]))), sh(Nl, Ml, ((e, t) => (e.position = e.position._getTransformedByMoveOperation(t), [e]))), sh(Nl, zl, ((e, t) => (e.position = e.position._getTransformedBySplitOperation(t), [e]))), sh(Nl, Ll, ((e, t) => (e.position = e.position._getTransformedByMergeOperation(t), [e]))), sh(Rl, Nl, ((e, t) => (e.oldRange && (e.oldRange = e.oldRange._getTransformedByInsertOperation(t)[0]), e.newRange && (e.newRange = e.newRange._getTransformedByInsertOperation(t)[0]), [e]))), sh(Rl, Rl, ((e, t, n) => { if (e.name == t.name) { if (!n.aIsStrong) return [new ic(0)]; e.oldRange = t.newRange ? t.newRange.clone() : null; } return [e]; })), sh(Rl, Ll, ((e, t) => (e.oldRange && (e.oldRange = e.oldRange._getTransformedByMergeOperation(t)), e.newRange && (e.newRange = e.newRange._getTransformedByMergeOperation(t)), [e]))), sh(Rl, Ml, ((e, t, n) => { if (e.oldRange && (e.oldRange = fs._createFromRanges(e.oldRange._getTransformedByMoveOperation(t))), e.newRange) { if (n.abRelation) { const r = fs._createFromRanges(e.newRange._getTransformedByMoveOperation(t)); if (n.abRelation.side == 'left' && t.targetPosition.isEqual(e.newRange.start)) return e.newRange.start.path = n.abRelation.path, e.newRange.end = r.end, [e]; if (n.abRelation.side == 'right' && t.targetPosition.isEqual(e.newRange.end)) return e.newRange.start = r.start, e.newRange.end.path = n.abRelation.path, [e]; }e.newRange = fs._createFromRanges(e.newRange._getTransformedByMoveOperation(t)); } return [e]; })), sh(Rl, zl, ((e, t, n) => { if (e.oldRange && (e.oldRange = e.oldRange._getTransformedBySplitOperation(t)), e.newRange) { if (n.abRelation) { const r = e.newRange._getTransformedBySplitOperation(t); return e.newRange.start.isEqual(t.splitPosition) && n.abRelation.wasStartBeforeMergedElement ? e.newRange.start = cs._createAt(t.insertionPosition) : e.newRange.start.isEqual(t.splitPosition) && !n.abRelation.wasInLeftElement && (e.newRange.start = cs._createAt(t.moveTargetPosition)), e.newRange.end.isEqual(t.splitPosition) && n.abRelation.wasInRightElement ? e.newRange.end = cs._createAt(t.moveTargetPosition) : e.newRange.end.isEqual(t.splitPosition) && n.abRelation.wasEndBeforeMergedElement ? e.newRange.end = cs._createAt(t.insertionPosition) : e.newRange.end = r.end, [e]; }e.newRange = e.newRange._getTransformedBySplitOperation(t); } return [e]; })), sh(Ll, Nl, ((e, t) => (e.sourcePosition.hasSameParentAs(t.position) && (e.howMany += t.howMany), e.sourcePosition = e.sourcePosition._getTransformedByInsertOperation(t), e.targetPosition = e.targetPosition._getTransformedByInsertOperation(t), [e]))), sh(Ll, Ll, ((e, t, n) => { if (e.sourcePosition.isEqual(t.sourcePosition) && e.targetPosition.isEqual(t.targetPosition)) { if (n.bWasUndone) { const r = t.graveyardPosition.path.slice(); return r.push(0), e.sourcePosition = new cs(t.graveyardPosition.root, r), e.howMany = 0, [e]; } return [new ic(0)]; } if (e.sourcePosition.isEqual(t.sourcePosition) && !e.targetPosition.isEqual(t.targetPosition) && !n.bWasUndone && n.abRelation != 'splitAtSource') { const i = e.targetPosition.root.rootName == '$graveyard'; const o = t.targetPosition.root.rootName == '$graveyard'; if (o && !i || (!i || o) && n.aIsStrong) { const a = t.targetPosition._getTransformedByMergeOperation(t); const s = e.targetPosition._getTransformedByMergeOperation(t); return [new Ml(a, e.howMany, s, 0)]; } return [new ic(0)]; } return e.sourcePosition.hasSameParentAs(t.targetPosition) && (e.howMany += t.howMany), e.sourcePosition = e.sourcePosition._getTransformedByMergeOperation(t), e.targetPosition = e.targetPosition._getTransformedByMergeOperation(t), e.graveyardPosition.isEqual(t.graveyardPosition) && n.aIsStrong || (e.graveyardPosition = e.graveyardPosition._getTransformedByMergeOperation(t)), [e]; })), sh(Ll, Ml, ((e, t, n) => { const r = fs._createFromPositionAndShift(t.sourcePosition, t.howMany); return t.type == 'remove' && !n.bWasUndone && !n.forceWeakRemove && e.deletionPosition.hasSameParentAs(t.sourcePosition) && r.containsPosition(e.sourcePosition) ? [new ic(0)] : (e.sourcePosition.hasSameParentAs(t.targetPosition) && (e.howMany += t.howMany), e.sourcePosition.hasSameParentAs(t.sourcePosition) && (e.howMany -= t.howMany), e.sourcePosition = e.sourcePosition._getTransformedByMoveOperation(t), e.targetPosition = e.targetPosition._getTransformedByMoveOperation(t), e.graveyardPosition.isEqual(t.targetPosition) || (e.graveyardPosition = e.graveyardPosition._getTransformedByMoveOperation(t)), [e]); })), sh(Ll, zl, ((e, t, n) => { if (t.graveyardPosition && (e.graveyardPosition = e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition, 1), e.deletionPosition.isEqual(t.graveyardPosition) && (e.howMany = t.howMany)), e.targetPosition.isEqual(t.splitPosition)) { const r = t.howMany != 0; const i = t.graveyardPosition && e.deletionPosition.isEqual(t.graveyardPosition); if (r || i || n.abRelation == 'mergeTargetNotMoved') return e.sourcePosition = e.sourcePosition._getTransformedBySplitOperation(t), [e]; } if (e.sourcePosition.isEqual(t.splitPosition)) { if (n.abRelation == 'mergeSourceNotMoved') return e.howMany = 0, e.targetPosition = e.targetPosition._getTransformedBySplitOperation(t), [e]; if (n.abRelation == 'mergeSameElement' || e.sourcePosition.offset > 0) return e.sourcePosition = t.moveTargetPosition.clone(), e.targetPosition = e.targetPosition._getTransformedBySplitOperation(t), [e]; } return e.sourcePosition.hasSameParentAs(t.splitPosition) && (e.howMany = t.splitPosition.offset), e.sourcePosition = e.sourcePosition._getTransformedBySplitOperation(t), e.targetPosition = e.targetPosition._getTransformedBySplitOperation(t), [e]; })), sh(Ml, Nl, ((e, t) => { const n = fs._createFromPositionAndShift(e.sourcePosition, e.howMany)._getTransformedByInsertOperation(t, !1)[0]; return e.sourcePosition = n.start, e.howMany = n.end.offset - n.start.offset, e.targetPosition.isEqual(t.position) || (e.targetPosition = e.targetPosition._getTransformedByInsertOperation(t)), [e]; })), sh(Ml, Ml, ((e, t, n) => { let r; const i = fs._createFromPositionAndShift(e.sourcePosition, e.howMany); const o = fs._createFromPositionAndShift(t.sourcePosition, t.howMany); let a = n.aIsStrong; let s = !n.aIsStrong; if (n.abRelation == 'insertBefore' || n.baRelation == 'insertAfter' ? s = !0 : n.abRelation != 'insertAfter' && n.baRelation != 'insertBefore' || (s = !1), r = e.targetPosition.isEqual(t.targetPosition) && s ? e.targetPosition._getTransformedByDeletion(t.sourcePosition, t.howMany) : e.targetPosition._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany), gh(e, t) && gh(t, e)) return [t.getReversed()]; if (i.containsPosition(t.targetPosition) && i.containsRange(o, !0)) return i.start = i.start._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany), i.end = i.end._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany), ph([i], r); if (o.containsPosition(e.targetPosition) && o.containsRange(i, !0)) return i.start = i.start._getCombined(t.sourcePosition, t.getMovedRangeStart()), i.end = i.end._getCombined(t.sourcePosition, t.getMovedRangeStart()), ph([i], r); const l = sr(e.sourcePosition.getParentPath(), t.sourcePosition.getParentPath()); if (l == 'prefix' || l == 'extension') return i.start = i.start._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany), i.end = i.end._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany), ph([i], r); e.type != 'remove' || t.type == 'remove' || n.aWasUndone || n.forceWeakRemove ? e.type == 'remove' || t.type != 'remove' || n.bWasUndone || n.forceWeakRemove || (a = !1) : a = !0; let u; const h = []; const f = i.getDifference(o); const m = d(f); try { for (m.s(); !(u = m.n()).done;) { const v = u.value; v.start = v.start._getTransformedByDeletion(t.sourcePosition, t.howMany), v.end = v.end._getTransformedByDeletion(t.sourcePosition, t.howMany); const g = sr(v.start.getParentPath(), t.getMovedRangeStart().getParentPath()) == 'same'; const p = v._getTransformedByInsertion(t.getMovedRangeStart(), t.howMany, g); h.push.apply(h, c(p)); } } catch (b) { m.e(b); } finally { m.f(); } const k = i.getIntersection(o); return k !== null && a && (k.start = k.start._getCombined(t.sourcePosition, t.getMovedRangeStart()), k.end = k.end._getCombined(t.sourcePosition, t.getMovedRangeStart()), h.length === 0 ? h.push(k) : h.length == 1 ? o.start.isBefore(i.start) || o.start.isEqual(i.start) ? h.unshift(k) : h.push(k) : h.splice(1, 0, k)), h.length === 0 ? [new ic(e.baseVersion)] : ph(h, r); })), sh(Ml, zl, ((e, t, n) => { let r = e.targetPosition.clone(); e.targetPosition.isEqual(t.insertionPosition) && t.graveyardPosition && n.abRelation != 'moveTargetAfter' || (r = e.targetPosition._getTransformedBySplitOperation(t)); const i = fs._createFromPositionAndShift(e.sourcePosition, e.howMany); if (i.end.isEqual(t.insertionPosition)) return t.graveyardPosition || e.howMany++, e.targetPosition = r, [e]; if (i.start.hasSameParentAs(t.splitPosition) && i.containsPosition(t.splitPosition)) { let o = new fs(t.splitPosition, i.end); return o = o._getTransformedBySplitOperation(t), ph([new fs(i.start, t.splitPosition), o], r); }e.targetPosition.isEqual(t.splitPosition) && n.abRelation == 'insertAtSource' && (r = t.moveTargetPosition), e.targetPosition.isEqual(t.insertionPosition) && n.abRelation == 'insertBetween' && (r = e.targetPosition); const a = [i._getTransformedBySplitOperation(t)]; if (t.graveyardPosition) { const s = i.start.isEqual(t.graveyardPosition) || i.containsPosition(t.graveyardPosition); e.howMany > 1 && s && !n.aWasUndone && a.push(fs._createFromPositionAndShift(t.insertionPosition, 1)); } return ph(a, r); })), sh(Ml, Ll, ((e, t, n) => { const r = fs._createFromPositionAndShift(e.sourcePosition, e.howMany); if (t.deletionPosition.hasSameParentAs(e.sourcePosition) && r.containsPosition(t.sourcePosition)) if (e.type != 'remove' || n.forceWeakRemove) { if (e.howMany == 1) return n.bWasUndone ? (e.sourcePosition = t.graveyardPosition.clone(), e.targetPosition = e.targetPosition._getTransformedByMergeOperation(t), [e]) : [new ic(0)]; } else if (!n.aWasUndone) { const i = []; let o = t.graveyardPosition.clone(); let a = t.targetPosition._getTransformedByMergeOperation(t); e.howMany > 1 && (i.push(new Ml(e.sourcePosition, e.howMany - 1, e.targetPosition, 0)), o = o._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany - 1), a = a._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany - 1)); const s = t.deletionPosition._getCombined(e.sourcePosition, e.targetPosition); const l = new Ml(o, 1, s, 0); const c = l.getMovedRangeStart().path.slice(); c.push(0); const u = new cs(l.targetPosition.root, c); a = a._getTransformedByMove(o, s, 1); const d = new Ml(a, t.howMany, u, 0); return i.push(l), i.push(d), i; } const h = fs._createFromPositionAndShift(e.sourcePosition, e.howMany)._getTransformedByMergeOperation(t); return e.sourcePosition = h.start, e.howMany = h.end.offset - h.start.offset, e.targetPosition = e.targetPosition._getTransformedByMergeOperation(t), [e]; })), sh(jl, Nl, ((e, t) => (e.position = e.position._getTransformedByInsertOperation(t), [e]))), sh(jl, Ll, ((e, t) => (e.position.isEqual(t.deletionPosition) ? (e.position = t.graveyardPosition.clone(), e.position.stickiness = 'toNext', [e]) : (e.position = e.position._getTransformedByMergeOperation(t), [e])))), sh(jl, Ml, ((e, t) => (e.position = e.position._getTransformedByMoveOperation(t), [e]))), sh(jl, jl, ((e, t, n) => { if (e.position.isEqual(t.position)) { if (!n.aIsStrong) return [new ic(0)]; e.oldName = t.newName; } return [e]; })), sh(jl, zl, ((e, t) => { if (sr(e.position.path, t.splitPosition.getParentPath()) == 'same' && !t.graveyardPosition) { const n = new jl(e.position.getShiftedBy(1), e.oldName, e.newName, 0); return [e, n]; } return e.position = e.position._getTransformedBySplitOperation(t), [e]; })), sh(Dl, Dl, ((e, t, n) => { if (e.root === t.root && e.key === t.key) { if (!n.aIsStrong || e.newValue === t.newValue) return [new ic(0)]; e.oldValue = t.newValue; } return [e]; })), sh(zl, Nl, ((e, t) => (e.splitPosition.hasSameParentAs(t.position) && e.splitPosition.offset < t.position.offset && (e.howMany += t.howMany), e.splitPosition = e.splitPosition._getTransformedByInsertOperation(t), e.insertionPosition = zl.getInsertionPosition(e.splitPosition), [e]))), sh(zl, Ll, ((e, t, n) => { if (!e.graveyardPosition && !n.bWasUndone && e.splitPosition.hasSameParentAs(t.sourcePosition)) { const r = t.graveyardPosition.path.slice(); r.push(0); const i = new cs(t.graveyardPosition.root, r); const o = zl.getInsertionPosition(new cs(t.graveyardPosition.root, r)); const a = new zl(i, 0, null, 0); return a.insertionPosition = o, e.splitPosition = e.splitPosition._getTransformedByMergeOperation(t), e.insertionPosition = zl.getInsertionPosition(e.splitPosition), e.graveyardPosition = a.insertionPosition.clone(), e.graveyardPosition.stickiness = 'toNext', [a, e]; } return e.splitPosition.hasSameParentAs(t.deletionPosition) && !e.splitPosition.isAfter(t.deletionPosition) && e.howMany--, e.splitPosition.hasSameParentAs(t.targetPosition) && (e.howMany += t.howMany), e.splitPosition = e.splitPosition._getTransformedByMergeOperation(t), e.insertionPosition = zl.getInsertionPosition(e.splitPosition), e.graveyardPosition && (e.graveyardPosition = e.graveyardPosition._getTransformedByMergeOperation(t)), [e]; })), sh(zl, Ml, ((e, t, n) => { const r = fs._createFromPositionAndShift(t.sourcePosition, t.howMany); if (e.graveyardPosition) { const i = r.start.isEqual(e.graveyardPosition) || r.containsPosition(e.graveyardPosition); if (!n.bWasUndone && i) { const o = e.splitPosition._getTransformedByMoveOperation(t); const a = e.graveyardPosition._getTransformedByMoveOperation(t); const s = a.path.slice(); s.push(0); const l = new cs(a.root, s); return [new Ml(o, e.howMany, l, 0)]; }e.graveyardPosition = e.graveyardPosition._getTransformedByMoveOperation(t); } if (e.splitPosition.hasSameParentAs(t.sourcePosition) && r.containsPosition(e.splitPosition)) { const c = t.howMany - (e.splitPosition.offset - t.sourcePosition.offset); return e.howMany -= c, e.splitPosition.hasSameParentAs(t.targetPosition) && e.splitPosition.offset < t.targetPosition.offset && (e.howMany += t.howMany), e.splitPosition = t.sourcePosition.clone(), e.insertionPosition = zl.getInsertionPosition(e.splitPosition), [e]; } return !e.splitPosition.isEqual(t.targetPosition) || n.baRelation != 'insertAtSource' && n.abRelation != 'splitBefore' ? (t.sourcePosition.isEqual(t.targetPosition) || (e.splitPosition.hasSameParentAs(t.sourcePosition) && e.splitPosition.offset <= t.sourcePosition.offset && (e.howMany -= t.howMany), e.splitPosition.hasSameParentAs(t.targetPosition) && e.splitPosition.offset < t.targetPosition.offset && (e.howMany += t.howMany)), e.splitPosition.stickiness = 'toNone', e.splitPosition = e.splitPosition._getTransformedByMoveOperation(t), e.splitPosition.stickiness = 'toNext', e.graveyardPosition ? e.insertionPosition = e.insertionPosition._getTransformedByMoveOperation(t) : e.insertionPosition = zl.getInsertionPosition(e.splitPosition), [e]) : (e.howMany += t.howMany, e.splitPosition = e.splitPosition._getTransformedByDeletion(t.sourcePosition, t.howMany), e.insertionPosition = zl.getInsertionPosition(e.splitPosition), [e]); })), sh(zl, zl, ((e, t, n) => { if (e.splitPosition.isEqual(t.splitPosition)) { if (!e.graveyardPosition && !t.graveyardPosition) return [new ic(0)]; if (e.graveyardPosition && t.graveyardPosition && e.graveyardPosition.isEqual(t.graveyardPosition)) return [new ic(0)]; if (n.abRelation == 'splitBefore') return e.howMany = 0, e.graveyardPosition = e.graveyardPosition._getTransformedBySplitOperation(t), [e]; } if (e.graveyardPosition && t.graveyardPosition && e.graveyardPosition.isEqual(t.graveyardPosition)) { const r = e.splitPosition.root.rootName == '$graveyard'; const i = t.splitPosition.root.rootName == '$graveyard'; if (i && !r || (!r || i) && n.aIsStrong) { const o = []; return t.howMany && o.push(new Ml(t.moveTargetPosition, t.howMany, t.splitPosition, 0)), e.howMany && o.push(new Ml(e.splitPosition, e.howMany, e.moveTargetPosition, 0)), o; } return [new ic(0)]; } if (e.graveyardPosition && (e.graveyardPosition = e.graveyardPosition._getTransformedBySplitOperation(t)), e.splitPosition.isEqual(t.insertionPosition) && n.abRelation == 'splitBefore') return e.howMany++, [e]; if (t.splitPosition.isEqual(e.insertionPosition) && n.baRelation == 'splitBefore') { const a = t.insertionPosition.path.slice(); a.push(0); const s = new cs(t.insertionPosition.root, a); return [e, new Ml(e.insertionPosition, 1, s, 0)]; } return e.splitPosition.hasSameParentAs(t.splitPosition) && e.splitPosition.offset < t.splitPosition.offset && (e.howMany -= t.howMany), e.splitPosition = e.splitPosition._getTransformedBySplitOperation(t), e.insertionPosition = zl.getInsertionPosition(e.splitPosition), [e]; })); const kh = (function (e) {
            v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e))._stack = [], r._createdBatches = new WeakSet(), r.refresh(), r.listenTo(e.data, 'set', (() => r.clearStack())), r; } return m(n, [{ key: 'refresh', value() { this.isEnabled = this._stack.length > 0; } }, { key: 'addBatch', value(e) { const t = this.editor.model.document.selection; const n = { ranges: t.hasOwnRange ? Array.from(t.getRanges()) : [], isBackward: t.isBackward }; this._stack.push({ batch: e, selection: n }), this.refresh(); } }, { key: 'clearStack', value() { this._stack = [], this.refresh(); } }, { key: '_restoreSelection', value(e, t, n) { let r; const i = this.editor.model; const o = i.document; const a = []; const s = e.map(((e) => e.getTransformedByOperations(n))); const l = s.flat(); const c = d(s); try { for (c.s(); !(r = c.n()).done;) { const u = r.value.filter(((e) => !yh(e, l))); bh(u); const h = u.find(((e) => e.root != o.graveyard)); h && a.push(h); } } catch (f) { c.e(f); } finally { c.f(); }a.length && i.change(((e) => { e.setSelection(a, { backward: t }); })); } }, {
              key: '_undo',
              value(e, t) {
                const n = this.editor.model; const r = n.document; this._createdBatches.add(t); const i = e.operations.slice().filter(((e) => e.isDocumentOperation)); i.reverse(); let o; const a = d(i); try {
                  for (a.s(); !(o = a.n()).done;) {
                    var s; const l = o.value; const c = l.baseVersion + 1; const u = Array.from(r.history.getOperations(c)); const h = dh([l.getReversed()], u, {
                      useRelations: !0, document: this.editor.model.document, padWithNoOps: !1, forceWeakRemove: !0,
                    }).operationsA; const f = d(h); try { for (f.s(); !(s = f.n()).done;) { const m = s.value; t.addOperation(m), n.applyOperation(m), r.history.setOperationAsUndone(l, m); } } catch (v) { f.e(v); } finally { f.f(); }
                  }
                } catch (v) { a.e(v); } finally { a.f(); }
              },
            }]), n;
          }(dd)); function bh(e) { e.sort(((e, t) => (e.start.isBefore(t.start) ? -1 : 1))); for (let t = 1; t < e.length; t++) { const n = e[t - 1].getJoined(e[t], !0); n && (t--, e.splice(t, 2, n)); } } function yh(e, t) { return t.some(((t) => t !== e && t.containsRange(e, !0))); } const wh = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'execute', value() { const e = this; const t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null; const n = t ? this._stack.findIndex(((e) => e.batch == t)) : this._stack.length - 1; const r = this._stack.splice(n, 1)[0]; const i = this.editor.model.createBatch('transparent'); this.editor.model.enqueueChange(i, (() => { e._undo(r.batch, i); const t = e.editor.model.document.history.getOperations(r.batch.baseVersion); e._restoreSelection(r.selection.ranges, r.selection.isBackward, t), e.fire('revert', r.batch, i); })), this.refresh(); } }]), n; }(kh)); const _h = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'execute', value() { const e = this; const t = this._stack.pop(); const n = this.editor.model.createBatch('transparent'); this.editor.model.enqueueChange(n, (() => { const r = t.batch.operations[t.batch.operations.length - 1].baseVersion + 1; const i = e.editor.model.document.history.getOperations(r); e._restoreSelection(t.selection.ranges, t.selection.isBackward, i), e._undo(t.batch, n); })), this.refresh(); } }]), n; }(kh)); const Eh = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e))._batchRegistry = new WeakSet(), r; } return m(n, null, [{ key: 'pluginName', get() { return 'UndoEditing'; } }]), m(n, [{ key: 'init', value() { const e = this; const t = this.editor; this._undoCommand = new wh(t), this._redoCommand = new _h(t), t.commands.add('undo', this._undoCommand), t.commands.add('redo', this._redoCommand), this.listenTo(t.model, 'applyOperation', ((t, n) => { const r = n[0]; if (r.isDocumentOperation) { const i = r.batch; const o = e._redoCommand._createdBatches.has(i); const a = e._undoCommand._createdBatches.has(i); e._batchRegistry.has(i) || i.type == 'transparent' && !o && !a || (o ? e._undoCommand.addBatch(i) : a || (e._undoCommand.addBatch(i), e._redoCommand.clearStack()), e._batchRegistry.add(i)); } }), { priority: 'highest' }), this.listenTo(this._undoCommand, 'revert', ((t, n, r) => { e._redoCommand.addBatch(r); })), t.keystrokes.set('CTRL+Z', 'undo'), t.keystrokes.set('CTRL+Y', 'redo'), t.keystrokes.set('CTRL+SHIFT+Z', 'redo'); } }]), n; }(sd)); const xh = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>'; const Th = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>'; const Ch = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const t = e.locale; const n = e.t; const r = t.uiLanguageDirection == 'ltr' ? xh : Th; const i = t.uiLanguageDirection == 'ltr' ? Th : xh; this._addButton('undo', n('Undo'), 'CTRL+Z', r), this._addButton('redo', n('Redo'), 'CTRL+Y', i); } }, {
              key: '_addButton',
              value(e, t, n, r) {
                const i = this; const o = this.editor; o.ui.componentFactory.add(e, ((a) => {
                  const s = o.commands.get(e); const l = new Fu(a); return l.set({
                    label: t, icon: r, keystroke: n, tooltip: !0,
                  }), l.bind('isEnabled').to(s, 'isEnabled'), i.listenTo(l, 'execute', (() => { o.execute(e), o.editing.view.focus(); })), l;
                }));
              },
            }]), n;
          }(sd)); const Sh = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [Eh, Ch]; } }, { key: 'pluginName', get() { return 'Undo'; } }]), n; }(sd)); const Ah = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [Pd, Rd, Wd, zd, oh, Sh]; } }, { key: 'pluginName', get() { return 'Essentials'; } }]), n; }(sd)); const Ph = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = this.editor.model; const t = rd(e.document.selection.getSelectedBlocks()); this.value = !!t && t.is('element', 'paragraph'), this.isEnabled = !!t && Oh(t, e.schema); } }, { key: 'execute', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; const t = this.editor.model; const n = t.document; t.change(((r) => { let i; const o = (e.selection || n.selection).getSelectedBlocks(); const a = d(o); try { for (a.s(); !(i = a.n()).done;) { const s = i.value; !s.is('element', 'paragraph') && Oh(s, t.schema) && r.rename(s, 'paragraph'); } } catch (l) { a.e(l); } finally { a.f(); } })); } }]), n; }(dd)); function Oh(e, t) { return t.checkChild(e.parent, 'paragraph') && !t.isObject(e); } const Ih = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'execute', value(e) { const t = this.editor.model; let n = e.position; t.change(((e) => { const r = e.createElement('paragraph'); if (!t.schema.checkChild(n.parent, r)) { const i = t.schema.findAllowedParent(n, r); if (!i) return; n = e.split(n, i).position; }t.insertContent(r, n), e.setSelection(r, 'in'); })); } }]), n; }(dd)); const Mh = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor; const r = t.model; const i = t.data; t.commands.add('paragraph', new Ph(t)), t.commands.add('insertParagraph', new Ih(t)), r.schema.register('paragraph', { inheritAllFrom: '$block' }), t.conversion.elementToElement({ model: 'paragraph', view: 'p' }), t.conversion.for('upcast').elementToElement({ model(e, t) { return n.paragraphLikeElements.has(e.name) ? e.isEmpty ? null : t.createElement('paragraph') : null; }, converterPriority: 'low' }), i.upcastDispatcher.on('element', ((e, t, n) => { n.consumable.test(t.viewItem, { name: t.viewItem.name }) && Rh(t.viewItem, t.modelCursor, n.schema) && Object.assign(t, Nh(t.viewItem, t.modelCursor, n)); }), { priority: 'low' }), i.upcastDispatcher.on('text', ((e, t, n) => { t.modelRange || Rh(t.viewItem, t.modelCursor, n.schema) && Object.assign(t, Nh(t.viewItem, t.modelCursor, n)); }), { priority: 'lowest' }), r.document.registerPostFixer(((t) => e._autoparagraphEmptyRoots(t))), t.data.on('ready', (() => { r.enqueueChange('transparent', ((t) => e._autoparagraphEmptyRoots(t))); }), { priority: 'lowest' }); } }, { key: '_autoparagraphEmptyRoots', value(e) { let t; const n = this.editor.model; const r = d(n.document.getRootNames()); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; const o = n.document.getRoot(i); if (o.isEmpty && o.rootName != '$graveyard' && n.schema.checkChild(o, 'paragraph')) return e.insertElement('paragraph', o), !0; } } catch (a) { r.e(a); } finally { r.f(); } } }], [{ key: 'pluginName', get() { return 'Paragraph'; } }]), n; }(sd)); function Nh(e, t, n) { const r = n.writer.createElement('paragraph'); return n.writer.insert(r, t), n.convertItem(e, n.writer.createPositionAt(r, 0)); } function Rh(e, t, n) { const r = n.createContext(t); return !!n.checkChild(r, 'paragraph') && !!n.checkChild(r.push('paragraph'), e); }Mh.paragraphLikeElements = new Set(['blockquote', 'dd', 'div', 'dt', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'li', 'p', 'td']); const jh = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e)).modelElements = r, i; } return m(n, [{ key: 'refresh', value() { const e = this; const t = rd(this.editor.model.document.selection.getSelectedBlocks()); this.value = !!t && this.modelElements.includes(t.name) && t.name, this.isEnabled = !!t && this.modelElements.some(((n) => Dh(t, n, e.editor.model.schema))); } }, { key: 'execute', value(e) { const t = this.editor.model; const n = t.document; const r = e.value; t.change(((e) => { let i; const o = Array.from(n.selection.getSelectedBlocks()).filter(((e) => Dh(e, r, t.schema))); const a = d(o); try { for (a.s(); !(i = a.n()).done;) { const s = i.value; s.is('element', r) || e.rename(s, r); } } catch (l) { a.e(l); } finally { a.f(); } })); } }]), n; }(dd)); function Dh(e, t, n) { return n.checkChild(e.parent, t) && !n.isObject(e); } const Lh = 'paragraph'; const zh = (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; return f(this, n), r = t.call(this, e), e.config.define('heading', {
                options: [{ model: 'paragraph', title: 'Paragraph', class: 'ck-heading_paragraph' }, {
                  model: 'heading1', view: 'h2', title: 'Heading 1', class: 'ck-heading_heading1',
                }, {
                  model: 'heading2', view: 'h3', title: 'Heading 2', class: 'ck-heading_heading2',
                }, {
                  model: 'heading3', view: 'h4', title: 'Heading 3', class: 'ck-heading_heading3',
                }],
              }), r;
            } return m(n, null, [{ key: 'pluginName', get() { return 'HeadingEditing'; } }]), m(n, [{ key: 'init', value() { let e; const t = this.editor; const n = t.config.get('heading.options'); const r = []; const i = d(n); try { for (i.s(); !(e = i.n()).done;) { const o = e.value; o.model !== Lh && (t.model.schema.register(o.model, { inheritAllFrom: '$block' }), t.conversion.elementToElement(o), r.push(o.model)); } } catch (a) { i.e(a); } finally { i.f(); } this._addDefaultH1Conversion(t), t.commands.add('heading', new jh(t, r)); } }, { key: 'afterInit', value() { const e = this.editor; const t = e.commands.get('enter'); const n = e.config.get('heading.options'); t && this.listenTo(t, 'afterExecute', ((t, r) => { const i = e.model.document.selection.getFirstPosition().parent; n.some(((e) => i.is('element', e.model))) && !i.is('element', Lh) && i.childCount === 0 && r.writer.rename(i, Lh); })); } }, { key: '_addDefaultH1Conversion', value(e) { e.conversion.for('upcast').elementToElement({ model: 'heading1', view: 'h1', converterPriority: Dn.get('low') + 1 }); } }], [{ key: 'requires', get() { return [Mh]; } }]), n;
          }(sd)); const Fh = function e(t, n) { f(this, e), n && fi(this, n), t && this.set(t); }; Qn(Fh, ki), n(11); const Vh = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
              key: 'init',
              value() {
                const e = this; const t = this.editor; const n = t.t; const r = (function (e) {
                  const { t } = e; const
                    n = {
                      Paragraph: t('Paragraph'), 'Heading 1': t('Heading 1'), 'Heading 2': t('Heading 2'), 'Heading 3': t('Heading 3'), 'Heading 4': t('Heading 4'), 'Heading 5': t('Heading 5'), 'Heading 6': t('Heading 6'),
                    }; return e.config.get('heading.options').map(((e) => { const t = n[e.title]; return t && t != e.title && (e.title = t), e; }));
                }(t)); const i = n('Choose heading'); const o = n('Heading'); t.ui.componentFactory.add('heading', ((n) => { let a; const s = {}; const l = new Jn(); const c = t.commands.get('heading'); const u = t.commands.get('paragraph'); const h = [c]; const f = d(r); try { const m = function () { const e = a.value; const t = { type: 'button', model: new Fh({ label: e.title, class: e.class, withText: !0 }) }; e.model === 'paragraph' ? (t.model.bind('isOn').to(u, 'value'), t.model.set('commandName', 'paragraph'), h.push(u)) : (t.model.bind('isOn').to(c, 'value', ((t) => t === e.model)), t.model.set({ commandName: 'heading', commandValue: e.model })), l.add(t), s[e.model] = e.title; }; for (f.s(); !(a = f.n()).done;)m(); } catch (g) { f.e(g); } finally { f.f(); } const v = $u(n); return Yu(v, l), v.buttonView.set({ isOn: !1, withText: !0, tooltip: o }), v.extendTemplate({ attributes: { class: ['ck-heading-dropdown'] } }), v.bind('isEnabled').toMany(h, 'isEnabled', (function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return t.some(((e) => e)); })), v.buttonView.bind('label').to(c, 'value', u, 'value', ((e, t) => { const n = e || t && 'paragraph'; return s[n] ? s[n] : i; })), e.listenTo(v, 'execute', ((e) => { t.execute(e.source.commandName, e.source.commandValue ? { value: e.source.commandValue } : void 0), t.editing.view.focus(); })), v; }));
              },
            }]), n;
          }(sd)); const Bh = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [zh, Vh]; } }, { key: 'pluginName', get() { return 'Heading'; } }]), n; }(sd)); const Uh = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'observe', value(e) { const t = this; this.listenTo(e, 'load', ((e, n) => { n.target.tagName == 'IMG' && t._fireEvents(n); }), { useCapture: !0 }); } }, { key: '_fireEvents', value(e) { this.isEnabled && (this.document.fire('layoutChanged'), this.document.fire('imageLoaded', e)); } }]), n; }(Zo)); const Hh = (function () { function e() { f(this, e), this._stack = []; } return m(e, [{ key: 'add', value(e, t) { const n = this._stack; const r = n[0]; this._insertDescriptor(e); const i = n[0]; r === i || Wh(r, i) || this.fire('change:top', { oldDescriptor: r, newDescriptor: i, writer: t }); } }, { key: 'remove', value(e, t) { const n = this._stack; const r = n[0]; this._removeDescriptor(e); const i = n[0]; r === i || Wh(r, i) || this.fire('change:top', { oldDescriptor: r, newDescriptor: i, writer: t }); } }, { key: '_insertDescriptor', value(e) { const t = this._stack; const n = t.findIndex(((t) => t.id === e.id)); if (!Wh(e, t[n])) { n > -1 && t.splice(n, 1); for (var r = 0; t[r] && qh(t[r], e);)r++; t.splice(r, 0, e); } } }, { key: '_removeDescriptor', value(e) { const t = this._stack; const n = t.findIndex(((t) => t.id === e)); n > -1 && t.splice(n, 1); } }]), e; }()); function Wh(e, t) { return e && t && e.priority == t.priority && Gh(e.classes) == Gh(t.classes); } function qh(e, t) { return e.priority > t.priority || !(e.priority < t.priority) && Gh(e.classes) > Gh(t.classes); } function Gh(e) { return Array.isArray(e) ? e.sort().join(',') : e; }Qn(Hh, Vn), n(46); const $h = _u('px'); const Yh = Vo.document.body; const Kh = (function (e) {
            v(n, e); const t = g(n); function n(e) { let r; f(this, n); const i = (r = t.call(this, e)).bindTemplate; return r.set('top', 0), r.set('left', 0), r.set('position', 'arrow_nw'), r.set('isVisible', !1), r.set('withArrow', !0), r.set('class'), r.content = r.createCollection(), r.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-balloon-panel', i.to('position', ((e) => 'ck-balloon-panel_'.concat(e))), i.if('isVisible', 'ck-balloon-panel_visible'), i.if('withArrow', 'ck-balloon-panel_with-arrow'), i.to('class')], style: { top: i.to('top', $h), left: i.to('left', $h) } }, children: r.content }), r; } return m(n, [{ key: 'show', value() { this.isVisible = !0; } }, { key: 'hide', value() { this.isVisible = !1; } }, {
              key: 'attachTo',
              value(e) {
                this.show(); const t = n.defaultPositions; const r = {
                  element: this.element, positions: [t.southArrowNorth, t.southArrowNorthMiddleWest, t.southArrowNorthMiddleEast, t.southArrowNorthWest, t.southArrowNorthEast, t.northArrowSouth, t.northArrowSouthMiddleWest, t.northArrowSouthMiddleEast, t.northArrowSouthWest, t.northArrowSouthEast], limiter: Yh, fitInViewport: !0, ...e,
                }; const i = n._getOptimalPosition(r); const o = parseInt(i.left); const a = parseInt(i.top); const s = i.name; Object.assign(this, { top: a, left: o, position: s });
              },
            }, { key: 'pin', value(e) { const t = this; this.unpin(), this._pinWhenIsVisibleCallback = function () { t.isVisible ? t._startPinning(e) : t._stopPinning(); }, this._startPinning(e), this.listenTo(this, 'change:isVisible', this._pinWhenIsVisibleCallback); } }, { key: 'unpin', value() { this._pinWhenIsVisibleCallback && (this._stopPinning(), this.stopListening(this, 'change:isVisible', this._pinWhenIsVisibleCallback), this._pinWhenIsVisibleCallback = null, this.hide()); } }, { key: '_startPinning', value(e) { const t = this; this.attachTo(e); const n = Qh(e.target); const r = e.limiter ? Qh(e.limiter) : Yh; this.listenTo(Vo.document, 'scroll', ((i, o) => { const a = o.target; const s = n && a.contains(n); const l = r && a.contains(r); !s && !l && n && r || t.attachTo(e); }), { useCapture: !0 }), this.listenTo(Vo.window, 'resize', (() => { t.attachTo(e); })); } }, { key: '_stopPinning', value() { this.stopListening(Vo.document, 'scroll'), this.stopListening(Vo.window, 'resize'); } }]), n;
          }(vu)); function Qh(e) { return An(e) ? e : Fa(e) ? e.commonAncestorContainer : typeof e === 'function' ? Qh(e()) : null; } function Jh(e, t) { return e.top - t.height - Kh.arrowVerticalOffset; } function Zh(e) { return e.bottom + Kh.arrowVerticalOffset; }Kh.arrowHorizontalOffset = 25, Kh.arrowVerticalOffset = 10, Kh._getOptimalPosition = Mu, Kh.defaultPositions = {
            northWestArrowSouthWest(e, t) { return { top: Jh(e, t), left: e.left - Kh.arrowHorizontalOffset, name: 'arrow_sw' }; }, northWestArrowSouthMiddleWest(e, t) { return { top: Jh(e, t), left: e.left - 0.25 * t.width - Kh.arrowHorizontalOffset, name: 'arrow_smw' }; }, northWestArrowSouth(e, t) { return { top: Jh(e, t), left: e.left - t.width / 2, name: 'arrow_s' }; }, northWestArrowSouthMiddleEast(e, t) { return { top: Jh(e, t), left: e.left - 0.75 * t.width + Kh.arrowHorizontalOffset, name: 'arrow_sme' }; }, northWestArrowSouthEast(e, t) { return { top: Jh(e, t), left: e.left - t.width + Kh.arrowHorizontalOffset, name: 'arrow_se' }; }, northArrowSouthWest(e, t) { return { top: Jh(e, t), left: e.left + e.width / 2 - Kh.arrowHorizontalOffset, name: 'arrow_sw' }; }, northArrowSouthMiddleWest(e, t) { return { top: Jh(e, t), left: e.left + e.width / 2 - 0.25 * t.width - Kh.arrowHorizontalOffset, name: 'arrow_smw' }; }, northArrowSouth(e, t) { return { top: Jh(e, t), left: e.left + e.width / 2 - t.width / 2, name: 'arrow_s' }; }, northArrowSouthMiddleEast(e, t) { return { top: Jh(e, t), left: e.left + e.width / 2 - 0.75 * t.width + Kh.arrowHorizontalOffset, name: 'arrow_sme' }; }, northArrowSouthEast(e, t) { return { top: Jh(e, t), left: e.left + e.width / 2 - t.width + Kh.arrowHorizontalOffset, name: 'arrow_se' }; }, northEastArrowSouthWest(e, t) { return { top: Jh(e, t), left: e.right - Kh.arrowHorizontalOffset, name: 'arrow_sw' }; }, northEastArrowSouthMiddleWest(e, t) { return { top: Jh(e, t), left: e.right - 0.25 * t.width - Kh.arrowHorizontalOffset, name: 'arrow_smw' }; }, northEastArrowSouth(e, t) { return { top: Jh(e, t), left: e.right - t.width / 2, name: 'arrow_s' }; }, northEastArrowSouthMiddleEast(e, t) { return { top: Jh(e, t), left: e.right - 0.75 * t.width + Kh.arrowHorizontalOffset, name: 'arrow_sme' }; }, northEastArrowSouthEast(e, t) { return { top: Jh(e, t), left: e.right - t.width + Kh.arrowHorizontalOffset, name: 'arrow_se' }; }, southWestArrowNorthWest(e, t) { return { top: Zh(e), left: e.left - Kh.arrowHorizontalOffset, name: 'arrow_nw' }; }, southWestArrowNorthMiddleWest(e, t) { return { top: Zh(e), left: e.left - 0.25 * t.width - Kh.arrowHorizontalOffset, name: 'arrow_nmw' }; }, southWestArrowNorth(e, t) { return { top: Zh(e), left: e.left - t.width / 2, name: 'arrow_n' }; }, southWestArrowNorthMiddleEast(e, t) { return { top: Zh(e), left: e.left - 0.75 * t.width + Kh.arrowHorizontalOffset, name: 'arrow_nme' }; }, southWestArrowNorthEast(e, t) { return { top: Zh(e), left: e.left - t.width + Kh.arrowHorizontalOffset, name: 'arrow_ne' }; }, southArrowNorthWest(e, t) { return { top: Zh(e), left: e.left + e.width / 2 - Kh.arrowHorizontalOffset, name: 'arrow_nw' }; }, southArrowNorthMiddleWest(e, t) { return { top: Zh(e), left: e.left + e.width / 2 - 0.25 * t.width - Kh.arrowHorizontalOffset, name: 'arrow_nmw' }; }, southArrowNorth(e, t) { return { top: Zh(e), left: e.left + e.width / 2 - t.width / 2, name: 'arrow_n' }; }, southArrowNorthMiddleEast(e, t) { return { top: Zh(e), left: e.left + e.width / 2 - 0.75 * t.width + Kh.arrowHorizontalOffset, name: 'arrow_nme' }; }, southArrowNorthEast(e, t) { return { top: Zh(e), left: e.left + e.width / 2 - t.width + Kh.arrowHorizontalOffset, name: 'arrow_ne' }; }, southEastArrowNorthWest(e, t) { return { top: Zh(e), left: e.right - Kh.arrowHorizontalOffset, name: 'arrow_nw' }; }, southEastArrowNorthMiddleWest(e, t) { return { top: Zh(e), left: e.right - 0.25 * t.width - Kh.arrowHorizontalOffset, name: 'arrow_nmw' }; }, southEastArrowNorth(e, t) { return { top: Zh(e), left: e.right - t.width / 2, name: 'arrow_n' }; }, southEastArrowNorthMiddleEast(e, t) { return { top: Zh(e), left: e.right - 0.75 * t.width + Kh.arrowHorizontalOffset, name: 'arrow_nme' }; }, southEastArrowNorthEast(e, t) { return { top: Zh(e), left: e.right - t.width + Kh.arrowHorizontalOffset, name: 'arrow_ne' }; },
          }; const Xh = 'widget-type-around'; function ef(e, t, n) { return e && of(e) && !n.isInline(t); } function tf(e) { return e.getAttribute(Xh); } const nf = 'ck-widget'; const rf = 'ck-widget_selected'; function of(e) { return !!e.is('element') && !!e.getCustomProperty('widget'); } function af(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; if (!e.is('containerElement')) throw new Ln.b('widget-to-widget-wrong-element-type: The element passed to toWidget() must be a container element instance.', null, { element: e }); return t.setAttribute('contenteditable', 'false', e), t.addClass(nf, e), t.setCustomProperty('widget', !0, e), e.getFillerOffset = ff, n.label && lf(e, n.label, t), n.hasSelectionHandle && mf(e, t), sf(e, t, ((e, t, n) => n.addClass(r(t.classes), e)), ((e, t, n) => n.removeClass(r(t.classes), e))), e; function r(e) { return Array.isArray(e) ? e : [e]; } } function sf(e, t, n, r) { const i = new Hh(); i.on('change:top', ((t, i) => { i.oldDescriptor && r(e, i.oldDescriptor, i.writer), i.newDescriptor && n(e, i.newDescriptor, i.writer); })), t.setCustomProperty('addHighlight', ((e, t, n) => i.add(t, n)), e), t.setCustomProperty('removeHighlight', ((e, t, n) => i.remove(t, n)), e); } function lf(e, t, n) { n.setCustomProperty('widgetLabel', t, e); } function cf(e) { const t = e.getCustomProperty('widgetLabel'); return t ? typeof t === 'function' ? t() : t : ''; } function uf(e, t) { return t.addClass(['ck-editor__editable', 'ck-editor__nested-editable'], e), t.setAttribute('contenteditable', e.isReadOnly ? 'false' : 'true', e), e.on('change:isReadOnly', ((n, r, i) => { t.setAttribute('contenteditable', i ? 'false' : 'true', e); })), e.on('change:isFocused', ((n, r, i) => { i ? t.addClass('ck-editor__nested-editable_focused', e) : t.removeClass('ck-editor__nested-editable_focused', e); })), e; } function df(e, t) { const n = e.getSelectedElement(); if (n) { const r = tf(e); if (r) return t.createPositionAt(n, r); if (t.schema.isBlock(n)) return t.createPositionAfter(n); } const i = e.getSelectedBlocks().next().value; if (i) { if (i.isEmpty) return t.createPositionAt(i, 0); const o = t.createPositionAfter(i); return e.focus.isTouching(o) ? o : t.createPositionBefore(i); } return e.focus; } function hf(e, t) { const n = new Ua(Vo.window); const r = n.getIntersection(e); const i = t.height + Kh.arrowVerticalOffset; if (e.top - i > n.top || e.bottom + i < n.bottom) return null; const o = r || e; const a = o.left + o.width / 2 - t.width / 2; return { top: Math.max(e.top, 0) + Kh.arrowVerticalOffset, left: a, name: 'arrow_n' }; } function ff() { return null; } function mf(e, t) { const n = t.createUIElement('div', { class: 'ck ck-widget__selection-handle' }, (function (e) { const t = this.toDomElement(e); const n = new Lu(); return n.set('content', '<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>'), n.render(), t.appendChild(n.element), t; })); t.insert(t.createPositionAt(e, 0), n), t.addClass(['ck-widget_with-selection-handle'], e); } function vf(e) { const t = e.getSelectedElement(); return t && (function (e) { return !!e.getCustomProperty('image') && of(e); }(t)) ? t : null; } function gf(e) { return !!e && e.is('element', 'image'); } function pf(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; const r = e.createElement('image', n); const i = df(t.document.selection, t); t.insertContent(r, i), r.parent && e.setSelection(r, 'on'); } function kf(e) { const t = e.schema; const n = e.document.selection; return (function (e, t, n) { const r = (function (e, t) { const n = df(e, t).parent; return n.isEmpty && !n.is('element', '$root') ? n.parent : n; }(e, n)); return t.checkChild(r, 'image'); }(n, t, e)) && !(function (e, t) { const n = e.getSelectedElement(); return n && t.isObject(n); }(n, t)) && (function (e) { return c(e.focus.getAncestors()).every(((e) => !e.is('element', 'image'))); }(n)); } function bf(e) { let t; const n = []; const r = d(e.getChildren()); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; n.push(i), i.is('element') && n.push.apply(n, c(i.getChildren())); } } catch (o) { r.e(o); } finally { r.f(); } return n.find(((e) => e.is('element', 'img'))); } function yf(e) { return function (n) { n.on('attribute:'.concat(e, ':image'), t); }; function t(e, t, n) { if (n.consumable.consume(t.item, e.name)) { const r = n.writer; const i = bf(n.mapper.toViewElement(t.item)); r.setAttribute(t.attributeKey, t.attributeNewValue || '', i); } } } const wf = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { this.isEnabled = kf(this.editor.model); } }, { key: 'execute', value(e) { const t = this.editor.model; t.change(((n) => { let r; const i = Array.isArray(e.source) ? e.source : [e.source]; const o = d(i); try { for (o.s(); !(r = o.n()).done;) { const a = r.value; pf(n, t, { src: a }); } } catch (s) { o.e(s); } finally { o.f(); } })); } }]), n; }(dd)); const _f = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
              key: 'init',
              value() {
                const e = this.editor; const t = e.model.schema; const n = e.t; const r = e.conversion; e.editing.view.addObserver(Uh), t.register('image', {
                  isObject: !0, isBlock: !0, allowWhere: '$block', allowAttributes: ['alt', 'src', 'srcset'],
                }), r.for('dataDowncast').elementToElement({ model: 'image', view(e, t) { return Ef(t); } }), r.for('editingDowncast').elementToElement({ model: 'image', view(e, t) { return (function (e, t, n) { return t.setCustomProperty('image', !0, e), af(e, t, { label() { const t = bf(e).getAttribute('alt'); return t ? ''.concat(t, ' ').concat(n) : n; } }); }(Ef(t), t, n('image widget'))); } }), r.for('downcast').add(yf('src')).add(yf('alt')).add(function () { return function (t) { t.on('attribute:srcset:image', e); }; function e(e, t, n) { if (n.consumable.consume(t.item, e.name)) { const r = n.writer; const i = bf(n.mapper.toViewElement(t.item)); if (t.attributeNewValue === null) { const o = t.attributeOldValue; o.data && (r.removeAttribute('srcset', i), r.removeAttribute('sizes', i), o.width && r.removeAttribute('width', i)); } else { const a = t.attributeNewValue; a.data && (r.setAttribute('srcset', a.data, i), r.setAttribute('sizes', '100vw', i), a.width && r.setAttribute('width', a.width, i)); } } } }()), r.for('upcast').elementToElement({ view: { name: 'img', attributes: { src: !0 } }, model(e, t) { return t.createElement('image', { src: e.getAttribute('src') }); } }).attributeToAttribute({ view: { name: 'img', key: 'alt' }, model: 'alt' }).attributeToAttribute({ view: { name: 'img', key: 'srcset' }, model: { key: 'srcset', value(e) { const t = { data: e.getAttribute('srcset') }; return e.hasAttribute('width') && (t.width = e.getAttribute('width')), t; } } })
                  .add(function () { return function (t) { t.on('element:figure', e); }; function e(e, t, n) { if (n.consumable.test(t.viewItem, { name: !0, classes: 'image' })) { const r = bf(t.viewItem); if (r && r.hasAttribute('src') && n.consumable.test(r, { name: !0 })) { const i = n.convertItem(r, t.modelCursor); const o = rd(i.modelRange.getItems()); o && (n.convertChildren(t.viewItem, n.writer.createPositionAt(o, 0)), t.modelRange = i.modelRange, t.modelCursor = i.modelCursor); } } } }()), e.commands.add('imageInsert', new wf(e));
              },
            }], [{ key: 'pluginName', get() { return 'ImageEditing'; } }]), n;
          }(sd)); function Ef(e) { const t = e.createEmptyElement('img'); const n = e.createContainerElement('figure', { class: 'image' }); return e.insert(e.createPositionAt(n, 0), t), n; } const xf = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).domEventType = 'mousedown', r; } return m(n, [{ key: 'onDomEvent', value(e) { this.fire(e.type, e); } }]), n; }(_a)); const Tf = (n(48), ['before', 'after']); const Cf = (new DOMParser()).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><polyline points="8.05541992 0.263427734 8.05541992 4.23461914 1.28417969 4.23461914" transform="translate(1,0)"></polyline><line x1="0" y1="4.21581031" x2="2" y2="2.17810059" transform="translate(1, 0)"></line><line x1="0" y1="6.21581031" x2="2" y2="4.17810059" transform="translate(2, 5.196955) scale(1, -1) translate(-1, -5.196955)"></line></svg>\n', 'image/svg+xml').firstChild; const Sf = 'ck-widget__type-around_disabled'; const Af = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e))._currentFakeCaretModelElement = null, r; } return m(n, null, [{ key: 'pluginName', get() { return 'WidgetTypeAround'; } }]), m(n, [{ key: 'init', value() { const e = this.editor; const t = e.editing.view; this.on('change:isEnabled', ((n, r, i) => { t.change(((e) => { let n; const r = d(t.document.roots); try { for (r.s(); !(n = r.n()).done;) { const o = n.value; i ? e.removeClass(Sf, o) : e.addClass(Sf, o); } } catch (a) { r.e(a); } finally { r.f(); } })), i || e.model.change(((e) => { e.removeSelectionAttribute(Xh); })); })), this._enableTypeAroundUIInjection(), this._enableInsertingParagraphsOnButtonClick(), this._enableInsertingParagraphsOnEnterKeypress(), this._enableInsertingParagraphsOnTypingKeystroke(), this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(), this._enableDeleteIntegration(), this._enableInsertContentIntegration(); } }, { key: 'destroy', value() { this._currentFakeCaretModelElement = null; } }, { key: '_insertParagraph', value(e, t) { const n = this.editor; const r = n.editing.view; n.execute('insertParagraph', { position: n.model.createPositionAt(e, t) }), r.focus(), r.scrollToTheSelection(); } }, { key: '_listenToIfEnabled', value(e, t, n, r) { const i = this; this.listenTo(e, t, (function () { i.isEnabled && n.apply(void 0, arguments); }), r); } }, { key: '_insertParagraphAccordingToFakeCaretPosition', value() { const e = this.editor.model.document.selection; const t = tf(e); if (!t) return !1; const n = e.getSelectedElement(); return this._insertParagraph(n, t), !0; } }, { key: '_enableTypeAroundUIInjection', value() { const e = this.editor; const t = e.model.schema; const n = e.locale.t; const r = { before: n('Insert paragraph before block'), after: n('Insert paragraph after block') }; e.editing.downcastDispatcher.on('insert', ((e, n, i) => { const o = i.mapper.toViewElement(n.item); ef(o, n.item, t) && (function (e, t, n) { const r = e.createUIElement('div', { class: 'ck ck-reset_all ck-widget__type-around' }, (function (e) { const n = this.toDomElement(e); return (function (e, t) { let n; const r = d(Tf); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; const o = new Qc({ tag: 'div', attributes: { class: ['ck', 'ck-widget__type-around__button', 'ck-widget__type-around__button_'.concat(i)], title: t[i] }, children: [e.ownerDocument.importNode(Cf, !0)] }); e.appendChild(o.render()); } } catch (a) { r.e(a); } finally { r.f(); } }(n, t)), (function (e) { const t = new Qc({ tag: 'div', attributes: { class: ['ck', 'ck-widget__type-around__fake-caret'] } }); e.appendChild(t.render()); }(n)), n; })); e.insert(e.createPositionAt(n, 'end'), r); }(i.writer, r, o)); }), { priority: 'low' }); } }, { key: '_enableTypeAroundFakeCaretActivationUsingKeyboardArrows', value() { const e = this; const t = this.editor; const n = t.model; const r = n.document.selection; const i = n.schema; const o = t.editing.view; function a(e) { return 'ck-widget_type-around_show-fake-caret_'.concat(e); } this._listenToIfEnabled(o.document, 'keydown', ((t, n) => { Ji(n.keyCode) && e._handleArrowKeyPress(t, n); }), { priority: Dn.get('high') + 10 }), this._listenToIfEnabled(r, 'change:range', ((e, n) => { n.directChange && t.model.change(((e) => { e.removeSelectionAttribute(Xh); })); })), this._listenToIfEnabled(n.document, 'change:data', (() => { const e = r.getSelectedElement(); e && ef(t.editing.mapper.toViewElement(e), e, i) || t.model.change(((e) => { e.removeSelectionAttribute(Xh); })); })), this._listenToIfEnabled(t.editing.downcastDispatcher, 'selection', ((t, n, r) => { const o = r.writer; if (e._currentFakeCaretModelElement) { const s = r.mapper.toViewElement(e._currentFakeCaretModelElement); s && (o.removeClass(Tf.map(a), s), e._currentFakeCaretModelElement = null); } const l = n.selection.getSelectedElement(); if (l) { const c = r.mapper.toViewElement(l); if (ef(c, l, i)) { const u = tf(n.selection); u && (o.addClass(a(u), c), e._currentFakeCaretModelElement = l); } } })), this._listenToIfEnabled(t.ui.focusTracker, 'change:isFocused', ((e, n, r) => { r || t.model.change(((e) => { e.removeSelectionAttribute(Xh); })); })); } }, { key: '_handleArrowKeyPress', value(e, t) { let n; const r = this.editor; const i = r.model; const o = i.document.selection; const a = i.schema; const s = r.editing.view; const l = Xi(t.keyCode, r.locale.contentLanguageDirection); const c = s.document.selection.getSelectedElement(); ef(c, r.editing.mapper.toModelElement(c), a) ? n = this._handleArrowKeyPressOnSelectedWidget(l) : o.isCollapsed && (n = this._handleArrowKeyPressWhenSelectionNextToAWidget(l)), n && (t.preventDefault(), e.stop()); } }, { key: '_handleArrowKeyPressOnSelectedWidget', value(e) { const t = this.editor.model; const n = tf(t.document.selection); return t.change(((t) => (n ? n !== (e ? 'after' : 'before') && (t.removeSelectionAttribute(Xh), !0) : (t.setSelectionAttribute(Xh, e ? 'after' : 'before'), !0)))); } }, { key: '_handleArrowKeyPressWhenSelectionNextToAWidget', value(e) { const t = this.editor; const n = t.model; const r = n.schema; const i = t.plugins.get('Widget'); const o = i._getObjectElementNextToSelection(e); return !!ef(t.editing.mapper.toViewElement(o), o, r) && (n.change(((t) => { i._setSelectionOverElement(o), t.setSelectionAttribute(Xh, e ? 'before' : 'after'); })), !0); } }, { key: '_enableInsertingParagraphsOnButtonClick', value() { const e = this; const t = this.editor; const n = t.editing.view; this._listenToIfEnabled(n.document, 'mousedown', ((r, i) => { const o = (function (e) { return e.closest('.ck-widget__type-around__button'); }(i.domTarget)); if (o) { const a = (function (e) { return e.classList.contains('ck-widget__type-around__button_before') ? 'before' : 'after'; }(o)); const s = (function (e, t) { const n = e.closest('.ck-widget'); return t.mapDomToView(n); }(o, n.domConverter)); const l = t.editing.mapper.toModelElement(s); e._insertParagraph(l, a), i.preventDefault(), r.stop(); } })); } }, { key: '_enableInsertingParagraphsOnEnterKeypress', value() { const e = this; const t = this.editor; const n = t.editing.view; this._listenToIfEnabled(n.document, 'enter', ((r, i) => { let o; const a = n.document.selection.getSelectedElement(); const s = t.editing.mapper.toModelElement(a); const l = t.model.schema; e._insertParagraphAccordingToFakeCaretPosition() ? o = !0 : ef(a, s, l) && (e._insertParagraph(s, i.isSoft ? 'before' : 'after'), o = !0), o && (i.preventDefault(), r.stop()); })); } }, { key: '_enableInsertingParagraphsOnTypingKeystroke', value() { const e = this; const t = this.editor.editing.view; const n = [$i.enter, $i.delete, $i.backspace]; this._listenToIfEnabled(t.document, 'keydown', ((t, r) => { n.includes(r.keyCode) || Kd(r) || e._insertParagraphAccordingToFakeCaretPosition(); }), { priority: Dn.get('high') + 1 }); } }, { key: '_enableDeleteIntegration', value() { const e = this.editor; const t = e.editing.view; const n = e.model; const r = n.schema; this._listenToIfEnabled(t.document, 'delete', ((t, i) => { const o = tf(n.document.selection); if (o) { const a = i.direction; const s = n.document.selection.getSelectedElement(); const l = a == 'forward'; if (o === 'before' === l)e.execute('delete', { selection: n.createSelection(s, 'on') }); else { const c = r.getNearestSelectionRange(n.createPositionAt(s, o), a); if (c) if (c.isCollapsed) { const u = n.createSelection(c.start); if (n.modifySelection(u, { direction: a }), u.focus.isEqual(c.start)) { const h = (function (e, t) { let n; let r = t; const i = d(t.getAncestors({ parentFirst: !0 })); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; if (o.childCount > 1 || e.isLimit(o)) break; r = o; } } catch (a) { i.e(a); } finally { i.f(); } return r; }(r, c.start.parent)); n.deleteContent(n.createSelection(h, 'on'), { doNotAutoparagraph: !0 }); } else n.change(((t) => { t.setSelection(c), e.execute(l ? 'forwardDelete' : 'delete'); })); } else n.change(((t) => { t.setSelection(c), e.execute(l ? 'forwardDelete' : 'delete'); })); }i.preventDefault(), t.stop(); } }), { priority: Dn.get('high') + 1 }); } }, { key: '_enableInsertContentIntegration', value() { const e = this.editor; const t = this.editor.model; const n = t.document.selection; this._listenToIfEnabled(e.model, 'insertContent', ((e, r) => { const i = u(r, 2); const o = i[0]; const a = i[1]; if (!a || a.is('documentSelection')) { const s = tf(n); if (s) return e.stop(), t.change(((e) => { const r = n.getSelectedElement(); const i = t.createPositionAt(r, s); const a = e.createSelection(i); const l = t.insertContent(o, a); return e.setSelection(a), l; })); } }), { priority: 'high' }); } }]), n; }(sd)); n(50); const Pf = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor.editing.view; const n = t.document; this._previouslySelected = new Set(), this.editor.editing.downcastDispatcher.on('selection', ((t, n, r) => { e._clearPreviouslySelectedWidgets(r.writer); let i; const o = r.writer; const a = o.document.selection; const s = a.getSelectedElement(); let l = null; const c = d(a.getRanges()); try { for (c.s(); !(i = c.n()).done;) { var u; const h = i.value; const f = d(h); try { for (f.s(); !(u = f.n()).done;) { const m = u.value.item; of(m) && !Of(m, l) && (o.addClass(rf, m), e._previouslySelected.add(m), l = m, m == s && o.setSelection(a.getRanges(), { fake: !0, label: cf(s) })); } } catch (v) { f.e(v); } finally { f.f(); } } } catch (v) { c.e(v); } finally { c.f(); } }), { priority: 'low' }), t.addObserver(xf), this.listenTo(n, 'mousedown', (function () { return e._onMousedown.apply(e, arguments); })), this.listenTo(n, 'keydown', (function () { e._handleSelectionChangeOnArrowKeyPress.apply(e, arguments); }), { priority: 'high' }), this.listenTo(n, 'keydown', (function () { e._preventDefaultOnArrowKeyPress.apply(e, arguments); }), { priority: Dn.get('high') - 20 }), this.listenTo(n, 'delete', ((t, n) => { e._handleDelete(n.direction == 'forward') && (n.preventDefault(), t.stop()); }), { priority: 'high' }); } }, { key: '_onMousedown', value(e, t) { const n = this.editor; const r = n.editing.view; const i = r.document; let o = t.target; if (function (e) { for (;e;) { if (e.is('editableElement') && !e.is('rootElement')) return !0; if (of(e)) return !1; e = e.parent; } return !1; }(o)) { if ((Wi.isSafari || Wi.isGecko) && t.domEvent.detail >= 3) { const a = n.editing.mapper; const s = o.is('attributeElement') ? o.findAncestor(((e) => !e.is('attributeElement'))) : o; const l = a.toModelElement(s); t.preventDefault(), this.editor.model.change(((e) => { e.setSelection(l, 'in'); })); } } else if (of(o) || (o = o.findAncestor(of))) { t.preventDefault(), i.isFocused || r.focus(); const c = n.editing.mapper.toModelElement(o); this._setSelectionOverElement(c); } } }, { key: '_handleSelectionChangeOnArrowKeyPress', value(e, t) { const n = t.keyCode; if (Ji(n)) { const r = this.editor.model; const i = r.schema; const o = r.document.selection; const a = o.getSelectedElement(); const s = Xi(n, this.editor.locale.contentLanguageDirection); if (a && i.isObject(a)) { const l = s ? o.getLastPosition() : o.getFirstPosition(); const c = i.getNearestSelectionRange(l, s ? 'forward' : 'backward'); c && (r.change(((e) => { e.setSelection(c); })), t.preventDefault(), e.stop()); } else if (o.isCollapsed) { const u = this._getObjectElementNextToSelection(s); u && i.isObject(u) && (this._setSelectionOverElement(u), t.preventDefault(), e.stop()); } } } }, { key: '_preventDefaultOnArrowKeyPress', value(e, t) { if (Ji(t.keyCode)) { const n = this.editor.model; const r = n.schema; const i = n.document.selection.getSelectedElement(); i && r.isObject(i) && (t.preventDefault(), e.stop()); } } }, { key: '_handleDelete', value(e) { const t = this; if (!this.editor.isReadOnly) { const n = this.editor.model.document.selection; if (n.isCollapsed) { const r = this._getObjectElementNextToSelection(e); return r ? (this.editor.model.change(((e) => { for (let i = n.anchor.parent; i.isEmpty;) { const o = i; i = o.parent, e.remove(o); }t._setSelectionOverElement(r); })), !0) : void 0; } } } }, { key: '_setSelectionOverElement', value(e) { this.editor.model.change(((t) => { t.setSelection(t.createRangeOn(e)); })); } }, { key: '_getObjectElementNextToSelection', value(e) { const t = this.editor.model; const n = t.schema; const r = t.document.selection; const i = t.createSelection(r); t.modifySelection(i, { direction: e ? 'forward' : 'backward' }); const o = e ? i.focus.nodeBefore : i.focus.nodeAfter; return o && n.isObject(o) ? o : null; } }, { key: '_clearPreviouslySelectedWidgets', value(e) { let t; const n = d(this._previouslySelected); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; e.removeClass(rf, r); } } catch (i) { n.e(i); } finally { n.f(); } this._previouslySelected.clear(); } }], [{ key: 'pluginName', get() { return 'Widget'; } }, { key: 'requires', get() { return [Af]; } }]), n; }(sd)); function Of(e, t) { return !!t && Array.from(e.getAncestors()).includes(t); } const If = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = this.editor.model.document.selection.getSelectedElement(); this.isEnabled = gf(e), gf(e) && e.hasAttribute('alt') ? this.value = e.getAttribute('alt') : this.value = !1; } }, { key: 'execute', value(e) { const t = this.editor.model; const n = t.document.selection.getSelectedElement(); t.change(((t) => { t.setAttribute('alt', e.newValue, n); })); } }]), n; }(dd)); const Mf = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { this.editor.commands.add('imageTextAlternative', new If(this.editor)); } }], [{ key: 'pluginName', get() { return 'ImageTextAlternativeEditing'; } }]), n; }(sd)); const Nf = (n(52), (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; f(this, n), i = t.call(this, e); const o = 'ck-labeled-field-view-'.concat(jn()); const a = 'ck-labeled-field-view-status-'.concat(jn()); i.fieldView = r(s(i), o, a), i.set('label'), i.set('isEnabled', !0), i.set('errorText', null), i.set('infoText', null), i.set('class'), i.labelView = i._createLabelView(o), i.statusView = i._createStatusView(a), i.bind('_statusText').to(s(i), 'errorText', s(i), 'infoText', ((e, t) => e || t)); const l = i.bindTemplate; return i.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-labeled-field-view', l.to('class'), l.if('isEnabled', 'ck-disabled', ((e) => !e))] }, children: [i.labelView, i.fieldView, i.statusView] }), i; } return m(n, [{ key: '_createLabelView', value(e) { const t = new bu(this.locale); return t.for = e, t.bind('text').to(this, 'label'), t; } }, { key: '_createStatusView', value(e) { const t = new vu(this.locale); const n = this.bindTemplate; return t.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-labeled-field-view__status', n.if('errorText', 'ck-labeled-field-view__status_error'), n.if('_statusText', 'ck-hidden', ((e) => !e))], id: e, role: n.if('errorText', 'alert') }, children: [{ text: n.to('_statusText') }] }), t; } }, { key: 'focus', value() { this.fieldView.focus(); } }]), n; }(vu))); const Rf = (n(54), (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; f(this, n), (r = t.call(this, e)).set('value'), r.set('id'), r.set('placeholder'), r.set('isReadOnly', !1), r.set('hasError', !1), r.set('ariaDescribedById'); const i = r.bindTemplate; return r.setTemplate({
                tag: 'input',
                attributes: {
                  type: 'text', class: ['ck', 'ck-input', 'ck-input-text', i.if('hasError', 'ck-error')], id: i.to('id'), placeholder: i.to('placeholder'), readonly: i.to('isReadOnly'), 'aria-invalid': i.if('hasError', !0), 'aria-describedby': i.to('ariaDescribedById'),
                },
                on: { input: i.to('input') },
              }), r;
            } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this); const t = (function (e) { function t(t) { return e.apply(this, arguments); } return t.toString = function () { return e.toString(); }, t; }(((t) => { e.element.value = t || t === 0 ? t : ''; }))); t(this.value), this.on('change:value', ((e, n, r) => { t(r); })); } }, { key: 'select', value() { this.element.select(); } }, { key: 'focus', value() { this.element.focus(); } }]), n;
          }(vu))); function jf(e, t, n) { const r = new Rf(e.locale); return r.set({ id: t, ariaDescribedById: n }), r.bind('isReadOnly').to(e, 'isEnabled', ((e) => !e)), r.bind('hasError').to(e, 'errorText', ((e) => !!e)), r.on('input', (() => { e.errorText = null; })), r; } function Df(e) { const t = e.view; t.listenTo(t.element, 'submit', ((e, n) => { n.preventDefault(), t.fire('submit'); }), { useCapture: !0 }); } const Lf = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>'; const zf = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>'; const Ff = (n(56), (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; f(this, n); const i = (r = t.call(this, e)).locale.t; return r.focusTracker = new Fc(), r.keystrokes = new Oc(), r.labeledInput = r._createLabeledInputView(), r.saveButtonView = r._createButton(i('Save'), Lf, 'ck-button-save'), r.saveButtonView.type = 'submit', r.cancelButtonView = r._createButton(i('Cancel'), zf, 'ck-button-cancel', 'cancel'), r._focusables = new Yc(), r._focusCycler = new Tu({
                focusables: r._focusables, focusTracker: r.focusTracker, keystrokeHandler: r.keystrokes, actions: { focusPrevious: 'shift + tab', focusNext: 'tab' },
              }), r.setTemplate({ tag: 'form', attributes: { class: ['ck', 'ck-text-alternative-form'], tabindex: '-1' }, children: [r.labeledInput, r.saveButtonView, r.cancelButtonView] }), r;
            } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this), this.keystrokes.listenTo(this.element), Df({ view: this }), [this.labeledInput, this.saveButtonView, this.cancelButtonView].forEach(((t) => { e._focusables.add(t), e.focusTracker.add(t.element); })); } }, { key: '_createButton', value(e, t, n, r) { const i = new Fu(this.locale); return i.set({ label: e, icon: t, tooltip: !0 }), i.extendTemplate({ attributes: { class: n } }), r && i.delegate('execute').to(this, r), i; } }, { key: '_createLabeledInputView', value() { const e = this.locale.t; const t = new Nf(this.locale, jf); return t.label = e('Text alternative'), t.fieldView.placeholder = e('Text alternative'), t; } }]), n;
          }(vu))); const Vf = (n(58), n(60), _u('px')); const Bf = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).positionLimiter = function () { const e = r.editor.editing.view; const t = e.document.selection.editableElement; return t ? e.domConverter.mapViewToDom(t.root) : null; }, r.set('visibleView', null), r.view = new Kh(e.locale), e.ui.view.body.add(r.view), e.ui.focusTracker.add(r.view.element), r._viewToStack = new Map(), r._idToStack = new Map(), r.set('_numberOfStacks', 0), r.set('_singleViewMode', !1), r._rotatorView = r._createRotatorView(), r._fakePanelsView = r._createFakePanelsView(), r; } return m(n, null, [{ key: 'pluginName', get() { return 'ContextualBalloon'; } }]), m(n, [{ key: 'hasView', value(e) { return Array.from(this._viewToStack.keys()).includes(e); } }, { key: 'add', value(e) { if (this.hasView(e.view)) throw new Ln.b('contextualballoon-add-view-exist: Cannot add configuration of the same view twice.', [this, e]); const t = e.stackId || 'main'; if (!this._idToStack.has(t)) return this._idToStack.set(t, new Map([[e.view, e]])), this._viewToStack.set(e.view, this._idToStack.get(t)), this._numberOfStacks = this._idToStack.size, void (this._visibleStack && !e.singleViewMode || this.showStack(t)); const n = this._idToStack.get(t); e.singleViewMode && this.showStack(t), n.set(e.view, e), this._viewToStack.set(e.view, n), n === this._visibleStack && this._showView(e); } }, { key: 'remove', value(e) { if (!this.hasView(e)) throw new Ln.b('contextualballoon-remove-view-not-exist: Cannot remove the configuration of a non-existent view.', [this, e]); const t = this._viewToStack.get(e); this._singleViewMode && this.visibleView === e && (this._singleViewMode = !1), this.visibleView === e && (t.size === 1 ? this._idToStack.size > 1 ? this._showNextStack() : (this.view.hide(), this.visibleView = null, this._rotatorView.hideView()) : this._showView(Array.from(t.values())[t.size - 2])), t.size === 1 ? (this._idToStack.delete(this._getStackId(t)), this._numberOfStacks = this._idToStack.size) : t.delete(e), this._viewToStack.delete(e); } }, { key: 'updatePosition', value(e) { e && (this._visibleStack.get(this.visibleView).position = e), this.view.pin(this._getBalloonPosition()), this._fakePanelsView.updatePosition(); } }, { key: 'showStack', value(e) { this.visibleStack = e; const t = this._idToStack.get(e); if (!t) throw new Ln.b('contextualballoon-showstack-stack-not-exist: Cannot show a stack that does not exist.', this); this._visibleStack !== t && this._showView(Array.from(t.values()).pop()); } }, { key: '_getStackId', value(e) { return Array.from(this._idToStack.entries()).find(((t) => t[1] === e))[0]; } }, { key: '_showNextStack', value() { const e = Array.from(this._idToStack.values()); let t = e.indexOf(this._visibleStack) + 1; e[t] || (t = 0), this.showStack(this._getStackId(e[t])); } }, { key: '_showPrevStack', value() { const e = Array.from(this._idToStack.values()); let t = e.indexOf(this._visibleStack) - 1; e[t] || (t = e.length - 1), this.showStack(this._getStackId(e[t])); } }, { key: '_createRotatorView', value() { const e = this; const t = new Uf(this.editor.locale); const n = this.editor.locale.t; return this.view.content.add(t), t.bind('isNavigationVisible').to(this, '_numberOfStacks', this, '_singleViewMode', ((e, t) => !t && e > 1)), t.on('change:isNavigationVisible', (() => e.updatePosition()), { priority: 'low' }), t.bind('counter').to(this, 'visibleView', this, '_numberOfStacks', ((t, r) => { if (r < 2) return ''; const i = Array.from(e._idToStack.values()).indexOf(e._visibleStack) + 1; return n('%0 of %1', [i, r]); })), t.buttonNextView.on('execute', (() => { t.focusTracker.isFocused && e.editor.editing.view.focus(), e._showNextStack(); })), t.buttonPrevView.on('execute', (() => { t.focusTracker.isFocused && e.editor.editing.view.focus(), e._showPrevStack(); })), t; } }, { key: '_createFakePanelsView', value() { const e = new Hf(this.editor.locale, this.view); return e.bind('numberOfPanels').to(this, '_numberOfStacks', this, '_singleViewMode', ((e, t) => (!t && e >= 2 ? Math.min(e - 1, 2) : 0))), e.listenTo(this.view, 'change:top', (() => e.updatePosition())), e.listenTo(this.view, 'change:left', (() => e.updatePosition())), this.editor.ui.view.body.add(e), e; } }, { key: '_showView', value(e) { const t = e.view; const n = e.balloonClassName; const r = void 0 === n ? '' : n; const i = e.withArrow; const o = void 0 === i || i; const a = e.singleViewMode; const s = void 0 !== a && a; this.view.class = r, this.view.withArrow = o, this._rotatorView.showView(t), this.visibleView = t, this.view.pin(this._getBalloonPosition()), this._fakePanelsView.updatePosition(), s && (this._singleViewMode = !0); } }, { key: '_getBalloonPosition', value() { let e = Array.from(this._visibleStack.values()).pop().position; return e && !e.limiter && (e = { ...e, limiter: this.positionLimiter }), e; } }, { key: '_visibleStack', get() { return this._viewToStack.get(this.visibleView); } }]), n; }(sd)); var Uf = (function (e) { v(n, e); const t = g(n); function n(e) { let r; f(this, n), r = t.call(this, e); const i = e.t; const o = r.bindTemplate; return r.set('isNavigationVisible', !0), r.focusTracker = new Fc(), r.buttonPrevView = r._createButtonView(i('Previous'), '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'), r.buttonNextView = r._createButtonView(i('Next'), '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'), r.content = r.createCollection(), r.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-balloon-rotator'], 'z-index': '-1' }, children: [{ tag: 'div', attributes: { class: ['ck-balloon-rotator__navigation', o.to('isNavigationVisible', ((e) => (e ? '' : 'ck-hidden')))] }, children: [r.buttonPrevView, { tag: 'span', attributes: { class: ['ck-balloon-rotator__counter'] }, children: [{ text: o.to('counter') }] }, r.buttonNextView] }, { tag: 'div', attributes: { class: 'ck-balloon-rotator__content' }, children: r.content }] }), r; } return m(n, [{ key: 'render', value() { o(a(n.prototype), 'render', this).call(this), this.focusTracker.add(this.element); } }, { key: 'showView', value(e) { this.hideView(), this.content.add(e); } }, { key: 'hideView', value() { this.content.clear(); } }, { key: '_createButtonView', value(e, t) { const n = new Fu(this.locale); return n.set({ label: e, icon: t, tooltip: !0 }), n; } }]), n; }(vu)); var Hf = (function (e) {
            v(n, e); const t = g(n); function n(e, r) {
              let i; f(this, n); const o = (i = t.call(this, e)).bindTemplate; return i.set('top', 0), i.set('left', 0), i.set('height', 0), i.set('width', 0), i.set('numberOfPanels', 0), i.content = i.createCollection(), i._balloonPanelView = r, i.setTemplate({
                tag: 'div',
                attributes: {
                  class: ['ck-fake-panel', o.to('numberOfPanels', ((e) => (e ? '' : 'ck-hidden')))],
                  style: {
                    top: o.to('top', Vf), left: o.to('left', Vf), width: o.to('width', Vf), height: o.to('height', Vf),
                  },
                },
                children: i.content,
              }), i.on('change:numberOfPanels', ((e, t, n, r) => { n > r ? i._addPanels(n - r) : i._removePanels(r - n), i.updatePosition(); })), i;
            } return m(n, [{ key: '_addPanels', value(e) { for (;e--;) { const t = new vu(); t.setTemplate({ tag: 'div' }), this.content.add(t), this.registerChild(t); } } }, { key: '_removePanels', value(e) { for (;e--;) { const t = this.content.last; this.content.remove(t), this.deregisterChild(t), t.destroy(); } } }, {
              key: 'updatePosition',
              value() {
                if (this.numberOfPanels) {
                  const e = this._balloonPanelView; const t = e.top; const n = e.left; const r = new Ua(this._balloonPanelView.element); const i = r.width; const o = r.height; Object.assign(this, {
                    top: t, left: n, width: i, height: o,
                  });
                }
              },
            }]), n;
          }(vu)); function Wf(e) { const t = e.editing.view; const n = Kh.defaultPositions; return { target: t.domConverter.viewToDom(t.document.selection.getSelectedElement()), positions: [n.northArrowSouth, n.northArrowSouthWest, n.northArrowSouthEast, n.southArrowNorth, n.southArrowNorthWest, n.southArrowNorthEast] }; } const qf = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { this._createButton(), this._createForm(); } }, { key: 'destroy', value() { o(a(n.prototype), 'destroy', this).call(this), this._form.destroy(); } }, { key: '_createButton', value() { const e = this; const t = this.editor; const n = t.t; t.ui.componentFactory.add('imageTextAlternative', ((r) => { const i = t.commands.get('imageTextAlternative'); const o = new Fu(r); return o.set({ label: n('Change image text alternative'), icon: '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>', tooltip: !0 }), o.bind('isEnabled').to(i, 'isEnabled'), e.listenTo(o, 'execute', (() => { e._showForm(); })), o; })); } }, {
              key: '_createForm',
              value() {
                const e = this; const t = this.editor; const n = t.editing.view.document; this._balloon = this.editor.plugins.get('ContextualBalloon'), this._form = new Ff(t.locale), this._form.render(), this.listenTo(this._form, 'submit', (() => { t.execute('imageTextAlternative', { newValue: e._form.labeledInput.fieldView.element.value }), e._hideForm(!0); })), this.listenTo(this._form, 'cancel', (() => { e._hideForm(!0); })), this._form.keystrokes.set('Esc', ((t, n) => { e._hideForm(!0), n(); })), this.listenTo(t.ui, 'update', (() => { vf(n.selection) ? e._isVisible && (function (e) { const t = e.plugins.get('ContextualBalloon'); if (vf(e.editing.view.document.selection)) { const n = Wf(e); t.updatePosition(n); } }(t)) : e._hideForm(!0); })), Gu({
                  emitter: this._form, activator() { return e._isVisible; }, contextElements: [this._balloon.view.element], callback() { return e._hideForm(); },
                });
              },
            }, { key: '_showForm', value() { if (!this._isVisible) { const e = this.editor; const t = e.commands.get('imageTextAlternative'); const n = this._form.labeledInput; this._isInBalloon || this._balloon.add({ view: this._form, position: Wf(e) }), n.fieldView.value = n.fieldView.element.value = t.value || '', this._form.labeledInput.fieldView.select(); } } }, { key: '_hideForm', value(e) { this._isInBalloon && (this._form.focusTracker.isFocused && this._form.saveButtonView.focus(), this._balloon.remove(this._form), e && this.editor.editing.view.focus()); } }, { key: '_isVisible', get() { return this._balloon.visibleView === this._form; } }, { key: '_isInBalloon', get() { return this._balloon.hasView(this._form); } }], [{ key: 'requires', get() { return [Bf]; } }, { key: 'pluginName', get() { return 'ImageTextAlternativeUI'; } }]), n;
          }(sd)); const Gf = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [Mf, qf]; } }, { key: 'pluginName', get() { return 'ImageTextAlternative'; } }]), n; }(sd)); const $f = (n(62), (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [_f, Pf, Gf]; } }, { key: 'pluginName', get() { return 'Image'; } }]), n; }(sd))); function Yf(e) { let t; const n = d(e.getChildren()); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; if (r && r.is('element', 'caption')) return r; } } catch (i) { n.e(i); } finally { n.f(); } return null; } function Kf(e) { const t = e.parent; return e.name == 'figcaption' && t && t.name == 'figure' && t.hasClass('image') ? { name: !0 } : null; } const Qf = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor; const n = t.editing.view; const r = t.model.schema; const i = t.data; const o = t.editing; const a = t.t; r.register('caption', { allowIn: 'image', allowContentOf: '$block', isLimit: !0 }), t.model.document.registerPostFixer(((t) => e._insertMissingModelCaptionElement(t))), t.conversion.for('upcast').elementToElement({ view: Kf, model: 'caption' }), i.downcastDispatcher.on('insert:caption', Jf(((e) => e.createContainerElement('figcaption')), !1)); const s = (function (e, t) { return function (n) { const r = n.createEditableElement('figcaption'); return n.setCustomProperty('imageCaption', !0, r), Uc({ view: e, element: r, text: t }), uf(r, n); }; }(n, a('Enter image caption'))); o.downcastDispatcher.on('insert:caption', Jf(s)), o.downcastDispatcher.on('insert', this._fixCaptionVisibility(((e) => e.item)), { priority: 'high' }), o.downcastDispatcher.on('remove', this._fixCaptionVisibility(((e) => e.position.parent)), { priority: 'high' }), n.document.registerPostFixer(((t) => e._updateCaptionVisibility(t))); } }, { key: '_updateCaptionVisibility', value(e) { let t; const n = this.editor.editing.mapper; const r = this._lastSelectedCaption; const i = this.editor.model.document.selection; const o = i.getSelectedElement(); if (o && o.is('element', 'image')) { const a = Yf(o); t = n.toViewElement(a); } const s = Xf(i.getFirstPosition().parent); if (s && (t = n.toViewElement(s)), t) return r ? (r === t || (em(r, e), this._lastSelectedCaption = t), tm(t, e)) : (this._lastSelectedCaption = t, tm(t, e)); if (r) { const l = em(r, e); return this._lastSelectedCaption = null, l; } return !1; } }, { key: '_fixCaptionVisibility', value(e) { const t = this; return function (n, r, i) { const o = Xf(e(r)); const a = t.editor.editing.mapper; const s = i.writer; if (o) { const l = a.toViewElement(o); l && (o.childCount ? s.removeClass('ck-hidden', l) : s.addClass('ck-hidden', l)); } }; } }, { key: '_insertMissingModelCaptionElement', value(e) { let t; const n = this.editor.model; const r = n.document.differ.getChanges(); const i = []; const o = d(r); try { for (o.s(); !(t = o.n()).done;) { const a = t.value; if (a.type == 'insert' && a.name != '$text') { const s = a.position.nodeAfter; if (s.is('element', 'image') && !Yf(s) && i.push(s), !s.is('element', 'image') && s.childCount) { var l; const c = d(n.createRangeIn(s).getItems()); try { for (c.s(); !(l = c.n()).done;) { const u = l.value; u.is('element', 'image') && !Yf(u) && i.push(u); } } catch (v) { c.e(v); } finally { c.f(); } } } } } catch (v) { o.e(v); } finally { o.f(); } for (let h = 0, f = i; h < f.length; h++) { const m = f[h]; e.appendElement('caption', m); } return !!i.length; } }], [{ key: 'pluginName', get() { return 'ImageCaptionEditing'; } }]), n; }(sd)); function Jf(e) { const t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; return function (n, r, i) { const o = r.item; if ((o.childCount || t) && gf(o.parent)) { if (!i.consumable.consume(r.item, 'insert')) return; const a = i.mapper.toViewElement(r.range.start.parent); const s = e(i.writer); const l = i.writer; o.childCount || l.addClass('ck-hidden', s), Zf(s, r.item, a, i); } }; } function Zf(e, t, n, r) { const i = r.writer.createPositionAt(n, 'end'); r.writer.insert(i, e), r.mapper.bindElements(t, e); } function Xf(e) { const t = e.getAncestors({ includeSelf: !0 }).find(((e) => e.name == 'caption')); return t && t.parent && t.parent.name == 'image' ? t : null; } function em(e, t) { return !e.childCount && !e.hasClass('ck-hidden') && (t.addClass('ck-hidden', e), !0); } function tm(e, t) { return !!e.hasClass('ck-hidden') && (t.removeClass('ck-hidden', e), !0); }n(64); const nm = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [Qf]; } }, { key: 'pluginName', get() { return 'ImageCaption'; } }]), n; }(sd)); const rm = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = this.editor.model.document.selection.getSelectedElement(); this.isEnabled = gf(e), e && e.hasAttribute('width') ? this.value = { width: e.getAttribute('width'), height: null } : this.value = null; } }, { key: 'execute', value(e) { const t = this.editor.model; const n = t.document.selection.getSelectedElement(); this.value = { width: e.width, height: null }, n && t.change(((t) => { t.setAttribute('width', e.width, n); })); } }]), n; }(dd)); const im = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), r = t.call(this, e), e.config.define('image', { resizeUnit: '%', resizeOptions: [{ name: 'imageResize:original', value: null, icon: 'original' }, { name: 'imageResize:25', value: '25', icon: 'small' }, { name: 'imageResize:50', value: '50', icon: 'medium' }, { name: 'imageResize:75', value: '75', icon: 'large' }] }), r; } return m(n, null, [{ key: 'pluginName', get() { return 'ImageResizeEditing'; } }]), m(n, [{ key: 'init', value() { const e = this.editor; const t = new rm(e); this._registerSchema(), this._registerConverters(), e.commands.add('imageResize', t); } }, { key: '_registerSchema', value() { this.editor.model.schema.extend('image', { allowAttributes: 'width' }), this.editor.model.schema.setAttributeProperties('width', { isFormatting: !0 }); } }, { key: '_registerConverters', value() { const e = this.editor; e.conversion.for('downcast').add(((e) => e.on('attribute:width:image', ((e, t, n) => { if (n.consumable.consume(t.item, e.name)) { const r = n.writer; const i = n.mapper.toViewElement(t.item); t.attributeNewValue !== null ? (r.setStyle('width', t.attributeNewValue, i), r.addClass('image_resized', i)) : (r.removeStyle('width', i), r.removeClass('image_resized', i)); } })))), e.conversion.for('upcast').attributeToAttribute({ view: { name: 'figure', styles: { width: /.+/ } }, model: { key: 'width', value(e) { return e.getStyle('width'); } } }); } }]), n; }(sd)); const om = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M10 8H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h8z"/></svg>'; const am = {
            small: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M7 10H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h5z"/></svg>', medium: om, large: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M13 6H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm0 1.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h11z"/></svg>', original: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',
          }; const sm = (function (e) {
            v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e))._resizeUnit = e.config.get('image.resizeUnit'), r; } return m(n, null, [{ key: 'requires', get() { return [im]; } }, { key: 'pluginName', get() { return 'ImageResizeButtons'; } }]), m(n, [{ key: 'init', value() { const e = this.editor; const t = e.config.get('image.resizeOptions'); const n = e.commands.get('imageResize'); this.bind('isEnabled').to(n); let r; const i = d(t); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; this._registerImageResizeButton(o); } } catch (a) { i.e(a); } finally { i.f(); } this._registerImageResizeDropdown(t); } }, {
              key: '_registerImageResizeButton',
              value(e) {
                const t = this; const n = this.editor; const r = e.name; const i = e.value; const o = e.icon; const a = i ? i + this._resizeUnit : null; n.ui.componentFactory.add(r, ((i) => {
                  const s = new Fu(i); const l = n.commands.get('imageResize'); const c = t._getOptionLabelValue(e, !0); if (!am[o]) throw new Ln.b(`imageresizebuttons-missing-icon: The resize option "${r}" misses the "icon" property or the property value doesn't match any of available icons.`, n, e); return s.set({
                    label: c, icon: am[o], tooltip: c, isToggleable: !0,
                  }), s.bind('isEnabled').to(t), s.bind('isOn').to(l, 'value', lm(a)), t.listenTo(s, 'execute', (() => { n.execute('imageResize', { width: a }); })), s;
                }));
              },
            }, {
              key: '_registerImageResizeDropdown',
              value(e) {
                const t = this; const n = this.editor; const r = n.t; const i = e.find(((e) => !e.value)); n.ui.componentFactory.add('imageResize', ((o) => {
                  const a = n.commands.get('imageResize'); const s = $u(o, Bu); const l = s.buttonView; return l.set({
                    tooltip: r('Resize image'), commandValue: i.value, icon: om, isToggleable: !0, label: t._getOptionLabelValue(i), withText: !0, class: 'ck-resize-image-button',
                  }), l.bind('label').to(a, 'value', ((e) => (e && e.width ? e.width : t._getOptionLabelValue(i)))), s.bind('isOn').to(a), s.bind('isEnabled').to(t), Yu(s, t._getResizeDropdownListItemDefinitions(e, a)), s.listView.ariaLabel = r('Image resize list'), t.listenTo(s, 'execute', ((e) => { n.execute(e.source.commandName, { width: e.source.commandValue }), n.editing.view.focus(); })), s;
                }));
              },
            }, { key: '_getOptionLabelValue', value(e, t) { const n = this.editor.t; return e.label ? e.label : t ? e.value ? n('Resize image to %0', e.value + this._resizeUnit) : n('Resize image to the original size') : e.value ? e.value + this._resizeUnit : n('Original'); } }, {
              key: '_getResizeDropdownListItemDefinitions',
              value(e, t) {
                const n = this; const r = new Jn(); return e.map(((e) => {
                  const i = e.value ? e.value + n._resizeUnit : null; const o = {
                    type: 'button',
                    model: new Fh({
                      commandName: 'imageResize', commandValue: i, label: n._getOptionLabelValue(e), withText: !0, icon: null,
                    }),
                  }; o.model.bind('isOn').to(t, 'value', lm(i)), r.add(o);
                })), r;
              },
            }]), n;
          }(sd)); function lm(e) { return function (t) { return e === null && t === e || t && t.width === e; }; } const cm = (function () {
            function e(t) { f(this, e), this.set('activeHandlePosition', null), this.set('proposedWidthPercents', null), this.set('proposedWidth', null), this.set('proposedHeight', null), this.set('proposedHandleHostWidth', null), this.set('proposedHandleHostHeight', null), this._options = t, this._referenceCoordinates = null; } return m(e, [{
              key: 'begin',
              value(e, t, n) {
                const r = new Ua(t); this.activeHandlePosition = (function (e) { for (let t = 0, n = ['top-left', 'top-right', 'bottom-right', 'bottom-left']; t < n.length; t++) { const r = n[t]; if (e.classList.contains(um(r))) return r; } }(e)), this._referenceCoordinates = (function (e, t) { const n = new Ua(e); const r = t.split('-'); const i = { x: r[1] == 'right' ? n.right : n.left, y: r[0] == 'bottom' ? n.bottom : n.top }; return i.x += e.ownerDocument.defaultView.scrollX, i.y += e.ownerDocument.defaultView.scrollY, i; }(t, (function (e) {
                  const t = e.split('-'); const n = {
                    top: 'bottom', bottom: 'top', left: 'right', right: 'left',
                  }; return ''.concat(n[t[0]], '-').concat(n[t[1]]);
                }(this.activeHandlePosition)))), this.originalWidth = r.width, this.originalHeight = r.height, this.aspectRatio = r.width / r.height; const i = n.style.width; i && i.match(/^\d+\.?\d*%$/) ? this.originalWidthPercents = parseFloat(i) : this.originalWidthPercents = (function (e, t) { const n = e.parentElement; const r = parseFloat(n.ownerDocument.defaultView.getComputedStyle(n).width); return t.width / r * 100; }(n, r));
              },
            }, { key: 'update', value(e) { this.proposedWidth = e.width, this.proposedHeight = e.height, this.proposedWidthPercents = e.widthPercents, this.proposedHandleHostWidth = e.handleHostWidth, this.proposedHandleHostHeight = e.handleHostHeight; } }]), e;
          }()); function um(e) { return 'ck-widget__resizer__handle-'.concat(e); }Qn(cm, ki); const dm = (function () {
            function e(t) { const n = this; f(this, e), this._options = t, this._domResizerWrapper = null, this._viewResizerWrapper = null, this.set('isEnabled', !0), this.decorate('begin'), this.decorate('cancel'), this.decorate('commit'), this.decorate('updateSize'), this.on('commit', ((e) => { n.state.proposedWidth || n.state.proposedWidthPercents || (n._cleanup(), e.stop()); }), { priority: 'high' }), this.on('change:isEnabled', (() => { n.isEnabled && n.redraw(); })); } return m(e, [{ key: 'attach', value() { const e = this; const t = this; const n = this._options.viewElement; this._options.editor.editing.view.change(((r) => { const i = r.createUIElement('div', { class: 'ck ck-reset_all ck-widget__resizer' }, (function (e) { const n = this.toDomElement(e); return t._appendHandles(n), t._appendSizeUI(n), t._domResizerWrapper = n, t.on('change:isEnabled', ((e, t, r) => { n.style.display = r ? '' : 'none'; })), n.style.display = t.isEnabled ? '' : 'none', n; })); r.insert(r.createPositionAt(n, 'end'), i), r.addClass('ck-widget_with-resizer', n), e._viewResizerWrapper = i; })); } }, { key: 'begin', value(e) { this.state = new cm(this._options), this._sizeUI.bindToState(this._options, this.state), this._initialViewWidth = this._options.viewElement.getStyle('width'), this.state.begin(e, this._getHandleHost(), this._getResizeHost()); } }, { key: 'updateSize', value(e) { const t = this; const n = this._proposeNewSize(e); this._options.editor.editing.view.change(((e) => { const r = t._options.unit || '%'; const i = (r === '%' ? n.widthPercents : n.width) + r; e.setStyle('width', i, t._options.viewElement); })); const r = this._getHandleHost(); const i = new Ua(r); n.handleHostWidth = Math.round(i.width), n.handleHostHeight = Math.round(i.height); const o = new Ua(r); n.width = Math.round(o.width), n.height = Math.round(o.height), this.redraw(i), this.state.update(n); } }, { key: 'commit', value() { const e = this; const t = this._options.unit || '%'; const n = (t === '%' ? this.state.proposedWidthPercents : this.state.proposedWidth) + t; this._options.editor.editing.view.change((() => { e._cleanup(), e._options.onCommit(n); })); } }, { key: 'cancel', value() { this._cleanup(); } }, { key: 'destroy', value() { this.cancel(); } }, {
              key: 'redraw',
              value(e) {
                const t = this._domResizerWrapper; if (function (e) { return e && e.ownerDocument && e.ownerDocument.contains(e); }(t)) {
                  let n; const r = t.parentElement; const i = this._getHandleHost(); const o = this._viewResizerWrapper; const a = [o.getStyle('width'), o.getStyle('height'), o.getStyle('left'), o.getStyle('top')]; if (r.isSameNode(i)) { const s = e || new Ua(i); n = [`${s.width}px`, `${s.height}px`, void 0, void 0]; } else n = [`${i.offsetWidth}px`, `${i.offsetHeight}px`, `${i.offsetLeft}px`, `${i.offsetTop}px`]; sr(a, n) !== 'same' && this._options.editor.editing.view.change(((e) => {
                    e.setStyle({
                      width: n[0], height: n[1], left: n[2], top: n[3],
                    }, o);
                  }));
                }
              },
            }, { key: 'containsHandle', value(e) { return this._domResizerWrapper.contains(e); } }, { key: '_cleanup', value() { const e = this; this._sizeUI.dismiss(), this._sizeUI.isVisible = !1, this._options.editor.editing.view.change(((t) => { t.setStyle('width', e._initialViewWidth, e._options.viewElement); })); } }, { key: '_proposeNewSize', value(e) { const t = this.state; const n = (function (e) { return { x: e.pageX, y: e.pageY }; }(e)); const r = !this._options.isCentered || this._options.isCentered(this); const i = { x: t._referenceCoordinates.x - (n.x + t.originalWidth), y: n.y - t.originalHeight - t._referenceCoordinates.y }; r && t.activeHandlePosition.endsWith('-right') && (i.x = n.x - (t._referenceCoordinates.x + t.originalWidth)), r && (i.x *= 2); const o = { width: Math.abs(t.originalWidth + i.x), height: Math.abs(t.originalHeight + i.y) }; o.dominant = o.width / t.aspectRatio > o.height ? 'width' : 'height', o.max = o[o.dominant]; const a = { width: o.width, height: o.height }; return o.dominant == 'width' ? a.height = a.width / t.aspectRatio : a.width = a.height * t.aspectRatio, { width: Math.round(a.width), height: Math.round(a.height), widthPercents: Math.min(Math.round(t.originalWidthPercents / t.originalWidth * a.width * 100) / 100, 100) }; } }, { key: '_getResizeHost', value() { const e = this._domResizerWrapper.parentElement; return this._options.getResizeHost(e); } }, { key: '_getHandleHost', value() { const e = this._domResizerWrapper.parentElement; return this._options.getHandleHost(e); } }, { key: '_appendHandles', value(e) { for (let t = 0, n = ['top-left', 'top-right', 'bottom-right', 'bottom-left']; t < n.length; t++) { const r = n[t]; e.appendChild(new Qc({ tag: 'div', attributes: { class: 'ck-widget__resizer__handle '.concat(fm(r)) } }).render()); } } }, { key: '_appendSizeUI', value(e) { const t = new hm(); t.render(), this._sizeUI = t, e.appendChild(t.element); } }], [{ key: 'isResizeHandle', value(e) { return e.classList.contains('ck-widget__resizer__handle'); } }]), e;
          }()); Qn(dm, ki); var hm = (function (e) { v(n, e); const t = g(n); function n() { let e; f(this, n); const r = (e = t.call(this)).bindTemplate; return e.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-size-view', r.to('activeHandlePosition', ((e) => (e ? 'ck-orientation-'.concat(e) : '')))], style: { display: r.if('isVisible', 'none', ((e) => !e)) } }, children: [{ text: r.to('label') }] }), e; } return m(n, [{ key: 'bindToState', value(e, t) { this.bind('isVisible').to(t, 'proposedWidth', t, 'proposedHeight', ((e, t) => e !== null && t !== null)), this.bind('label').to(t, 'proposedHandleHostWidth', t, 'proposedHandleHostHeight', t, 'proposedWidthPercents', ((t, n, r) => (e.unit === 'px' ? ''.concat(t, '\xd7').concat(n) : ''.concat(r, '%')))), this.bind('activeHandlePosition').to(t); } }, { key: 'dismiss', value() { this.unbind(), this.isVisible = !1; } }]), n; }(vu)); function fm(e) { return 'ck-widget__resizer__handle-'.concat(e); } const mm = function (e, t, n) { let r = !0; let i = !0; if (typeof e !== 'function') throw new TypeError('Expected a function'); return te(n) && (r = 'leading' in n ? !!n.leading : r, i = 'trailing' in n ? !!n.trailing : i), Na(e, t, { leading: r, maxWait: t, trailing: i }); }; const vm = (n(66), (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; this.set('_visibleResizer', null), this.set('_activeResizer', null), this._resizers = new Map(); const t = Vo.window.document; this.editor.model.schema.setAttributeProperties('width', { isFormatting: !0 }), this.editor.editing.view.addObserver(xf), this._observer = Object.create(Ko), this.listenTo(this.editor.editing.view.document, 'mousedown', this._mouseDownListener.bind(this), { priority: 'high' }), this._observer.listenTo(t, 'mousemove', this._mouseMoveListener.bind(this)), this._observer.listenTo(t, 'mouseup', this._mouseUpListener.bind(this)); const n = function () { e._visibleResizer && e._visibleResizer.redraw(); }; const r = mm(n, 200); this.on('change:_visibleResizer', n), this.editor.ui.on('update', r), this._observer.listenTo(Vo.window, 'resize', r); const i = this.editor.editing.view.document.selection; i.on('change', (() => { const t = i.getSelectedElement(); e._visibleResizer = e._getResizerByViewElement(t) || null; })); } }, { key: 'destroy', value() { this._observer.stopListening(); let e; const t = d(this._resizers.values()); try { for (t.s(); !(e = t.n()).done;)e.value.destroy(); } catch (n) { t.e(n); } finally { t.f(); } } }, { key: 'attachTo', value(e) { const t = new dm(e); const n = this.editor.plugins; if (t.attach(), n.has('WidgetToolbarRepository')) { const r = n.get('WidgetToolbarRepository'); t.on('begin', (() => { r.forceDisabled('resize'); }), { priority: 'lowest' }), t.on('cancel', (() => { r.clearForceDisabled('resize'); }), { priority: 'highest' }), t.on('commit', (() => { r.clearForceDisabled('resize'); }), { priority: 'highest' }); } return this._resizers.set(e.viewElement, t), t; } }, { key: '_getResizerByHandle', value(e) { let t; const n = d(this._resizers.values()); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; if (r.containsHandle(e)) return r; } } catch (i) { n.e(i); } finally { n.f(); } } }, { key: '_getResizerByViewElement', value(e) { return this._resizers.get(e); } }, { key: '_mouseDownListener', value(e, t) { const n = t.domTarget; dm.isResizeHandle(n) && (this._activeResizer = this._getResizerByHandle(n), this._activeResizer && (this._activeResizer.begin(n), e.stop(), t.preventDefault())); } }, { key: '_mouseMoveListener', value(e, t) { this._activeResizer && this._activeResizer.updateSize(t); } }, { key: '_mouseUpListener', value() { this._activeResizer && (this._activeResizer.commit(), this._activeResizer = null); } }], [{ key: 'pluginName', get() { return 'WidgetResize'; } }]), n; }(sd))); Qn(vm, ki); const gm = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
              key: 'init',
              value() {
                const e = this; const t = this.editor; const n = t.commands.get('imageResize'); this.bind('isEnabled').to(n), t.editing.downcastDispatcher.on('insert:image', ((n, r, i) => {
                  const o = i.mapper.toViewElement(r.item); const a = t.plugins.get(vm).attachTo({
                    unit: t.config.get('image.resizeUnit'), modelElement: r.item, viewElement: o, editor: t, getHandleHost(e) { return e.querySelector('img'); }, getResizeHost(e) { return e; }, isCentered() { const e = r.item.getAttribute('imageStyle'); return !e || e == 'full' || e == 'alignCenter'; }, onCommit(e) { t.execute('imageResize', { width: e }); },
                  }); a.on('updateSize', (() => { o.hasClass('image_resized') || t.editing.view.change(((e) => { e.addClass('image_resized', o); })); })), a.bind('isEnabled').to(e);
                }), { priority: 'low' });
              },
            }], [{ key: 'requires', get() { return [vm]; } }, { key: 'pluginName', get() { return 'ImageResizeHandles'; } }]), n;
          }(sd)); const pm = (n(68), (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [im, gm, sm]; } }, { key: 'pluginName', get() { return 'ImageResize'; } }]), n; }(sd))); const km = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e)).defaultStyle = !1, i.styles = r.reduce(((e, t) => (e[t.name] = t, t.isDefault && (i.defaultStyle = t.name), e)), {}), i; } return m(n, [{ key: 'refresh', value() { const e = this.editor.model.document.selection.getSelectedElement(); if (this.isEnabled = gf(e), e) if (e.hasAttribute('imageStyle')) { const t = e.getAttribute('imageStyle'); this.value = !!this.styles[t] && t; } else this.value = this.defaultStyle; else this.value = !1; } }, { key: 'execute', value(e) { const t = this; const n = e.value; const r = this.editor.model; const i = r.document.selection.getSelectedElement(); r.change(((e) => { t.styles[n].isDefault ? e.removeAttribute('imageStyle', i) : e.setAttribute('imageStyle', n, i); })); } }]), n; }(dd)); function bm(e, t) { let n; const r = d(t); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (i.name === e) return i; } } catch (o) { r.e(o); } finally { r.f(); } } const ym = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>'; const wm = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>'; const _m = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>'; const Em = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>'; const xm = {
            full: {
              name: 'full', title: 'Full size image', icon: ym, isDefault: !0,
            },
            side: {
              name: 'side', title: 'Side image', icon: Em, className: 'image-style-side',
            },
            alignLeft: {
              name: 'alignLeft', title: 'Left aligned image', icon: wm, className: 'image-style-align-left',
            },
            alignCenter: {
              name: 'alignCenter', title: 'Centered image', icon: _m, className: 'image-style-align-center',
            },
            alignRight: {
              name: 'alignRight', title: 'Right aligned image', icon: Em, className: 'image-style-align-right',
            },
          }; const Tm = {
            full: ym, left: wm, right: Em, center: _m,
          }; function Cm() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; return e.map(Sm); } function Sm(e) { if (typeof e === 'string') { const t = e; xm[t] ? e = { ...xm[t] } : (console.warn(Object(Ln.a)('image-style-not-found: There is no such image style of given name.'), { name: t }), e = { name: t }); } else if (xm[e.name]) { const n = xm[e.name]; const r = { ...e }; for (const i in n)Object.prototype.hasOwnProperty.call(e, i) || (r[i] = n[i]); e = r; } return typeof e.icon === 'string' && Tm[e.icon] && (e.icon = Tm[e.icon]), e; } const Am = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const t = e.model.schema; const n = e.data; const r = e.editing; e.config.define('image.styles', ['full', 'side']); const i = Cm(e.config.get('image.styles')); t.extend('image', { allowAttributes: 'imageStyle' }); const o = (function (e) { return function (t, n, r) { if (r.consumable.consume(n.item, t.name)) { const i = bm(n.attributeNewValue, e); const o = bm(n.attributeOldValue, e); const a = r.mapper.toViewElement(n.item); const s = r.writer; o && s.removeClass(o.className, a), i && s.addClass(i.className, a); } }; }(i)); r.downcastDispatcher.on('attribute:imageStyle:image', o), n.downcastDispatcher.on('attribute:imageStyle:image', o), n.upcastDispatcher.on('element:figure', (function (e) { const t = e.filter(((e) => !e.isDefault)); return function (e, n, r) { if (n.modelRange) { const i = n.viewItem; const o = rd(n.modelRange.getItems()); if (r.schema.checkAttribute(o, 'imageStyle')) { let a; const s = d(t); try { for (s.s(); !(a = s.n()).done;) { const l = a.value; r.consumable.consume(i, { classes: l.className }) && r.writer.setAttribute('imageStyle', l.name, o); } } catch (c) { s.e(c); } finally { s.f(); } } } }; }(i)), { priority: 'low' }), e.commands.add('imageStyle', new km(e, i)); } }], [{ key: 'pluginName', get() { return 'ImageStyleEditing'; } }]), n; }(sd)); const Pm = (n(70), (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { let e; const t = (function (e, t) { let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; t[i.title] && (i.title = t[i.title]); } } catch (o) { r.e(o); } finally { r.f(); } return e; }(Cm(this.editor.config.get('image.styles')), this.localizedDefaultStylesTitles)); const n = d(t); try { for (n.s(); !(e = n.n()).done;) { const r = e.value; this._createButton(r); } } catch (i) { n.e(i); } finally { n.f(); } } }, {
              key: '_createButton',
              value(e) {
                const t = this; const n = this.editor; const r = 'imageStyle:'.concat(e.name); n.ui.componentFactory.add(r, ((r) => {
                  const i = n.commands.get('imageStyle'); const o = new Fu(r); return o.set({
                    label: e.title, icon: e.icon, tooltip: !0, isToggleable: !0,
                  }), o.bind('isEnabled').to(i, 'isEnabled'), o.bind('isOn').to(i, 'value', ((t) => t === e.name)), t.listenTo(o, 'execute', (() => { n.execute('imageStyle', { value: e.name }), n.editing.view.focus(); })), o;
                }));
              },
            }, {
              key: 'localizedDefaultStylesTitles',
              get() {
                const e = this.editor.t; return {
                  'Full size image': e('Full size image'), 'Side image': e('Side image'), 'Left aligned image': e('Left aligned image'), 'Centered image': e('Centered image'), 'Right aligned image': e('Right aligned image'),
                };
              },
            }], [{ key: 'pluginName', get() { return 'ImageStyleUI'; } }]), n;
          }(sd))); const Om = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [Am, Pm]; } }, { key: 'pluginName', get() { return 'ImageStyle'; } }]), n; }(sd)); const Im = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor; if (t.plugins.has('BalloonToolbar')) { const n = t.plugins.get('BalloonToolbar'); this.listenTo(n, 'show', ((e) => { (function (e) { const t = e.getSelectedElement(); return !(!t || !of(t)); }(t.editing.view.document.selection)) && e.stop(); }), { priority: 'high' }); } this._toolbarDefinitions = new Map(), this._balloon = this.editor.plugins.get('ContextualBalloon'), this.on('change:isEnabled', (() => { e._updateToolbarsVisibility(); })), this.listenTo(t.ui, 'update', (() => { e._updateToolbarsVisibility(); })), this.listenTo(t.ui.focusTracker, 'change:isFocused', (() => { e._updateToolbarsVisibility(); }), { priority: 'low' }); } }, { key: 'destroy', value() { o(a(n.prototype), 'destroy', this).call(this); let e; const t = d(this._toolbarDefinitions.values()); try { for (t.s(); !(e = t.n()).done;)e.value.view.destroy(); } catch (r) { t.e(r); } finally { t.f(); } } }, { key: 'register', value(e, t) { const n = t.ariaLabel; const r = t.items; const i = t.getRelatedElement; const o = t.balloonClassName; const a = void 0 === o ? 'ck-toolbar-container' : o; if (r.length) { const s = this.editor; const l = s.t; const c = new Qu(s.locale); if (c.ariaLabel = n || l('Widget toolbar'), this._toolbarDefinitions.has(e)) throw new Ln.b('widget-toolbar-duplicated: Toolbar with the given id was already added.', this, { toolbarId: e }); c.fillFromConfig(r, s.ui.componentFactory), this._toolbarDefinitions.set(e, { view: c, getRelatedElement: i, balloonClassName: a }); } else console.warn(Object(Ln.a)('widget-toolbar-no-items: Trying to register a toolbar without items.'), { toolbarId: e }); } }, { key: '_updateToolbarsVisibility', value() { let e; let t = 0; let n = null; let r = null; const i = d(this._toolbarDefinitions.values()); try { for (i.s(); !(e = i.n()).done;) { const o = e.value; const a = o.getRelatedElement(this.editor.editing.view.document.selection); if (this.isEnabled && a) if (this.editor.ui.focusTracker.isFocused) { const s = a.getAncestors().length; s > t && (t = s, n = a, r = o); } else this._isToolbarVisible(o) && this._hideToolbar(o); else this._isToolbarInBalloon(o) && this._hideToolbar(o); } } catch (l) { i.e(l); } finally { i.f(); }r && this._showToolbar(r, n); } }, { key: '_hideToolbar', value(e) { this._balloon.remove(e.view), this.stopListening(this._balloon, 'change:visibleView'); } }, { key: '_showToolbar', value(e, t) { const n = this; this._isToolbarVisible(e) ? Mm(this.editor, t) : this._isToolbarInBalloon(e) || (this._balloon.add({ view: e.view, position: Nm(this.editor, t), balloonClassName: e.balloonClassName }), this.listenTo(this._balloon, 'change:visibleView', (() => { let e; const t = d(n._toolbarDefinitions.values()); try { for (t.s(); !(e = t.n()).done;) { const r = e.value; if (n._isToolbarVisible(r)) { const i = r.getRelatedElement(n.editor.editing.view.document.selection); Mm(n.editor, i); } } } catch (o) { t.e(o); } finally { t.f(); } }))); } }, { key: '_isToolbarVisible', value(e) { return this._balloon.visibleView === e.view; } }, { key: '_isToolbarInBalloon', value(e) { return this._balloon.hasView(e.view); } }], [{ key: 'requires', get() { return [Bf]; } }, { key: 'pluginName', get() { return 'WidgetToolbarRepository'; } }]), n; }(sd)); function Mm(e, t) { const n = e.plugins.get('ContextualBalloon'); const r = Nm(e, t); n.updatePosition(r); } function Nm(e, t) { const n = e.editing.view; const r = Kh.defaultPositions; return { target: n.domConverter.mapViewToDom(t), positions: [r.northArrowSouth, r.northArrowSouthWest, r.northArrowSouthEast, r.southArrowNorth, r.southArrowNorthWest, r.southArrowNorthEast, hf] }; } const Rm = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'afterInit', value() { const e = this.editor; const { t } = e; e.plugins.get(Im).register('image', { ariaLabel: t('Image toolbar'), items: e.config.get('image.toolbar') || [], getRelatedElement: vf }); } }], [{ key: 'requires', get() { return [Im]; } }, { key: 'pluginName', get() { return 'ImageToolbar'; } }]), n; }(sd)); const jm = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).buttonView = new Fu(e), r._fileInputView = new Dm(e), r._fileInputView.bind('acceptedType').to(s(r)), r._fileInputView.bind('allowMultipleFiles').to(s(r)), r._fileInputView.delegate('done').to(s(r)), r.setTemplate({ tag: 'span', attributes: { class: 'ck-file-dialog-button' }, children: [r.buttonView, r._fileInputView] }), r.buttonView.on('execute', (() => { r._fileInputView.open(); })), r; } return m(n, [{ key: 'focus', value() { this.buttonView.focus(); } }]), n; }(vu)); var Dm = (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; f(this, n), (r = t.call(this, e)).set('acceptedType'), r.set('allowMultipleFiles', !1); const i = r.bindTemplate; return r.setTemplate({
                tag: 'input',
                attributes: {
                  class: ['ck-hidden'], type: 'file', tabindex: '-1', accept: i.to('acceptedType'), multiple: i.to('allowMultipleFiles'),
                },
                on: { change: i.to((() => { r.element && r.element.files && r.element.files.length && r.fire('done', r.element.files), r.element.value = ''; })) },
              }), r;
            } return m(n, [{ key: 'open', value() { this.element.click(); } }]), n;
          }(vu)); function Lm(e) { const t = e.map(((e) => e.replace('+', '\\+'))); return new RegExp('^image\\/('.concat(t.join('|'), ')$')); } function zm(e) { return new Promise(((t, n) => { const r = e.getAttribute('src'); fetch(r).then(((e) => e.blob())).then(((e) => { const n = (function (e, t) { return e.type ? e.type : t.match(/data:(image\/\w+);base64/) ? t.match(/data:(image\/\w+);base64/)[1].toLowerCase() : 'image/jpeg'; }(e, r)); const i = n.replace('image/', ''); const o = 'image.'.concat(i); const a = new File([e], o, { type: n }); t(a); })).catch(n); })); } const Fm = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const { t } = e; e.ui.componentFactory.add('imageUpload', ((n) => { const r = new jm(n); const i = e.commands.get('imageUpload'); const o = e.config.get('image.upload.types'); const a = Lm(o); return r.set({ acceptedType: o.map(((e) => 'image/'.concat(e))).join(','), allowMultipleFiles: !0 }), r.buttonView.set({ label: t('Insert image'), icon: '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>', tooltip: !0 }), r.buttonView.bind('isEnabled').to(i), r.on('done', ((t, n) => { const r = Array.from(n).filter(((e) => a.test(e.type))); r.length && e.execute('imageUpload', { file: r }); })), r; })); } }]), n; }(sd)); const Vm = (function () { function e(t) { f(this, e), this.context = t; } return m(e, [{ key: 'destroy', value() { this.stopListening(); } }], [{ key: 'isContextPlugin', get() { return !0; } }]), e; }()); Qn(Vm, ki); const Bm = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { this.set('hasAny', !1), this._actions = new Jn({ idProperty: '_id' }), this._actions.delegate('add', 'remove').to(this); } }, { key: 'add', value(e) { if (typeof e !== 'string') throw new Ln.b('pendingactions-add-invalid-message: The message must be a string.', this); const t = Object.create(ki); return t.set('message', e), this._actions.add(t), this.hasAny = !0, t; } }, { key: 'remove', value(e) { this._actions.remove(e), this.hasAny = !!this._actions.length; } }, { key: Symbol.iterator, value() { return this._actions[Symbol.iterator](); } }, { key: 'first', get() { return this._actions.get(0); } }], [{ key: 'pluginName', get() { return 'PendingActions'; } }]), n; }(Vm)); const Um = (function () { function e() { const t = this; f(this, e); const n = new window.FileReader(); this._reader = n, this._data = void 0, this.set('loaded', 0), n.onprogress = function (e) { t.loaded = e.loaded; }; } return m(e, [{ key: 'read', value(e) { const t = this; const n = this._reader; return this.total = e.size, new Promise(((r, i) => { n.onload = function () { const e = n.result; t._data = e, r(e); }, n.onerror = function () { i('error'); }, n.onabort = function () { i('aborted'); }, t._reader.readAsDataURL(e); })); } }, { key: 'abort', value() { this._reader.abort(); } }, { key: 'error', get() { return this._reader.error; } }, { key: 'data', get() { return this._data; } }]), e; }()); Qn(Um, ki); const Hm = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; this.loaders = new Jn(), this.loaders.on('add', (() => e._updatePendingAction())), this.loaders.on('remove', (() => e._updatePendingAction())), this._loadersMap = new Map(), this._pendingAction = null, this.set('uploaded', 0), this.set('uploadTotal', null), this.bind('uploadedPercent').to(this, 'uploaded', this, 'uploadTotal', ((e, t) => (t ? e / t * 100 : 0))); } }, { key: 'getLoader', value(e) { return this._loadersMap.get(e) || null; } }, { key: 'createLoader', value(e) { const t = this; if (!this.createUploadAdapter) return console.warn(Object(Ln.a)('filerepository-no-upload-adapter: Upload adapter is not defined.')), null; const n = new Wm(Promise.resolve(e), this.createUploadAdapter); return this.loaders.add(n), this._loadersMap.set(e, n), e instanceof Promise && n.file.then(((e) => { t._loadersMap.set(e, n); })).catch((() => {})), n.on('change:uploaded', (() => { let e; let n = 0; const r = d(t.loaders); try { for (r.s(); !(e = r.n()).done;)n += e.value.uploaded; } catch (i) { r.e(i); } finally { r.f(); }t.uploaded = n; })), n.on('change:uploadTotal', (() => { let e; let n = 0; const r = d(t.loaders); try { for (r.s(); !(e = r.n()).done;) { const i = e.value; i.uploadTotal && (n += i.uploadTotal); } } catch (o) { r.e(o); } finally { r.f(); }t.uploadTotal = n; })), n; } }, { key: 'destroyLoader', value(e) { const t = this; const n = e instanceof Wm ? e : this.getLoader(e); n._destroy(), this.loaders.remove(n), this._loadersMap.forEach(((e, r) => { e === n && t._loadersMap.delete(r); })); } }, {
              key: '_updatePendingAction',
              value() {
                const e = this.editor.plugins.get(Bm); if (this.loaders.length) {
                  if (!this._pendingAction) {
                    const { t } = this.editor; const
                      n = function (e) { return ''.concat(t('Upload in progress'), ' ').concat(parseInt(e), '%.'); }; this._pendingAction = e.add(n(this.uploadedPercent)), this._pendingAction.bind('message').to(this, 'uploadedPercent', n);
                  }
                } else e.remove(this._pendingAction), this._pendingAction = null;
              },
            }], [{ key: 'pluginName', get() { return 'FileRepository'; } }, { key: 'requires', get() { return [Bm]; } }]), n;
          }(sd)); Qn(Hm, ki); var Wm = (function () { function e(t, n) { f(this, e), this.id = jn(), this._filePromiseWrapper = this._createFilePromiseWrapper(t), this._adapter = n(this), this._reader = new Um(), this.set('status', 'idle'), this.set('uploaded', 0), this.set('uploadTotal', null), this.bind('uploadedPercent').to(this, 'uploaded', this, 'uploadTotal', ((e, t) => (t ? e / t * 100 : 0))), this.set('uploadResponse', null); } return m(e, [{ key: 'read', value() { const e = this; if (this.status != 'idle') throw new Ln.b('filerepository-read-wrong-status: You cannot call read if the status is different than idle.', this); return this.status = 'reading', this.file.then(((t) => e._reader.read(t))).then(((t) => { if (e.status !== 'reading') throw e.status; return e.status = 'idle', t; })).catch(((t) => { if (t === 'aborted') throw e.status = 'aborted', 'aborted'; throw e.status = 'error', e._reader.error ? e._reader.error : t; })); } }, { key: 'upload', value() { const e = this; if (this.status != 'idle') throw new Ln.b('filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.', this); return this.status = 'uploading', this.file.then((() => e._adapter.upload())).then(((t) => (e.uploadResponse = t, e.status = 'idle', t))).catch(((t) => { if (e.status === 'aborted') throw 'aborted'; throw e.status = 'error', t; })); } }, { key: 'abort', value() { const e = this.status; this.status = 'aborted', this._filePromiseWrapper.isFulfilled ? e == 'reading' ? this._reader.abort() : e == 'uploading' && this._adapter.abort && this._adapter.abort() : (this._filePromiseWrapper.promise.catch((() => {})), this._filePromiseWrapper.rejecter('aborted')), this._destroy(); } }, { key: '_destroy', value() { this._filePromiseWrapper = void 0, this._reader = void 0, this._adapter = void 0, this.uploadResponse = void 0; } }, { key: '_createFilePromiseWrapper', value(e) { const t = {}; return t.promise = new Promise(((n, r) => { t.rejecter = r, t.isFulfilled = !1, e.then(((e) => { t.isFulfilled = !0, n(e); })).catch(((e) => { t.isFulfilled = !0, r(e); })); })), t; } }, { key: 'file', get() { const e = this; return this._filePromiseWrapper ? this._filePromiseWrapper.promise.then(((t) => (e._filePromiseWrapper ? t : null))) : Promise.resolve(null); } }, { key: 'data', get() { return this._reader.data; } }]), e; }()); Qn(Wm, ki), n(72), n(74), n(76); const qm = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).placeholder = `data:image/svg+xml;utf8,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>')}`, r; } return m(n, [{ key: 'init', value() { const e = this; this.editor.editing.downcastDispatcher.on('attribute:uploadStatus:image', (function () { return e.uploadStatusChange.apply(e, arguments); })); } }, { key: 'uploadStatusChange', value(e, t, n) { const r = this.editor; const i = t.item; const o = i.getAttribute('uploadId'); if (n.consumable.consume(t.item, e.name)) { const a = r.plugins.get(Hm); const s = o ? t.attributeNewValue : null; const l = this.placeholder; const c = r.editing.mapper.toViewElement(i); const u = n.writer; if (s == 'reading') return Gm(c, u), void $m(l, c, u); if (s == 'uploading') { const d = a.loaders.get(o); return Gm(c, u), void (d ? (Ym(c, u), (function (e, t, n, r) { const i = (function (e) { const t = e.createUIElement('div', { class: 'ck-progress-bar' }); return e.setCustomProperty('progressBar', !0, t), t; }(t)); t.insert(t.createPositionAt(e, 'end'), i), n.on('change:uploadedPercent', ((e, t, n) => { r.change(((e) => { e.setStyle('width', `${n}%`, i); })); })); }(c, u, d, r.editing.view)), (function (e, t, n) { if (n.data) { const r = bf(e); t.setAttribute('src', n.data, r); } }(c, u, d))) : $m(l, c, u)); }s == 'complete' && a.loaders.get(o) && (function (e, t, n) { const r = t.createUIElement('div', { class: 'ck-image-upload-complete-icon' }); t.insert(t.createPositionAt(e, 'end'), r), setTimeout((() => { n.change(((e) => e.remove(e.createRangeOn(r)))); }), 3e3); }(c, u, r.editing.view)), (function (e, t) { Qm(e, t, 'progressBar'); }(c, u)), Ym(c, u), (function (e, t) { t.removeClass('ck-appear', e); }(c, u)); } } }]), n; }(sd)); function Gm(e, t) { e.hasClass('ck-appear') || t.addClass('ck-appear', e); } function $m(e, t, n) { t.hasClass('ck-image-upload-placeholder') || n.addClass('ck-image-upload-placeholder', t); const r = bf(t); r.getAttribute('src') !== e && n.setAttribute('src', e, r), Km(t, 'placeholder') || n.insert(n.createPositionAfter(r), (function (e) { const t = e.createUIElement('div', { class: 'ck-upload-placeholder-loader' }); return e.setCustomProperty('placeholder', !0, t), t; }(n))); } function Ym(e, t) { e.hasClass('ck-image-upload-placeholder') && t.removeClass('ck-image-upload-placeholder', e), Qm(e, t, 'placeholder'); } function Km(e, t) { let n; const r = d(e.getChildren()); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (i.getCustomProperty(t)) return i; } } catch (o) { r.e(o); } finally { r.f(); } } function Qm(e, t, n) { const r = Km(e, n); r && t.remove(t.createRangeOn(r)); } const Jm = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { this.on('show:warning', ((e, t) => { window.alert(t.message); }), { priority: 'lowest' }); } }, {
              key: 'showSuccess',
              value(e) {
                const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; this._showNotification({
                  message: e, type: 'success', namespace: t.namespace, title: t.title,
                });
              },
            }, {
              key: 'showInfo',
              value(e) {
                const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; this._showNotification({
                  message: e, type: 'info', namespace: t.namespace, title: t.title,
                });
              },
            }, {
              key: 'showWarning',
              value(e) {
                const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; this._showNotification({
                  message: e, type: 'warning', namespace: t.namespace, title: t.title,
                });
              },
            }, { key: '_showNotification', value(e) { const t = 'show:'.concat(e.type) + (e.namespace ? ':'.concat(e.namespace) : ''); this.fire(t, { message: e.message, type: e.type, title: e.title || '' }); } }], [{ key: 'pluginName', get() { return 'Notification'; } }]), n;
          }(Vm)); const Zm = (function () { function e(t) { f(this, e), this.document = t; } return m(e, [{ key: 'createDocumentFragment', value(e) { return new ao(this.document, e); } }, { key: 'createElement', value(e, t, n) { return new ci(this.document, e, t, n); } }, { key: 'createText', value(e) { return new ur(this.document, e); } }, { key: 'clone', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; return e._clone(t); } }, { key: 'appendChild', value(e, t) { return t._appendChild(e); } }, { key: 'insertChild', value(e, t, n) { return n._insertChild(e, t); } }, { key: 'removeChildren', value(e, t, n) { return n._removeChildren(e, t); } }, { key: 'remove', value(e) { const t = e.parent; return t ? this.removeChildren(t.getChildIndex(e), 1, t) : []; } }, { key: 'replace', value(e, t) { const n = e.parent; if (n) { const r = n.getChildIndex(e); return this.removeChildren(r, 1, n), this.insertChild(r, t, n), !0; } return !1; } }, { key: 'unwrapElement', value(e) { const t = e.parent; if (t) { const n = t.getChildIndex(e); this.remove(e), this.insertChild(n, e.getChildren(), t); } } }, { key: 'rename', value(e, t) { const n = new ci(this.document, e, t.getAttributes(), t.getChildren()); return this.replace(t, n) ? n : null; } }, { key: 'setAttribute', value(e, t, n) { n._setAttribute(e, t); } }, { key: 'removeAttribute', value(e, t) { t._removeAttribute(e); } }, { key: 'addClass', value(e, t) { t._addClass(e); } }, { key: 'removeClass', value(e, t) { t._removeClass(e); } }, { key: 'setStyle', value(e, t, n) { V(e) && void 0 === n && (n = t), n._setStyle(e, t); } }, { key: 'removeStyle', value(e, t) { t._removeStyle(e); } }, { key: 'setCustomProperty', value(e, t, n) { n._setCustomProperty(e, t); } }, { key: 'removeCustomProperty', value(e, t) { return t._removeCustomProperty(e); } }, { key: 'createPositionAt', value(e, t) { return Ii._createAt(e, t); } }, { key: 'createPositionAfter', value(e) { return Ii._createAfter(e); } }, { key: 'createPositionBefore', value(e) { return Ii._createBefore(e); } }, { key: 'createRange', value(e, t) { return new Mi(e, t); } }, { key: 'createRangeOn', value(e) { return Mi._createOn(e); } }, { key: 'createRangeIn', value(e) { return Mi._createIn(e); } }, { key: 'createSelection', value(e, t, n) { return new ji(e, t, n); } }]), e; }()); const Xm = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { this.isEnabled = kf(this.editor.model); } }, { key: 'execute', value(e) { const t = this.editor; const n = t.model; const r = t.plugins.get(Hm); n.change(((t) => { let i; const o = Array.isArray(e.file) ? e.file : [e.file]; const a = d(o); try { for (a.s(); !(i = a.n()).done;) { const s = i.value; ev(t, n, r, s); } } catch (l) { a.e(l); } finally { a.f(); } })); } }]), n; }(dd)); function ev(e, t, n, r) { const i = n.createLoader(r); i && pf(e, t, { uploadId: i.id }); } const tv = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), r = t.call(this, e), e.config.define('image', { upload: { types: ['jpeg', 'png', 'gif', 'bmp', 'webp', 'tiff'] } }), r; } return m(n, null, [{ key: 'requires', get() { return [Hm, Jm, Pd]; } }, { key: 'pluginName', get() { return 'ImageUploadEditing'; } }]), m(n, [{ key: 'init', value() { const e = this; const t = this.editor; const n = t.model.document; const r = t.model.schema; const i = t.conversion; const o = t.plugins.get(Hm); const a = Lm(t.config.get('image.upload.types')); r.extend('image', { allowAttributes: ['uploadId', 'uploadStatus'] }), t.commands.add('imageUpload', new Xm(t)), i.for('upcast').attributeToAttribute({ view: { name: 'img', key: 'uploadId' }, model: 'uploadId' }), this.listenTo(t.editing.view.document, 'clipboardInput', ((e, n) => { if (!(function (e) { return Array.from(e.types).includes('text/html') && e.getData('text/html') !== ''; }(n.dataTransfer))) { const r = Array.from(n.dataTransfer.files).filter(((e) => !!e && a.test(e.type))); const i = n.targetRanges.map(((e) => t.editing.mapper.toModelRange(e))); t.model.change(((n) => { n.setSelection(i), r.length && (e.stop(), t.model.enqueueChange('default', (() => { t.execute('imageUpload', { file: r }); }))); })); } })), this.listenTo(t.plugins.get(Pd), 'inputTransformation', ((e, n) => { const r = Array.from(t.editing.view.createRangeIn(n.content)).filter(((e) => (function (e) { return !(!e.is('element', 'img') || !e.getAttribute('src')) && (e.getAttribute('src').match(/^data:image\/\w+;base64,/g) || e.getAttribute('src').match(/^blob:/g)); }(e.item)) && !e.item.getAttribute('uploadProcessed'))).map(((e) => ({ promise: zm(e.item), imageElement: e.item }))); if (r.length) { let i; const a = new Zm(t.editing.view.document); const s = d(r); try { for (s.s(); !(i = s.n()).done;) { const l = i.value; a.setAttribute('uploadProcessed', !0, l.imageElement); const c = o.createLoader(l.promise); c && (a.setAttribute('src', '', l.imageElement), a.setAttribute('uploadId', c.id, l.imageElement)); } } catch (u) { s.e(u); } finally { s.f(); } } })), t.editing.view.document.on('dragover', ((e, t) => { t.preventDefault(); })), n.on('change', (() => { let r; const i = n.differ.getChanges({ includeChangesInGraveyard: !0 }); const a = d(i); try { for (a.s(); !(r = a.n()).done;) { const s = r.value; if (s.type == 'insert' && s.name != '$text') { var l; const c = s.position.nodeAfter; const u = s.position.root.rootName == '$graveyard'; const h = d(nv(t, c)); try { for (h.s(); !(l = h.n()).done;) { const f = l.value; const m = f.getAttribute('uploadId'); if (m) { const v = o.loaders.get(m); v && (u ? v.abort() : v.status == 'idle' && e._readAndUpload(v, f)); } } } catch (g) { h.e(g); } finally { h.f(); } } } } catch (g) { a.e(g); } finally { a.f(); } })); } }, { key: '_readAndUpload', value(e, t) { const n = this; const r = this.editor; const i = r.model; const o = r.locale.t; const a = r.plugins.get(Hm); const s = r.plugins.get(Jm); return i.enqueueChange('transparent', ((e) => { e.setAttribute('uploadStatus', 'reading', t); })), e.read().then((() => { const n = e.upload(); if (Wi.isSafari) { const o = bf(r.editing.mapper.toViewElement(t)); r.editing.view.once('render', (() => { if (o.parent) { const e = r.editing.view.domConverter.mapViewToDom(o.parent); if (e) { const t = e.style.display; e.style.display = 'none', e._ckHack = e.offsetHeight, e.style.display = t; } } })); } return i.enqueueChange('transparent', ((e) => { e.setAttribute('uploadStatus', 'uploading', t); })), n; })).then(((e) => { i.enqueueChange('transparent', ((r) => { r.setAttributes({ uploadStatus: 'complete', src: e.default }, t), n._parseAndSetSrcsetAttributeOnImage(e, t, r); })), l(); })).catch(((n) => { if (e.status !== 'error' && e.status !== 'aborted') throw n; e.status == 'error' && n && s.showWarning(n, { title: o('Upload failed'), namespace: 'upload' }), l(), i.enqueueChange('transparent', ((e) => { e.remove(t); })); })); function l() { i.enqueueChange('transparent', ((e) => { e.removeAttribute('uploadId', t), e.removeAttribute('uploadStatus', t); })), a.destroyLoader(e); } } }, { key: '_parseAndSetSrcsetAttributeOnImage', value(e, t, n) { let r = 0; const i = Object.keys(e).filter(((e) => { const t = parseInt(e, 10); if (!isNaN(t)) return r = Math.max(r, t), !0; })).map(((t) => ''.concat(e[t], ' ').concat(t, 'w'))).join(', '); i != '' && n.setAttribute('srcset', { data: i, width: r }, t); } }]), n; }(sd)); function nv(e, t) { return Array.from(e.model.createRangeOn(t)).filter(((e) => e.item.is('element', 'image'))).map(((e) => e.item)); } const rv = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'pluginName', get() { return 'ImageUpload'; } }, { key: 'requires', get() { return [tv, Fm, qm]; } }]), n; }(sd)); const iv = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e))._childCommands = [], r; } return m(n, [{ key: 'refresh', value() {} }, { key: 'execute', value() { for (var e = this._getFirstEnabledCommand(), t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; return e.execute(n); } }, { key: 'registerChildCommand', value(e) { const t = this; this._childCommands.push(e), e.on('change:isEnabled', (() => t._checkEnabled())), this._checkEnabled(); } }, { key: '_checkEnabled', value() { this.isEnabled = !!this._getFirstEnabledCommand(); } }, { key: '_getFirstEnabledCommand', value() { return this._childCommands.find(((e) => e.isEnabled)); } }]), n; }(dd)); const ov = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; e.commands.add('indent', new iv(e)), e.commands.add('outdent', new iv(e)); } }], [{ key: 'pluginName', get() { return 'IndentEditing'; } }]), n; }(sd)); const av = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95L5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>'; const sv = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>'; const lv = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const t = e.locale; const n = e.t; const r = t.uiLanguageDirection == 'ltr' ? av : sv; const i = t.uiLanguageDirection == 'ltr' ? sv : av; this._defineButton('indent', n('Increase indent'), r), this._defineButton('outdent', n('Decrease indent'), i); } }, { key: '_defineButton', value(e, t, n) { const r = this; const i = this.editor; i.ui.componentFactory.add(e, ((o) => { const a = i.commands.get(e); const s = new Fu(o); return s.set({ label: t, icon: n, tooltip: !0 }), s.bind('isOn', 'isEnabled').to(a, 'value', 'isEnabled'), r.listenTo(s, 'execute', (() => { i.execute(e), i.editing.view.focus(); })), s; })); } }], [{ key: 'pluginName', get() { return 'IndentUI'; } }]), n; }(sd)); const cv = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'pluginName', get() { return 'Indent'; } }, { key: 'requires', get() { return [ov, lv]; } }]), n; }(sd)); const uv = 'italic'; const dv = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; e.model.schema.extend('$text', { allowAttributes: uv }), e.model.schema.setAttributeProperties(uv, { isFormatting: !0, copyOnEnter: !0 }), e.conversion.attributeToElement({ model: uv, view: 'i', upcastAlso: ['em', { styles: { 'font-style': 'italic' } }] }), e.commands.add(uv, new yd(e, uv)), e.keystrokes.set('CTRL+I', uv); } }], [{ key: 'pluginName', get() { return 'ItalicEditing'; } }]), n; }(sd)); const hv = 'italic'; const fv = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
              key: 'init',
              value() {
                const e = this; const t = this.editor; const n = t.t; t.ui.componentFactory.add(hv, ((r) => {
                  const i = t.commands.get(hv); const o = new Fu(r); return o.set({
                    label: n('Italic'), icon: '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>', keystroke: 'CTRL+I', tooltip: !0, isToggleable: !0,
                  }), o.bind('isOn', 'isEnabled').to(i, 'value', 'isEnabled'), e.listenTo(o, 'execute', (() => { t.execute(hv), t.editing.view.focus(); })), o;
                }));
              },
            }]), n;
          }(sd)); const mv = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [dv, fv]; } }, { key: 'pluginName', get() { return 'Italic'; } }]), n; }(sd)); const vv = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).attributes = new Set(), r._overrideUid = null, r; } return m(n, null, [{ key: 'pluginName', get() { return 'TwoStepCaretMovement'; } }]), m(n, [{ key: 'init', value() { const e = this; const t = this.editor; const n = t.model; const r = t.editing.view; const i = t.locale; const o = n.document.selection; this.listenTo(r.document, 'keydown', ((t, n) => { if (o.isCollapsed && !(n.shiftKey || n.altKey || n.ctrlKey)) { const r = n.keyCode == $i.arrowright; const a = n.keyCode == $i.arrowleft; if (r || a) { const s = i.contentLanguageDirection; !0 === (s === 'ltr' && r || s === 'rtl' && a ? e._handleForwardMovement(n) : e._handleBackwardMovement(n)) && t.stop(); } } }), { priority: Dn.get('high') + 1 }), this._isNextGravityRestorationSkipped = !1, this.listenTo(o, 'change:range', ((t, n) => { e._isNextGravityRestorationSkipped ? e._isNextGravityRestorationSkipped = !1 : e._isGravityOverridden && (!n.directChange && bv(o.getFirstPosition(), e.attributes) || e._restoreGravity()); })); } }, { key: 'registerAttribute', value(e) { this.attributes.add(e); } }, { key: '_handleForwardMovement', value(e) { const t = this.attributes; const n = this.editor.model.document.selection; const r = n.getFirstPosition(); return !this._isGravityOverridden && (!r.isAtStart || !gv(n, t)) && (bv(r, t) ? (kv(e), this._overrideGravity(), !0) : void 0); } }, { key: '_handleBackwardMovement', value(e) { const t = this.attributes; const n = this.editor.model; const r = n.document.selection; const i = r.getFirstPosition(); return this._isGravityOverridden ? (kv(e), this._restoreGravity(), pv(n, t, i), !0) : i.isAtStart ? !!gv(r, t) && (kv(e), pv(n, t, i), !0) : (function (e, t) { return bv(e.getShiftedBy(-1), t); }(i, t)) ? i.isAtEnd && !gv(r, t) && bv(i, t) ? (kv(e), pv(n, t, i), !0) : (this._isNextGravityRestorationSkipped = !0, this._overrideGravity(), !1) : void 0; } }, { key: '_overrideGravity', value() { this._overrideUid = this.editor.model.change(((e) => e.overrideSelectionGravity())); } }, { key: '_restoreGravity', value() { const e = this; this.editor.model.change(((t) => { t.restoreSelectionGravity(e._overrideUid), e._overrideUid = null; })); } }, { key: '_isGravityOverridden', get() { return !!this._overrideUid; } }]), n; }(sd)); function gv(e, t) { let n; const r = d(t); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (e.hasAttribute(i)) return !0; } } catch (o) { r.e(o); } finally { r.f(); } return !1; } function pv(e, t, n) { const r = n.nodeBefore; e.change(((e) => { r ? e.setSelectionAttribute(r.getAttributes()) : e.removeSelectionAttribute(t); })); } function kv(e) { e.preventDefault(); } function bv(e, t) { let n; const r = e.nodeBefore; const i = e.nodeAfter; const o = d(t); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; const s = r ? r.getAttribute(a) : void 0; if ((i ? i.getAttribute(a) : void 0) !== s) return !0; } } catch (l) { o.e(l); } finally { o.f(); } return !1; } function yv(e, t, n, r) { return r.createRange(wv(e, t, n, !0, r), wv(e, t, n, !1, r)); } function wv(e, t, n, r, i) { for (var o = e.textNode || (r ? e.nodeBefore : e.nodeAfter), a = null; o && o.getAttribute(t) == n;)a = o, o = r ? o.previousSibling : o.nextSibling; return a ? i.createPositionAt(a, r ? 'before' : 'after') : e; } const _v = (function () { function e() { f(this, e), this._definitions = new Set(); } return m(e, [{ key: 'add', value(e) { const t = this; Array.isArray(e) ? e.forEach(((e) => t._definitions.add(e))) : this._definitions.add(e); } }, { key: 'getDispatcher', value() { const e = this; return function (t) { t.on('attribute:linkHref', ((t, n, r) => { if (r.consumable.test(n.item, 'attribute:linkHref')) { let i; const o = r.writer; const a = o.document.selection; const s = d(e._definitions); try { for (s.s(); !(i = s.n()).done;) { const l = i.value; const c = o.createAttributeElement('a', l.attributes, { priority: 5 }); o.setCustomProperty('link', !0, c), l.callback(n.attributeNewValue) ? n.item.is('selection') ? o.wrap(a.getFirstRange(), c) : o.wrap(r.mapper.toViewRange(n.range), c) : o.unwrap(r.mapper.toViewRange(n.range), c); } } catch (u) { s.e(u); } finally { s.f(); } } }), { priority: 'high' }); }; } }, { key: 'getDispatcherForLinkedImage', value() { const e = this; return function (t) { t.on('attribute:linkHref:image', ((t, n, r) => { let i; const o = r.mapper.toViewElement(n.item); const a = Array.from(o.getChildren()).find(((e) => e.name === 'a')); const s = d(e._definitions); try { for (s.s(); !(i = s.n()).done;) { const l = i.value; const c = hr(l.attributes); if (l.callback(n.attributeNewValue)) { var h; const f = d(c); try { for (f.s(); !(h = f.n()).done;) { const m = u(h.value, 2); const v = m[0]; const g = m[1]; v === 'class' ? r.writer.addClass(g, a) : r.writer.setAttribute(v, g, a); } } catch (_) { f.e(_); } finally { f.f(); } } else { var p; const k = d(c); try { for (k.s(); !(p = k.n()).done;) { const b = u(p.value, 2); const y = b[0]; const w = b[1]; y === 'class' ? r.writer.removeClass(w, a) : r.writer.removeAttribute(y, a); } } catch (_) { k.e(_); } finally { k.f(); } } } } catch (_) { s.e(_); } finally { s.f(); } })); }; } }, { key: 'length', get() { return this._definitions.size; } }]), e; }()); const Ev = function (e, t, n) { const r = e.length; return n = void 0 === n ? r : n, !t && n >= r ? e : Nr(e, t, n); }; const xv = RegExp('[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]'); const Tv = function (e) { return xv.test(e); }; const Cv = function (e) { return e.split(''); }; const Sv = '\\ud800-\\udfff'; const Av = `[${Sv}]`; const Pv = '[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]'; const Ov = '\\ud83c[\\udffb-\\udfff]'; const Iv = `[^${Sv}]`; const Mv = '(?:\\ud83c[\\udde6-\\uddff]){2}'; const Nv = '[\\ud800-\\udbff][\\udc00-\\udfff]'; const Rv = `(?:${Pv}|${Ov})?`; const jv = '[\\ufe0e\\ufe0f]?'; const Dv = `${jv + Rv}(?:\\u200d(?:${[Iv, Mv, Nv].join('|')})${jv}${Rv})*`; const Lv = `(?:${[`${Iv + Pv}?`, Pv, Mv, Nv, Av].join('|')})`; const zv = RegExp(`${Ov}(?=${Ov})|${Lv}${Dv}`, 'g'); const Fv = function (e) { return e.match(zv) || []; }; const Vv = function (e) { return Tv(e) ? Fv(e) : Cv(e); }; const Bv = (function (e) { return function (t) { t = Ar(t); const n = Tv(t) ? Vv(t) : void 0; const r = n ? n[0] : t.charAt(0); const i = n ? Ev(n, 1).join('') : t.slice(1); return r[e]() + i; }; }('toUpperCase')); const Uv = /[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g; const Hv = /^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i; const Wv = 'Ctrl+K'; function qv(e, t) { const n = t.createAttributeElement('a', { href: e }, { priority: 5 }); return t.setCustomProperty('link', !0, n), n; } function Gv(e) { return (function (e) { return e.replace(Uv, '').match(Hv); }(e = String(e))) ? e : '#'; } function $v(e, t) { return !!e && e.is('element', 'image') && t.checkAttribute('image', 'linkHref'); } const Yv = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).manualDecorators = new Jn(), r.automaticDecorators = new _v(), r; } return m(n, [{ key: 'restoreManualDecoratorStates', value() { let e; const t = d(this.manualDecorators); try { for (t.s(); !(e = t.n()).done;) { const n = e.value; n.value = this._getDecoratorStateFromModel(n.id); } } catch (r) { t.e(r); } finally { t.f(); } } }, { key: 'refresh', value() { const e = this.editor.model; const t = e.document; const n = rd(t.selection.getSelectedBlocks()); $v(n, e.schema) ? (this.value = n.getAttribute('linkHref'), this.isEnabled = e.schema.checkAttribute(n, 'linkHref')) : (this.value = t.selection.getAttribute('linkHref'), this.isEnabled = e.schema.checkAttributeInSelection(t.selection, 'linkHref')); let r; const i = d(this.manualDecorators); try { for (i.s(); !(r = i.n()).done;) { const o = r.value; o.value = this._getDecoratorStateFromModel(o.id); } } catch (a) { i.e(a); } finally { i.f(); } } }, { key: 'execute', value(e) { const t = this; const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; const r = this.editor.model; const i = r.document.selection; const o = []; const a = []; for (const s in n)n[s] ? o.push(s) : a.push(s); r.change(((n) => { if (i.isCollapsed) { const s = i.getFirstPosition(); if (i.hasAttribute('linkHref')) { const l = yv(s, 'linkHref', i.getAttribute('linkHref'), r); n.setAttribute('linkHref', e, l), o.forEach(((e) => { n.setAttribute(e, !0, l); })), a.forEach(((e) => { n.removeAttribute(e, l); })), n.setSelection(n.createPositionAfter(l.end.nodeBefore)); } else if (e !== '') { const c = hr(i.getAttributes()); c.set('linkHref', e), o.forEach(((e) => { c.set(e, !0); })); const u = n.createText(e, c); r.insertContent(u, s), n.setSelection(n.createPositionAfter(u)); }['linkHref'].concat(o, a).forEach(((e) => { n.removeSelectionAttribute(e); })); } else { let h; const f = r.schema.getValidRanges(i.getRanges(), 'linkHref'); const m = []; const v = d(i.getSelectedBlocks()); try { for (v.s(); !(h = v.n()).done;) { const g = h.value; r.schema.checkAttribute(g, 'linkHref') && m.push(n.createRangeOn(g)); } } catch (x) { v.e(x); } finally { v.f(); } let p; const k = m.slice(); const b = d(f); try { for (b.s(); !(p = b.n()).done;) { const y = p.value; t._isRangeToUpdate(y, m) && k.push(y); } } catch (x) { b.e(x); } finally { b.f(); } let w; const _ = d(k); try { const E = function () { const t = w.value; n.setAttribute('linkHref', e, t), o.forEach(((e) => { n.setAttribute(e, !0, t); })), a.forEach(((e) => { n.removeAttribute(e, t); })); }; for (_.s(); !(w = _.n()).done;)E(); } catch (x) { _.e(x); } finally { _.f(); } } })); } }, { key: '_getDecoratorStateFromModel', value(e) { const t = this.editor.model; const n = t.document; const r = rd(n.selection.getSelectedBlocks()); return $v(r, t.schema) ? r.getAttribute(e) : n.selection.getAttribute(e); } }, { key: '_isRangeToUpdate', value(e, t) { let n; const r = d(t); try { for (r.s(); !(n = r.n()).done;) if (n.value.containsRange(e)) return !1; } catch (i) { r.e(i); } finally { r.f(); } return !0; } }]), n; }(dd)); const Kv = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = this.editor.model; const t = e.document; const n = rd(t.selection.getSelectedBlocks()); $v(n, e.schema) ? this.isEnabled = e.schema.checkAttribute(n, 'linkHref') : this.isEnabled = e.schema.checkAttributeInSelection(t.selection, 'linkHref'); } }, { key: 'execute', value() { const e = this.editor; const t = this.editor.model; const n = t.document.selection; const r = e.commands.get('link'); t.change(((e) => { let i; const o = n.isCollapsed ? [yv(n.getFirstPosition(), 'linkHref', n.getAttribute('linkHref'), t)] : n.getRanges(); const a = d(o); try { for (a.s(); !(i = a.n()).done;) { const s = i.value; if (e.removeAttribute('linkHref', s), r) { var l; const c = d(r.manualDecorators); try { for (c.s(); !(l = c.n()).done;) { const u = l.value; e.removeAttribute(u.id, s); } } catch (h) { c.e(h); } finally { c.f(); } } } } catch (h) { a.e(h); } finally { a.f(); } })); } }]), n; }(dd)); const Qv = function e(t) { const n = t.id; const r = t.label; const i = t.attributes; const o = t.defaultValue; f(this, e), this.id = n, this.set('value'), this.defaultValue = o, this.label = r, this.attributes = i; }; Qn(Qv, ki), n(78); const Jv = 'automatic'; const Zv = /^(https?:)?\/\//; const Xv = (function (e) {
            v(n, e); const t = g(n); function n(e) { let r; return f(this, n), r = t.call(this, e), e.config.define('link', { addTargetToExternalLinks: !1 }), r; } return m(n, null, [{ key: 'pluginName', get() { return 'LinkEditing'; } }, { key: 'requires', get() { return [vv, th, Pd]; } }]), m(n, [{ key: 'init', value() { const e = this.editor; e.model.schema.extend('$text', { allowAttributes: 'linkHref' }), e.conversion.for('dataDowncast').attributeToElement({ model: 'linkHref', view: qv }), e.conversion.for('editingDowncast').attributeToElement({ model: 'linkHref', view(e, t) { return qv(Gv(e), t); } }), e.conversion.for('upcast').elementToAttribute({ view: { name: 'a', attributes: { href: !0 } }, model: { key: 'linkHref', value(e) { return e.getAttribute('href'); } } }), e.commands.add('link', new Yv(e)), e.commands.add('unlink', new Kv(e)); const t = (function (e, t) { const n = { 'Open in a new tab': e('Open in a new tab'), Downloadable: e('Downloadable') }; return t.forEach(((e) => (e.label && n[e.label] && (e.label = n[e.label]), e))), t; }(e.t, (function (e) { const t = []; if (e) for (let n = 0, r = Object.entries(e); n < r.length; n++) { const i = u(r[n], 2); const o = i[0]; const a = i[1]; const s = { ...a, id: 'link'.concat(Bv(o)) }; t.push(s); } return t; }(e.config.get('link.decorators'))))); this._enableAutomaticDecorators(t.filter(((e) => e.mode === Jv))), this._enableManualDecorators(t.filter(((e) => e.mode === 'manual'))), e.plugins.get(vv).registerAttribute('linkHref'), (function (e, t, n, r) { const i = e.editing.view; const o = new Set(); i.document.registerPostFixer(((i) => { const a = e.model.document.selection; let s = !1; if (a.hasAttribute(t)) { let l; const c = yv(a.getFirstPosition(), t, a.getAttribute(t), e.model); const u = e.editing.mapper.toViewRange(c); const h = d(u.getItems()); try { for (h.s(); !(l = h.n()).done;) { const f = l.value; f.is('element', n) && !f.hasClass(r) && (i.addClass(r, f), o.add(f), s = !0); } } catch (m) { h.e(m); } finally { h.f(); } } return s; })), e.conversion.for('editingDowncast').add(((e) => { function t() { i.change(((e) => { let t; const n = d(o.values()); try { for (n.s(); !(t = n.n()).done;) { const i = t.value; e.removeClass(r, i), o.delete(i); } } catch (a) { n.e(a); } finally { n.f(); } })); }e.on('insert', t, { priority: 'highest' }), e.on('remove', t, { priority: 'highest' }), e.on('attribute', t, { priority: 'highest' }), e.on('selection', t, { priority: 'highest' }); })); }(e, 'linkHref', 'a', 'ck-link_selected')), this._enableInsertContentSelectionAttributesFixer(), this._enableClickingAfterLink(), this._enableTypingOverLink(), this._handleDeleteContentAfterLink(); } }, {
              key: '_enableAutomaticDecorators',
              value(e) {
                const t = this.editor; const n = t.commands.get('link').automaticDecorators; t.config.get('link.addTargetToExternalLinks') && n.add({
                  id: 'linkIsExternal', mode: Jv, callback(e) { return Zv.test(e); }, attributes: { target: '_blank', rel: 'noopener noreferrer' },
                }), n.add(e), n.length && t.conversion.for('downcast').add(n.getDispatcher());
              },
            }, { key: '_enableManualDecorators', value(e) { if (e.length) { const t = this.editor; const n = t.commands.get('link').manualDecorators; e.forEach(((e) => { t.model.schema.extend('$text', { allowAttributes: e.id }), n.add(new Qv(e)), t.conversion.for('downcast').attributeToElement({ model: e.id, view(t, r) { if (t) { const i = n.get(e.id).attributes; const o = r.createAttributeElement('a', i, { priority: 5 }); return r.setCustomProperty('link', !0, o), o; } } }), t.conversion.for('upcast').elementToAttribute({ view: { name: 'a', attributes: n.get(e.id).attributes }, model: { key: e.id } }); })); } } }, { key: '_enableInsertContentSelectionAttributesFixer', value() { const e = this.editor; const t = e.model; const n = t.document.selection; const r = e.commands.get('link'); this.listenTo(t, 'insertContent', (() => { const e = n.anchor.nodeBefore; const i = n.anchor.nodeAfter; n.hasAttribute('linkHref') && e && e.hasAttribute('linkHref') && (i && i.hasAttribute('linkHref') || t.change(((e) => { eg(e, r.manualDecorators); }))); }), { priority: 'low' }); } }, { key: '_enableClickingAfterLink', value() { const e = this.editor; const t = e.commands.get('link'); e.editing.view.addObserver(xf); let n = !1; this.listenTo(e.editing.view.document, 'mousedown', (() => { n = !0; })), this.listenTo(e.editing.view.document, 'selectionChange', (() => { if (n) { n = !1; const r = e.model.document.selection; if (r.isCollapsed && r.hasAttribute('linkHref')) { const i = r.getFirstPosition(); const o = yv(i, 'linkHref', r.getAttribute('linkHref'), e.model); (i.isTouching(o.start) || i.isTouching(o.end)) && e.model.change(((e) => { eg(e, t.manualDecorators); })); } } })); } }, { key: '_enableTypingOverLink', value() { let e; let t; const n = this.editor; const r = n.editing.view; this.listenTo(r.document, 'delete', (() => { t = !0; }), { priority: 'high' }), this.listenTo(n.model, 'deleteContent', (() => { const r = n.model.document.selection; r.isCollapsed || (t ? t = !1 : tg(n) && (function (e) { const t = e.document.selection; const n = t.getFirstPosition(); const r = t.getLastPosition(); const i = n.nodeAfter; if (!i) return !1; if (!i.is('$text')) return !1; if (!i.hasAttribute('linkHref')) return !1; const o = r.textNode || r.nodeBefore; return i === o || yv(n, 'linkHref', i.getAttribute('linkHref'), e).containsRange(e.createRange(n, r), !0); }(n.model)) && (e = r.getAttributes())); }), { priority: 'high' }), this.listenTo(n.model, 'insertContent', ((r, i) => { const o = u(i, 1)[0]; t = !1, tg(n) && e && (n.model.change(((t) => { let n; const r = d(e); try { for (r.s(); !(n = r.n()).done;) { const i = u(n.value, 2); const a = i[0]; const s = i[1]; t.setAttribute(a, s, o); } } catch (l) { r.e(l); } finally { r.f(); } })), e = null); }), { priority: 'high' }); } }, { key: '_handleDeleteContentAfterLink', value() { const e = this.editor; const t = e.model; const n = t.document.selection; const r = e.editing.view; const i = e.commands.get('link'); let o = !1; let a = !1; this.listenTo(r.document, 'delete', ((e, t) => { a = t.domEvent.keyCode === $i.backspace; }), { priority: 'high' }), this.listenTo(t, 'deleteContent', (() => { o = !1; const e = n.getFirstPosition(); const r = n.getAttribute('linkHref'); if (r) { const i = yv(e, 'linkHref', r, t); o = i.containsPosition(e) || i.end.isEqual(e); } }), { priority: 'high' }), this.listenTo(t, 'deleteContent', (() => { a && (a = !1, o || e.model.enqueueChange(((e) => { eg(e, i.manualDecorators); }))); }), { priority: 'low' }); } }]), n;
          }(sd)); function eg(e, t) { e.removeSelectionAttribute('linkHref'); let n; const r = d(t); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; e.removeSelectionAttribute(i.id); } } catch (o) { r.e(o); } finally { r.f(); } } function tg(e) { return e.plugins.get('Input').isInput(e.model.change(((e) => e.batch))); } const ng = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).domEventType = 'click', r; } return m(n, [{ key: 'onDomEvent', value(e) { this.fire(e.type, e); } }]), n; }(_a)); const rg = (n(80), (function (e) {
            v(n, e); const t = g(n); function n(e, r, i) {
              let o; f(this, n), o = t.call(this, e); const a = e.t; o.focusTracker = new Fc(), o.keystrokes = new Oc(), o.urlInputView = o._createUrlInput(i), o.saveButtonView = o._createButton(a('Save'), Lf, 'ck-button-save'), o.saveButtonView.type = 'submit', o.cancelButtonView = o._createButton(a('Cancel'), zf, 'ck-button-cancel', 'cancel'), o._manualDecoratorSwitches = o._createManualDecoratorSwitches(r), o.children = o._createFormChildren(r.manualDecorators), o._focusables = new Yc(), o._focusCycler = new Tu({
                focusables: o._focusables, focusTracker: o.focusTracker, keystrokeHandler: o.keystrokes, actions: { focusPrevious: 'shift + tab', focusNext: 'tab' },
              }); const s = ['ck', 'ck-link-form']; return r.manualDecorators.length && s.push('ck-link-form_layout-vertical'), o.setTemplate({ tag: 'form', attributes: { class: s, tabindex: '-1' }, children: o.children }), o;
            } return m(n, [{ key: 'getDecoratorSwitchesState', value() { return Array.from(this._manualDecoratorSwitches).reduce(((e, t) => (e[t.name] = t.isOn, e)), {}); } }, { key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this), Df({ view: this }), [this.urlInputView].concat(c(this._manualDecoratorSwitches), [this.saveButtonView, this.cancelButtonView]).forEach(((t) => { e._focusables.add(t), e.focusTracker.add(t.element); })), this.keystrokes.listenTo(this.element); } }, { key: 'focus', value() { this._focusCycler.focusFirst(); } }, {
              key: '_createUrlInput',
              value() {
                const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 'https://'; const { t } = this.locale; const
                  n = new Nf(this.locale, jf); return n.label = t('Link URL'), n.fieldView.placeholder = `${e}example.com`, n;
              },
            }, { key: '_createButton', value(e, t, n, r) { const i = new Fu(this.locale); return i.set({ label: e, icon: t, tooltip: !0 }), i.extendTemplate({ attributes: { class: n } }), r && i.delegate('execute').to(this, r), i; } }, { key: '_createManualDecoratorSwitches', value(e) { let t; const n = this; const r = this.createCollection(); const i = d(e.manualDecorators); try { const o = function () { const i = t.value; const o = new qu(n.locale); o.set({ name: i.id, label: i.label, withText: !0 }), o.bind('isOn').toMany([i, e], 'value', ((e, t) => (void 0 === t && void 0 === e ? i.defaultValue : e))), o.on('execute', (() => { i.set('value', !o.isOn); })), r.add(o); }; for (i.s(); !(t = i.n()).done;)o(); } catch (a) { i.e(a); } finally { i.f(); } return r; } }, { key: '_createFormChildren', value(e) { const t = this.createCollection(); if (t.add(this.urlInputView), e.length) { const n = new vu(); n.setTemplate({ tag: 'ul', children: this._manualDecoratorSwitches.map(((e) => ({ tag: 'li', children: [e], attributes: { class: ['ck', 'ck-list__item'] } }))), attributes: { class: ['ck', 'ck-reset', 'ck-list'] } }), t.add(n); } return t.add(this.saveButtonView), t.add(this.cancelButtonView), t; } }]), n;
          }(vu))); const ig = (n(82), (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; f(this, n), r = t.call(this, e); const i = e.t; return r.focusTracker = new Fc(), r.keystrokes = new Oc(), r.previewButtonView = r._createPreviewButton(), r.unlinkButtonView = r._createButton(i('Unlink'), '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>', 'unlink'), r.editButtonView = r._createButton(i('Edit link'), '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z"/></svg>', 'edit'), r.set('href'), r._focusables = new Yc(), r._focusCycler = new Tu({
                focusables: r._focusables, focusTracker: r.focusTracker, keystrokeHandler: r.keystrokes, actions: { focusPrevious: 'shift + tab', focusNext: 'tab' },
              }), r.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-link-actions'], tabindex: '-1' }, children: [r.previewButtonView, r.editButtonView, r.unlinkButtonView] }), r;
            } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this), [this.previewButtonView, this.editButtonView, this.unlinkButtonView].forEach(((t) => { e._focusables.add(t), e.focusTracker.add(t.element); })), this.keystrokes.listenTo(this.element); } }, { key: 'focus', value() { this._focusCycler.focusFirst(); } }, { key: '_createButton', value(e, t, n) { const r = new Fu(this.locale); return r.set({ label: e, icon: t, tooltip: !0 }), r.delegate('execute').to(this, n), r; } }, {
              key: '_createPreviewButton',
              value() {
                const e = new Fu(this.locale); const t = this.bindTemplate; const n = this.t; return e.set({ withText: !0, tooltip: n('Open link in new tab') }), e.extendTemplate({
                  attributes: {
                    class: ['ck', 'ck-link-actions__preview'], href: t.to('href', ((e) => e && Gv(e))), target: '_blank', rel: 'noopener noreferrer',
                  },
                }), e.bind('label').to(this, 'href', ((e) => e || n('This link has no URL'))), e.bind('isEnabled').to(this, 'href', ((e) => !!e)), e.template.tag = 'a', e.template.eventListeners = {}, e;
              },
            }]), n;
          }(vu))); const og = /^((\w+:(\/{2,})?)|(\W))/i; const ag = /[\w-]+@[\w-]+\.+[\w-]+/i; const sg = 'link-ui'; const lg = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; e.editing.view.addObserver(ng), this.actionsView = this._createActionsView(), this.formView = this._createFormView(), this._balloon = e.plugins.get(Bf), this._createToolbarLinkButton(), this._enableUserBalloonInteractions(), e.conversion.for('editingDowncast').markerToHighlight({ model: sg, view: { classes: ['ck-fake-link-selection'] } }), e.conversion.for('editingDowncast').markerToElement({ model: sg, view: { name: 'span', classes: ['ck-fake-link-selection', 'ck-fake-link-selection_collapsed'] } }); } }, { key: 'destroy', value() { o(a(n.prototype), 'destroy', this).call(this), this.formView.destroy(); } }, { key: '_createActionsView', value() { const e = this; const t = this.editor; const n = new ig(t.locale); const r = t.commands.get('link'); const i = t.commands.get('unlink'); return n.bind('href').to(r, 'value'), n.editButtonView.bind('isEnabled').to(r), n.unlinkButtonView.bind('isEnabled').to(i), this.listenTo(n, 'edit', (() => { e._addFormView(); })), this.listenTo(n, 'unlink', (() => { t.execute('unlink'), e._hideUI(); })), n.keystrokes.set('Esc', ((t, n) => { e._hideUI(), n(); })), n.keystrokes.set(Wv, ((t, n) => { e._addFormView(), n(); })), n; } }, { key: '_createFormView', value() { const e = this; const t = this.editor; const n = t.commands.get('link'); const r = t.config.get('link.defaultProtocol'); const i = new rg(t.locale, n, r); return i.urlInputView.fieldView.bind('value').to(n, 'value'), i.urlInputView.bind('isReadOnly').to(n, 'isEnabled', ((e) => !e)), i.saveButtonView.bind('isEnabled').to(n), this.listenTo(i, 'submit', (() => { const n = i.urlInputView.fieldView.element.value; const o = !!r && !og.test(n); const a = ag.test(n); const s = n && o ? (a ? 'mailto:' : r) + n : n; t.execute('link', s, i.getDecoratorSwitchesState()), e._closeFormView(); })), this.listenTo(i, 'cancel', (() => { e._closeFormView(); })), i.keystrokes.set('Esc', ((t, n) => { e._closeFormView(), n(); })), i; } }, { key: '_createToolbarLinkButton', value() { const e = this; const t = this.editor; const n = t.commands.get('link'); const r = t.t; t.keystrokes.set(Wv, ((t, n) => { n(), e._showUI(!0); })), t.ui.componentFactory.add('link', ((t) => { const i = new Fu(t); return i.isEnabled = !0, i.label = r('Link'), i.icon = '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>', i.keystroke = Wv, i.tooltip = !0, i.isToggleable = !0, i.bind('isEnabled').to(n, 'isEnabled'), i.bind('isOn').to(n, 'value', ((e) => !!e)), e.listenTo(i, 'execute', (() => e._showUI(!0))), i; })); } }, {
              key: '_enableUserBalloonInteractions',
              value() {
                const e = this; const t = this.editor.editing.view.document; this.listenTo(t, 'click', (() => { e._getSelectedLinkElement() && e._showUI(); })), this.editor.keystrokes.set('Tab', ((t, n) => { e._areActionsVisible && !e.actionsView.focusTracker.isFocused && (e.actionsView.focus(), n()); }), { priority: 'high' }), this.editor.keystrokes.set('Esc', ((t, n) => { e._isUIVisible && (e._hideUI(), n()); })), Gu({
                  emitter: this.formView, activator() { return e._isUIInPanel; }, contextElements: [this._balloon.view.element], callback() { return e._hideUI(); },
                });
              },
            }, { key: '_addActionsView', value() { this._areActionsInPanel || this._balloon.add({ view: this.actionsView, position: this._getBalloonPositionData() }); } }, { key: '_addFormView', value() { if (!this._isFormInPanel) { const e = this.editor.commands.get('link'); this._balloon.add({ view: this.formView, position: this._getBalloonPositionData() }), this._balloon.visibleView === this.formView && this.formView.urlInputView.fieldView.select(), this.formView.urlInputView.fieldView.element.value = e.value || ''; } } }, { key: '_closeFormView', value() { const e = this.editor.commands.get('link'); e.restoreManualDecoratorStates(), void 0 !== e.value ? this._removeFormView() : this._hideUI(); } }, { key: '_removeFormView', value() { this._isFormInPanel && (this.formView.saveButtonView.focus(), this._balloon.remove(this.formView), this.editor.editing.view.focus(), this._hideFakeVisualSelection()); } }, { key: '_showUI', value() { const e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; this._getSelectedLinkElement() ? (this._areActionsVisible ? this._addFormView() : this._addActionsView(), e && this._balloon.showStack('main')) : (this._addActionsView(), e && this._balloon.showStack('main'), this._addFormView(), this._showFakeVisualSelection()), this._startUpdatingUI(); } }, { key: '_hideUI', value() { if (this._isUIInPanel) { const e = this.editor; this.stopListening(e.ui, 'update'), this.stopListening(this._balloon, 'change:visibleView'), e.editing.view.focus(), this._removeFormView(), this._balloon.remove(this.actionsView), this._hideFakeVisualSelection(); } } }, { key: '_startUpdatingUI', value() { const e = this; const t = this.editor; const n = t.editing.view.document; let r = this._getSelectedLinkElement(); let i = a(); const o = function () { const t = e._getSelectedLinkElement(); const n = a(); r && !t || !r && n !== i ? e._hideUI() : e._isUIVisible && e._balloon.updatePosition(e._getBalloonPositionData()), r = t, i = n; }; function a() { return n.selection.focus.getAncestors().reverse().find(((e) => e.is('element'))); } this.listenTo(t.ui, 'update', o), this.listenTo(this._balloon, 'change:visibleView', o); } }, { key: '_getBalloonPositionData', value() { const e = this.editor.editing.view; const t = e.document; const n = this._getSelectedLinkElement(); return { target: n ? e.domConverter.mapViewToDom(n) : e.domConverter.viewRangeToDom(t.selection.getFirstRange()) }; } }, { key: '_getSelectedLinkElement', value() { const e = this.editor.editing.view; const t = e.document.selection; if (t.isCollapsed) return cg(t.getFirstPosition()); const n = t.getFirstRange().getTrimmed(); const r = cg(n.start); const i = cg(n.end); return r && r == i && e.createRangeIn(r).getTrimmed().isEqual(n) ? r : null; } }, { key: '_showFakeVisualSelection', value() { const e = this.editor.model; e.change(((t) => { e.markers.has(sg) ? t.updateMarker(sg, { range: e.document.selection.getFirstRange() }) : t.addMarker(sg, { usingOperation: !1, affectsData: !1, range: e.document.selection.getFirstRange() }); })); } }, { key: '_hideFakeVisualSelection', value() { const e = this.editor.model; e.markers.has(sg) && e.change(((e) => { e.removeMarker(sg); })); } }, { key: '_isFormInPanel', get() { return this._balloon.hasView(this.formView); } }, { key: '_areActionsInPanel', get() { return this._balloon.hasView(this.actionsView); } }, { key: '_areActionsVisible', get() { return this._balloon.visibleView === this.actionsView; } }, { key: '_isUIInPanel', get() { return this._isFormInPanel || this._areActionsInPanel; } }, { key: '_isUIVisible', get() { return this._balloon.visibleView == this.formView || this._areActionsVisible; } }], [{ key: 'requires', get() { return [Bf]; } }, { key: 'pluginName', get() { return 'LinkUI'; } }]), n;
          }(sd)); function cg(e) { return e.getAncestors().find(((e) => (function (e) { return e.is('attributeElement') && !!e.getCustomProperty('link'); }(e)))); } const ug = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [Xv, lg]; } }, { key: 'pluginName', get() { return 'Link'; } }]), n; }(sd)); const dg = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e)).type = r, i; } return m(n, [{ key: 'refresh', value() { this.value = this._getValue(), this.isEnabled = this._checkEnabled(); } }, { key: 'execute', value() { const e = this; const t = this.editor.model; const n = t.document; const r = Array.from(n.selection.getSelectedBlocks()).filter(((e) => fg(e, t.schema))); const i = !0 === this.value; t.change(((t) => { if (i) { for (var n = r[r.length - 1].nextSibling, o = Number.POSITIVE_INFINITY, a = []; n && n.name == 'listItem' && n.getAttribute('listIndent') !== 0;) { const s = n.getAttribute('listIndent'); s < o && (o = s); const l = s - o; a.push({ element: n, listIndent: l }), n = n.nextSibling; }a = a.reverse(); let c; const u = d(a); try { for (u.s(); !(c = u.n()).done;) { const h = c.value; t.setAttribute('listIndent', h.listIndent, h.element); } } catch (y) { u.e(y); } finally { u.f(); } } if (!i) { let f; let m = Number.POSITIVE_INFINITY; const v = d(r); try { for (v.s(); !(f = v.n()).done;) { const g = f.value; g.is('element', 'listItem') && g.getAttribute('listIndent') < m && (m = g.getAttribute('listIndent')); } } catch (y) { v.e(y); } finally { v.f(); }hg(r, !0, m = m === 0 ? 1 : m), hg(r, !1, m); } let p; const k = d(r.reverse()); try { for (k.s(); !(p = k.n()).done;) { const b = p.value; i && b.name == 'listItem' ? t.rename(b, 'paragraph') : i || b.name == 'listItem' ? i || b.name != 'listItem' || b.getAttribute('listType') == e.type || t.setAttribute('listType', e.type, b) : (t.setAttributes({ listType: e.type, listIndent: 0 }, b), t.rename(b, 'listItem')); } } catch (y) { k.e(y); } finally { k.f(); } })); } }, { key: '_getValue', value() { const e = rd(this.editor.model.document.selection.getSelectedBlocks()); return !!e && e.is('element', 'listItem') && e.getAttribute('listType') == this.type; } }, { key: '_checkEnabled', value() { if (this.value) return !0; const e = this.editor.model.document.selection; const t = this.editor.model.schema; const n = rd(e.getSelectedBlocks()); return !!n && fg(n, t); } }]), n; }(dd)); function hg(e, t, n) { const r = t ? e[0] : e[e.length - 1]; if (r.is('element', 'listItem')) for (let i = r[t ? 'previousSibling' : 'nextSibling'], o = r.getAttribute('listIndent'); i && i.is('element', 'listItem') && i.getAttribute('listIndent') >= n;)o > i.getAttribute('listIndent') && (o = i.getAttribute('listIndent')), i.getAttribute('listIndent') == o && e[t ? 'unshift' : 'push'](i), i = i[t ? 'previousSibling' : 'nextSibling']; } function fg(e, t) { return t.checkChild(e.parent, 'listItem') && !t.isObject(e); } const mg = (function (e) { v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e))._indentBy = r == 'forward' ? 1 : -1, i; } return m(n, [{ key: 'refresh', value() { this.isEnabled = this._checkEnabled(); } }, { key: 'execute', value() { const e = this; const t = this.editor.model; const n = t.document; let r = Array.from(n.selection.getSelectedBlocks()); t.change(((t) => { for (let n = r[r.length - 1], i = n.nextSibling; i && i.name == 'listItem' && i.getAttribute('listIndent') > n.getAttribute('listIndent');)r.push(i), i = i.nextSibling; e._indentBy < 0 && (r = r.reverse()); let o; const a = d(r); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; const l = s.getAttribute('listIndent') + e._indentBy; l < 0 ? t.rename(s, 'paragraph') : t.setAttribute('listIndent', l, s); } } catch (c) { a.e(c); } finally { a.f(); } })); } }, { key: '_checkEnabled', value() { const e = rd(this.editor.model.document.selection.getSelectedBlocks()); if (!e || !e.is('element', 'listItem')) return !1; if (this._indentBy > 0) { for (let t = e.getAttribute('listIndent'), n = e.getAttribute('listType'), r = e.previousSibling; r && r.is('element', 'listItem') && r.getAttribute('listIndent') >= t;) { if (r.getAttribute('listIndent') == t) return r.getAttribute('listType') == n; r = r.previousSibling; } return !1; } return !0; } }]), n; }(dd)); function vg(e, t) { const n = t.mapper; const r = t.writer; const i = e.getAttribute('listType') == 'numbered' ? 'ol' : 'ul'; const o = (function (e) { const t = e.createContainerElement('li'); return t.getFillerOffset = wg, t; }(r)); const a = r.createContainerElement(i, null); return r.insert(r.createPositionAt(a, 0), o), n.bindElements(e, o), o; } function gg(e, t, n, r) { const i = t.parent; const o = n.mapper; const a = n.writer; let s = o.toViewPosition(r.createPositionBefore(e)); const l = bg(e.previousSibling, { sameIndent: !0, smallerIndent: !0, listIndent: e.getAttribute('listIndent') }); const c = e.previousSibling; if (l && l.getAttribute('listIndent') == e.getAttribute('listIndent')) { const u = o.toViewElement(l); s = a.breakContainer(a.createPositionAfter(u)); } else if (c && c.name == 'listItem') { s = o.toViewPosition(r.createPositionAt(c, 'end')); const h = o.findMappedViewAncestor(s); const f = (function (e) { let t; const n = d(e.getChildren()); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; if (r.name == 'ul' || r.name == 'ol') return r; } } catch (i) { n.e(i); } finally { n.f(); } return null; }(h)); s = f ? a.createPositionBefore(f) : a.createPositionAt(h, 'end'); } else s = o.toViewPosition(r.createPositionBefore(e)); if (s = kg(s), a.insert(s, i), c && c.name == 'listItem') { let m; const v = o.toViewElement(c); const g = a.createRange(a.createPositionAt(v, 0), s).getWalker({ ignoreElementEnd: !0 }); const p = d(g); try { for (p.s(); !(m = p.n()).done;) { const k = m.value; if (k.item.is('element', 'li')) { const b = a.breakContainer(a.createPositionBefore(k.item)); const y = k.item.parent; const w = a.createPositionAt(t, 'end'); pg(a, w.nodeBefore, w.nodeAfter), a.move(a.createRangeOn(y), w), g.position = b; } } } catch (A) { p.e(A); } finally { p.f(); } } else { const _ = i.nextSibling; if (_ && (_.is('element', 'ul') || _.is('element', 'ol'))) { let E; let x = null; const T = d(_.getChildren()); try { for (T.s(); !(E = T.n()).done;) { const C = E.value; const S = o.toModelElement(C); if (!(S && S.getAttribute('listIndent') > e.getAttribute('listIndent'))) break; x = C; } } catch (A) { T.e(A); } finally { T.f(); }x && (a.breakContainer(a.createPositionAfter(x)), a.move(a.createRangeOn(x.parent), a.createPositionAt(t, 'end'))); } }pg(a, i, i.nextSibling), pg(a, i.previousSibling, i); } function pg(e, t, n) { return !t || !n || t.name != 'ul' && t.name != 'ol' || t.name != n.name || t.getAttribute('class') !== n.getAttribute('class') ? null : e.mergeContainers(e.createPositionAfter(t)); } function kg(e) { return e.getLastMatchingPosition(((e) => e.item.is('uiElement'))); } function bg(e, t) { for (let n = !!t.sameIndent, r = !!t.smallerIndent, i = t.listIndent, o = e; o && o.name == 'listItem';) { const a = o.getAttribute('listIndent'); if (n && i == a || r && i > a) return o; o = o.previousSibling; } return null; } function yg(e, t, n, r) {
            e.ui.componentFactory.add(t, ((i) => {
              const o = e.commands.get(t); const a = new Fu(i); return a.set({
                label: n, icon: r, tooltip: !0, isToggleable: !0,
              }), a.bind('isOn', 'isEnabled').to(o, 'value', 'isEnabled'), a.on('execute', (() => { e.execute(t), e.editing.view.focus(); })), a;
            }));
          } function wg() { const e = !this.isEmpty && (this.getChild(0).name == 'ul' || this.getChild(0).name == 'ol'); return this.isEmpty || e ? 0 : hi.call(this); } function _g(e) { return function (t, n, r) { const i = r.consumable; if (i.test(n.item, 'insert') && i.test(n.item, 'attribute:listType') && i.test(n.item, 'attribute:listIndent')) { i.consume(n.item, 'insert'), i.consume(n.item, 'attribute:listType'), i.consume(n.item, 'attribute:listIndent'); const o = n.item; gg(o, vg(o, r), r, e); } }; } function Eg(e, t, n) { if (n.consumable.consume(t.item, 'attribute:listType')) { const r = n.mapper.toViewElement(t.item); const i = n.writer; i.breakContainer(i.createPositionBefore(r)), i.breakContainer(i.createPositionAfter(r)); const o = r.parent; const a = t.attributeNewValue == 'numbered' ? 'ol' : 'ul'; i.rename(a, o); } } function xg(e, t, n) { const r = n.mapper.toViewElement(t.item).parent; const i = n.writer; pg(i, r, r.nextSibling), pg(i, r.previousSibling, r); let o; const a = d(t.item.getChildren()); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; n.consumable.consume(s, 'insert'); } } catch (l) { a.e(l); } finally { a.f(); } } function Tg(e, t, n) { if (t.item.name != 'listItem') { for (var r = n.mapper.toViewPosition(t.range.start), i = n.writer, o = []; (r.parent.name == 'ul' || r.parent.name == 'ol') && (r = i.breakContainer(r)).parent.name == 'li';) { const a = r; const s = i.createPositionAt(r.parent, 'end'); if (!a.isEqual(s)) { const l = i.remove(i.createRange(a, s)); o.push(l); }r = i.createPositionAfter(r.parent); } if (o.length > 0) { for (let c = 0; c < o.length; c++) { const u = r.nodeBefore; if (r = i.insert(r, o[c]).end, c > 0) { const d = pg(i, u, u.nextSibling); d && d.parent == u && r.offset--; } }pg(i, r.nodeBefore, r.nodeAfter); } } } function Cg(e, t, n) { const r = n.mapper.toViewPosition(t.position); const i = r.nodeBefore; const o = r.nodeAfter; pg(n.writer, i, o); } function Sg(e, t, n) { if (n.consumable.consume(t.viewItem, { name: !0 })) { const r = n.writer; const i = r.createElement('listItem'); const o = (function (e) { for (var t = 0, n = e.parent; n;) { if (n.is('element', 'li'))t++; else { const r = n.previousSibling; r && r.is('element', 'li') && t++; }n = n.parent; } return t; }(t.viewItem)); r.setAttribute('listIndent', o, i); const a = t.viewItem.parent && t.viewItem.parent.name == 'ol' ? 'numbered' : 'bulleted'; r.setAttribute('listType', a, i); const s = n.splitToAllowedParent(i, t.modelCursor); if (!s) return; r.insert(i, s.position); const l = (function (e, t, n) { let r; const i = n.writer; const o = n.schema; let a = i.createPositionAfter(e); const s = d(t); try { for (s.s(); !(r = s.n()).done;) { const l = r.value; if (l.name == 'ul' || l.name == 'ol')a = n.convertItem(l, a).modelCursor; else { const c = n.convertItem(l, i.createPositionAt(e, 'end')); const u = c.modelRange.start.nodeAfter; u && u.is('element') && !o.checkChild(e, u.name) && (e = c.modelCursor.parent.is('element', 'listItem') ? c.modelCursor.parent : Mg(c.modelCursor), a = i.createPositionAfter(e)); } } } catch (h) { s.e(h); } finally { s.f(); } return a; }(i, t.viewItem.getChildren(), n)); t.modelRange = r.createRange(t.modelCursor, l), s.cursorParent ? t.modelCursor = r.createPositionAt(s.cursorParent, 0) : t.modelCursor = t.modelRange.end; } } function Ag(e, t, n) { if (n.consumable.test(t.viewItem, { name: !0 })) for (let r = 0, i = Array.from(t.viewItem.getChildren()); r < i.length; r++) { const o = i[r]; !o.is('element', 'li') && !Rg(o) && o._remove(); } } function Pg(e, t, n) { if (n.consumable.test(t.viewItem, { name: !0 })) { if (t.viewItem.childCount === 0) return; let r; const i = c(t.viewItem.getChildren()); let o = !1; let a = !0; const s = d(i); try { for (s.s(); !(r = s.n()).done;) { const l = r.value; o && !Rg(l) && l._remove(), l.is('$text') ? (a && (l._data = l.data.replace(/^\s+/, '')), l.nextSibling && !Rg(l.nextSibling) || (l._data = l.data.replace(/\s+$/, ''))) : Rg(l) && (o = !0), a = !1; } } catch (u) { s.e(u); } finally { s.f(); } } } function Og(e) { return function (t, n) { if (!n.isPhantom) { const r = n.modelPosition.nodeBefore; if (r && r.is('element', 'listItem')) { let i; const o = n.mapper.toViewElement(r); const a = o.getAncestors().find(Rg); const s = e.createPositionAt(o, 0).getWalker(); const l = d(s); try { for (l.s(); !(i = l.n()).done;) { const c = i.value; if (c.type == 'elementStart' && c.item.is('element', 'li')) { n.viewPosition = c.previousPosition; break; } if (c.type == 'elementEnd' && c.item == a) { n.viewPosition = c.nextPosition; break; } } } catch (u) { l.e(u); } finally { l.f(); } } } }; } function Ig(e, t) { let n; const r = u(t, 2); const i = r[0]; const o = r[1]; let a = i.is('documentFragment') ? i.getChild(0) : i; if (n = o ? this.createSelection(o) : this.document.selection, a && a.is('element', 'listItem')) { const s = n.getFirstPosition(); let l = null; if (s.parent.is('element', 'listItem') ? l = s.parent : s.nodeBefore && s.nodeBefore.is('element', 'listItem') && (l = s.nodeBefore), l) { const c = l.getAttribute('listIndent'); if (c > 0) for (;a && a.is('element', 'listItem');)a._setAttribute('listIndent', a.getAttribute('listIndent') + c), a = a.nextSibling; } } } function Mg(e) { let t; const n = new ss({ startPosition: e }); do { t = n.next(); } while (!t.value.item.is('element', 'listItem')); return t.value.item; } function Ng(e, t, n, r, i, o) {
            let a; const s = bg(t.nodeBefore, {
              sameIndent: !0, smallerIndent: !0, listIndent: e, foo: 'b',
            }); const l = i.mapper; const u = i.writer; const d = s ? s.getAttribute('listIndent') : null; if (s) if (d == e) { const h = l.toViewElement(s).parent; a = u.createPositionAfter(h); } else { const f = o.createPositionAt(s, 'end'); a = l.toViewPosition(f); } else a = n; a = kg(a); for (let m = 0, v = c(r.getChildren()); m < v.length; m++) { const g = v[m]; Rg(g) && (a = u.move(u.createRangeOn(g), a).end, pg(u, g, g.nextSibling), pg(u, g.previousSibling, g)); }
          } function Rg(e) { return e.is('element', 'ol') || e.is('element', 'ul'); } const jg = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor; t.model.schema.register('listItem', { inheritAllFrom: '$block', allowAttributes: ['listType', 'listIndent'] }); const n = t.data; const r = t.editing; t.model.document.registerPostFixer(((e) => (function (e, t) { let n; const r = e.document.differ.getChanges(); const i = new Map(); let o = !1; const a = d(r); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; if (s.type == 'insert' && s.name == 'listItem')v(s.position); else if (s.type == 'insert' && s.name != 'listItem') { if (s.name != '$text') { const l = s.position.nodeAfter; l.hasAttribute('listIndent') && (t.removeAttribute('listIndent', l), o = !0), l.hasAttribute('listType') && (t.removeAttribute('listType', l), o = !0); var c; const u = d(Array.from(e.createRangeIn(l)).filter(((e) => e.item.is('element', 'listItem')))); try { for (u.s(); !(c = u.n()).done;)v(c.value.previousPosition); } catch (k) { u.e(k); } finally { u.f(); } }v(s.position.getShiftedBy(s.length)); } else s.type == 'remove' && s.name == 'listItem' ? v(s.position) : (s.type == 'attribute' && s.attributeKey == 'listIndent' || s.type == 'attribute' && s.attributeKey == 'listType') && v(s.range.start); } } catch (k) { a.e(k); } finally { a.f(); } let h; const f = d(i.values()); try { for (f.s(); !(h = f.n()).done;) { const m = h.value; g(m), p(m); } } catch (k) { f.e(k); } finally { f.f(); } return o; function v(e) { const t = e.nodeBefore; if (t && t.is('element', 'listItem')) { let n = t; if (i.has(n)) return; for (let r = n.previousSibling; r && r.is('element', 'listItem'); r = n.previousSibling) if (n = r, i.has(n)) return; i.set(t, n); } else { const o = e.nodeAfter; o && o.is('element', 'listItem') && i.set(o, o); } } function g(e) { for (let n = 0, r = null; e && e.is('element', 'listItem');) { const i = e.getAttribute('listIndent'); if (i > n) { let a = void 0; r === null ? (r = i - n, a = n) : (r > i && (r = i), a = i - r), t.setAttribute('listIndent', a, e), o = !0; } else r = null, n = e.getAttribute('listIndent') + 1; e = e.nextSibling; } } function p(e) { for (let n = [], r = null; e && e.is('element', 'listItem');) { const i = e.getAttribute('listIndent'); if (r && r.getAttribute('listIndent') > i && (n = n.slice(0, i + 1)), i != 0) if (n[i]) { const a = n[i]; e.getAttribute('listType') != a && (t.setAttribute('listType', a, e), o = !0); } else n[i] = e.getAttribute('listType'); r = e, e = e.nextSibling; } } }(t.model, e)))), r.mapper.registerViewToModelLength('li', Dg), n.mapper.registerViewToModelLength('li', Dg), r.mapper.on('modelToViewPosition', Og(r.view)), r.mapper.on('viewToModelPosition', (function (e) { return function (t, n) { const r = n.viewPosition; const i = r.parent; const o = n.mapper; if (i.name == 'ul' || i.name == 'ol') { if (r.isAtEnd) { const a = o.toModelElement(r.nodeBefore); const s = o.getModelLength(r.nodeBefore); n.modelPosition = e.createPositionBefore(a).getShiftedBy(s); } else { const l = o.toModelElement(r.nodeAfter); n.modelPosition = e.createPositionBefore(l); }t.stop(); } else if (i.name == 'li' && r.nodeBefore && (r.nodeBefore.name == 'ul' || r.nodeBefore.name == 'ol')) { for (var c = o.toModelElement(i), u = 1, d = r.nodeBefore; d && Rg(d);)u += o.getModelLength(d), d = d.previousSibling; n.modelPosition = e.createPositionBefore(c).getShiftedBy(u), t.stop(); } }; }(t.model))), n.mapper.on('modelToViewPosition', Og(r.view)), t.conversion.for('editingDowncast').add(((e) => { e.on('insert', Tg, { priority: 'high' }), e.on('insert:listItem', _g(t.model)), e.on('attribute:listType:listItem', Eg, { priority: 'high' }), e.on('attribute:listType:listItem', xg, { priority: 'low' }), e.on('attribute:listIndent:listItem', (function (e) { return function (t, n, r) { if (r.consumable.consume(n.item, 'attribute:listIndent')) { const i = r.mapper.toViewElement(n.item); const o = r.writer; o.breakContainer(o.createPositionBefore(i)), o.breakContainer(o.createPositionAfter(i)); const a = i.parent; const s = a.previousSibling; const l = o.createRangeOn(a); o.remove(l), s && s.nextSibling && pg(o, s, s.nextSibling), Ng(n.attributeOldValue + 1, n.range.start, l.start, i, r, e), gg(n.item, i, r, e); let c; const u = d(n.item.getChildren()); try { for (u.s(); !(c = u.n()).done;) { const h = c.value; r.consumable.consume(h, 'insert'); } } catch (f) { u.e(f); } finally { u.f(); } } }; }(t.model))), e.on('remove:listItem', (function (e) { return function (t, n, r) { const i = r.mapper.toViewPosition(n.position).getLastMatchingPosition(((e) => !e.item.is('element', 'li'))).nodeAfter; const o = r.writer; o.breakContainer(o.createPositionBefore(i)), o.breakContainer(o.createPositionAfter(i)); const a = i.parent; const s = a.previousSibling; const l = o.createRangeOn(a); const c = o.remove(l); s && s.nextSibling && pg(o, s, s.nextSibling), Ng(r.mapper.toModelElement(i).getAttribute('listIndent') + 1, n.position, l.start, i, r, e); let u; const h = d(o.createRangeIn(c).getItems()); try { for (h.s(); !(u = h.n()).done;) { const f = u.value; r.mapper.unbindViewElement(f); } } catch (m) { h.e(m); } finally { h.f(); }t.stop(); }; }(t.model))), e.on('remove', Cg, { priority: 'low' }); })), t.conversion.for('dataDowncast').add(((e) => { e.on('insert', Tg, { priority: 'high' }), e.on('insert:listItem', _g(t.model)); })), t.conversion.for('upcast').add(((e) => { e.on('element:ul', Ag, { priority: 'high' }), e.on('element:ol', Ag, { priority: 'high' }), e.on('element:li', Pg, { priority: 'high' }), e.on('element:li', Sg); })), t.model.on('insertContent', Ig, { priority: 'high' }), t.commands.add('numberedList', new dg(t, 'numbered')), t.commands.add('bulletedList', new dg(t, 'bulleted')), t.commands.add('indentList', new mg(t, 'forward')), t.commands.add('outdentList', new mg(t, 'backward')); const i = r.view.document; this.listenTo(i, 'enter', ((t, n) => { const r = e.editor.model.document; const i = r.selection.getLastPosition().parent; r.selection.isCollapsed && i.name == 'listItem' && i.isEmpty && (e.editor.execute('outdentList'), n.preventDefault(), t.stop()); })), this.listenTo(i, 'delete', ((t, n) => { if (n.direction === 'backward') { const r = e.editor.model.document.selection; if (r.isCollapsed) { const i = r.getFirstPosition(); if (i.isAtStart) { const o = i.parent; o.name === 'listItem' && (o.previousSibling && o.previousSibling.name === 'listItem' || (e.editor.execute('outdentList'), n.preventDefault(), t.stop())); } } } }), { priority: 'high' }); const o = function (t) { return function (n, r) { e.editor.commands.get(t).isEnabled && (e.editor.execute(t), r()); }; }; t.keystrokes.set('Tab', o('indentList')), t.keystrokes.set('Shift+Tab', o('outdentList')); } }, { key: 'afterInit', value() { const e = this.editor.commands; const t = e.get('indent'); const n = e.get('outdent'); t && t.registerChildCommand(e.get('indentList')), n && n.registerChildCommand(e.get('outdentList')); } }], [{ key: 'pluginName', get() { return 'ListEditing'; } }, { key: 'requires', get() { return [Mh]; } }]), n; }(sd)); function Dg(e) { let t; let n = 1; const r = d(e.getChildren()); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; if (i.name == 'ul' || i.name == 'ol') { var o; const a = d(i.getChildren()); try { for (a.s(); !(o = a.n()).done;)n += Dg(o.value); } catch (s) { a.e(s); } finally { a.f(); } } } } catch (s) { r.e(s); } finally { r.f(); } return n; } const Lg = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor.t; yg(this.editor, 'numberedList', e('Numbered List'), '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>'), yg(this.editor, 'bulletedList', e('Bulleted List'), '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>'); } }]), n; }(sd)); const zg = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [jg, Lg]; } }, { key: 'pluginName', get() { return 'List'; } }]), n; }(sd)); function Fg(e, t) { return function (e) { e.on('attribute:url:media', n); }; function n(n, r, i) { if (i.consumable.consume(r.item, n.name)) { const o = r.attributeNewValue; const a = i.writer; const s = i.mapper.toViewElement(r.item); const l = c(s.getChildren()).find(((e) => e.getCustomProperty('media-content'))); a.remove(l); const u = e.getMediaViewElement(a, o, t); a.insert(a.createPositionAt(s, 0), u); } } } function Vg(e, t, n, r) { const i = e.createContainerElement('figure', { class: 'media' }); return e.insert(e.createPositionAt(i, 0), t.getMediaViewElement(e, n, r)), i; } function Bg(e) { const t = e.getSelectedElement(); return t && t.is('element', 'media') ? t : null; } function Ug(e, t, n) { e.change(((r) => { const i = r.createElement('media', { url: t }); e.insertContent(i, n), r.setSelection(i, 'on'); })); } const Hg = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = this.editor.model; const t = e.document.selection; const n = e.schema; const r = t.getFirstPosition(); const i = Bg(t); let o = r.parent; o != o.root && (o = o.parent), this.value = i ? i.getAttribute('url') : null, this.isEnabled = n.checkChild(o, 'media'); } }, { key: 'execute', value(e) { const t = this.editor.model; const n = t.document.selection; const r = Bg(n); if (r)t.change(((t) => { t.setAttribute('url', e, r); })); else { const i = df(n, t); Ug(t, e, i); } } }]), n; }(dd)); const Wg = (function () { function e(t, n) { f(this, e); const r = n.providers; const i = n.extraProviders || []; const o = new Set(n.removeProviders); const a = r.concat(i).filter(((e) => { const t = e.name; return t ? !o.has(t) : (console.warn(Object(Ln.a)('media-embed-no-provider-name: The configured media provider has no name and cannot be used.'), { provider: e }), !1); })); this.locale = t, this.providerDefinitions = a; } return m(e, [{ key: 'hasMedia', value(e) { return !!this._getMedia(e); } }, { key: 'getMediaViewElement', value(e, t, n) { return this._getMedia(t).getViewElement(e, n); } }, { key: '_getMedia', value(e) { if (!e) return new qg(this.locale); e = e.trim(); let t; const n = d(this.providerDefinitions); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; const i = r.html; let o = r.url; Array.isArray(o) || (o = [o]); var a; const s = d(o); try { for (s.s(); !(a = s.n()).done;) { const l = a.value; const c = this._getUrlMatches(e, l); if (c) return new qg(this.locale, e, c, i); } } catch (u) { s.e(u); } finally { s.f(); } } } catch (u) { n.e(u); } finally { n.f(); } return null; } }, { key: '_getUrlMatches', value(e, t) { let n = e.match(t); if (n) return n; let r = e.replace(/^https?:\/\//, ''); return (n = r.match(t)) ? n : (n = (r = r.replace(/^www\./, '')).match(t)) || null; } }]), e; }()); var qg = (function () {
            function e(t, n, r, i) { f(this, e), this.url = this._getValidUrl(n), this._t = t.t, this._match = r, this._previewRenderer = i; } return m(e, [{ key: 'getViewElement', value(e, t) { let n; const r = {}; if (t.renderForEditingView || t.renderMediaPreview && this.url && this._previewRenderer) { this.url && (r['data-oembed-url'] = this.url), t.renderForEditingView && (r.class = 'ck-media__wrapper'); const i = this._getPreviewHtml(t); n = e.createRawElement('div', r, ((e) => { e.innerHTML = i; })); } else this.url && (r.url = this.url), n = e.createEmptyElement('oembed', r); return e.setCustomProperty('media-content', !0, n), n; } }, { key: '_getPreviewHtml', value(e) { return this._previewRenderer ? this._previewRenderer(this._match) : this.url && e.renderForEditingView ? this._getPlaceholderHtml() : ''; } }, {
              key: '_getPlaceholderHtml',
              value() {
                const e = new zu(); const
                  t = new Lu(); return e.text = this._t('Open media in new tab'), t.content = '<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>', t.viewBox = '0 0 64 42', new Qc({
                  tag: 'div',
                  attributes: { class: 'ck ck-reset_all ck-media__placeholder' },
                  children: [{ tag: 'div', attributes: { class: 'ck-media__placeholder__icon' }, children: [t] }, {
                    tag: 'a',
                    attributes: {
                      class: 'ck-media__placeholder__url', target: '_blank', rel: 'noopener noreferrer', href: this.url,
                    },
                    children: [{ tag: 'span', attributes: { class: 'ck-media__placeholder__url__text' }, children: [this.url] }, e],
                  }],
                }).render().outerHTML;
              },
            }, { key: '_getValidUrl', value(e) { return e ? e.match(/^https?/) ? e : `https://${e}` : null; } }]), e;
          }()); const Gg = (n(84), (function (e) {
            v(n, e); const t = g(n); function n(e) { let r; return f(this, n), r = t.call(this, e), e.config.define('mediaEmbed', { providers: [{ name: 'dailymotion', url: /^dailymotion\.com\/video\/(\w+)/, html(e) { const t = e[1]; return `<div style="position: relative; padding-bottom: 100%; height: 0; ">${'<iframe src="https://www.dailymotion.com/embed/video/'.concat(t, '" ')}style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`; } }, { name: 'spotify', url: [/^open\.spotify\.com\/(artist\/\w+)/, /^open\.spotify\.com\/(album\/\w+)/, /^open\.spotify\.com\/(track\/\w+)/], html(e) { const t = e[1]; return `<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;">${'<iframe src="https://open.spotify.com/embed/'.concat(t, '" ')}style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`; } }, { name: 'youtube', url: [/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/, /^(?:m\.)?youtube\.com\/v\/([\w-]+)/, /^youtube\.com\/embed\/([\w-]+)/, /^youtu\.be\/([\w-]+)/], html(e) { const t = e[1]; return `<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">${'<iframe src="https://www.youtube.com/embed/'.concat(t, '" ')}style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`; } }, { name: 'vimeo', url: [/^vimeo\.com\/(\d+)/, /^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/, /^vimeo\.com\/album\/[^/]+\/video\/(\d+)/, /^vimeo\.com\/channels\/[^/]+\/(\d+)/, /^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/, /^vimeo\.com\/ondemand\/[^/]+\/(\d+)/, /^player\.vimeo\.com\/video\/(\d+)/], html(e) { const t = e[1]; return `<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">${'<iframe src="https://player.vimeo.com/video/'.concat(t, '" ')}style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`; } }, { name: 'instagram', url: /^instagram\.com\/p\/(\w+)/ }, { name: 'twitter', url: /^twitter\.com/ }, { name: 'googleMaps', url: /^google\.com\/maps/ }, { name: 'flickr', url: /^flickr\.com/ }, { name: 'facebook', url: /^facebook\.com/ }] }), r.registry = new Wg(e.locale, e.config.get('mediaEmbed')), r; } return m(n, null, [{ key: 'pluginName', get() { return 'MediaEmbedEditing'; } }]), m(n, [{
              key: 'init',
              value() {
                const e = this.editor; const t = e.model.schema; const n = e.t; const r = e.conversion; const i = e.config.get('mediaEmbed.previewsInData'); const o = this.registry; e.commands.add('mediaEmbed', new Hg(e)), t.register('media', {
                  isObject: !0, isBlock: !0, allowWhere: '$block', allowAttributes: ['url'],
                }), r.for('dataDowncast').elementToElement({ model: 'media', view(e, t) { const n = e.getAttribute('url'); return Vg(t, o, n, { renderMediaPreview: n && i }); } }), r.for('dataDowncast').add(Fg(o, { renderMediaPreview: i })), r.for('editingDowncast').elementToElement({ model: 'media', view(e, t) { const r = e.getAttribute('url'); return (function (e, t, n) { return t.setCustomProperty('media', !0, e), af(e, t, { label: n }); }(Vg(t, o, r, { renderForEditingView: !0 }), t, n('media widget'))); } }), r.for('editingDowncast').add(Fg(o, { renderForEditingView: !0 })), r.for('upcast').elementToElement({ view: { name: 'oembed', attributes: { url: !0 } }, model(e, t) { const n = e.getAttribute('url'); if (o.hasMedia(n)) return t.createElement('media', { url: n }); } }).elementToElement({ view: { name: 'div', attributes: { 'data-oembed-url': !0 } }, model(e, t) { const n = e.getAttribute('data-oembed-url'); if (o.hasMedia(n)) return t.createElement('media', { url: n }); } });
              },
            }]), n;
          }(sd))); const $g = /^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=]+$/; const Yg = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e))._timeoutId = null, r._positionToInsert = null, r; } return m(n, null, [{ key: 'requires', get() { return [Pd, Sh]; } }, { key: 'pluginName', get() { return 'AutoMediaEmbed'; } }]), m(n, [{ key: 'init', value() { const e = this; const t = this.editor; const n = t.model.document; this.listenTo(t.plugins.get(Pd), 'inputTransformation', (() => { const t = n.selection.getFirstRange(); const r = sc.fromPosition(t.start); r.stickiness = 'toPrevious'; const i = sc.fromPosition(t.end); i.stickiness = 'toNext', n.once('change:data', (() => { e._embedMediaBetweenPositions(r, i), r.detach(), i.detach(); }), { priority: 'high' }); })), t.commands.get('undo').on('execute', (() => { e._timeoutId && (Vo.window.clearTimeout(e._timeoutId), e._positionToInsert.detach(), e._timeoutId = null, e._positionToInsert = null); }), { priority: 'high' }); } }, { key: '_embedMediaBetweenPositions', value(e, t) { let n; const r = this; const i = this.editor; const o = i.plugins.get(Gg).registry; const a = new xs(e, t); const s = a.getWalker({ ignoreElementEnd: !0 }); let l = ''; const c = d(s); try { for (c.s(); !(n = c.n()).done;) { const u = n.value; u.item.is('$textProxy') && (l += u.item.data); } } catch (h) { c.e(h); } finally { c.f(); }(l = l.trim()).match($g) && o.hasMedia(l) && i.commands.get('mediaEmbed').isEnabled ? (this._positionToInsert = sc.fromPosition(e), this._timeoutId = Vo.window.setTimeout((() => { i.model.change(((e) => { let t; r._timeoutId = null, e.remove(a), a.detach(), r._positionToInsert.root.rootName !== '$graveyard' && (t = r._positionToInsert), Ug(i.model, l, t), r._positionToInsert.detach(), r._positionToInsert = null; })); }), 100)) : a.detach(); } }]), n; }(sd)); const Kg = (n(86), (function (e) {
            v(n, e); const t = g(n); function n(e, r) {
              let i; f(this, n), i = t.call(this, r); const o = r.t; return i.focusTracker = new Fc(), i.keystrokes = new Oc(), i.urlInputView = i._createUrlInput(), i.saveButtonView = i._createButton(o('Save'), Lf, 'ck-button-save'), i.saveButtonView.type = 'submit', i.cancelButtonView = i._createButton(o('Cancel'), zf, 'ck-button-cancel', 'cancel'), i._focusables = new Yc(), i._focusCycler = new Tu({
                focusables: i._focusables, focusTracker: i.focusTracker, keystrokeHandler: i.keystrokes, actions: { focusPrevious: 'shift + tab', focusNext: 'tab' },
              }), i._validators = e, i.setTemplate({ tag: 'form', attributes: { class: ['ck', 'ck-media-form'], tabindex: '-1' }, children: [i.urlInputView, i.saveButtonView, i.cancelButtonView] }), i;
            } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this), Df({ view: this }), [this.urlInputView, this.saveButtonView, this.cancelButtonView].forEach(((t) => { e._focusables.add(t), e.focusTracker.add(t.element); })), this.keystrokes.listenTo(this.element); const t = function (e) { return e.stopPropagation(); }; this.keystrokes.set('arrowright', t), this.keystrokes.set('arrowleft', t), this.keystrokes.set('arrowup', t), this.keystrokes.set('arrowdown', t), this.listenTo(this.urlInputView.element, 'selectstart', ((e, t) => { t.stopPropagation(); }), { priority: 'high' }); } }, { key: 'focus', value() { this._focusCycler.focusFirst(); } }, { key: 'isValid', value() { this.resetFormStatus(); let e; const t = d(this._validators); try { for (t.s(); !(e = t.n()).done;) { const n = (0, e.value)(this); if (n) return this.urlInputView.errorText = n, !1; } } catch (r) { t.e(r); } finally { t.f(); } return !0; } }, { key: 'resetFormStatus', value() { this.urlInputView.errorText = null, this.urlInputView.infoText = this._urlInputViewInfoDefault; } }, { key: '_createUrlInput', value() { const e = this; const { t } = this.locale; const n = new Nf(this.locale, jf); const r = n.fieldView; return this._urlInputViewInfoDefault = t('Paste the media URL in the input.'), this._urlInputViewInfoTip = t('Tip: Paste the URL into the content to embed faster.'), n.label = t('Media URL'), n.infoText = this._urlInputViewInfoDefault, r.placeholder = 'https://example.com', r.on('input', (() => { n.infoText = r.element.value ? e._urlInputViewInfoTip : e._urlInputViewInfoDefault; })), n; } }, { key: '_createButton', value(e, t, n, r) { const i = new Fu(this.locale); return i.set({ label: e, icon: t, tooltip: !0 }), i.extendTemplate({ attributes: { class: n } }), r && i.delegate('execute').to(this, r), i; } }, { key: 'url', get() { return this.urlInputView.fieldView.element.value.trim(); }, set(e) { this.urlInputView.fieldView.element.value = e.trim(); } }]), n;
          }(vu))); const Qg = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor; const n = t.commands.get('mediaEmbed'); const r = t.plugins.get(Gg).registry; t.ui.componentFactory.add('mediaEmbed', ((i) => { const o = $u(i); const a = new Kg((function (e, t) { return [function (t) { if (!t.url.length) return e('The URL must not be empty.'); }, function (n) { if (!t.hasMedia(n.url)) return e('This media URL is not supported.'); }]; }(t.t, r)), t.locale); return e._setUpDropdown(o, a, n, t), e._setUpForm(o, a, n), o; })); } }, { key: '_setUpDropdown', value(e, t, n) { const r = this.editor; const i = r.t; const o = e.buttonView; function a() { r.editing.view.focus(), e.isOpen = !1; }e.bind('isEnabled').to(n), e.panelView.children.add(t), o.set({ label: i('Insert media'), icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z"/></svg>', tooltip: !0 }), o.on('open', (() => { t.url = n.value || '', t.urlInputView.fieldView.select(), t.focus(); }), { priority: 'low' }), e.on('submit', (() => { t.isValid() && (r.execute('mediaEmbed', t.url), a()); })), e.on('change:isOpen', (() => t.resetFormStatus())), e.on('cancel', (() => a())); } }, { key: '_setUpForm', value(e, t, n) { t.delegate('submit', 'cancel').to(e), t.urlInputView.bind('value').to(n, 'value'), t.urlInputView.bind('isReadOnly').to(n, 'isEnabled', ((e) => !e)), t.saveButtonView.bind('isEnabled').to(n); } }], [{ key: 'requires', get() { return [Gg]; } }, { key: 'pluginName', get() { return 'MediaEmbedUI'; } }]), n; }(sd)); n(88); const Jg = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [Gg, Qg, Yg, Pf]; } }, { key: 'pluginName', get() { return 'MediaEmbed'; } }]), n; }(sd)); function Zg(e, t) {
            if (e.childCount) {
              const n = new Zm(e.document); const r = (function (e, t) {
                let n; const r = t.createRangeIn(e); const i = new fr({ name: /^p|h\d+$/, styles: { 'mso-list': /.*/ } }); const o = []; const a = d(r); try {
                  for (a.s(); !(n = a.n()).done;) {
                    const s = n.value; if (s.type === 'elementStart' && i.match(s.item)) {
                      const l = ep(s.item); o.push({
                        element: s.item, id: l.id, order: l.order, indent: l.indent,
                      });
                    }
                  }
                } catch (c) { a.e(c); } finally { a.f(); } return o;
              }(e, n)); if (r.length) { let i = null; let o = 1; r.forEach(((e, a) => { const s = (function (e, t) { if (!e) return !0; if (e.id !== t.id) return !0; const n = t.element.previousSibling; return !n || !(function (e) { return e.is('element', 'ol') || e.is('element', 'ul'); }(n)); }(r[a - 1], e)); const l = (function (e, t) { return e ? t.indent - e.indent : t.indent - 1; }(s ? null : r[a - 1], e)); if (s && (i = null, o = 1), !i || l !== 0) { const c = (function (e, t) { const n = new RegExp('@list l'.concat(e.id, ':level').concat(e.indent, '\\s*({[^}]*)'), 'gi'); const r = n.exec(t); let i = 'decimal'; if (r && r[1]) { const o = /mso-level-number-format:([^;]*);/gi.exec(r[1]); o && o[1] && (i = o[1].trim()); } return { type: i !== 'bullet' && i !== 'image' ? 'ol' : 'ul', style: i }; }(e, t)); if (i) { if (e.indent > o) { const u = i.getChild(i.childCount - 1); const h = u.getChild(u.childCount - 1); i = Xg(c, h, n), o += 1; } else if (e.indent < o) { const f = o - e.indent; i = (function (e, t) { let n; const r = e.getAncestors({ parentFirst: !0 }); let i = null; let o = 0; const a = d(r); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; if (s.name !== 'ul' && s.name !== 'ol' || o++, o === t) { i = s; break; } } } catch (l) { a.e(l); } finally { a.f(); } return i; }(i, f)), o = parseInt(e.indent); } } else i = Xg(c, e.element, n); e.indent <= o && (i.is('element', c.type) || (i = n.rename(c.type, i))); } const m = (function (e, t) { return (function (e, t) { let n; const r = new fr({ name: 'span', styles: { 'mso-list': 'Ignore' } }); const i = t.createRangeIn(e); const o = d(i); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; a.type === 'elementStart' && r.match(a.item) && t.remove(a.item); } } catch (s) { o.e(s); } finally { o.f(); } }(e, t)), t.rename('li', e); }(e.element, n)); n.appendChild(m, i); })); }
            }
          } function Xg(e, t, n) { const r = t.parent; const i = n.createElement(e.type); const o = r.getChildIndex(t) + 1; return n.insertChild(o, i, r), i; } function ep(e) { const t = {}; const n = e.getStyle('mso-list'); if (n) { const r = n.match(/(^|\s+)l(\d+)/i); const i = n.match(/\s*lfo(\d+)/i); const o = n.match(/\s*level(\d+)/i); r && i && o && (t.id = r[2], t.order = i[1], t.indent = o[1]); } return t; } const tp = /id=("|')docs-internal-guid-[-0-9a-f]+("|')/i; const np = (function () { function e(t) { f(this, e), this.document = t; } return m(e, [{ key: 'isActive', value(e) { return tp.test(e); } }, { key: 'execute', value(e) { const t = new Zm(this.document); !(function (e, t) { let n; const r = d(e.getChildren()); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (i.is('element', 'b') && i.getStyle('font-weight') === 'normal') { const o = e.getChildIndex(i); t.remove(i), t.insertChild(o, i.getChildren(), e); } } } catch (a) { r.e(a); } finally { r.f(); } }(e.content, t)), (function (e, t) { let n; const r = d(t.createRangeIn(e)); try { for (r.s(); !(n = r.n()).done;) { const i = n.value.item; if (i.is('element', 'li')) { const o = i.getChild(0); o.is('element', 'p') && t.unwrapElement(o); } } } catch (a) { r.e(a); } finally { r.f(); } }(e.content, t)); } }]), e; }()); function rp(e) { return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g, ((e, t) => (t.length === 1 ? ' ' : Array(t.length + 1).join('\xa0 ').substr(0, t.length)))); } function ip(e, t) {
            const n = new DOMParser(); const r = (function (e) {
              return rp(rp(e)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[\s]*?)[\r\n]+(\s*<\/span>)/g, '$1$2').replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g, '').replace(/ <\//g, '\xa0</')
                .replace(/ <o:p><\/o:p>/g, '\xa0<o:p></o:p>')
                .replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g, '')
                .replace(/>(\s*[\r\n]\s*)</g, '><');
            }(function (e) { const t = e.match(/<\/body>(.*?)(<\/html>|$)/); return t && t[1] && (e = e.slice(0, t.index) + e.slice(t.index).replace(t[1], '')), e; }(e = e.replace(/<!--\[if gte vml 1]>/g, '')))); const
              i = n.parseFromString(r, 'text/html'); !(function (e) { e.querySelectorAll('span[style*=spacerun]').forEach(((e) => { const t = e.innerText.length || 0; e.innerHTML = Array(t + 1).join('\xa0 ').substr(0, t); })); }(i)); const o = i.body.innerHTML; const a = (function (e, t) { for (var n = new Li(t), r = new Wo(n, { blockFillerMode: 'nbsp' }), i = e.createDocumentFragment(), o = e.body.childNodes; o.length > 0;)i.appendChild(o[0]); return r.domToView(i); }(i, t)); const s = (function (e) { for (var t = [], n = [], r = Array.from(e.getElementsByTagName('style')), i = 0, o = r; i < o.length; i++) { const a = o[i]; a.sheet && a.sheet.cssRules && a.sheet.cssRules.length && (t.push(a.sheet), n.push(a.innerHTML)); } return { styles: t, stylesString: n.join(' ') }; }(i)); return {
              body: a, bodyString: o, styles: s.styles, stylesString: s.stylesString,
            };
          } function op(e, t) { if (e.childCount) { const n = new Zm(); !(function (e, t, n) { let r; const i = n.createRangeIn(t); const o = new fr({ name: 'img' }); const a = []; const s = d(i); try { for (s.s(); !(r = s.n()).done;) { const l = r.value; if (o.match(l.item)) { const c = l.item; const u = c.getAttribute('v:shapes') ? c.getAttribute('v:shapes').split(' ') : []; u.length && u.every(((t) => e.indexOf(t) > -1)) ? a.push(c) : c.getAttribute('src') || a.push(c); } } } catch (v) { s.e(v); } finally { s.f(); } for (let h = 0, f = a; h < f.length; h++) { const m = f[h]; n.remove(m); } }((function (e, t) { let n; const r = t.createRangeIn(e); const i = new fr({ name: /v:(.+)/ }); const o = []; const a = d(r); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; const l = s.item; const c = l.previousSibling && l.previousSibling.name || null; i.match(l) && l.getAttribute('o:gfxdata') && c !== 'v:shapetype' && o.push(s.item.getAttribute('id')); } } catch (u) { a.e(u); } finally { a.f(); } return o; }(e, n)), e, n)), (function (e, t) { let n; const r = t.createRangeIn(e); const i = new fr({ name: /v:(.+)/ }); const o = []; const a = d(r); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; i.match(s.item) && o.push(s.item); } } catch (h) { a.e(h); } finally { a.f(); } for (let l = 0, c = o; l < c.length; l++) { const u = c[l]; t.remove(u); } }(e, n)); const r = (function (e, t) { let n; const r = t.createRangeIn(e); const i = new fr({ name: 'img' }); const o = []; const a = d(r); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; i.match(s.item) && s.item.getAttribute('src').startsWith('file://') && o.push(s.item); } } catch (l) { a.e(l); } finally { a.f(); } return o; }(e, n)); r.length && (function (e, t, n) { if (e.length === t.length) for (let r = 0; r < e.length; r++) { const i = 'data:'.concat(t[r].type, ';base64,').concat(ap(t[r].hex)); n.setAttribute('src', i, e[r]); } }(r, (function (e) { if (!e) return []; const t = /{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/; const n = new RegExp(`(?:(${t.source}))([\\da-fA-F\\s]+)\\}`, 'g'); const r = e.match(n); const i = []; if (r) { let o; const a = d(r); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; let l = !1; s.includes('\\pngblip') ? l = 'image/png' : s.includes('\\jpegblip') && (l = 'image/jpeg'), l && i.push({ hex: s.replace(t, '').replace(/[^\da-fA-F]/g, ''), type: l }); } } catch (c) { a.e(c); } finally { a.f(); } } return i; }(t)), n)); } } function ap(e) { return btoa(e.match(/\w{2}/g).map(((e) => String.fromCharCode(parseInt(e, 16)))).join('')); } const sp = /<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i; const lp = /xmlns:o="urn:schemas-microsoft-com/i; const cp = (function () { function e(t) { f(this, e), this.document = t; } return m(e, [{ key: 'isActive', value(e) { return sp.test(e) || lp.test(e); } }, { key: 'execute', value(e) { const t = ip(e.dataTransfer.getData('text/html'), this.document.stylesProcessor); const n = t.body; Zg(n, t.stylesString), op(n, e.dataTransfer.getData('text/rtf')), e.content = n; } }]), e; }()); const up = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this.editor; const t = e.editing.view.document; const n = []; n.push(new cp(t)), n.push(new np(t)), e.plugins.get('Clipboard').on('inputTransformation', ((e, t) => { if (!t.isTransformedWithPasteFromOffice) { const r = t.dataTransfer.getData('text/html'); const i = n.find(((e) => e.isActive(r))); i && (i.execute(t), t.isTransformedWithPasteFromOffice = !0); } }), { priority: 'high' }); } }], [{ key: 'pluginName', get() { return 'PasteFromOffice'; } }, { key: 'requires', get() { return [Pd]; } }]), n; }(sd)); function dp(e, t, n, r) { const i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 1; t > i ? r.setAttribute(e, t, n) : r.removeAttribute(e, n); } function hp(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; const r = e.createElement('tableCell', n); return e.insertElement('paragraph', r), e.insert(r, t), r; } function fp(e, t) { const n = t.parent.parent; const r = parseInt(n.getAttribute('headingColumns') || 0); const i = e.getCellLocation(t).column; return !!r && i < r; } function mp() { return function (e) { e.on('element:table', ((e, t, n) => { const r = t.viewItem; if (n.consumable.test(r, { name: !0 })) { const i = (function (e) { for (var t, n = { headingRows: 0, headingColumns: 0 }, r = [], i = [], o = 0, a = Array.from(e.getChildren()); o < a.length; o++) { const s = a[o]; if (s.name === 'tbody' || s.name === 'thead' || s.name === 'tfoot') { s.name !== 'thead' || t || (t = s); var l; const c = Array.from(s.getChildren()).filter(((e) => e.is('element', 'tr'))); const u = d(c); try { for (u.s(); !(l = u.n()).done;) { const h = l.value; if (h.parent.name === 'thead' && h.parent === t)n.headingRows++, r.push(h); else { i.push(h); const f = gp(h); f > n.headingColumns && (n.headingColumns = f); } } } catch (m) { u.e(m); } finally { u.f(); } } } return n.rows = [].concat(r, i), n; }(r)); const o = i.rows; const a = i.headingRows; const s = i.headingColumns; const l = {}; s && (l.headingColumns = s), a && (l.headingRows = a); const c = n.writer.createElement('table', l); const u = n.splitToAllowedParent(c, t.modelCursor); if (u) { if (n.writer.insert(c, u.position), n.consumable.consume(r, { name: !0 }), o.forEach(((e) => n.convertItem(e, n.writer.createPositionAt(c, 'end')))), c.isEmpty) { const h = n.writer.createElement('tableRow'); n.writer.insert(h, n.writer.createPositionAt(c, 'end')), hp(n.writer, n.writer.createPositionAt(h, 'end')); }t.modelRange = n.writer.createRange(n.writer.createPositionBefore(c), n.writer.createPositionAfter(c)), u.cursorParent ? t.modelCursor = n.writer.createPositionAt(u.cursorParent, 0) : t.modelCursor = t.modelRange.end; } } })); }; } function vp(e) { return function (t) { t.on('element:'.concat(e), ((e, t, n) => { const r = t.viewItem; if (n.consumable.test(r, { name: !0 })) { const i = n.writer.createElement('tableCell'); const o = n.splitToAllowedParent(i, t.modelCursor); if (o) { n.writer.insert(i, o.position), n.consumable.consume(r, { name: !0 }); const a = n.writer.createPositionAt(i, 0); n.convertChildren(r, a), i.childCount || n.writer.insertElement('paragraph', a), t.modelRange = n.writer.createRange(n.writer.createPositionBefore(i), n.writer.createPositionAfter(i)), t.modelCursor = t.modelRange.end; } } })); }; } function gp(e) { for (var t = 0, n = 0, r = Array.from(e.getChildren()).filter(((e) => e.name === 'th' || e.name === 'td')); n < r.length && r[n].name === 'th';) { const i = r[n]; t += parseInt(i.getAttribute('colspan') || 1), n++; } return t; } const pp = (function () { function e(t) { const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; f(this, e), this._table = t, this._startRow = void 0 !== n.row ? n.row : n.startRow || 0, this._endRow = void 0 !== n.row ? n.row : n.endRow, this._startColumn = void 0 !== n.column ? n.column : n.startColumn || 0, this._endColumn = void 0 !== n.column ? n.column : n.endColumn, this._includeAllSlots = !!n.includeAllSlots, this._skipRows = new Set(), this._row = 0, this._column = 0, this._cellIndex = 0, this._spannedCells = new Map(), this._nextCellAtColumn = -1; } return m(e, [{ key: Symbol.iterator, value() { return this; } }, { key: 'next', value() { const e = this._table.getChild(this._row); if (!e || this._isOverEndRow()) return { done: !0 }; if (this._isOverEndColumn()) return this._advanceToNextRow(); let t = null; const n = this._getSpanned(); if (n) this._includeAllSlots && !this._shouldSkipSlot() && (t = this._formatOutValue(n.cell, n.row, n.column)); else { const r = e.getChild(this._cellIndex); if (!r) return this._advanceToNextRow(); const i = parseInt(r.getAttribute('colspan') || 1); const o = parseInt(r.getAttribute('rowspan') || 1); (i > 1 || o > 1) && this._recordSpans(r, o, i), this._shouldSkipSlot() || (t = this._formatOutValue(r)), this._nextCellAtColumn = this._column + i; } return this._column++, this._column == this._nextCellAtColumn && this._cellIndex++, t || this.next(); } }, { key: 'skipRow', value(e) { this._skipRows.add(e); } }, { key: '_advanceToNextRow', value() { return this._row++, this._column = 0, this._cellIndex = 0, this._nextCellAtColumn = -1, this.next(); } }, { key: '_isOverEndRow', value() { return void 0 !== this._endRow && this._row > this._endRow; } }, { key: '_isOverEndColumn', value() { return void 0 !== this._endColumn && this._column > this._endColumn; } }, { key: '_formatOutValue', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this._row; const n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this._column; return { done: !1, value: new kp(this, e, t, n) }; } }, { key: '_shouldSkipSlot', value() { const e = this._skipRows.has(this._row); const t = this._row < this._startRow; const n = this._column < this._startColumn; const r = void 0 !== this._endColumn && this._column > this._endColumn; return e || t || n || r; } }, { key: '_getSpanned', value() { const e = this._spannedCells.get(this._row); return e && e.get(this._column) || null; } }, { key: '_recordSpans', value(e, t, n) { for (let r = { cell: e, row: this._row, column: this._column }, i = this._row; i < this._row + t; i++) for (let o = this._column; o < this._column + n; o++)i == this._row && o == this._column || this._markSpannedCell(i, o, r); } }, { key: '_markSpannedCell', value(e, t, n) { this._spannedCells.has(e) || this._spannedCells.set(e, new Map()), this._spannedCells.get(e).set(t, n); } }]), e; }()); var kp = (function () { function e(t, n, r, i) { f(this, e), this.cell = n, this.row = t._row, this.column = t._column, this.cellAnchorRow = r, this.cellAnchorColumn = i, this._cellIndex = t._cellIndex, this._table = t._table; } return m(e, [{ key: 'getPositionBefore', value() { return this._table.root.document.model.createPositionAt(this._table.getChild(this.row), this._cellIndex); } }, { key: 'isAnchor', get() { return this.row === this.cellAnchorRow && this.column === this.cellAnchorColumn; } }, { key: 'cellWidth', get() { return parseInt(this.cell.getAttribute('colspan') || 1); } }, { key: 'cellHeight', get() { return parseInt(this.cell.getAttribute('rowspan') || 1); } }]), e; }()); function bp() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; return function (t) { return t.on('insert:table', ((t, n, r) => { const i = n.item; if (r.consumable.consume(i, 'insert')) { r.consumable.consume(i, 'attribute:headingRows:table'), r.consumable.consume(i, 'attribute:headingColumns:table'); let o; const a = e && e.asWidget; const s = r.writer.createContainerElement('figure', { class: 'table' }); const l = r.writer.createContainerElement('table'); r.writer.insert(r.writer.createPositionAt(s, 0), l), a && (o = wp(s, r.writer)); let c; const u = new pp(i); const h = { headingRows: i.getAttribute('headingRows') || 0, headingColumns: i.getAttribute('headingColumns') || 0 }; const f = new Map(); const m = d(u); try { for (m.s(); !(c = m.n()).done;) { const v = c.value; const g = v.row; const p = v.cell; const k = i.getChild(g); const b = f.get(g) || xp(l, k, g, h, r); f.set(g, b), r.consumable.consume(p, 'insert'), Ep(v, h, r.writer.createPositionAt(b, 'end'), r, e); } } catch (T) { m.e(T); } finally { m.f(); } let y; const w = d(i.getChildren()); try { for (w.s(); !(y = w.n()).done;) { const _ = y.value; const E = _.index; f.has(E) || f.set(E, xp(l, _, E, h, r)); } } catch (T) { w.e(T); } finally { w.f(); } const x = r.mapper.toViewPosition(n.range.start); r.mapper.bindElements(i, a ? o : s), r.writer.insert(x, a ? o : s); } })); }; } function yp() { return function (e) { return e.on('insert:tableRow', ((e, t, n) => { const r = t.item; if (n.consumable.consume(r, 'insert')) { let i; const o = r.parent; const a = (function (e) { let t; const n = d(e.getChildren()); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; if (r.name === 'table') return r; } } catch (i) { n.e(i); } finally { n.f(); } }(n.mapper.toViewElement(o))); const s = o.getChildIndex(r); const l = new pp(o, { row: s }); const c = { headingRows: o.getAttribute('headingRows') || 0, headingColumns: o.getAttribute('headingColumns') || 0 }; const u = new Map(); const h = d(l); try { for (h.s(); !(i = h.n()).done;) { const f = i.value; const m = u.get(s) || xp(a, r, s, c, n); u.set(s, m), n.consumable.consume(f.cell, 'insert'), Ep(f, c, n.writer.createPositionAt(m, 'end'), n, { asWidget: !0 }); } } catch (v) { h.e(v); } finally { h.f(); } } })); }; } function wp(e, t) { return t.setCustomProperty('table', !0, e), af(e, t, { hasSelectionHandle: !0 }); } function _p(e, t, n) { const r = e.cell; const i = Tp(e, t); const o = n.mapper.toViewElement(r); o && o.name !== i && (function (e, t, n) { const r = n.writer; const i = n.mapper.toViewElement(e); const o = uf(r.createEditableElement(t, i.getAttributes()), r); sf(o, r, ((e, t, n) => n.addClass(Ap(t.classes), e)), ((e, t, n) => n.removeClass(Ap(t.classes), e))), r.insert(r.createPositionAfter(i), o), r.move(r.createRangeIn(i), r.createPositionAt(o, 0)), r.remove(r.createRangeOn(i)), n.mapper.unbindViewElement(i), n.mapper.bindElements(e, o); }(r, i, n)); } function Ep(e, t, n, r, i) { const o = i && i.asWidget; const a = Tp(e, t); const s = o ? uf(r.writer.createEditableElement(a), r.writer) : r.writer.createContainerElement(a); o && sf(s, r.writer, ((e, t, n) => n.addClass(Ap(t.classes), e)), ((e, t, n) => n.removeClass(Ap(t.classes), e))); const l = e.cell; const u = l.getChild(0); const d = l.childCount === 1 && u.name === 'paragraph'; if (r.writer.insert(n, s), d && !(function (e) { return !!c(e.getAttributeKeys()).length; }(u))) { const h = l.getChild(0); const f = r.writer.createPositionAt(s, 'end'); if (r.consumable.consume(h, 'insert'), o) { const m = r.writer.createContainerElement('span', { style: 'display:inline-block' }); r.mapper.bindElements(h, m), r.writer.insert(f, m), r.mapper.bindElements(l, s); } else r.mapper.bindElements(l, s), r.mapper.bindElements(h, s); } else r.mapper.bindElements(l, s); } function xp(e, t, n, r, i) { i.consumable.consume(t, 'insert'); const o = t.isEmpty ? i.writer.createEmptyElement('tr') : i.writer.createContainerElement('tr'); i.mapper.bindElements(t, o); const a = r.headingRows; const s = (function (e, t, n) { const r = Cp(e, t); return r || (function (e, t, n) { const r = n.writer.createContainerElement(e); const i = n.writer.createPositionAt(t, e == 'tbody' ? 'end' : 0); return n.writer.insert(i, r), r; }(e, t, n)); }((function (e, t) { return e < t.headingRows ? 'thead' : 'tbody'; }(n, r)), e, i)); const l = a > 0 && n >= a ? n - a : n; const c = i.writer.createPositionAt(s, l); return i.writer.insert(c, o), o; } function Tp(e, t) { const n = e.row; const r = e.column; const i = t.headingColumns; const o = t.headingRows; return o && o > n || i && i > r ? 'th' : 'td'; } function Cp(e, t) { let n; const r = d(t.getChildren()); try { for (r.s(); !(n = r.n()).done;) { const i = n.value; if (i.name == e) return i; } } catch (o) { r.e(o); } finally { r.f(); } } function Sp(e, t, n) { const r = Cp(e, t); r && r.childCount === 0 && n.writer.remove(n.writer.createRangeOn(r)); } function Ap(e) { return Array.isArray(e) ? e : [e]; } const Pp = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = this.editor.model; const t = e.document.selection; const n = e.schema; const r = (function (e) { const t = e.parent; return t === t.root ? t : t.parent; }(t.getFirstPosition())); this.isEnabled = n.checkChild(r, 'table'); } }, { key: 'execute', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; const t = this.editor.model; const n = t.document.selection; const r = this.editor.plugins.get('TableUtils'); const i = df(n, t); t.change(((n) => { const o = r.createTable(n, e); t.insertContent(o, i), n.setSelection(n.createPositionAt(o.getNodeByPath([0, 0, 0]), 0)); })); } }]), n; }(dd)); function Op(e) { let t; const n = []; const r = d(Dp(e.getRanges())); try { for (r.s(); !(t = r.n()).done;) { const i = t.value.getContainedElement(); i && i.is('element', 'tableCell') && n.push(i); } } catch (o) { r.e(o); } finally { r.f(); } return n; } function Ip(e) { let t; const n = []; const r = d(e.getRanges()); try { for (r.s(); !(t = r.n()).done;) { const i = t.value.start.findAncestor('tableCell'); i && n.push(i); } } catch (o) { r.e(o); } finally { r.f(); } return n; } function Mp(e) { const t = Op(e); return t.length ? t : Ip(e); } function Np(e) { return Lp(e.map(((e) => e.parent.index))); } function Rp(e) { const t = e[0].findAncestor('table'); return Lp(c(new pp(t)).filter(((t) => e.includes(t.cell))).map(((e) => e.column))); } function jp(e, t) { if (e.length < 2 || !(function (e) { const t = e[0].findAncestor('table'); const n = Np(e); const r = parseInt(t.getAttribute('headingRows') || 0); if (!Fp(n, r)) return !1; const i = parseInt(t.getAttribute('headingColumns') || 0); return Fp(Rp(e), i); }(e))) return !1; let n; const r = new Set(); const i = new Set(); let o = 0; const a = d(e); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; const l = t.getCellLocation(s); const u = l.row; const h = l.column; const f = parseInt(s.getAttribute('rowspan') || 1); const m = parseInt(s.getAttribute('colspan') || 1); r.add(u), i.add(h), f > 1 && r.add(u + f - 1), m > 1 && i.add(h + m - 1), o += f * m; } } catch (v) { a.e(v); } finally { a.f(); } return (function (e, t) { const n = Array.from(e.values()); const r = Array.from(t.values()); const i = Math.max.apply(Math, c(n)); const o = Math.min.apply(Math, c(n)); const a = Math.max.apply(Math, c(r)); const s = Math.min.apply(Math, c(r)); return (i - o + 1) * (a - s + 1); }(r, i)) == o; } function Dp(e) { return Array.from(e).sort(zp); } function Lp(e) { const t = e.sort(((e, t) => e - t)); return { first: t[0], last: t[t.length - 1] }; } function zp(e, t) { const n = e.start; const r = t.start; return n.isBefore(r) ? -1 : 1; } function Fp(e, t) { return e.first < t === e.last < t; } const Vp = (function (e) { v(n, e); const t = g(n); function n(e) { let r; const i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return f(this, n), (r = t.call(this, e)).order = i.order || 'below', r; } return m(n, [{ key: 'refresh', value() { const e = this.editor.model.document.selection.getFirstPosition().findAncestor('table'); this.isEnabled = !!e; } }, { key: 'execute', value() { const e = this.editor; const t = e.model.document.selection; const n = e.plugins.get('TableUtils'); const r = this.order === 'above'; const i = Mp(t); const o = Np(i); const a = r ? o.first : o.last; const s = i[0].findAncestor('table'); n.insertRows(s, { at: r ? a : a + 1, copyStructureFromAbove: !r }); } }]), n; }(dd)); const Bp = (function (e) { v(n, e); const t = g(n); function n(e) { let r; const i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return f(this, n), (r = t.call(this, e)).order = i.order || 'right', r; } return m(n, [{ key: 'refresh', value() { const e = this.editor.model.document.selection.getFirstPosition().findAncestor('table'); this.isEnabled = !!e; } }, { key: 'execute', value() { const e = this.editor; const t = e.model.document.selection; const n = e.plugins.get('TableUtils'); const r = this.order === 'left'; const i = Mp(t); const o = Rp(i); const a = r ? o.first : o.last; const s = i[0].findAncestor('table'); n.insertColumns(s, { columns: 1, at: r ? a : a + 1 }); } }]), n; }(dd)); const Up = (function (e) { v(n, e); const t = g(n); function n(e) { let r; const i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return f(this, n), (r = t.call(this, e)).direction = i.direction || 'horizontally', r; } return m(n, [{ key: 'refresh', value() { const e = Mp(this.editor.model.document.selection); this.isEnabled = e.length === 1; } }, { key: 'execute', value() { const e = Mp(this.editor.model.document.selection)[0]; const t = this.direction === 'horizontally'; const n = this.editor.plugins.get('TableUtils'); t ? n.splitCellHorizontally(e, 2) : n.splitCellVertically(e, 2); } }]), n; }(dd)); function Hp(e, t, n) {
            for (var r = t.startRow, i = t.startColumn, o = t.endRow, a = t.endColumn, s = n.createElement('table'), l = o - r + 1, u = 0; u < l; u++)n.insertElement('tableRow', s, 'end'); let h; const f = c(new pp(e, {
              startRow: r, endRow: o, startColumn: i, endColumn: a, includeAllSlots: !0,
            })); const m = d(f); try { for (m.s(); !(h = m.n()).done;) { const v = h.value; const g = v.row; const p = v.column; const k = v.cell; const b = v.isAnchor; const y = v.cellAnchorRow; const w = v.cellAnchorColumn; const _ = g - r; const E = s.getChild(_); if (b) { const x = n.cloneElement(k); n.append(x, E), Yp(x, g, p, o, a, n); } else (y < r || w < i) && hp(n, n.createPositionAt(E, 'end')); } } catch (T) { m.e(T); } finally { m.f(); } return (function (e, t, n, r, i) { const o = parseInt(t.getAttribute('headingRows') || 0); o > 0 && dp('headingRows', o - n, e, i, 0); const a = parseInt(t.getAttribute('headingColumns') || 0); a > 0 && dp('headingColumns', a - r, e, i, 0); }(s, e, r, i, n)), s;
          } function Wp(e, t) { let n; const r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; const i = []; const o = new pp(e, { startRow: r, endRow: t - 1 }); const a = d(o); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; const l = s.row; const c = s.cellHeight; const u = l + c - 1; l < t && t <= u && i.push(s); } } catch (h) { a.e(h); } finally { a.f(); } return i; } function qp(e, t, n) { const r = e.parent; const i = r.parent; const o = r.index; const a = t - o; const s = {}; const l = parseInt(e.getAttribute('rowspan')) - a; l > 1 && (s.rowspan = l); const u = parseInt(e.getAttribute('colspan') || 1); u > 1 && (s.colspan = u); let h; let f; const m = o + a; const v = c(new pp(i, { startRow: o, endRow: m, includeAllSlots: !0 })); let g = null; const p = d(v); try { for (p.s(); !(f = p.n()).done;) { const k = f.value; const b = k.row; const y = k.column; k.cell === e && void 0 === h && (h = y), void 0 !== h && h === y && b === m && (g = hp(n, k.getPositionBefore(), s)); } } catch (w) { p.e(w); } finally { p.f(); } return dp('rowspan', a, e, n), g; } function Gp(e, t) { let n; const r = []; const i = new pp(e); const o = d(i); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; const s = a.column; const l = a.cellWidth; s < t && t <= s + l - 1 && r.push(a); } } catch (c) { o.e(c); } finally { o.f(); } return r; } function $p(e, t, n, r) { const i = n - t; const o = {}; const a = parseInt(e.getAttribute('colspan')) - i; a > 1 && (o.colspan = a); const s = parseInt(e.getAttribute('rowspan') || 1); s > 1 && (o.rowspan = s); const l = hp(r, r.createPositionAfter(e), o); return dp('colspan', i, e, r), l; } function Yp(e, t, n, r, i, o) { const a = parseInt(e.getAttribute('colspan') || 1); const s = parseInt(e.getAttribute('rowspan') || 1); n + a - 1 > i && dp('colspan', i - n + 1, e, o, 1), t + s - 1 > r && dp('rowspan', r - t + 1, e, o, 1); } function Kp(e, t) { let n; const r = t.getColumns(e); const i = new Array(r).fill(0); const o = d(new pp(e)); try { for (o.s(); !(n = o.n()).done;)i[n.value.column]++; } catch (l) { o.e(l); } finally { o.f(); } const a = i.reduce(((e, t, n) => (t ? e : [].concat(c(e), [n]))), []); if (a.length > 0) { const s = a[a.length - 1]; return t.removeColumns(e, { at: s }), !0; } return !1; } function Qp(e, t) { for (var n = [], r = 0; r < e.childCount; r++)e.getChild(r).isEmpty && n.push(r); if (n.length > 0) { const i = n[n.length - 1]; return t.removeRows(e, { at: i }), !0; } return !1; } function Jp(e, t) { Kp(e, t) || Qp(e, t); } function Zp(e, t) { const n = Array.from(new pp(e, { startColumn: t.firstColumn, endColumn: t.lastColumn, row: t.lastRow })); if (n.every(((e) => e.cellHeight === 1))) return t.lastRow; const r = n[0].cellHeight - 1; return t.lastRow + r; } function Xp(e, t) { const n = Array.from(new pp(e, { startRow: t.firstRow, endRow: t.lastRow, column: t.lastColumn })); if (n.every(((e) => e.cellWidth === 1))) return t.lastColumn; const r = n[0].cellWidth - 1; return t.lastColumn + r; } const ek = (function (e) {
            v(n, e); const t = g(n); function n(e, r) { let i; return f(this, n), (i = t.call(this, e)).direction = r.direction, i.isHorizontal = i.direction == 'right' || i.direction == 'left', i; } return m(n, [{ key: 'refresh', value() { const e = this._getMergeableCell(); this.value = e, this.isEnabled = !!e; } }, {
              key: 'execute',
              value() {
                const e = this; const t = this.editor.model; const n = Ip(t.document.selection)[0]; const r = this.value; const i = this.direction; t.change(((t) => {
                  const o = i == 'right' || i == 'down'; const a = o ? n : r; const s = o ? r : n; const l = s.parent; !(function (e, t, n) { tk(e) || (tk(t) && n.remove(n.createRangeIn(t)), n.move(n.createRangeIn(e), n.createPositionAt(t, 'end'))), n.remove(e); }(s, a, t)); const c = e.isHorizontal ? 'colspan' : 'rowspan'; const u = parseInt(n.getAttribute(c) || 1); const
                    d = parseInt(r.getAttribute(c) || 1); t.setAttribute(c, u + d, a), t.setSelection(t.createRangeIn(a)); const h = e.editor.plugins.get('TableUtils'); Jp(l.findAncestor('table'), h);
                }));
              },
            }, {
              key: '_getMergeableCell',
              value() {
                const e = Ip(this.editor.model.document.selection)[0]; if (e) {
                  const t = this.editor.plugins.get('TableUtils'); const n = this.isHorizontal ? (function (e, t, n) { const r = e.parent.parent; const i = t == 'right' ? e.nextSibling : e.previousSibling; const o = (r.getAttribute('headingColumns') || 0) > 0; if (i) { const a = t == 'right' ? e : i; const s = t == 'right' ? i : e; const l = n.getCellLocation(a).column; const c = n.getCellLocation(s).column; const u = parseInt(a.getAttribute('colspan') || 1); const d = fp(n, a); const h = fp(n, s); if (!o || d == h) return l + u === c ? i : void 0; } }(e, this.direction, t)) : (function (e, t) { const n = e.parent; const r = n.parent; const i = r.getChildIndex(n); if (!(t == 'down' && i === r.childCount - 1 || t == 'up' && i === 0)) { const o = parseInt(e.getAttribute('rowspan') || 1); const a = r.getAttribute('headingRows') || 0; const s = t == 'down' && i + o === a; const l = t == 'up' && i === a; if (!a || !s && !l) { const u = parseInt(e.getAttribute('rowspan') || 1); const d = t == 'down' ? i + u : i; const h = c(new pp(r, { endRow: d })); const f = h.find(((t) => t.cell === e)).column; const m = h.find(((e) => { const n = e.row; const r = e.cellHeight; return e.column === f && (t == 'down' ? n === d : d === n + r); })); return m && m.cell; } } }(e, this.direction)); if (n) {
                    const r = this.isHorizontal ? 'rowspan' : 'colspan'; const
                      i = parseInt(e.getAttribute(r) || 1); return parseInt(n.getAttribute(r) || 1) === i ? n : void 0;
                  }
                }
              },
            }]), n;
          }(dd)); function tk(e) { return e.childCount == 1 && e.getChild(0).is('element', 'paragraph') && e.getChild(0).isEmpty; } const nk = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = Mp(this.editor.model.document.selection); const t = e[0]; if (t) { const n = t.findAncestor('table'); const r = this.editor.plugins.get('TableUtils').getRows(n) - 1; const i = Np(e); const o = i.first === 0 && i.last === r; this.isEnabled = !o; } else this.isEnabled = !1; } }, { key: 'execute', value() { const e = this; const t = this.editor.model; const n = Mp(t.document.selection); const r = Np(n); const i = n[0]; const o = i.findAncestor('table'); const a = this.editor.plugins.get('TableUtils').getCellLocation(i).column; t.change(((t) => { const n = r.last - r.first + 1; e.editor.plugins.get('TableUtils').removeRows(o, { at: r.first, rows: n }); const i = (function (e, t, n) { let r; const i = e.getChild(t) || e.getChild(e.childCount - 1); let o = i.getChild(0); let a = 0; const s = d(i.getChildren()); try { for (s.s(); !(r = s.n()).done;) { const l = r.value; if (a > n) return o; o = l, a += parseInt(l.getAttribute('colspan') || 1); } } catch (c) { s.e(c); } finally { s.f(); } return o; }(o, r.first, a)); t.setSelection(t.createPositionAt(i, 0)); })); } }]), n; }(dd)); const rk = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = Mp(this.editor.model.document.selection); const t = e[0]; if (t) { const n = t.findAncestor('table'); const r = this.editor.plugins.get('TableUtils').getColumns(n); const i = Rp(e); const o = i.first; const a = i.last; this.isEnabled = a - o < r - 1; } else this.isEnabled = !1; } }, { key: 'execute', value() { const e = this; const t = (function (e) { const t = Mp(e); const n = t[0]; const r = t.pop(); const i = [n, r]; return n.isBefore(r) ? i : i.reverse(); }(this.editor.model.document.selection)); const n = u(t, 2); const r = n[0]; const i = n[1]; const o = r.parent.parent; const a = c(new pp(o)); const s = { first: a.find(((e) => e.cell === r)).column, last: a.find(((e) => e.cell === i)).column }; const l = (function (e, t, n, r) { return parseInt(n.getAttribute('colspan') || 1) > 1 ? n : t.previousSibling || n.nextSibling ? n.nextSibling || t.previousSibling : r.first ? e.reverse().find(((e) => e.column < r.first)).cell : e.reverse().find(((e) => e.column > r.last)).cell; }(a, r, i, s)); this.editor.model.change(((t) => { const n = s.last - s.first + 1; e.editor.plugins.get('TableUtils').removeColumns(o, { at: s.first, columns: n }), t.setSelection(t.createPositionAt(l, 0)); })); } }]), n; }(dd)); const ik = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = this; const t = Mp(this.editor.model.document.selection); const n = t.length > 0; this.isEnabled = n, this.value = n && t.every(((t) => e._isInHeading(t, t.parent.parent))); } }, { key: 'execute', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; if (e.forceValue !== this.value) { const t = this.editor.model; const n = Mp(t.document.selection); const r = n[0].findAncestor('table'); const i = Np(n); const o = i.first; const a = i.last; const s = this.value ? o : a + 1; const l = r.getAttribute('headingRows') || 0; t.change(((e) => { if (s) { let t; const n = Wp(r, s, s > l ? l : 0); const i = d(n); try { for (i.s(); !(t = i.n()).done;)qp(t.value.cell, s, e); } catch (o) { i.e(o); } finally { i.f(); } }dp('headingRows', s, r, e, 0); })); } } }, { key: '_isInHeading', value(e, t) { const n = parseInt(t.getAttribute('headingRows') || 0); return !!n && e.parent.index < n; } }]), n; }(dd)); const ok = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = Mp(this.editor.model.document.selection); const t = this.editor.plugins.get('TableUtils'); const n = e.length > 0; this.isEnabled = n, this.value = n && e.every(((e) => fp(t, e))); } }, { key: 'execute', value() { const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; if (e.forceValue !== this.value) { const t = this.editor.model; const n = Mp(t.document.selection); const r = n[0].findAncestor('table'); const i = Rp(n); const o = i.first; const a = i.last; const s = this.value ? o : a + 1; t.change(((e) => { if (s) { let t; const n = Gp(r, s); const i = d(n); try { for (i.s(); !(t = i.n()).done;) { const o = t.value; $p(o.cell, o.column, s, e); } } catch (a) { i.e(a); } finally { i.f(); } }dp('headingColumns', s, r, e, 0); })); } } }]), n; }(dd)); const ak = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'getCellLocation', value(e) { let t; const n = e.parent; const r = n.parent; const i = r.getChildIndex(n); const o = new pp(r, { row: i }); const a = d(o); try { for (a.s(); !(t = a.n()).done;) { const s = t.value; const l = s.cell; const c = s.row; const u = s.column; if (l === e) return { row: c, column: u }; } } catch (h) { a.e(h); } finally { a.f(); } } }, { key: 'createTable', value(e, t) { const n = e.createElement('table'); return sk(e, n, 0, parseInt(t.rows) || 2, parseInt(t.columns) || 2), t.headingRows && dp('headingRows', t.headingRows, n, e, 0), t.headingColumns && dp('headingColumns', t.headingColumns, n, e, 0), n; } }, { key: 'insertRows', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; const n = this.editor.model; const r = t.at || 0; const i = t.rows || 1; const o = void 0 !== t.copyStructureFromAbove; const a = t.copyStructureFromAbove ? r - 1 : r; const s = this.getRows(e); const l = this.getColumns(e); n.change(((t) => { const n = e.getAttribute('headingRows') || 0; if (n > r && dp('headingRows', n + i, e, t, 0), o || r !== 0 && r !== s) { let c; const u = o ? Math.max(r, a) : r; const h = new pp(e, { endRow: u }); const f = new Array(l).fill(1); const m = d(h); try { for (m.s(); !(c = m.n()).done;) { const v = c.value; const g = v.row; const p = v.column; const k = v.cellHeight; const b = v.cellWidth; const y = v.cell; const w = g + k - 1; const _ = g <= a && a <= w; g < r && r <= w ? (t.setAttribute('rowspan', k + i, y), f[p] = -b) : o && _ && (f[p] = b); } } catch (A) { m.e(A); } finally { m.f(); } for (let E = 0; E < i; E++) { const x = t.createElement('tableRow'); t.insert(x, e, r); for (let T = 0; T < f.length; T++) { const C = f[T]; const S = t.createPositionAt(x, 'end'); C > 0 && hp(t, S, C > 1 ? { colspan: C } : null), T += Math.abs(C) - 1; } } } else sk(t, e, r, i, l); })); } }, { key: 'insertColumns', value(e) { const t = this; const n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; const r = this.editor.model; const i = n.at || 0; const o = n.columns || 1; r.change(((n) => { const r = e.getAttribute('headingColumns'); i < r && n.setAttribute('headingColumns', r + o, e); const a = t.getColumns(e); if (i !== 0 && a !== i) { let s; const l = new pp(e, { column: i, includeAllSlots: !0 }); const c = d(l); try { for (c.s(); !(s = c.n()).done;) { const u = s.value; const h = u.row; const f = u.cell; const m = u.cellAnchorColumn; const v = u.cellAnchorRow; const g = u.cellWidth; const p = u.cellHeight; if (m < i) { n.setAttribute('colspan', g + o, f); for (let k = v + p - 1, b = h; b <= k; b++)l.skipRow(b); } else lk(o, n, u.getPositionBefore()); } } catch (E) { c.e(E); } finally { c.f(); } } else { let y; const w = d(e.getChildren()); try { for (w.s(); !(y = w.n()).done;) { const _ = y.value; lk(o, n, n.createPositionAt(_, i ? 'end' : 0)); } } catch (E) { w.e(E); } finally { w.f(); } } })); } }, { key: 'removeRows', value(e, t) { const n = this; const r = this.editor.model; const i = t.rows || 1; const o = t.at; const a = o + i - 1; r.change(((t) => { const r = (function (e, t, n) { let r; const i = new Map(); const o = []; const a = d(new pp(e, { endRow: n })); try { for (a.s(); !(r = a.n()).done;) { const s = r.value; const l = s.row; const c = s.column; const u = s.cellHeight; const h = s.cell; const f = l + u - 1; if (l >= t && l <= n && f > n) { const m = u - (n - l + 1); i.set(c, { cell: h, rowspan: m }); } if (l < t && f >= t) { let v = void 0; v = f >= n ? n - t + 1 : f - t + 1, o.push({ cell: h, rowspan: u - v }); } } } catch (g) { a.e(g); } finally { a.f(); } return { cellsToMove: i, cellsToTrim: o }; }(e, o, a)); const i = r.cellsToMove; const s = r.cellsToTrim; i.size && (function (e, t, n, r) { let i; let o; const a = new pp(e, { includeAllSlots: !0, row: t }); const s = c(a); const l = e.getChild(t); const u = d(s); try { for (u.s(); !(o = u.n()).done;) { const h = o.value; const f = h.column; const m = h.cell; const v = h.isAnchor; if (n.has(f)) { const g = n.get(f); const p = g.cell; const k = g.rowspan; const b = i ? r.createPositionAfter(i) : r.createPositionAt(l, 0); r.move(r.createRangeOn(p), b), dp('rowspan', k, p, r), i = p; } else v && (i = m); } } catch (y) { u.e(y); } finally { u.f(); } }(e, a + 1, i, t)); for (let l = a; l >= o; l--)t.remove(e.getChild(l)); let u; const h = d(s); try { for (h.s(); !(u = h.n()).done;) { const f = u.value; dp('rowspan', f.rowspan, f.cell, t); } } catch (m) { h.e(m); } finally { h.f(); }!(function (e, t, n, r) { const i = e.getAttribute('headingRows') || 0; t < i && dp('headingRows', n < i ? i - (n - t + 1) : t, e, r, 0); }(e, o, a, t)), Kp(e, n) || Qp(e, n); })); } }, { key: 'removeColumns', value(e, t) { const n = this; const r = this.editor.model; const i = t.at; const o = t.columns || 1; const a = t.at + o - 1; r.change(((t) => { !(function (e, t, n) { const r = e.getAttribute('headingColumns') || 0; if (r && t.first < r) { const i = Math.min(r - 1, t.last) - t.first + 1; n.setAttribute('headingColumns', r - i, e); } }(e, { first: i, last: a }, t)); for (let r = a; r >= i; r--) for (let o = 0, s = c(new pp(e)); o < s.length; o++) { const l = s[o]; const u = l.cell; const d = l.column; const h = l.cellWidth; d <= r && h > 1 && d + h > r ? dp('colspan', h - 1, u, t) : d === r && t.remove(u); }Qp(e, n) || Kp(e, n); })); } }, { key: 'splitCellVertically', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 2; const n = this.editor.model; const r = e.parent; const i = r.parent; const o = parseInt(e.getAttribute('rowspan') || 1); const a = parseInt(e.getAttribute('colspan') || 1); n.change(((n) => { if (a > 1) { const r = ck(a, t); const s = r.newCellsSpan; dp('colspan', r.updatedSpan, e, n); const l = {}; s > 1 && (l.colspan = s), o > 1 && (l.rowspan = o), lk(a > t ? t - 1 : a - 1, n, n.createPositionAfter(e), l); } if (a < t) { let u; const h = t - a; const f = c(new pp(i)); const m = f.find(((t) => t.cell === e)).column; const v = f.filter(((t) => { const n = t.cell; const r = t.cellWidth; const i = t.column; return n !== e && i === m || i < m && i + r > m; })); const g = d(v); try { for (g.s(); !(u = g.n()).done;) { const p = u.value; const k = p.cell; const b = p.cellWidth; n.setAttribute('colspan', b + h, k); } } catch (_) { g.e(_); } finally { g.f(); } const y = {}; o > 1 && (y.rowspan = o), lk(h, n, n.createPositionAfter(e), y); const w = i.getAttribute('headingColumns') || 0; w > m && dp('headingColumns', w + h, i, n); } })); } }, { key: 'splitCellHorizontally', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 2; const n = this.editor.model; const r = e.parent; const i = r.parent; const o = i.getChildIndex(r); const a = parseInt(e.getAttribute('rowspan') || 1); const s = parseInt(e.getAttribute('colspan') || 1); n.change(((n) => { if (a > 1) { const r = c(new pp(i, { startRow: o, endRow: o + a - 1, includeAllSlots: !0 })); const l = ck(a, t); const u = l.newCellsSpan; const h = l.updatedSpan; dp('rowspan', h, e, n); const f = r.find(((t) => t.cell === e)).column; const m = {}; u > 1 && (m.rowspan = u), s > 1 && (m.colspan = s); let v; const g = d(r); try { for (g.s(); !(v = g.n()).done;) { const p = v.value; const k = p.column; const b = p.row; b >= o + h && k === f && (b + o + h) % u === 0 && lk(1, n, p.getPositionBefore(), m); } } catch (I) { g.e(I); } finally { g.f(); } } if (a < t) { let y; const w = t - a; const _ = c(new pp(i, { startRow: 0, endRow: o })); const E = d(_); try { for (E.s(); !(y = E.n()).done;) { const x = y.value; const T = x.cell; const C = x.cellHeight; const S = x.row; if (T !== e && S + C > o) { const A = C + w; n.setAttribute('rowspan', A, T); } } } catch (I) { E.e(I); } finally { E.f(); } const P = {}; s > 1 && (P.colspan = s), sk(n, i, o + 1, w, 1, P); const O = i.getAttribute('headingRows') || 0; O > o && dp('headingRows', O + w, i, n); } })); } }, { key: 'getColumns', value(e) { const t = e.getChild(0); return c(t.getChildren()).reduce(((e, t) => e + parseInt(t.getAttribute('colspan') || 1)), 0); } }, { key: 'getRows', value(e) { return e.childCount; } }], [{ key: 'pluginName', get() { return 'TableUtils'; } }]), n; }(sd)); function sk(e, t, n, r, i) { for (let o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : {}, a = 0; a < r; a++) { const s = e.createElement('tableRow'); e.insert(s, t, n), lk(i, e, e.createPositionAt(s, 'end'), o); } } function lk(e, t, n) { for (let r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}, i = 0; i < e; i++)hp(t, n, r); } function ck(e, t) { if (e < t) return { newCellsSpan: 1, updatedSpan: 1 }; const n = Math.floor(e / t); return { newCellsSpan: n, updatedSpan: e - n * t + n }; } const uk = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = Op(this.editor.model.document.selection); this.isEnabled = jp(e, this.editor.plugins.get(ak)); } }, { key: 'execute', value() { const e = this.editor.model; const t = this.editor.plugins.get(ak); e.change(((n) => { const r = Op(e.document.selection); const i = r.shift(); const o = (function (e, t, n) { let r; let i = 0; let o = 0; const a = d(t); try { for (a.s(); !(r = a.n()).done;) { const s = r.value; const l = n.getCellLocation(s); const c = l.row; const u = l.column; i = fk(s, u, i, 'colspan'), o = fk(s, c, o, 'rowspan'); } } catch (v) { a.e(v); } finally { a.f(); } const h = n.getCellLocation(e); const f = h.row; const m = h.column; return { mergeWidth: i - m, mergeHeight: o - f }; }(i, r, t)); const a = o.mergeWidth; const s = o.mergeHeight; dp('colspan', a, i, n), dp('rowspan', s, i, n); let l; const c = d(r); try { for (c.s(); !(l = c.n()).done;)dk(l.value, i, n); } catch (u) { c.e(u); } finally { c.f(); }Jp(i.findAncestor('table'), t), n.setSelection(i, 'in'); })); } }]), n; }(dd)); function dk(e, t, n) { hk(e) || (hk(t) && n.remove(n.createRangeIn(t)), n.move(n.createRangeIn(e), n.createPositionAt(t, 'end'))), n.remove(e); } function hk(e) { return e.childCount == 1 && e.getChild(0).is('element', 'paragraph') && e.getChild(0).isEmpty; } function fk(e, t, n, r) { const i = parseInt(e.getAttribute(r) || 1); return Math.max(n, t + i); } const mk = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = Mp(this.editor.model.document.selection); this.isEnabled = e.length > 0; } }, { key: 'execute', value() { for (var e = this.editor.model, t = Mp(e.document.selection), n = Np(t), r = t[0].findAncestor('table'), i = [], o = n.first; o <= n.last; o++) { var a; const s = d(r.getChild(o).getChildren()); try { for (s.s(); !(a = s.n()).done;) { const l = a.value; i.push(e.createRangeOn(l)); } } catch (c) { s.e(c); } finally { s.f(); } }e.change(((e) => { e.setSelection(i); })); } }]), n; }(dd)); const vk = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'refresh', value() { const e = Mp(this.editor.model.document.selection); this.isEnabled = e.length > 0; } }, { key: 'execute', value() { let e; const t = this.editor.model; const n = Mp(t.document.selection); const r = n[0]; const i = n.pop(); const o = r.findAncestor('table'); const a = this.editor.plugins.get('TableUtils'); const s = a.getCellLocation(r); const l = a.getCellLocation(i); const c = Math.min(s.column, l.column); const u = Math.max(s.column, l.column); const h = []; const f = d(new pp(o, { startColumn: c, endColumn: u })); try { for (f.s(); !(e = f.n()).done;) { const m = e.value; h.push(t.createRangeOn(m.cell)); } } catch (v) { f.e(v); } finally { f.f(); }t.change(((e) => { e.setSelection(h); })); } }]), n; }(dd)); function gk(e) { e.document.registerPostFixer(((t) => (function (e, t) { let n; const r = t.document.differ.getChanges(); let i = !1; const o = new Set(); const a = d(r); try { for (a.s(); !(n = a.n()).done;) { const s = n.value; let l = void 0; s.name == 'table' && s.type == 'insert' && (l = s.position.nodeAfter), s.name != 'tableRow' && s.name != 'tableCell' || (l = s.position.findAncestor('table')), bk(s) && (l = s.range.start.findAncestor('table')), l && !o.has(l) && (i = pk(l, e) || i, i = kk(l, e) || i, o.add(l)); } } catch (c) { a.e(c); } finally { a.f(); } return i; }(t, e)))); } function pk(e, t) { let n = !1; const r = (function (e) { let t; const n = parseInt(e.getAttribute('headingRows') || 0); const r = e.childCount; const i = []; const o = d(new pp(e)); try { for (o.s(); !(t = o.n()).done;) { const a = t.value; const s = a.row; const l = a.cell; const c = a.cellHeight; if (!(c < 2)) { const u = s < n ? n : r; if (s + c > u) { const h = u - s; i.push({ cell: l, rowspan: h }); } } } } catch (f) { o.e(f); } finally { o.f(); } return i; }(e)); if (r.length) { n = !0; let i; const o = d(r); try { for (o.s(); !(i = o.n()).done;) { const a = i.value; dp('rowspan', a.rowspan, a.cell, t, 1); } } catch (s) { o.e(s); } finally { o.f(); } } return n; } function kk(e, t) { let n; let r = !1; const i = (function (e) { let t; const n = new Array(e.childCount).fill(0); const r = d(new pp(e, { includeAllSlots: !0 })); try { for (r.s(); !(t = r.n()).done;) { const i = t.value.row; n[i]++; } } catch (o) { r.e(o); } finally { r.f(); } return n; }(e)); const o = []; const a = d(i.entries()); try { for (a.s(); !(n = a.n()).done;) { const s = u(n.value, 2); const l = s[0]; s[1] || o.push(l); } } catch (_) { a.e(_); } finally { a.f(); } if (o.length) { r = !0; let c; const h = d(o.reverse()); try { for (h.s(); !(c = h.n()).done;) { const f = c.value; t.remove(e.getChild(f)), i.splice(f, 1); } } catch (_) { h.e(_); } finally { h.f(); } } const m = i[0]; if (!i.every(((e) => e === m))) { let v; const g = i.reduce(((e, t) => (t > e ? t : e)), 0); const p = d(i.entries()); try { for (p.s(); !(v = p.n()).done;) { const k = u(v.value, 2); const b = k[0]; const y = g - k[1]; if (y) { for (let w = 0; w < y; w++)hp(t, t.createPositionAt(e.getChild(b), 'end')); r = !0; } } } catch (_) { p.e(_); } finally { p.f(); } } return r; } function bk(e) { const t = e.type === 'attribute'; const n = e.attributeKey; return t && (n === 'headingRows' || n === 'colspan' || n === 'rowspan'); } function yk(e) { e.document.registerPostFixer(((t) => (function (e, t) { let n; const r = t.document.differ.getChanges(); let i = !1; const o = d(r); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; a.type == 'insert' && a.name == 'table' && (i = wk(a.position.nodeAfter, e) || i), a.type == 'insert' && a.name == 'tableRow' && (i = _k(a.position.nodeAfter, e) || i), a.type == 'insert' && a.name == 'tableCell' && (i = Ek(a.position.nodeAfter, e) || i), xk(a) && (i = Ek(a.position.parent, e) || i); } } catch (s) { o.e(s); } finally { o.f(); } return i; }(t, e)))); } function wk(e, t) { let n; let r = !1; const i = d(e.getChildren()); try { for (i.s(); !(n = i.n()).done;)r = _k(n.value, t) || r; } catch (o) { i.e(o); } finally { i.f(); } return r; } function _k(e, t) { let n; let r = !1; const i = d(e.getChildren()); try { for (i.s(); !(n = i.n()).done;)r = Ek(n.value, t) || r; } catch (o) { i.e(o); } finally { i.f(); } return r; } function Ek(e, t) { if (e.childCount == 0) return t.insertElement('paragraph', e), !0; let n; const r = Array.from(e.getChildren()).filter(((e) => e.is('$text'))); const i = d(r); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; t.wrap(t.createRangeOn(o), 'paragraph'); } } catch (a) { i.e(a); } finally { i.f(); } return !!r.length; } function xk(e) { return !(!e.position || !e.position.parent.is('element', 'tableCell')) && (e.type == 'insert' && e.name == '$text' || e.type == 'remove'); } function Tk(e) { e.document.registerPostFixer((() => (function (e) { let t; const n = e.document.differ; const r = new Set(); let i = 0; const o = d(n.getChanges()); try { for (o.s(); !(t = o.n()).done;) { const a = t.value; const s = a.type == 'insert' || a.type == 'remove' ? a.position.parent : a.range.start.parent; s.is('element', 'tableCell') && (a.type == 'insert' && i++, Ck(s, a.type, i) && r.add(s)); } } catch (h) { o.e(h); } finally { o.f(); } if (r.size) { let l; const c = d(r.values()); try { for (c.s(); !(l = c.n()).done;) { const u = l.value; n.refreshItem(u); } } catch (h) { c.e(h); } finally { c.f(); } return !0; } return !1; }(e)))); } function Ck(e, t, n) { if (!Array.from(e.getChildren()).some(((e) => e.is('element', 'paragraph')))) return !1; if (t == 'attribute') { const r = Array.from(e.getChild(0).getAttributeKeys()).length; return e.childCount === 1 && r < 2; } return e.childCount <= (t == 'insert' ? n + 1 : 1); } function Sk(e) { e.document.registerPostFixer((() => (function (e) { let t; const n = e.document.differ; const r = new Set(); const i = d(n.getChanges()); try { for (i.s(); !(t = i.n()).done;) { const o = t.value; if (o.type == 'attribute') { const a = o.range.start.nodeAfter; a && a.is('element', 'table') && o.attributeKey == 'headingRows' && r.add(a); } } } catch (u) { i.e(u); } finally { i.f(); } if (r.size) { let s; const l = d(r.values()); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; n.refreshItem(c); } } catch (u) { l.e(u); } finally { l.f(); } return !0; } return !1; }(e)))); }n(90); const Ak = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{
              key: 'init',
              value() {
                const e = this.editor; const t = e.model; const n = t.schema; const r = e.conversion; n.register('table', {
                  allowWhere: '$block', allowAttributes: ['headingRows', 'headingColumns'], isLimit: !0, isObject: !0, isBlock: !0,
                }), n.register('tableRow', { allowIn: 'table', isLimit: !0 }), n.register('tableCell', { allowIn: 'tableRow', allowAttributes: ['colspan', 'rowspan'], isObject: !0 }), n.extend('$block', { allowIn: 'tableCell' }), n.addChildCheck(((e, t) => { if (t.name == 'table' && Array.from(e.getNames()).includes('table')) return !1; })), r.for('upcast').add(mp()), r.for('editingDowncast').add(bp({ asWidget: !0 })), r.for('dataDowncast').add(bp()), r.for('upcast').elementToElement({ model: 'tableRow', view: 'tr' }), r.for('upcast').add(((e) => { e.on('element:tr', ((e, t) => { t.viewItem.isEmpty && t.modelCursor.index == 0 && e.stop(); }), { priority: 'high' }); })), r.for('editingDowncast').add(yp()), r.for('editingDowncast').add(((e) => e.on('remove:tableRow', ((e, t, n) => { e.stop(); let r; const i = n.writer; const o = n.mapper; const a = o.toViewPosition(t.position).getLastMatchingPosition(((e) => !e.item.is('element', 'tr'))).nodeAfter; const s = a.parent.parent; const l = i.createRangeOn(a); const c = i.remove(l); const u = d(i.createRangeIn(c).getItems()); try { for (u.s(); !(r = u.n()).done;) { const h = r.value; o.unbindViewElement(h); } } catch (f) { u.e(f); } finally { u.f(); }Sp('thead', s, n), Sp('tbody', s, n); }), { priority: 'higher' }))), r.for('upcast').add(vp('td')), r.for('upcast').add(vp('th')), r.for('editingDowncast').add(((e) => e.on('insert:tableCell', ((e, t, n) => { const r = t.item; if (n.consumable.consume(r, 'insert')) { let i; const o = r.parent; const a = o.parent; const s = a.getChildIndex(o); const l = new pp(a, { row: s }); const c = { headingRows: a.getAttribute('headingRows') || 0, headingColumns: a.getAttribute('headingColumns') || 0 }; const u = d(l); try { for (u.s(); !(i = u.n()).done;) { const h = i.value; if (h.cell === r) { const f = n.mapper.toViewElement(o); return void Ep(h, c, n.writer.createPositionAt(f, o.getChildIndex(r)), n, { asWidget: !0 }); } } } catch (m) { u.e(m); } finally { u.f(); } } })))), r.attributeToAttribute({ model: 'colspan', view: 'colspan' }), r.attributeToAttribute({ model: 'rowspan', view: 'rowspan' }), r.for('editingDowncast').add(((e) => e.on('attribute:headingColumns:table', ((e, t, n) => { const r = t.item; if (n.consumable.consume(t.item, e.name)) { let i; const o = { headingRows: r.getAttribute('headingRows') || 0, headingColumns: r.getAttribute('headingColumns') || 0 }; const a = t.attributeOldValue; const s = t.attributeNewValue; const l = d(new pp(r, { endColumn: (a > s ? a : s) - 1 })); try { for (l.s(); !(i = l.n()).done;)_p(i.value, o, n); } catch (c) { l.e(c); } finally { l.f(); } } })))), e.commands.add('insertTable', new Pp(e)), e.commands.add('insertTableRowAbove', new Vp(e, { order: 'above' })), e.commands.add('insertTableRowBelow', new Vp(e, { order: 'below' })), e.commands.add('insertTableColumnLeft', new Bp(e, { order: 'left' })), e.commands.add('insertTableColumnRight', new Bp(e, { order: 'right' })), e.commands.add('removeTableRow', new nk(e)), e.commands.add('removeTableColumn', new rk(e)), e.commands.add('splitTableCellVertically', new Up(e, { direction: 'vertically' })), e.commands.add('splitTableCellHorizontally', new Up(e, { direction: 'horizontally' })), e.commands.add('mergeTableCells', new uk(e)), e.commands.add('mergeTableCellRight', new ek(e, { direction: 'right' })), e.commands.add('mergeTableCellLeft', new ek(e, { direction: 'left' })), e.commands.add('mergeTableCellDown', new ek(e, { direction: 'down' })), e.commands.add('mergeTableCellUp', new ek(e, { direction: 'up' })), e.commands.add('setTableColumnHeader', new ok(e)), e.commands.add('setTableRowHeader', new ik(e)), e.commands.add('selectTableRow', new mk(e)), e.commands.add('selectTableColumn', new vk(e)), Sk(t), gk(t), Tk(t), yk(t);
              },
            }], [{ key: 'pluginName', get() { return 'TableEditing'; } }, { key: 'requires', get() { return [ak]; } }]), n;
          }(sd)); const Pk = (n(92), (function (e) {
            v(n, e); const t = g(n); function n(e) { let r; f(this, n); const i = (r = t.call(this, e)).bindTemplate; return r.set('icon'), r.set('isEnabled', !0), r.set('isOn', !1), r.set('isToggleable', !1), r.set('isVisible', !0), r.set('keystroke'), r.set('label'), r.set('tabindex', -1), r.set('tooltip'), r.set('tooltipPosition', 's'), r.set('type', 'button'), r.set('withText', !1), r.children = r.createCollection(), r.actionView = r._createActionView(), r.arrowView = r._createArrowView(), r.keystrokes = new Oc(), r.focusTracker = new Fc(), r.setTemplate({ tag: 'div', attributes: { class: ['ck', 'ck-splitbutton', i.if('isVisible', 'ck-hidden', ((e) => !e)), r.arrowView.bindTemplate.if('isOn', 'ck-splitbutton_open')] }, children: r.children }), r; } return m(n, [{ key: 'render', value() { const e = this; o(a(n.prototype), 'render', this).call(this), this.children.add(this.actionView), this.children.add(this.arrowView), this.focusTracker.add(this.actionView.element), this.focusTracker.add(this.arrowView.element), this.keystrokes.listenTo(this.element), this.keystrokes.set('arrowright', ((t, n) => { e.focusTracker.focusedElement === e.actionView.element && (e.arrowView.focus(), n()); })), this.keystrokes.set('arrowleft', ((t, n) => { e.focusTracker.focusedElement === e.arrowView.element && (e.actionView.focus(), n()); })); } }, { key: 'focus', value() { this.actionView.focus(); } }, { key: '_createActionView', value() { const e = new Fu(); return e.bind('icon', 'isEnabled', 'isOn', 'isToggleable', 'keystroke', 'label', 'tabindex', 'tooltip', 'tooltipPosition', 'type', 'withText').to(this), e.extendTemplate({ attributes: { class: 'ck-splitbutton__action' } }), e.delegate('execute').to(this), e; } }, {
              key: '_createArrowView',
              value() {
                const e = new Fu(); const
                  t = e.bindTemplate; return e.icon = Vu, e.extendTemplate({ attributes: { class: 'ck-splitbutton__arrow', 'aria-haspopup': !0, 'aria-expanded': t.to('isOn', ((e) => String(e))) } }), e.bind('isEnabled').to(this), e.delegate('execute').to(this, 'open'), e;
              },
            }]), n;
          }(vu))); const Ok = (n(94), (function (e) {
            v(n, e); const t = g(n); function n(e) {
              let r; f(this, n); const i = (r = t.call(this, e)).bindTemplate; return r.items = r._createGridCollection(), r.set('rows', 0), r.set('columns', 0), r.bind('label').to(s(r), 'columns', s(r), 'rows', ((e, t) => ''.concat(t, ' \xd7 ').concat(e))), r.setTemplate({
                tag: 'div',
                attributes: { class: ['ck'] },
                children: [{
                  tag: 'div', attributes: { class: ['ck-insert-table-dropdown__grid'] }, on: { 'mouseover@.ck-insert-table-dropdown-grid-box': i.to('boxover') }, children: r.items,
                }, { tag: 'div', attributes: { class: ['ck-insert-table-dropdown__label'] }, children: [{ text: i.to('label') }] }],
                on: { mousedown: i.to(((e) => { e.preventDefault(); })), click: i.to((() => { r.fire('execute'); })) },
              }), r.on('boxover', ((e, t) => { const n = t.target.dataset; const i = n.row; const o = n.column; r.set({ rows: parseInt(i), columns: parseInt(o) }); })), r.on('change:columns', (() => { r._highlightGridBoxes(); })), r.on('change:rows', (() => { r._highlightGridBoxes(); })), r;
            } return m(n, [{ key: 'focus', value() {} }, { key: 'focusLast', value() {} }, { key: '_highlightGridBoxes', value() { const e = this.rows; const t = this.columns; this.items.map(((n, r) => { const i = Math.floor(r / 10) < e && r % 10 < t; n.set('isOn', i); })); } }, { key: '_createGridCollection', value() { for (var e = [], t = 0; t < 100; t++) { const n = Math.floor(t / 10); const r = t % 10; e.push(new Ik(this.locale, n + 1, r + 1)); } return this.createCollection(e); } }]), n;
          }(vu))); var Ik = (function (e) { v(n, e); const t = g(n); function n(e, r, i) { let o; f(this, n); const a = (o = t.call(this, e)).bindTemplate; return o.set('isOn', !1), o.setTemplate({ tag: 'div', attributes: { class: ['ck-insert-table-dropdown-grid-box', a.if('isOn', 'ck-on')], 'data-row': r, 'data-column': i } }), o; } return n; }(vu)); const Mk = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor; const n = this.editor.t; const r = t.locale.contentLanguageDirection === 'ltr'; t.ui.componentFactory.add('insertTable', ((e) => { let r; const i = t.commands.get('insertTable'); const o = $u(e); return o.bind('isEnabled').to(i), o.buttonView.set({ icon: '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>', label: n('Insert table'), tooltip: !0 }), o.on('change:isOpen', (() => { r || (r = new Ok(e), o.panelView.children.add(r), r.delegate('execute').to(o), o.buttonView.on('open', (() => { r.rows = 0, r.columns = 0; })), o.on('execute', (() => { t.execute('insertTable', { rows: r.rows, columns: r.columns }), t.editing.view.focus(); }))); })), o; })), t.ui.componentFactory.add('tableColumn', ((t) => { const i = [{ type: 'switchbutton', model: { commandName: 'setTableColumnHeader', label: n('Header column'), bindIsOn: !0 } }, { type: 'separator' }, { type: 'button', model: { commandName: r ? 'insertTableColumnLeft' : 'insertTableColumnRight', label: n('Insert column left') } }, { type: 'button', model: { commandName: r ? 'insertTableColumnRight' : 'insertTableColumnLeft', label: n('Insert column right') } }, { type: 'button', model: { commandName: 'removeTableColumn', label: n('Delete column') } }, { type: 'button', model: { commandName: 'selectTableColumn', label: n('Select column') } }]; return e._prepareDropdown(n('Column'), '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>', i, t); })), t.ui.componentFactory.add('tableRow', ((t) => { const r = [{ type: 'switchbutton', model: { commandName: 'setTableRowHeader', label: n('Header row'), bindIsOn: !0 } }, { type: 'separator' }, { type: 'button', model: { commandName: 'insertTableRowAbove', label: n('Insert row above') } }, { type: 'button', model: { commandName: 'insertTableRowBelow', label: n('Insert row below') } }, { type: 'button', model: { commandName: 'removeTableRow', label: n('Delete row') } }, { type: 'button', model: { commandName: 'selectTableRow', label: n('Select row') } }]; return e._prepareDropdown(n('Row'), '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>', r, t); })), t.ui.componentFactory.add('mergeTableCells', ((t) => { const i = [{ type: 'button', model: { commandName: 'mergeTableCellUp', label: n('Merge cell up') } }, { type: 'button', model: { commandName: r ? 'mergeTableCellRight' : 'mergeTableCellLeft', label: n('Merge cell right') } }, { type: 'button', model: { commandName: 'mergeTableCellDown', label: n('Merge cell down') } }, { type: 'button', model: { commandName: r ? 'mergeTableCellLeft' : 'mergeTableCellRight', label: n('Merge cell left') } }, { type: 'separator' }, { type: 'button', model: { commandName: 'splitTableCellVertically', label: n('Split cell vertically') } }, { type: 'button', model: { commandName: 'splitTableCellHorizontally', label: n('Split cell horizontally') } }]; return e._prepareMergeSplitButtonDropdown(n('Merge cells'), '<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>', i, t); })); } }, { key: '_prepareDropdown', value(e, t, n, r) { const i = this.editor; const o = $u(r); const a = this._fillDropdownWithListOptions(o, n); return o.buttonView.set({ label: e, icon: t, tooltip: !0 }), o.bind('isEnabled').toMany(a, 'isEnabled', (function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; return t.some(((e) => e)); })), this.listenTo(o, 'execute', ((e) => { i.execute(e.source.commandName), i.editing.view.focus(); })), o; } }, {
              key: '_prepareMergeSplitButtonDropdown',
              value(e, t, n, r) {
                const i = this.editor; const o = $u(r, Pk); return this._fillDropdownWithListOptions(o, n), o.buttonView.set({
                  label: e, icon: t, tooltip: !0, isEnabled: !0,
                }), this.listenTo(o.buttonView, 'execute', (() => { i.execute('mergeTableCells'), i.editing.view.focus(); })), this.listenTo(o, 'execute', ((e) => { i.execute(e.source.commandName), i.editing.view.focus(); })), o;
              },
            }, { key: '_fillDropdownWithListOptions', value(e, t) { let n; const r = this.editor; const i = []; const o = new Jn(); const a = d(t); try { for (a.s(); !(n = a.n()).done;)Nk(n.value, r, i, o); } catch (s) { a.e(s); } finally { a.f(); } return Yu(e, o, r.ui.componentFactory), i; } }]), n;
          }(sd)); function Nk(e, t, n, r) { const i = e.model = new Fh(e.model); const o = e.model; const a = o.commandName; const s = o.bindIsOn; if (e.type === 'button' || e.type === 'switchbutton') { const l = t.commands.get(a); n.push(l), i.set({ commandName: a }), i.bind('isEnabled').to(l), s && i.bind('isOn').to(l, 'value'); }i.set({ withText: !0 }), r.add(e); }n(96); const Rk = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor.model; this.listenTo(t, 'deleteContent', ((t, n) => e._handleDeleteContent(t, n)), { priority: 'high' }), this._defineSelectionConverter(), this._enablePluginDisabling(); } }, { key: 'getSelectedTableCells', value() { const e = Op(this.editor.model.document.selection); return e.length == 0 ? null : e; } }, {
              key: 'getSelectionAsFragment',
              value() {
                const e = this; const t = this.getSelectedTableCells(); return t ? this.editor.model.change(((n) => {
                  const r = n.createDocumentFragment(); const i = e.editor.plugins.get('TableUtils'); const o = Rp(t); const a = o.first; const s = o.last; const l = Np(t); const c = l.first; const u = l.last; const d = t[0].findAncestor('table'); let h = u; let f = s; if (jp(t, i)) {
                    const m = {
                      firstColumn: a, lastColumn: s, firstRow: c, lastRow: u,
                    }; h = Zp(d, m), f = Xp(d, m);
                  } const v = Hp(d, {
                    startRow: c, startColumn: a, endRow: h, endColumn: f,
                  }, n); return n.insert(v, r, 0), r;
                })) : null;
              },
            }, { key: 'setCellSelection', value(e, t) { const n = this._getCellsToSelect(e, t); this.editor.model.change(((e) => { e.setSelection(n.cells.map(((t) => e.createRangeOn(t))), { backward: n.backward }); })); } }, { key: 'getFocusCell', value() { const e = this.editor.model.document.selection; const t = c(e.getRanges()).pop().getContainedElement(); return t && t.is('element', 'tableCell') ? t : null; } }, { key: 'getAnchorCell', value() { const e = rd(this.editor.model.document.selection.getRanges()).getContainedElement(); return e && e.is('element', 'tableCell') ? e : null; } }, { key: '_defineSelectionConverter', value() { const e = this; const t = this.editor; const n = new Set(); t.conversion.for('editingDowncast').add(((t) => t.on('selection', ((t, r, i) => { const o = i.writer; !(function (e) { let t; const r = d(n); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; e.removeClass('ck-editor__editable_selected', i); } } catch (o) { r.e(o); } finally { r.f(); }n.clear(); }(o)); const a = e.getSelectedTableCells(); if (a) { let s; const l = d(a); try { for (l.s(); !(s = l.n()).done;) { const c = s.value; const u = i.mapper.toViewElement(c); o.addClass('ck-editor__editable_selected', u), n.add(u); } } catch (f) { l.e(f); } finally { l.f(); } const h = i.mapper.toViewElement(a[a.length - 1]); o.setSelection(h, 0); } }), { priority: 'lowest' }))); } }, { key: '_enablePluginDisabling', value() { const e = this; const t = this.editor; this.on('change:isEnabled', (() => { if (!e.isEnabled) { const n = e.getSelectedTableCells(); if (!n) return; t.model.change(((e) => { const r = e.createPositionAt(n[0], 0); const i = t.model.schema.getNearestSelectionRange(r); e.setSelection(i); })); } })); } }, { key: '_handleDeleteContent', value(e, t) { const n = u(t, 2); const r = n[0]; const i = n[1]; const o = this.editor.model; const a = !i || i.direction == 'backward'; const s = Op(r); s.length && (e.stop(), o.change(((e) => { const t = s[a ? s.length - 1 : 0]; o.change(((e) => { let t; const n = d(s); try { for (n.s(); !(t = n.n()).done;) { const r = t.value; o.deleteContent(e.createSelection(r, 'in')); } } catch (i) { n.e(i); } finally { n.f(); } })); const n = o.schema.getNearestSelectionRange(e.createPositionAt(t, 0)); r.is('documentSelection') ? e.setSelection(n) : r.setTo(n); }))); } }, {
              key: '_getCellsToSelect',
              value(e, t) {
                let n; const r = this.editor.plugins.get('TableUtils'); const i = r.getCellLocation(e); const o = r.getCellLocation(t); const a = Math.min(i.row, o.row); const s = Math.max(i.row, o.row); const l = Math.min(i.column, o.column); const c = Math.max(i.column, o.column); const u = new Array(s - a + 1).fill(null).map((() => [])); const h = {
                  startRow: a, endRow: s, startColumn: l, endColumn: c,
                }; const f = d(new pp(e.findAncestor('table'), h)); try { for (f.s(); !(n = f.n()).done;) { const m = n.value; const v = m.row; const g = m.cell; u[v - a].push(g); } } catch (b) { f.e(b); } finally { f.f(); } const p = o.row < i.row; const k = o.column < i.column; return p && u.reverse(), k && u.forEach(((e) => e.reverse())), { cells: u.flat(), backward: p || k };
              },
            }], [{ key: 'pluginName', get() { return 'TableSelection'; } }, { key: 'requires', get() { return [ak]; } }]), n;
          }(sd)); const jk = (function (e) {
            v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor; const n = t.editing.view.document; this.listenTo(n, 'copy', ((t, n) => e._onCopyCut(t, n))), this.listenTo(n, 'cut', ((t, n) => e._onCopyCut(t, n))), this.listenTo(t.model, 'insertContent', ((t, n) => e._onInsertContent.apply(e, [t].concat(c(n)))), { priority: 'high' }); } }, { key: '_onCopyCut', value(e, t) { const n = this.editor.plugins.get(Rk); if (n.getSelectedTableCells() && (e.name != 'cut' || !this.editor.isReadOnly)) { t.preventDefault(), e.stop(); const r = this.editor.data; const i = this.editor.editing.view.document; const o = r.toView(n.getSelectionAsFragment()); i.fire('clipboardOutput', { dataTransfer: t.dataTransfer, content: o, method: e.name }); } } }, {
              key: '_onInsertContent',
              value(e, t, n) {
                const r = this; if (!n || n.is('documentSelection')) {
                  const i = this.editor.model; const o = this.editor.plugins.get(ak); let a = (function (e, t) { if (!e.is('documentFragment') && !e.is('element')) return null; if (e.is('element', 'table')) return e; if (e.childCount == 1 && e.getChild(0).is('element', 'table')) return e.getChild(0); let n; const r = t.createRangeIn(e); const i = d(r.getItems()); try { for (i.s(); !(n = i.n()).done;) { const o = n.value; if (o.is('element', 'table')) { const a = t.createRange(r.start, t.createPositionBefore(o)); if (t.hasContent(a, { ignoreWhitespaces: !0 })) return null; const s = t.createRange(t.createPositionAfter(o), r.end); return t.hasContent(s, { ignoreWhitespaces: !0 }) ? null : o; } } } catch (l) { i.e(l); } finally { i.f(); } return null; }(t, i)); if (a) {
                    const s = Mp(i.document.selection); s.length ? (e.stop(), i.change(((e) => {
                      const t = { width: o.getColumns(a), height: o.getRows(a) }; const n = (function (e, t, n, r) {
                        const i = e[0].findAncestor('table'); const o = Rp(e); const a = Np(e); const s = {
                          firstColumn: o.first, lastColumn: o.last, firstRow: a.first, lastRow: a.last,
                        }; const l = e.length === 1; return l && (s.lastRow += t.height - 1, s.lastColumn += t.width - 1, (function (e, t, n, r) { const i = r.getColumns(e); const o = r.getRows(e); n > i && r.insertColumns(e, { at: i, columns: n - i }), t > o && r.insertRows(e, { at: o, rows: t - o }); }(i, s.lastRow + 1, s.lastColumn + 1, r))), l || !jp(e, r) ? (function (e, t, n) { const r = t.firstRow; const i = t.lastRow; const o = t.firstColumn; const a = t.lastColumn; const s = { first: r, last: i }; const l = { first: o, last: a }; Lk(e, o, s, n), Lk(e, a + 1, s, n), Dk(e, r, l, n), Dk(e, i + 1, l, n, r); }(i, s, n)) : (s.lastRow = Zp(i, s), s.lastColumn = Xp(i, s)), s;
                      }(s, t, e, o)); const i = n.lastRow - n.firstRow + 1; const l = n.lastColumn - n.firstColumn + 1; const u = {
                        startRow: 0, startColumn: 0, endRow: Math.min(i, t.height) - 1, endColumn: Math.min(l, t.width) - 1,
                      }; a = Hp(a, u, e); const h = s[0].findAncestor('table'); const f = (function (e, t, n, r, i) {
                        let o; let a; const s = t.width; const l = t.height; const u = (function (e, t, n) { let r; const i = new Array(n).fill(null).map((() => new Array(t).fill(null))); const o = d(new pp(e)); try { for (o.s(); !(r = o.n()).done;) { const a = r.value; const s = a.column; const l = a.row; const c = a.cell; i[l][s] = c; } } catch (u) { o.e(u); } finally { o.f(); } return i; }(e, s, l)); const h = c(new pp(n, {
                          startRow: r.firstRow, endRow: r.lastRow, startColumn: r.firstColumn, endColumn: r.lastColumn, includeAllSlots: !0,
                        })); const f = []; const m = d(h); try { for (m.s(); !(a = m.n()).done;) { const v = a.value; const g = v.row; const p = v.column; const k = v.cell; const b = v.isAnchor; p === r.firstColumn && (o = v.getPositionBefore()), b && i.remove(k); const y = g - r.firstRow; const w = p - r.firstColumn; const _ = u[y % l][w % s]; if (_) { const E = i.cloneElement(_); Yp(E, g, p, r.lastRow, r.lastColumn, i), i.insert(E, o), f.push(E), o = i.createPositionAfter(E); } } } catch (M) { m.e(M); } finally { m.f(); } const x = parseInt(n.getAttribute('headingRows') || 0); const T = parseInt(n.getAttribute('headingColumns') || 0); const C = r.firstRow < x && x <= r.lastRow; const S = r.firstColumn < T && T <= r.lastColumn; if (C) { const A = { first: r.firstColumn, last: r.lastColumn }; const P = Dk(n, x, A, i, r.firstRow); f.push.apply(f, c(P)); } if (S) { const O = { first: r.firstRow, last: r.lastRow }; const I = Lk(n, T, O, i); f.push.apply(f, c(I)); } return f;
                      }(a, t, h, n, e)); if (r.editor.plugins.get('TableSelection').isEnabled) { const m = Dp(f.map(((t) => e.createRangeOn(t)))); e.setSelection(m); } else e.setSelection(f[0], 0);
                    }))) : Jp(a, o);
                  }
                }
              },
            }], [{ key: 'pluginName', get() { return 'TableClipboard'; } }, { key: 'requires', get() { return [Rk, ak]; } }]), n;
          }(sd)); function Dk(e, t, n, r) { const i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 0; if (!(t < 1)) { const o = Wp(e, t, i); const a = o.filter(((e) => zk(e.column, e.cellWidth, n))); return a.map(((e) => qp(e.cell, t, r))); } } function Lk(e, t, n, r) { if (!(t < 1)) return Gp(e, t).filter(((e) => zk(e.row, e.cellHeight, n))).map(((e) => $p(e.cell, e.column, t, r))); } function zk(e, t, n) { const r = e + t - 1; const i = n.first; const o = n.last; return e >= i && e <= o || e < i && r >= i; } const Fk = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { const e = this; const t = this.editor.editing.view.document; this.editor.keystrokes.set('Tab', (function () { return e._handleTabOnSelectedTable.apply(e, arguments); }), { priority: 'low' }), this.editor.keystrokes.set('Tab', this._getTabHandler(!0), { priority: 'low' }), this.editor.keystrokes.set('Shift+Tab', this._getTabHandler(!1), { priority: 'low' }), this.listenTo(t, 'keydown', (function () { return e._onKeydown.apply(e, arguments); }), { priority: Dn.get('high') - 10 }); } }, { key: '_handleTabOnSelectedTable', value(e, t) { const n = this.editor; const r = n.model.document.selection; if (!r.isCollapsed && r.rangeCount === 1 && r.getFirstRange().isFlat) { const i = r.getSelectedElement(); if (!i || !i.is('element', 'table')) return; t(), n.model.change(((e) => { e.setSelection(e.createRangeIn(i.getChild(0).getChild(0))); })); } } }, { key: '_getTabHandler', value(e) { const t = this.editor; return function (n, r) { const i = Ip(t.model.document.selection)[0]; if (i) { r(); const o = i.parent; const a = o.parent; const s = a.getChildIndex(o); const l = o.getChildIndex(i); const c = l === 0; if (e || !c || s !== 0) { const u = l === o.childCount - 1; const d = s === a.childCount - 1; if (!(e && d && u && (t.execute('insertTableRowBelow'), s === a.childCount - 1))) { let h; if (e && u) { const f = a.getChild(s + 1); h = f.getChild(0); } else if (!e && c) { const m = a.getChild(s - 1); h = m.getChild(m.childCount - 1); } else h = o.getChild(l + (e ? 1 : -1)); t.model.change(((e) => { e.setSelection(e.createRangeIn(h)); })); } } } }; } }, { key: '_onKeydown', value(e, t) { const n = this.editor; const r = t.keyCode; if (Ji(r)) { const i = Zi(r, n.locale.contentLanguageDirection); this._handleArrowKeys(i, t.shiftKey) && (t.preventDefault(), t.stopPropagation(), e.stop()); } } }, { key: '_handleArrowKeys', value(e, t) { let n; const r = this.editor.model; const i = r.document.selection; const o = ['right', 'down'].includes(e); const a = Op(i); if (a.length) return n = t ? this.editor.plugins.get('TableSelection').getFocusCell() : o ? a[a.length - 1] : a[0], this._navigateFromCellInDirection(n, e, t), !0; const s = i.focus.findAncestor('tableCell'); if (!s) return !1; const l = r.createRangeIn(s); if (this._isSelectionAtCellEdge(i, o)) return this._navigateFromCellInDirection(s, e, t), !0; const c = this._findTextRangeFromSelection(l, i, o); return c ? !['left', 'right'].includes(e) && (this._isSingleLineRange(c, o) ? (r.change(((e) => { const n = o ? l.end : l.start; if (t) { const a = r.createSelection(i.anchor); a.setFocus(n), e.setSelection(a); } else e.setSelection(n); })), !0) : void 0) : (this._navigateFromCellInDirection(s, e, t), !0); } }, { key: '_isSelectionAtCellEdge', value(e, t) { const n = this.editor.model; const r = this.editor.model.schema; const i = t ? e.getLastPosition() : e.getFirstPosition(); if (!r.getLimitElement(i).is('element', 'tableCell')) return !1; const o = n.createSelection(i); return n.modifySelection(o, { direction: t ? 'forward' : 'backward' }), i.isEqual(o.focus); } }, { key: '_findTextRangeFromSelection', value(e, t, n) { const r = this.editor.model; if (n) { const i = t.getLastPosition(); const o = this._getNearestVisibleTextPosition(e, 'backward'); return o && i.isBefore(o) ? r.createRange(i, o) : null; } const a = t.getFirstPosition(); const s = this._getNearestVisibleTextPosition(e, 'forward'); return s && a.isAfter(s) ? r.createRange(s, a) : null; } }, { key: '_getNearestVisibleTextPosition', value(e, t) { let n; const r = this.editor.model.schema; const i = this.editor.editing.mapper; const o = d(e.getWalker({ direction: t })); try { for (o.s(); !(n = o.n()).done;) { const a = n.value; const s = a.nextPosition; const l = a.item; if (r.checkChild(s, '$text')) { const c = i.toViewElement(l); if (c && !c.hasClass('ck-hidden')) return s; } } } catch (u) { o.e(u); } finally { o.f(); } } }, { key: '_isSingleLineRange', value(e, t) { const n = this.editor.model; const r = this.editor.editing; const i = r.view.domConverter; if (t) { const o = n.createSelection(e.start); n.modifySelection(o), o.focus.isAtEnd || e.start.isEqual(o.focus) || (e = n.createRange(o.focus, e.end)); } let a; let s; const l = r.mapper.toViewRange(e); const c = i.viewRangeToDom(l); const u = Ua.getDomRangeRects(c); const h = d(u); try { for (h.s(); !(s = h.n()).done;) { const f = s.value; if (void 0 !== a) { if (Math.round(f.top) >= a) return !1; a = Math.max(a, Math.round(f.bottom)); } else a = Math.round(f.bottom); } } catch (m) { h.e(m); } finally { h.f(); } return !0; } }, { key: '_navigateFromCellInDirection', value(e, t) { const n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2]; const r = this.editor.model; const i = e.findAncestor('table'); const o = c(new pp(i, { includeAllSlots: !0 })); const a = o[o.length - 1]; const s = a.row; const l = a.column; const u = o.find(((t) => t.cell == e)); let d = u.row; let h = u.column; switch (t) { case 'left': h--; break; case 'up': d--; break; case 'right': h += u.cellWidth; break; case 'down': d += u.cellHeight; } const f = d < 0 || d > s; const m = h < 0 && d <= 0; const v = h > l && d >= s; if (f || m || v)r.change(((e) => { e.setSelection(e.createRangeOn(i)); })); else { h < 0 ? (h = n ? 0 : l, d--) : h > l && (h = n ? l : 0, d++); const g = o.find(((e) => e.row == d && e.column == h)).cell; const p = ['right', 'down'].includes(t); const k = this.editor.plugins.get('TableSelection'); if (n && k.isEnabled) { const b = k.getAnchorCell() || e; k.setCellSelection(b, g); } else { const y = r.createPositionAt(g, p ? 0 : 'end'); r.change(((e) => { e.setSelection(y); })); } } } }], [{ key: 'pluginName', get() { return 'TableKeyboard'; } }, { key: 'requires', get() { return [Rk]; } }]), n; }(sd)); const Vk = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), (r = t.call(this, e)).domEventType = ['mousemove', 'mouseup', 'mouseleave'], r; } return m(n, [{ key: 'onDomEvent', value(e) { this.fire(e.type, e); } }]), n; }(_a)); const Bk = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'init', value() { this.editor.editing.view.addObserver(Vk), this._enableShiftClickSelection(), this._enableMouseDragSelection(); } }, { key: '_enableShiftClickSelection', value() { const e = this; const t = this.editor; let n = !1; const r = t.plugins.get(Rk); this.listenTo(t.editing.view.document, 'mousedown', ((i, o) => { if (e.isEnabled && r.isEnabled && o.domEvent.shiftKey) { const a = r.getAnchorCell() || Ip(t.model.document.selection)[0]; if (a) { const s = e._getModelTableCellFromDomEvent(o); s && Uk(a, s) && (n = !0, r.setCellSelection(a, s), o.preventDefault()); } } })), this.listenTo(t.editing.view.document, 'mouseup', (() => { n = !1; })), this.listenTo(t.editing.view.document, 'selectionChange', ((e) => { n && e.stop(); }), { priority: 'highest' }); } }, { key: '_enableMouseDragSelection', value() { let e; let t; const n = this; const r = this.editor; let i = !1; let o = !1; const a = r.plugins.get(Rk); this.listenTo(r.editing.view.document, 'mousedown', ((t, r) => { n.isEnabled && a.isEnabled && (r.domEvent.shiftKey || r.domEvent.ctrlKey || r.domEvent.altKey || (e = n._getModelTableCellFromDomEvent(r))); })), this.listenTo(r.editing.view.document, 'mousemove', ((r, s) => { if (s.domEvent.buttons && e) { const l = n._getModelTableCellFromDomEvent(s); l && Uk(e, l) && (t = l, i || t == e || (i = !0)), i && (o = !0, a.setCellSelection(e, t), s.preventDefault()); } })), this.listenTo(r.editing.view.document, 'mouseup', (() => { i = !1, o = !1, e = null, t = null; })), this.listenTo(r.editing.view.document, 'selectionChange', ((e) => { o && e.stop(); }), { priority: 'highest' }); } }, { key: '_getModelTableCellFromDomEvent', value(e) { const t = e.target; const n = this.editor.editing.view.createPositionAt(t, 0); return this.editor.editing.mapper.toModelPosition(n).parent.findAncestor('tableCell', { includeSelf: !0 }); } }], [{ key: 'pluginName', get() { return 'TableMouse'; } }, { key: 'requires', get() { return [Rk]; } }]), n; }(sd)); function Uk(e, t) { return e.parent.parent == t.parent.parent; }n(98); const Hk = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, null, [{ key: 'requires', get() { return [Ak, Mk, Rk, Bk, Fk, jk, Pf]; } }, { key: 'pluginName', get() { return 'Table'; } }]), n; }(sd)); function Wk(e) { const t = e.getSelectedElement(); return t && Gk(t) ? t : null; } function qk(e) { const t = (function (e, t) { for (let n = t.parent; n;) { if (n.name === e) return n; n = n.parent; } }('table', e.getFirstPosition())); return t && Gk(t.parent) ? t.parent : null; } function Gk(e) { return !!e.getCustomProperty('table') && of(e); } const $k = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return m(n, [{ key: 'afterInit', value() { const e = this.editor; const { t } = e; const n = e.plugins.get(Im); const r = e.config.get('table.contentToolbar'); const i = e.config.get('table.tableToolbar'); r && n.register('tableContent', { ariaLabel: t('Table toolbar'), items: r, getRelatedElement: qk }), i && n.register('table', { ariaLabel: t('Table toolbar'), items: i, getRelatedElement: Wk }); } }], [{ key: 'requires', get() { return [Im]; } }, { key: 'pluginName', get() { return 'TableToolbar'; } }]), n; }(sd)); function Yk(e, t) { let n = e.start; return { text: Array.from(e.getItems()).reduce(((e, r) => (r.is('$text') || r.is('$textProxy') ? e + r.data : (n = t.createPositionAfter(r), ''))), ''), range: t.createRange(n, e.end) }; } const Kk = (function () { function e(t, n) { const r = this; f(this, e), this.model = t, this.testCallback = n, this.hasMatch = !1, this.set('isEnabled', !0), this.on('change:isEnabled', (() => { r.isEnabled ? r._startListening() : (r.stopListening(t.document.selection), r.stopListening(t.document)); })), this._startListening(); } return m(e, [{ key: '_startListening', value() { const e = this; const t = this.model.document; this.listenTo(t.selection, 'change:range', ((n, r) => { r.directChange && (t.selection.isCollapsed ? e._evaluateTextBeforeSelection('selection') : e.hasMatch && (e.fire('unmatched'), e.hasMatch = !1)); })), this.listenTo(t, 'change:data', ((t, n) => { n.type != 'transparent' && e._evaluateTextBeforeSelection('data', { batch: n }); })); } }, { key: '_evaluateTextBeforeSelection', value(e) { const t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; const n = this.model; const r = n.document; const i = r.selection; const o = n.createRange(n.createPositionAt(i.focus.parent, 0), i.focus); const a = Yk(o, n); const s = a.text; const l = a.range; const c = this.testCallback(s); if (!c && this.hasMatch && this.fire('unmatched'), this.hasMatch = !!c, c) { const u = Object.assign(t, { text: s, range: l }); typeof c === 'object' && Object.assign(u, c), this.fire('matched:'.concat(e), u); } } }]), e; }()); Qn(Kk, ki); const Qk = /[\\^$.*+?()[\]{}|]/g; const Jk = RegExp(Qk.source); const Zk = function (e) { return (e = Ar(e)) && Jk.test(e) ? e.replace(Qk, '\\$&') : e; }; const Xk = {
            copyright: { from: '(c)', to: '\xa9' }, registeredTrademark: { from: '(r)', to: '\xae' }, trademark: { from: '(tm)', to: '\u2122' }, oneHalf: { from: '1/2', to: '\xbd' }, oneThird: { from: '1/3', to: '\u2153' }, twoThirds: { from: '2/3', to: '\u2154' }, oneForth: { from: '1/4', to: '\xbc' }, threeQuarters: { from: '3/4', to: '\xbe' }, lessThanOrEqual: { from: '<=', to: '\u2264' }, greaterThanOrEqual: { from: '>=', to: '\u2265' }, notEqual: { from: '!=', to: '\u2260' }, arrowLeft: { from: '<-', to: '\u2190' }, arrowRight: { from: '->', to: '\u2192' }, horizontalEllipsis: { from: '...', to: '\u2026' }, enDash: { from: /(^| )(--)( )$/, to: [null, '\u2013', null] }, emDash: { from: /(^| )(---)( )$/, to: [null, '\u2014', null] }, quotesPrimary: { from: ab('"'), to: [null, '\u201c', null, '\u201d'] }, quotesSecondary: { from: ab("'"), to: [null, '\u2018', null, '\u2019'] }, quotesPrimaryEnGb: { from: ab("'"), to: [null, '\u2018', null, '\u2019'] }, quotesSecondaryEnGb: { from: ab('"'), to: [null, '\u201c', null, '\u201d'] }, quotesPrimaryPl: { from: ab('"'), to: [null, '\u201e', null, '\u201d'] }, quotesSecondaryPl: { from: ab("'"), to: [null, '\u201a', null, '\u2019'] },
          }; const eb = {
            symbols: ['copyright', 'registeredTrademark', 'trademark'], mathematical: ['oneHalf', 'oneThird', 'twoThirds', 'oneForth', 'threeQuarters', 'lessThanOrEqual', 'greaterThanOrEqual', 'notEqual', 'arrowLeft', 'arrowRight'], typography: ['horizontalEllipsis', 'enDash', 'emDash'], quotes: ['quotesPrimary', 'quotesSecondary'],
          }; const tb = ['symbols', 'mathematical', 'typography', 'quotes']; const nb = (function (e) { v(n, e); const t = g(n); function n(e) { let r; return f(this, n), r = t.call(this, e), e.config.define('typing', { transformations: { include: tb } }), r; } return m(n, null, [{ key: 'pluginName', get() { return 'TextTransformation'; } }]), m(n, [{ key: 'init', value() { const e = this; const t = this.editor.model.document.selection; t.on('change:range', (() => { e.isEnabled = !t.anchor.parent.is('element', 'codeBlock'); })), this._enableTransformationWatchers(); } }, { key: '_enableTransformationWatchers', value() { const e = this.editor; const t = e.model; const n = e.plugins.get('Input'); const r = (function (e) { const t = e.extra || []; const n = e.remove || []; const r = function (e) { return !n.includes(e); }; return (function (e) { let t; const n = new Set(); const r = d(e); try { for (r.s(); !(t = r.n()).done;) { const i = t.value; if (eb[i]) { var o; const a = d(eb[i]); try { for (a.s(); !(o = a.n()).done;) { const s = o.value; n.add(s); } } catch (l) { a.e(l); } finally { a.f(); } } else n.add(i); } } catch (l) { r.e(l); } finally { r.f(); } return Array.from(n); }(e.include.concat(t).filter(r))).filter(r).map(((e) => Xk[e] || e)).map(((e) => ({ from: rb(e.from), to: ib(e.to) }))); }(e.config.get('typing.transformations'))); const i = new Kk(e.model, ((e) => { let t; const n = d(r); try { for (n.s(); !(t = n.n()).done;) { const i = t.value; if (i.from.test(e)) return { normalizedTransformation: i }; } } catch (o) { n.e(o); } finally { n.f(); } })); i.on('matched:data', ((e, r) => { if (n.isInput(r.batch)) { const i = r.normalizedTransformation; const o = i.from; const a = i.to; const s = o.exec(r.text); const l = a(s.slice(1)); const c = r.range; let u = s.index; t.enqueueChange(((e) => { for (let n = 1; n < s.length; n++) { const r = s[n]; const i = l[n - 1]; if (i != null) { const o = c.start.getShiftedBy(u); const a = t.createRange(o, o.getShiftedBy(r.length)); const d = ob(o); t.insertContent(e.createText(i, d), a), u += i.length; } else u += r.length; } })); } })), i.bind('isEnabled').to(this); } }]), n; }(sd)); function rb(e) { return typeof e === 'string' ? new RegExp('('.concat(Zk(e), ')$')) : e; } function ib(e) { return typeof e === 'string' ? function () { return [e]; } : e instanceof Array ? function () { return e; } : e; } function ob(e) { return (e.textNode ? e.textNode : e.nodeAfter).getAttributes(); } function ab(e) { return new RegExp('(^|\\s)('.concat(e, ')([^').concat(e, ']*)(').concat(e, ')$')); } const sb = (function (e) { v(n, e); const t = g(n); function n() { return f(this, n), t.apply(this, arguments); } return n; }(td)); sb.builtinPlugins = [cd, bd, Td, Ah, Bh, $f, nm, pm, Om, Rm, rv, cv, mv, ug, zg, Jg, Mh, up, Hk, $k, nb], t.default = sb;
        }])).default;
    }, e.exports = r();
  },
  210(e, t, n) { e.exports = n(340); },
  215(e, t, n) {},
  339(e, t, n) {},
  340(e, t, n) {
    n.r(t); const r = {}; n.r(r), n.d(r, 'knowledgeUnitsFetchSuccess', (() => ui)), n.d(r, 'knowledgeUnitsAddFailed', (() => di)), n.d(r, 'knowledgeUnitsAddSuccess', (() => hi)), n.d(r, 'knowledgeUnitsEditSuccess', (() => fi)), n.d(r, 'knowledgeUnitsDeleteSuccess', (() => mi)), n.d(r, 'knowledgeUnitsItemFetchSuccess', (() => vi)), n.d(r, 'knowledgeUnitsTaxonomiesFetchSuccess', (() => gi)), n.d(r, 'knowledgeUnitsFetch', (() => pi)), n.d(r, 'knowledgeUnitsItemFetch', (() => ki)), n.d(r, 'knowledgeUnitsAdd', (() => bi)), n.d(r, 'knowledgeUnitsDelete', (() => yi)), n.d(r, 'knowledgeUnitsEdit', (() => wi)), n.d(r, 'knowledgeUnitsTaxonomiesFetch', (() => _i)), n.d(r, 'knowledgeUnitsMarkReviewed', (() => Ei)), n.d(r, 'knowledgeUnitsMarkLectored', (() => xi)), n.d(r, 'learningUnitsFetchSuccess', (() => Ti)), n.d(r, 'learningUnitsAddFailed', (() => Ci)), n.d(r, 'learningUnitsAddSuccess', (() => Si)), n.d(r, 'learningUnitsEditSuccess', (() => Ai)), n.d(r, 'learningUnitsDeleteSuccess', (() => Pi)), n.d(r, 'learningUnitsItemFetchSuccess', (() => Oi)), n.d(r, 'learningUnitsSuggestionsFetchSuccess', (() => Ii)), n.d(r, 'learningUnitsTaxonomiesFetchSuccess', (() => Mi)), n.d(r, 'learningUnitsFetch', (() => Ni)), n.d(r, 'learningUnitsItemFetch', (() => Ri)), n.d(r, 'learningUnitsSuggestionsFetch', (() => ji)), n.d(r, 'learningUnitsAdd', (() => Di)), n.d(r, 'learningUnitsDelete', (() => Li)), n.d(r, 'learningUnitsEdit', (() => zi)), n.d(r, 'learningUnitsAddTag', (() => Fi)), n.d(r, 'learningUnitsDeleteTag', (() => Vi)), n.d(r, 'learningUnitsUpdateTag', (() => Bi)), n.d(r, 'learningUnitsAddRelation', (() => Ui)), n.d(r, 'learningUnitsTaxonomiesFetch', (() => Hi)), n.d(r, 'capabilitiesFetchSuccess', (() => Wi)), n.d(r, 'capabilitiesFetch', (() => qi)), n.d(r, 'taxonomiesFetchSuccess', (() => Gi)), n.d(r, 'taxonomiesItemFetchSuccess', (() => $i)), n.d(r, 'taxonomiesAddFailed', (() => Yi)), n.d(r, 'taxonomiesAddSuccess', (() => Ki)), n.d(r, 'taxonomiesEditSuccess', (() => Qi)), n.d(r, 'taxonomiesDeleteSuccess', (() => Ji)), n.d(r, 'taxonomiesFetch', (() => Zi)), n.d(r, 'taxonomiesAdd', (() => Xi)), n.d(r, 'taxonomiesDelete', (() => eo)), n.d(r, 'taxonomiesEdit', (() => to)), n.d(r, 'taxonomiesItemFetch', (() => no)), n.d(r, 'languagesFetchSuccess', (() => ro)), n.d(r, 'languagesAddFailed', (() => io)), n.d(r, 'languagesAddSuccess', (() => oo)), n.d(r, 'languagesEditSuccess', (() => ao)), n.d(r, 'languagesDeleteSuccess', (() => so)), n.d(r, 'languagesFetch', (() => lo)), n.d(r, 'languagesAdd', (() => co)), n.d(r, 'languagesDelete', (() => uo)), n.d(r, 'languagesEdit', (() => ho)), n.d(r, 'rolesFetchSuccess', (() => fo)), n.d(r, 'rolesItemFetchSuccess', (() => mo)), n.d(r, 'rolesAddFailed', (() => vo)), n.d(r, 'rolesAddSuccess', (() => go)), n.d(r, 'rolesEditSuccess', (() => po)), n.d(r, 'rolesDeleteSuccess', (() => ko)), n.d(r, 'rolesCapabilitiesUpdateSuccess', (() => bo)), n.d(r, 'rolesFetch', (() => yo)), n.d(r, 'rolesAdd', (() => wo)), n.d(r, 'rolesDelete', (() => _o)), n.d(r, 'rolesEdit', (() => Eo)), n.d(r, 'addCapability', (() => xo)), n.d(r, 'removeCapability', (() => To)), n.d(r, 'rolesItemFetch', (() => Co)), n.d(r, 'usersFetchSuccess', (() => So)), n.d(r, 'userActivationSuccess', (() => Ao)), n.d(r, 'userActivationFailed', (() => Po)), n.d(r, 'usersItemFetchSuccess', (() => Oo)), n.d(r, 'usersEditSuccess', (() => Io)), n.d(r, 'usersDeleteSuccess', (() => Mo)), n.d(r, 'usersRolesUpdateSuccess', (() => No)), n.d(r, 'usersFetch', (() => Ro)), n.d(r, 'usersDelete', (() => jo)), n.d(r, 'usersEdit', (() => Do)), n.d(r, 'usersItemFetch', (() => Lo)), n.d(r, 'userActivate', (() => zo)), n.d(r, 'addRole', (() => Fo)), n.d(r, 'removeRole', (() => Vo)), n.d(r, 'textsFetchSuccess', (() => Bo)), n.d(r, 'textsAddFailed', (() => Uo)), n.d(r, 'textsAddSuccess', (() => Ho)), n.d(r, 'textsEditSuccess', (() => Wo)), n.d(r, 'textsDeleteSuccess', (() => qo)), n.d(r, 'textsItemFetchSuccess', (() => Go)), n.d(r, 'textsFetch', (() => $o)), n.d(r, 'textsItemFetch', (() => Yo)), n.d(r, 'textsAdd', (() => Ko)), n.d(r, 'textsDelete', (() => Qo)), n.d(r, 'textsEdit', (() => Jo)), n.d(r, 'userRegisterFailed', (() => Zo)), n.d(r, 'userRegisterSuccess', (() => Xo)), n.d(r, 'userEditFailed', (() => ea)), n.d(r, 'userEditSuccess', (() => ta)), n.d(r, 'userLoginFailed', (() => na)), n.d(r, 'userLoginSuccess', (() => ra)), n.d(r, 'userLogoutSUccess', (() => ia)), n.d(r, 'userRolesFetchSuccess', (() => oa)), n.d(r, 'userRegister', (() => aa)), n.d(r, 'userLogin', (() => sa)), n.d(r, 'userLogout', (() => la)), n.d(r, 'userEdit', (() => ca)), n.d(r, 'userFetchRoles', (() => ua)), n.d(r, 'userDelete', (() => da)), n.d(r, 'userLanguageAdd', (() => ha)), n.d(r, 'userLanguageDelete', (() => fa)), n.d(r, 'userLanguagePreferred', (() => ma)); const i = n(0); const o = n.n(i); const a = n(18); const s = n.n(a); const l = (n(215), n(21)); const c = n(187); const u = n(98); const d = n(8); const h = n(189); const f = n.n(h); const m = n(190); const v = n(68); const g = n(406); const p = {
      fetching: !1,
      fetched: !1,
      fetchingId: null,
      items: [],
      taxonomies: {
        fetching: !1,
        fetched: !1,
        items: {
          minimumScreenResolution: [], knowledgeType: [], courseLevel: [], mediaType: [], licences: [], eqflevel: [],
        },
      },
      errors: { add: { error: !1, errorMessage: '', errors: {} }, edit: { error: !1, errorMessage: '', errors: {} } },
      id: {},
    }; const k = function () {
      const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : p; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
        case 'KNOWLEDGEUNITS_DELETE_SUCCESS': case 'KNOWLEDGEUNITS_EDIT_SUCCESS': case 'KNOWLEDGEUNITS_ADD_SUCCESS': case 'TEXTS_ADD_SUCCESS': return {
          ...e, fetched: !1, fetching: !1, id: {}, items: [],
        }; case 'KNOWLEDGEUNITS_TAXONOMIES_FETCH_SUCCESS': return { ...e, taxonomies: { fetched: !0, fetching: !1, items: t.items } }; case 'KNOWLEDGEUNITS_ADD_FAILED': var n = {}; return t.errors.forEach(((e) => { n[e.param] = e.msg; })), ({ ...e, errors: { ...e.errors, add: { error: !0, errorMessage: t.error, errors: n } } }); case 'KNOWLEDGEUNITS_FETCH': return { ...e, fetched: !1, fetching: !0 }; case 'KNOWLEDGEUNITS_ITEM_FETCH': return { ...e, fetchingId: t.id }; case 'KNOWLEDGEUNITS_ITEM_FETCH_SUCCESS': var r = e.id; return r[t.item.id] = t.item, ({ ...e, fetching: !1, id: r }); case 'KNOWLEDGEUNITS_FETCH_SUCCESS': return {
          ...e, fetched: !0, fetching: !1, items: t.items,
        }; default: return e;
      }
    }; const b = {
      fetching: !1, fetched: !1, fetchingId: null, items: [], suggestions: [], taxonomies: { fetching: !1, fetched: !1, items: { relationType: [] } }, errors: { add: { error: !1, errorMessage: '', errors: {} }, edit: { error: !1, errorMessage: '', errors: {} } }, id: {},
    }; const y = function () {
      const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : b; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
        case 'LEARNINGUNITS_DELETE_SUCCESS': case 'KNOWLEDGEUNITS_EDIT_SUCCESS': case 'KNOWLEDGEUNITS_ADD_SUCCESS': case 'LEARNINGUNITS_EDIT_SUCCESS': case 'LEARNINGUNITS_ADD_SUCCESS': case 'TEXTS_EDIT_SUCCESS': case 'TEXTS_ADD_SUCCESS': return {
          ...e, fetched: !1, fetching: !1, id: {}, items: [],
        }; case 'LEARNINGUNITS_TAXONOMIES_FETCH': return { ...e, taxonomies: { fetched: !1, fetching: !0, items: { relationType: [] } } }; case 'LEARNINGUNITS_TAXONOMIES_FETCH_SUCCESS': return { ...e, taxonomies: { fetched: !0, fetching: !1, items: t.items } }; case 'LEARNINGUNITS_ADD_FAILED': var n = {}; return t.errors.forEach(((e) => { n[e.param] = e.msg; })), ({ ...e, errors: { ...e.errors, add: { error: !0, errorMessage: t.error, errors: n } } }); case 'LEARNINGUNITS_ITEM_FETCH': return { ...e, fetchingId: t.id }; case 'LEARNINGUNITS_FETCH': return { ...e, fetched: !1, fetching: !0 }; case 'LEARNINGUNITS_ITEM_FETCH_SUCCESS': var r = e.id; return t.item.forEach(((e) => {
          r[e.LearningUnit.id] = {}, r[e.LearningUnit.id][e.Language.id] = {
            item: e, title: e.title, userId: e.User.id, username: e.User.username,
          };
        })), ({
          ...e, fetchingId: null, fetching: !1, id: r,
        }); case 'LEARNINGUNITS_SUGGESTIONS_FETCH_SUCCESS': var i = t.items; return { ...e, suggestions: i }; case 'LEARNINGUNITS_FETCH_SUCCESS': return {
          ...e, fetched: !0, fetching: !1, items: t.items,
        }; default: return e;
      }
    }; const w = { fetching: !1, fetched: !1, items: [] }; const _ = function () {
      const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : w; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
        case 'CAPABILITIES_FETCH': return { ...e, fetched: !1, fetching: !0 }; case 'CAPABILITIES_FETCH_SUCCESS': return {
          ...e, fetched: !0, fetching: !1, items: t.items,
        }; default: return e;
      }
    }; const E = {
      fetching: !1, fetched: !1, items: [], errors: { add: { error: !1, errorMessage: '', errors: {} }, edit: { error: !1, errorMessage: '', errors: {} } }, id: {},
    }; const x = function () {
      const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : E; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
        case 'TAXONOMIES_DELETE_FAILES': case 'TAXONOMIES_EDIT_SUCCESS': case 'TAXONOMIES_ADD_SUCCESS': return {
          ...e, fetched: !1, fetching: !1, id: {},
        }; case 'TAXONOMIES_ADD_FAILES': var n = {}; return t.errors.forEach(((e) => { n[e.param] = e.msg; })), ({ ...e, errors: { ...e.errors, add: { error: !0, errorMessage: t.error, errors: n } } }); case 'TAXONOMIES_FETCH': return { ...e, fetched: !1, fetching: !0 }; case 'TAXONOMIES_ITEM_FETCH_SUCCESS': var r = e.id; return r[t.item.id] = t.item, r[t.item.id].children = t.children, ({ ...e, fetching: !1, id: r }); case 'TAXONOMIES_FETCH_SUCCESS': return {
          ...e, fetched: !0, fetching: !1, items: t.items,
        }; default: return e;
      }
    }; const T = {
      fetching: !1, fetched: !1, languages: [], id: {}, errors: { add: { error: !1, errorMessage: '', errors: {} }, edit: { error: !1, errorMessage: '', errors: {} } },
    }; const C = function () {
      const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : T; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
        case 'LANGUAGES_DELETE_FAILES': case 'LANGUAGES_EDIT_SUCCESS': case 'LANGUAGES_ADD_SUCCESS': return { ...e, fetched: !1, fetching: !1 }; case 'LANGUAGES_ADD_FAILES': var n = {}; return t.errors.forEach(((e) => { n[e.param] = e.msg; })), ({ ...e, errors: { ...e.errors, add: { error: !0, errorMessage: t.error, errors: n } } }); case 'LANGUAGES_FETCH': return { ...e, fetched: !1, fetching: !0 }; case 'LANGUAGES_FETCH_SUCCESS': var r = {}; return t.languages.forEach(((e) => { r[e.id] = e; })), ({
          ...e, fetched: !0, fetching: !1, languages: t.languages, id: r,
        }); default: return e;
      }
    }; const S = {
      fetching: !1, fetched: !1, items: [], errors: { add: { error: !1, errorMessage: '', errors: {} }, edit: { error: !1, errorMessage: '', errors: {} } }, id: {},
    }; const A = function () {
      const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : S; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
        case 'ROLES_CAPABILITIES_UPDATE_SUCCESS': case 'ROLES_DELETE_SUCCESS': case 'ROLES_EDIT_SUCCESS': case 'ROLES_ADD_SUCCESS': return {
          ...e, fetched: !1, fetching: !1, id: {}, items: [],
        }; case 'ROLES_ADD_FAILED': var n = {}; return t.errors.forEach(((e) => { n[e.param] = e.msg; })), ({ ...e, errors: { ...e.errors, add: { error: !0, errorMessage: t.error, errors: n } } }); case 'ROLES_FETCH': return { ...e, fetched: !1, fetching: !0 }; case 'ROLES_ITEM_FETCH_SUCCESS': var r = e.id; return r[t.item.id] = t.item, r[t.item.id].children = t.children, ({ ...e, fetching: !1, id: r }); case 'ROLES_FETCH_SUCCESS': return {
          ...e, fetched: !0, fetching: !1, items: t.items,
        }; default: return e;
      }
    }; const P = {
      fetching: !1, fetched: !1, items: [], errors: { add: { error: !1, errorMessage: '', errors: {} }, edit: { error: !1, errorMessage: '', errors: {} } }, id: {},
    }; const O = function () {
      const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : P; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
        case 'USERS_ROLES_UPDATE_SUCCESS': case 'USER_REGISTER_SUCCESS': case 'USERS_DELETE_SUCCESS': case 'USERS_EDIT_SUCCESS': return {
          ...e, fetched: !1, fetching: !1, id: {}, items: [],
        }; case 'USERS_FETCH': return { ...e, fetched: !1, fetching: !0 }; case 'USERS_ITEM_FETCH_SUCCESS': var n = e.id; return n[t.item.id] = t.item, ({ ...e, fetching: !1, id: n }); case 'USERS_FETCH_SUCCESS': return {
          ...e, fetched: !0, fetching: !1, items: t.items,
        }; default: return e;
      }
    }; const I = {
      fetching: !1, fetched: !1, items: [], errors: { add: { error: !1, errorMessage: '', errors: {} }, edit: { error: !1, errorMessage: '', errors: {} } }, id: {},
    }; const M = function () {
      const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : I; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
        case 'TEXTS_DELETE_SUCCESS': case 'TEXTS_EDIT_SUCCESS': case 'TEXTS_ADD_SUCCESS': return {
          ...e, fetched: !1, fetching: !1, id: {}, items: [],
        }; case 'TEXTS_ADD_FAILED': var n = {}; return t.errors.forEach(((e) => { n[e.param] = e.msg; })), ({ ...e, errors: { ...e.errors, add: { error: !0, errorMessage: t.error, errors: n } } }); case 'TEXTS_FETCH': return { ...e, fetched: !1, fetching: !0 }; case 'TEXTS_ITEM_FETCH_SUCCESS': var r = e.id; return r[t.item.id] = t.item, ({ ...e, fetching: !1, id: r }); case 'TEXTS_FETCH_SUCCESS': return {
          ...e, fetched: !0, fetching: !1, items: t.items,
        }; default: return e;
      }
    }; const N = n(199); const R = n(200); const j = {
      loggedIn: !1,
      active: !1,
      user: {
        username: 'Guest', titlePrefix: '', titleSuffix: '', description: '', firstName: '', birthdate: '', lastName: '', studyId: '', country: '', website: '', picture: '', street: '', email: '', phone: '', city: '', zip: '',
      },
      activated: !1,
      fetchingRoles: !1,
      fetchedRoles: !1,
      capabilities: [],
      errors: { registration: { errorMessage: '', error: !1, errors: {} }, login: { errorMessage: '', error: !1, errors: {} }, edit: { errorMessage: '', error: !1, errors: {} } },
      menus: { user: { anchorEl: null } },
    }; const D = function () {
      const e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : j; const t = arguments.length > 1 ? arguments[1] : void 0; switch (t.type) {
        case 'USER_ROLES_FETCH': return { ...e, fetchingRoles: !0, fetchedRoles: !1 }; case 'USER_ROLES_FETCH_SUCCESS': var n; var r = t.roles.Roles.map(((e) => e.Capabilities.map(((e) => e.slug)))); return r = (n = []).concat.apply(n, Object(R.a)(r)), ({
          ...e, fetchingRoles: !1, fetchedRoles: !0, capabilities: r,
        }); case 'USER_REGISTER_SUCCESS': return { ...e, errors: { ...e.errors, registration: { error: !1, errors: {} } } }; case 'USER_LOGOUT_SUCCESS': return { ...j }; case 'USER_EDIT_SUCCESS': case 'USER_LOGIN_SUCCESS': var i = t.user; if (i.birthdate) { const o = i.birthdate.split('T'); const a = Object(N.a)(o, 1); i.birthdate = a[0]; } return {
          ...e, loggedIn: !0, user: { ...e.user, ...i }, errors: { ...e.errors, login: { error: !1 } },
        }; case 'USER_ACTIVATION_SUCCESS': return { ...e, active: !0, activated: !0 }; case 'USER_ACTIVATION_FAILED': return { ...e, active: !1, activated: !0 }; case 'USER_LOGIN_FAILED': return { ...e, loggedIn: !1, errors: { ...e.errors, login: { error: !0, errorMessage: t.error } } }; case 'USER_REGISTER_FAILED': var s = {}; return t.errors.forEach(((e) => { s[e.param] = e.msg; })), ({ ...e, errors: { ...e.errors, registration: { error: !0, errorMessage: t.error, errors: s } } }); case u.a: return t.payload ? ({
          ...t.payload.user, fetchedRoles: !1, fetchingRoles: !1, activated: !1, active: !1, capabilities: [],
        }) : e; default: return e;
      }
    }; const L = Object(l.c)({
      form: g.a, knowledgeUnits: k, learningUnits: y, capabilities: _, taxonomies: x, languages: C, roles: A, users: O, texts: M, user: D,
    }); const z = n(25); const F = n(9); const V = n(10); const B = n(5); const U = n(12); const H = n(11); const W = n(194); const q = n.n(W); const G = n(6); const $ = n(78); const Y = n(382); const K = n(391); const Q = n(390); const J = n(389); const Z = n(408); const X = n(201); const ee = n(387); const te = n(147); const ne = n.n(te); const re = n(148); const ie = n.n(re); const oe = n(342); const ae = n(388); const se = n(193); const le = n.n(se); const ce = n(386); const ue = n(192); const de = function (e, t) { for (let n = 0; n < e.length; n += 1) { const r = e[n]; if (t.indexOf(r) > -1) return !0; } return !1; }; const he = function (e) { return !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e); }; const fe = function (e) { return !/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$/i.test(e); }; const me = function () { return Object(ue.getNames)(); }; const ve = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleClose = r.handleClose.bind(Object(B.a)(r)), r.handleClick = r.handleClick.bind(Object(B.a)(r)), r.handleMenu = r.handleMenu.bind(Object(B.a)(r)), r.state = { anchorEl: null, open: { administration: !1 } }, r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.fetchRoles; const n = e.user; n.fetchingRoles || n.fetchedRoles || n.user.username === 'Guest' || t(n.user.id); } }, { key: 'handleMenu', value(e) { this.setState({ anchorEl: e.currentTarget }); } }, { key: 'handleClose', value() { this.setState({ anchorEl: null, open: { administration: !1, authoring: !1 } }); } }, { key: 'handleClick', value(e) { const t = this.state.open; t[e] = !t[e], this.setState({ open: t }); } }, {
        key: 'render',
        value() {
          const e = this; const t = this.props; const n = t.classes; const r = t.user; const i = this.state; const a = i.anchorEl; const s = i.open; const l = Boolean(a); return o.a.createElement(o.a.Fragment, null, o.a.createElement(Y.a, {
            'aria-owns': l ? 'main-menu' : null, onClick: this.handleMenu, 'aria-haspopup': 'true', 'aria-label': 'Menu', color: 'inherit',
          }, o.a.createElement(le.a, null)), o.a.createElement(X.a, {
            id: 'main-menu', anchorEl: a, anchorOrigin: { vertical: 'top', horizontal: 'left' }, transformOrigin: { vertical: 'top', horizontal: 'left' }, open: l, onClose: this.handleClose, classes: { paper: n.menuPaper },
          }, o.a.createElement(oe.a, { button: !0, component: d.b, to: '/' }, 'Home'), o.a.createElement(oe.a, { button: !0, component: d.b, to: '/learning-units' }, 'Learning Units'), de(r.capabilities, ['edit_user', 'edit_language', 'edit_taxonomy', 'edit_user']) && o.a.createElement('div', null, o.a.createElement(oe.a, { onClick() { return e.handleClick('administration'); }, button: !0 }, o.a.createElement(ee.a, { primary: 'Administration' }), s.administration ? o.a.createElement(ne.a, null) : o.a.createElement(ie.a, null)), o.a.createElement(ae.a, { in: s.administration }, o.a.createElement(ce.a, { component: 'div', disablePadding: !0 }, de(r.capabilities, ['edit_language']) && o.a.createElement(oe.a, {
            button: !0, className: n.nested, component: d.b, to: '/languages',
          }, o.a.createElement(ee.a, { inset: !0, primary: 'Manage Languages' })), de(r.capabilities, ['edit_taxonomy']) && o.a.createElement(oe.a, {
            button: !0, className: n.nested, component: d.b, to: '/taxonomies',
          }, o.a.createElement(ee.a, { inset: !0, primary: 'Manage Taxonomies' })), de(r.capabilities, ['edit_role']) && o.a.createElement(oe.a, {
            button: !0, className: n.nested, component: d.b, to: '/users/roles',
          }, o.a.createElement(ee.a, { inset: !0, primary: 'Manage Roles' })), de(r.capabilities, ['edit_user']) && o.a.createElement(oe.a, {
            button: !0, className: n.nested, component: d.b, to: '/users',
          }, o.a.createElement(ee.a, { inset: !0, primary: 'Manage Users' }))))), de(r.capabilities, ['add_learning_unit']) && o.a.createElement('div', null, o.a.createElement(oe.a, { onClick() { return e.handleClick('authoring'); }, button: !0 }, o.a.createElement(ee.a, { primary: 'Authoring' }), s.authoring ? o.a.createElement(ne.a, null) : o.a.createElement(ie.a, null)), o.a.createElement(ae.a, { in: s.authoring }, o.a.createElement(ce.a, { component: 'div', disablePadding: !0 }, o.a.createElement(oe.a, {
            button: !0, className: n.nested, component: d.b, to: '/learning-units/add',
          }, o.a.createElement(ee.a, { inset: !0, primary: 'Add Learning Unit' })))))));
        },
      }]), n;
    }(i.Component)); const ge = Object(z.g)(ve); const pe = Object(G.a)({
      root: { flexGrow: 1 }, flex: { flexGrow: 1 }, menuButton: { marginLeft: -12, marginRight: 20 }, menuPaper: { boxShadow: 'none', background: '#AAB4C5' },
    })(ge); const ke = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleUserLanguages = r.handleUserLanguages.bind(Object(B.a)(r)), r.handleUserEdit = r.handleUserEdit.bind(Object(B.a)(r)), r.handleLogout = r.handleLogout.bind(Object(B.a)(r)), r.handleClose = r.handleClose.bind(Object(B.a)(r)), r.handleMenu = r.handleMenu.bind(Object(B.a)(r)), r.state = { anchorEl: null }, r; } return Object(V.a)(n, [{ key: 'handleMenu', value(e) { this.setState({ anchorEl: e.currentTarget }); } }, { key: 'handleClose', value() { this.setState({ anchorEl: null }); } }, { key: 'handleLogout', value() { const e = this.props; const t = e.history; const n = e.logout; this.setState({ anchorEl: null }), n(t); } }, { key: 'handleUserEdit', value() { const e = this.props.history; this.setState({ anchorEl: null }), e.push('/users/user/edit'); } }, { key: 'handleUserLanguages', value() { const e = this.props.history; this.setState({ anchorEl: null }), e.push('/users/user/languages'); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.fetchRoles; const n = e.classes; const r = e.title; const i = e.user; const a = this.state.anchorEl; const s = Boolean(a); return o.a.createElement('div', { className: n.root }, o.a.createElement(J.a, { position: 'static', className: n.appbar }, o.a.createElement(Q.a, null, o.a.createElement(pe, { fetchRoles: t, user: i }), o.a.createElement($.a, { variant: 'h6', color: 'inherit', className: n.flex }, r), i.loggedIn && o.a.createElement('div', null, o.a.createElement(Y.a, {
            'aria-owns': s ? 'menu-appbar' : null, onClick: this.handleMenu, 'aria-haspopup': 'true', color: 'inherit',
          }, i.user.picture ? o.a.createElement(Z.a, { src: '/uploads/'.concat(i.user.picture), alt: i.username }) : o.a.createElement(q.a, null)), o.a.createElement(X.a, {
            id: 'menu-appbar', anchorEl: a, anchorOrigin: { vertical: 'top', horizontal: 'right' }, transformOrigin: { vertical: 'top', horizontal: 'right' }, open: s, onClose: this.handleClose,
          }, o.a.createElement(K.a, { onClick: this.handleUserEdit }, 'Profile'), o.a.createElement(K.a, { onClick: this.handleUserLanguages }, 'Languages'), o.a.createElement(K.a, { onClick: this.handleLogout }, 'Logout'))))));
        },
      }]), n;
    }(i.Component)); const be = Object(z.g)(ke); const ye = Object(G.a)({
      root: { flexGrow: 1 }, flex: { flexGrow: 1 }, menuButton: { marginLeft: -12, marginRight: 20 }, appbar: { background: '#D6E2F9', color: '#000000', boxShadow: 'none' },
    })(be); const we = function (e) { const t = e.loggedIn; return o.a.createElement('div', { className: 'Home' }, o.a.createElement('p', { className: 'App-intro' }, 'Welcome to the main page.'), !t && o.a.createElement('div', null, 'Please ', o.a.createElement(d.b, { to: '/users/login' }, 'Login'), ' or ', o.a.createElement(d.b, { to: '/users/register' }, 'Register'), '.'), t && o.a.createElement('div', null, 'You are logged in.')); }; const _e = Object(G.a)((() => ({ container: { maxWidth: 960, margin: 'auto', marginTop: '10px' } })))(((e) => {
      const t = e.fetchRoles; const n = e.className; const r = e.classes; const i = e.element; const a = e.logout; const s = e.active; const l = e.title; const c = e.user; return o.a.createElement('div', { className: n }, o.a.createElement(ye, {
        fetchRoles: t, logout: a, active: s, title: l, user: c,
      }), o.a.createElement('div', { className: r.container }, i));
    })); const Ee = n(58); const xe = n(392); const Te = n(341); const Ce = n(393); const Se = function (e) { const t = e.classes; const n = e.link; const r = e.text; return console.log(r), o.a.createElement(Te.a, { className: t.paper }, o.a.createElement($.a, { variant: 'headline' }, n && o.a.createElement(d.b, { to: '/texts/show/'.concat(r.id) }, '#', r.id, ' ', r.Language.name), !n && o.a.createElement('span', null, '#', r.id, ' ', r.Language.name)), o.a.createElement('div', { className: t.content, dangerouslySetInnerHTML: { __html: r.content } }), o.a.createElement('div', { className: t.clearfix }), r.prevId && o.a.createElement(xe.a, { variant: 'contained', component: d.b, to: '/texts/show/'.concat(r.prevId) }, 'show previous Version'), '\xa0', r.nextId && o.a.createElement(xe.a, { variant: 'contained', component: d.b, to: '/texts/show/'.concat(r.nextId) }, 'show next Version'), '\xa0', r.rootId && o.a.createElement(xe.a, { variant: 'contained', component: d.b, to: '/texts/show/'.concat(r.rootId) }, 'show root'), '\xa0', r.currentId && r.currentId !== r.id && o.a.createElement(xe.a, { variant: 'contained', component: d.b, to: '/texts/show/'.concat(r.currentId) }, 'show current version')); }; Se.defaultProps = { link: !1 }; const Ae = Object(G.a)(((e) => ({
      root: { flexGrow: 1, width: '100%', textAlign: 'left' },
      paper: Object(Ee.a)(Object(Ee.a)({}, e.mixins.gutters()), {}, {
        paddingTop: 2 * e.spacing.unit, paddingBottom: 2 * e.spacing.unit, marginTop: e.spacing.unit, textAlign: 'left',
      }),
      button: { marginTop: e.spacing.unit },
      content: { '& figure': { margin: 0, '& img': { 'max-width': '100%' } }, '& figure.image-style-side': { float: 'right', 'max-width': '50%' }, '& figcaption': { 'text-align': 'center', 'padding-top': 5, 'padding-bottom': 5 } },
      clearfix: { clear: 'both' },
    })))(Se); const Pe = function (e) {
      const t = e.markLectored; const n = e.markReviewed; const r = e.classes; const i = e.link; const a = e.user; const s = e.unit; let l = ''; return s.Texts && (l = s.Texts.map(((e) => o.a.createElement(Ae, { key: e.id, text: e, link: !0 })))), o.a.createElement(Te.a, { key: s.id, className: r.paper }, o.a.createElement('div', { className: r.root }, o.a.createElement(Ce.a, { item: !0, xs: 12 }, o.a.createElement($.a, { variant: 'headline' }, i && o.a.createElement(d.b, { to: '/knowledge-units/show/'.concat(s.id) }, 'Knowledge Unit #', s.id), !i && o.a.createElement('span', null, 'Knowledge Unit #', s.id)))), o.a.createElement('div', { className: r.root }, o.a.createElement(Ce.a, { container: !0, direction: 'row' }, o.a.createElement(Ce.a, { item: !0, xs: 6 }, 'recommended Age: ', s.recommendedAge || '---'), o.a.createElement(Ce.a, { item: !0, xs: 6 }, 'Time:', s.time || '---'))), o.a.createElement('div', { className: r.root }, o.a.createElement(Ce.a, { container: !0, direction: 'row' }, o.a.createElement(Ce.a, { item: !0, xs: 6 }, 'Objective: ', s.objective || '---'), o.a.createElement(Ce.a, { item: !0, xs: 6 }, 'Comment: ', s.comment || '---'))), o.a.createElement('div', { className: r.root }, o.a.createElement(Ce.a, { container: !0, direction: 'row' }, o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Media Type: ', s.mt ? s.mt.type : '---'), o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Knowledge Type: ', s.kt ? s.kt.type : '---'), o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Object Type: ', s.ot ? s.ot.type : '---'))), o.a.createElement('div', { className: r.root }, o.a.createElement(Ce.a, { container: !0, direction: 'row' }, o.a.createElement(Ce.a, { item: !0, xs: 6 }, 'EQF Level: ', s.el ? s.el.type : '---'), o.a.createElement(Ce.a, { item: !0, xs: 6 }, 'Course Level: ', s.cl ? s.cl.type : '---'))), o.a.createElement('div', { className: r.root }, o.a.createElement(Ce.a, { container: !0, direction: 'row' }, o.a.createElement(Ce.a, { item: !0, xs: 6 }, 'License: ', s.l ? s.l.type : '---'), o.a.createElement(Ce.a, { item: !0, xs: 6 }, 'Minimum Screen Resolution: ', s.msr ? s.msr.type : '---'))), o.a.createElement('div', { className: r.root }, o.a.createElement(Ce.a, { container: !0, direction: 'row' }, o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Suitable blind: ', s.suitableBlind ? 'yes' : 'no'), o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Suitable deaf: ', s.suitableDeaf ? 'yes' : 'no'), o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Suitable dumb: ', s.suitableDumb ? 'yes' : 'no'))), o.a.createElement('div', { className: r.root }, o.a.createElement(Ce.a, { container: !0, direction: 'row' }, o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Publish: ', s.publish ? 'yes' : 'no'), o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Review: ', s.review ? 'yes' : 'no'), o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Lectorate: ', s.lectorate ? 'yes' : 'no'))), o.a.createElement('div', { className: r.root }, o.a.createElement(Ce.a, { container: !0, direction: 'row' }, o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Visible Public: ', s.visiblePublic ? 'yes' : 'no'), o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Visible Lexicon: ', s.visibleLexicon ? 'yes' : 'no'), o.a.createElement(Ce.a, { item: !0, xs: 4 }, 'Visible Courses: ', s.visibleCourses ? 'yes' : 'no'))), o.a.createElement(Ce.a, { container: !0, direction: 'row' }, o.a.createElement(Ce.a, { item: !0, xs: 6, className: r.left }, a.user.id === s.author.id && o.a.createElement(xe.a, {
        className: r.button, variant: 'contained', component: d.b, to: '/texts/add/knowledge-units/'.concat(s.id),
      }, 'Add Text'), '\xa0', de(a.capabilities, ['edit_any_knowledge_unit']) && o.a.createElement(xe.a, {
        className: r.button, variant: 'contained', disabled: s.lectorate, onClick() { return t(s.id); },
      }, 'Delete Knowledge Unit')), o.a.createElement(Ce.a, { item: !0, xs: 6, className: r.right }, de(a.capabilities, ['set_knowledge_unit_reviewed']) && o.a.createElement(xe.a, {
        className: r.button, variant: 'contained', disabled: s.review, onClick() { return n(s.id); },
      }, 'Mark reviewed'), '\xa0', de(a.capabilities, ['set_knowledge_unit_lectored']) && o.a.createElement(xe.a, {
        className: r.button, variant: 'contained', disabled: s.lectorate, onClick() { return t(s.id); },
      }, 'Mark lectored'))), l);
    }; Pe.defaultProps = { link: !1 }; const Oe = Object(G.a)(((e) => ({
      root: { flexGrow: 1, width: '100%', textAlign: 'left' }, paper: Object(Ee.a)(Object(Ee.a)({}, e.mixins.gutters()), {}, { paddingTop: 2 * e.spacing(), paddingBottom: 2 * e.spacing(), marginTop: e.spacing() }), button: { marginTop: e.spacing() }, left: { textAlign: 'left' }, right: { textAlign: 'right' },
    })))(Pe); const Ie = Object(G.a)({})(((e) => {
      const t = e.markReviewed; const n = e.markLectored; const r = e.item; const i = e.user; return o.a.createElement(Oe, {
        markReviewed: t, markLectored: n, unit: r, user: i,
      });
    })); const Me = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n() { return Object(F.a)(this, n), t.apply(this, arguments); } return Object(V.a)(n, [{ key: 'componentDidMount', value() { this.fetchItem(); } }, { key: 'componentDidUpdate', value() { this.fetchItem(); } }, { key: 'fetchItem', value() { const e = this.props; const t = e.match; const n = e.items; const r = e.itemFetch; const i = t.params.id; n.id[i] || n.fetchingId === i || r(i); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.markReviewed; const n = e.markLectored; const r = e.items; const i = e.match; const a = e.user; const s = i.params.id; let l = r.id[s]; return l ? (l = r.id[s], o.a.createElement(Ie, {
            markReviewed: t, markLectored: n, item: l, user: a,
          })) : null;
        },
      }]), n;
    }(i.Component)); const Ne = Object(z.g)(Me); const Re = n(13); const je = n(403); const De = n(402); const Le = n(395); const ze = n(345); const Fe = n(346); const Ve = n(349); const Be = n(394); const Ue = n(405); const He = n(347); const We = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText, delete c.error; let u = n; l && (u = l), i && a && (u = a); let d = i && a; l && (d = !0), d && (d = !0); const h = s.options.map(((e) => o.a.createElement(K.a, { key: e.id, value: e.id }, e.type))); return o.a.createElement(o.a.Fragment, null, o.a.createElement(Ve.a, { htmlFor: 'language', error: d, required: !1 }), o.a.createElement(He.a, {
        name: 'language', value: '', error: d && !0, displayEmpty: !0, ...t, ...c,
      }, h), o.a.createElement(ze.a, { error: d }, u));
    }; const qe = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d && !0, label: n, ...t, ...c,
      });
    }; const Ge = function (e) { const t = e.input; const n = e.label; const r = Object(Re.a)(e, ['input', 'label']); const i = t; return delete i.value, delete r.errorText, o.a.createElement(Le.a, { control: o.a.createElement(Ue.a, { label: n, ...i, ...r }), label: n }); }; const $e = Object(De.a)({ form: 'KnowledgeUnitsAdd', validate(e) { const t = {}; return ['knowledgeType', 'mediaType'].forEach(((n) => { e[n] && e[n] !== '' || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.taxonomies; const i = e.pristine; const a = e.classes; const s = e.invalid; const l = e.errors; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: a.flex }, o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'courseLevel', label: 'Level in Course', component: We, options: r.courseLevel, className: a.textField, errorText: l.errors.title,
      }))), o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'knowledgeType', label: 'Knowledge Type', component: We, options: r.knowledgeType, className: a.textField, errorText: l.errors.knowledgeType, required: !0,
      }))), o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'license', label: 'License', component: We, options: r.licences, className: a.textField, errorText: l.errors.title,
      })))), o.a.createElement('div', { className: a.flex }, o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'mediaType', label: 'Media Type', component: We, options: r.mediaType, className: a.textField, errorText: l.errors.title,
      }))), o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'minimumScreenResolution', label: 'Minimum Screen Resolution', component: We, options: r.minimumScreenResolution, className: a.textField, errorText: l.errors.title,
      }))), o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'eqflevel', label: 'EQF Level', component: We, options: r.eqflevel, className: a.textField, errorText: l.errors.title,
      })))), o.a.createElement('div', { className: a.flex }, o.a.createElement('div', null, o.a.createElement(Fe.a, null, o.a.createElement(je.a, {
        name: 'suitableBlind', label: 'Suitable for blind', component: Ge, className: a.textField, errorText: l.errors.title, checked: !0,
      }))), o.a.createElement('div', null, o.a.createElement(Fe.a, null, o.a.createElement(je.a, {
        name: 'suitableDeaf', label: 'Suitable for deaf', component: Ge, className: a.textField, errorText: l.errors.title, checked: !0,
      }))), o.a.createElement('div', null, o.a.createElement(Fe.a, null, o.a.createElement(je.a, {
        name: 'suitableDumb', label: 'Suitable for dumb', component: Ge, className: a.textField, errorText: l.errors.title, checked: !0,
      })))), o.a.createElement('div', { className: a.flex }, o.a.createElement('div', null, o.a.createElement(Fe.a, null, o.a.createElement(je.a, {
        name: 'publish', label: 'Publish', component: Ge, className: a.textField, errorText: l.errors.title, value: 'publish', checked: !0,
      })))), o.a.createElement('div', { className: a.flex }, o.a.createElement('div', null, o.a.createElement(Fe.a, null, o.a.createElement(je.a, {
        name: 'visiblePublic', label: 'Visible Public', component: Ge, className: a.textField, errorText: l.errors.title, checked: !0,
      }))), o.a.createElement('div', null, o.a.createElement(Fe.a, null, o.a.createElement(je.a, {
        name: 'visibleLexicon', label: 'Visible Lexicon', component: Ge, className: a.textField, errorText: l.errors.title, checked: !0,
      }))), o.a.createElement('div', null, o.a.createElement(Fe.a, null, o.a.createElement(je.a, {
        name: 'visibleCourses', label: 'Visible Courses', component: Ge, className: a.textField, errorText: l.errors.title, checked: !0,
      })))), o.a.createElement('div', { className: a.flex }, o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'objective', label: 'Objective', component: qe, className: a.textField, errorText: l.errors.title,
      }))), o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'comment', label: 'Comment', component: qe, className: a.textField, errorText: l.errors.title,
      })))), o.a.createElement('div', { className: a.flex }, o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'time', type: 'number', label: 'Time in minutes', component: qe, className: a.textField, errorText: l.errors.title, parse(e) { return parseInt(e, 10); },
      }))), o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'recommendedAge', type: 'number', label: 'Recommended Age', component: qe, className: a.textField, errorText: l.errors.title, parse(e) { return parseInt(e, 10); },
      })))), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: i || n || s }, 'Add Knowledge Unit')));
    })); const Ye = Object(G.a)(((e) => ({
      wrapper: { display: 'flex', flex: 1 },
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      formControl: {
        margin: e.spacing(), flex: 1, minWidth: 120, textAlign: 'left',
      },
      selectField: { textAlign: 'left' },
      flex: { display: 'flex', flexDirection: 'row' },
    })))($e); const Ke = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.learningUnitFetch; const n = e.taxonomiesFetch; const r = e.learningUnits; const i = e.taxonomies; const o = e.match; i.fetched || i.fetching || n(); const a = o.params.learningUnitId; r.fetching || r.id[a] || t(a); } }, {
        key: 'handleSubmit',
        value(e) {
          e.preventDefault(); const t = this.props; const n = t.history; const r = t.handleSubmit; const i = {
            LearningUnitId: t.match.params.learningUnitId, objective: e.target.objective.value, comment: e.target.comment.value, time: e.target.time.value, recommendedAge: e.target.recommendedAge.value, publish: e.target.publish.checked, visiblePublic: e.target.visiblePublic.checked, visibleLexicon: e.target.visibleLexicon.checked, visibleCourses: e.target.visibleCourses.checked, suitableBlind: e.target.suitableBlind.checked, suitableDeaf: e.target.suitableDeaf.checked, suitableDumb: e.target.suitableDumb.checked, minimumScreenResolution: e.target.minimumScreenResolution.value, knowledgeType: e.target.knowledgeType.value, courseLevel: e.target.courseLevel.value, mediaType: e.target.mediaType.value, license: e.target.license.value,
          }; i.minimumScreenResolution = i.minimumScreenResolution.isInteger !== '' ? i.minimumScreenResolution : null, i.knowledgeType = i.knowledgeType !== '' ? i.knowledgeType : null, i.courseLevel = i.courseLevel.isInteger !== '' ? i.courseLevel : null, i.mediaType = i.mediaType.isInteger !== '' ? i.mediaType : null, i.license = i.license.isInteger !== '' ? i.license : null, r(i, n);
        },
      }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.learningUnits; const n = e.taxonomies; const r = e.errors; const i = e.match.params.learningUnitId; let a = ''; if (t.id[i]) { const s = t.id[i]; s[1] && (a = s[1].title); } return console.log(n.items), o.a.createElement('div', null, o.a.createElement($.a, { variant: 'h5' }, '"', a, '"'), o.a.createElement(Ye, {
            handleSubmit: this.handleSubmit, taxonomies: n.items, initialValues: { language: 1, minimumScreenResolution: 88, courseLevel: 82 }, errors: r.add,
          }));
        },
      }]), n;
    }(i.Component)); const Qe = Object(z.g)(Ke); const Je = function (e) {
      const t = e.knowledgeUnits; const n = e.learningUnits; const r = e.actions; const i = e.user; return o.a.createElement(o.a.Fragment, null, o.a.createElement(z.b, {
        exact: !0,
        path: '/knowledge-units/add/:learningUnitId',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'LearningUnitsWrapper',
            logout: r.userLogout,
            title: 'Add Knowledge Unit',
            active: 'knowledgeUnits',
            user: i,
            element: o.a.createElement(Qe, {
              taxonomiesFetch: r.knowledgeUnitsTaxonomiesFetch, learningUnitFetch: r.learningUnitsItemFetch, taxonomies: t.taxonomies, learningUnits: n, handleSubmit: r.knowledgeUnitsAdd, errors: t.errors,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/knowledge-units/show/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'KnowledgeUnitsWrapper',
            logout: r.userLogout,
            title: 'Knowledge Unit',
            active: 'knowledgeUnits',
            user: i,
            element: o.a.createElement(Ne, {
              markReviewed: r.knowledgeUnitsMarkReviewed, markLectored: r.knowledgeUnitsMarkLectored, itemFetch: r.knowledgeUnitsItemFetch, handleSubmit: r.knowledgeUnitsEdit, errors: t.errors, items: t, user: i,
            }),
          });
        },
      }));
    }; const Ze = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n() { return Object(F.a)(this, n), t.apply(this, arguments); } return Object(V.a)(n, [{ key: 'componentDidMount', value() { this.fetchItem(); } }, { key: 'componentDidUpdate', value() { this.fetchItem(); } }, { key: 'fetchItem', value() { const e = this.props; const t = e.itemFetch; const n = e.match; const r = e.items; const i = n.params.id; r.id[i] || r.fetchingId === i || t(i); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.fetchRoles; const n = e.element; const r = e.logout; const i = e.user; const a = e.match; const s = e.items; const l = a.params; const c = l.id; const u = l.languageId; let d = 'Editing Learning Unit: '; return s.id[c] && (d += s.id[c][u].title), o.a.createElement(_e, {
            className: 'LearningUnitsWrapper', fetchRoles: t, active: 'learningUnits', element: n, logout: r, title: d, user: i,
          });
        },
      }]), n;
    }(i.Component)); const Xe = Object(z.g)(Ze); const et = n(396); const tt = n(198); function nt(e) { const t = e.inputRef; const n = Object(Re.a)(e, ['inputRef']); return o.a.createElement('div', { ref: t, ...n }); } const rt = {
      Control(e) { const t = e.selectProps; const n = e.innerRef; const r = e.innerProps; const i = e.children; return o.a.createElement(Be.a, { fullWidth: !0, InputProps: { inputComponent: nt, onKeyUp: t.onKeyUp, inputProps: Object(Ee.a)({ className: t.classes.input, inputRef: n, children: i }, r) }, ...t.textFieldProps }); },
      Menu(e) { const t = e.selectProps; const n = e.innerProps; const r = e.children; return o.a.createElement(Te.a, { square: !0, className: t.classes.paper, ...n }, r); },
      NoOptionsMessage(e) { const t = e.selectProps; const n = e.innerProps; const r = e.children; return o.a.createElement($.a, { color: 'textSecondary', className: t.classes.noOptionsMessage, ...n }, r); },
      Option(e) {
        const t = e.innerProps; const n = e.isSelected; const r = e.isFocused; const i = e.children; const a = e.innerRef; return o.a.createElement(K.a, {
          buttonRef: a, selected: r, component: 'div', style: { fontWeight: n ? 500 : 400 }, ...t,
        }, i);
      },
      Placeholder(e) { const t = e.selectProps; const n = e.innerProps; const r = e.children; return o.a.createElement($.a, { color: 'textSecondary', className: t.classes.placeholder, ...n }, r); },
      SingleValue(e) { const t = e.innerProps; const n = e.selectProps; const r = e.children; return o.a.createElement($.a, { className: n.classes.singleValue, ...t }, r); },
      ValueContainer(e) { const t = e.selectProps; const n = e.children; return o.a.createElement('div', { className: t.classes.valueContainer }, n); },
    }; const it = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleChange = r.handleChange.bind(Object(B.a)(r)), r.onKeyUp = r.onKeyUp.bind(Object(B.a)(r)), r.state = { term: { id: null, value: null } }, r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() {} }, { key: 'onKeyUp', value(e) { const t = this.state.term; const n = e.target.value; t !== n && this.fetchSuggestions(n); } }, { key: 'handleChange', value(e) { const t = this.props.setTarget; e ? (this.setState({ term: e }), t(e.id)) : (this.setState({ term: { id: null, value: null } }), t(null)); } }, { key: 'fetchSuggestions', value(e) { const t = this.props.fetchSuggestions; t(e); } }, {
        key: 'render',
        value() {
          const e = this; const t = this.props; const n = t.suggestions; const r = t.classes; const i = t.theme; const a = this.state.term; const s = { input(e) { return Object(Ee.a)(Object(Ee.a)({}, e), {}, { color: i.palette.text.primary, '& input': { font: 'inherit' } }); } }; return o.a.createElement('div', { className: r.root }, o.a.createElement(et.a, null, o.a.createElement(tt.a, {
            classes: r, options: n, onChange: this.handleChange, onKeyUp(t) { return e.onKeyUp(t); }, placeholder: 'Search for a Learning unit', styles: s, value: a.value, components: rt, isClearable: !0,
          })));
        },
      }]), n;
    }(i.Component)); const ot = Object(G.a)(((e) => ({
      root: {},
      input: { display: 'flex' },
      valueContainer: {
        display: 'flex', flexWrap: 'wrap', flex: 1, alignItems: 'center', overflow: 'hidden',
      },
      noOptionsMessage: { padding: ''.concat(e.spacing(), 'px ').concat(2 * e.spacing(), 'px') },
      singleValue: { fontSize: 16 },
      placeholder: { position: 'absolute', left: 2, fontSize: 16 },
      paper: {
        position: 'absolute', zIndex: 1, marginTop: e.spacing(), left: 0, right: 0,
      },
    })), { withTheme: !0 })(it); const at = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText, delete c.error; let u = n; l && (u = l), i && a && (u = a); let d = i && a; l && (d = !0), d && (d = !0); const h = s.options.map(((e) => o.a.createElement(K.a, { key: e.id, value: e.id }, e.type))); return o.a.createElement(o.a.Fragment, null, o.a.createElement(Ve.a, { htmlFor: 'language', error: d, required: !1 }), o.a.createElement(He.a, {
        name: 'language', value: '', error: d && !0, displayEmpty: !0, ...t, ...c,
      }, h), o.a.createElement(ze.a, { error: d }, u));
    }; const st = Object(De.a)({ form: 'LearningUnitsRelation', validate(e) { const t = {}; return ['tag'].forEach(((n) => { e[n] && e[n] !== '' || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.fetchSuggestions; const n = e.handleSubmit; const r = e.suggestions; const i = e.submitting; const a = e.taxonomies; const s = e.setTarget; const l = e.pristine; const c = e.classes; return o.a.createElement('form', { onSubmit: n }, o.a.createElement('div', { className: c.flex }, o.a.createElement('div', { className: c.wrapper }, o.a.createElement(Fe.a, { required: !0, className: c.formControl }, o.a.createElement(ot, { suggestions: r, fetchSuggestions: t, setTarget: s }))), o.a.createElement('div', { className: c.wrapper }, o.a.createElement(Fe.a, { required: !0, className: c.formControl }, o.a.createElement(je.a, {
        name: 'type', label: 'Relation', component: at, options: a.items.relationType, className: c.textField,
      })))), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: l || i }, 'Add Relation')));
    })); const lt = Object(G.a)(((e) => ({
      wrapper: { display: 'flex', flex: 1 },
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      formControl: { margin: e.spacing(), flex: 1, minWidth: 120 },
      selectField: { textAlign: 'left' },
      flex: { display: 'flex', flexDirection: 'row' },
    })))(st); const ct = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d && !0, label: n, value: t.value, ...t, ...c,
      });
    }; const ut = Object(De.a)({ form: 'LearningUnitsTitle', validate(e) { const t = {}; return ['tag'].forEach(((n) => { e[n] && e[n] !== '' || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.pristine; const i = e.classes; e.title; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: i.flex }, o.a.createElement('div', { className: i.wrapper }, o.a.createElement(Fe.a, { required: !0, className: i.formControl }, o.a.createElement(je.a, {
        required: !0, name: 'title', label: 'Title', component: ct, className: i.textField,
      })))), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: r || n }, 'Save Title')));
    })); const dt = Object(G.a)(((e) => ({
      wrapper: { display: 'flex', flex: 1 },
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      formControl: { margin: e.spacing(), flex: 1, minWidth: 120 },
      selectField: { textAlign: 'left' },
      flex: { display: 'flex', flexDirection: 'row' },
    })))(ut); const ht = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d && !0, label: n, ...t, ...c,
      });
    }; const ft = Object(De.a)({ validate(e) { const t = {}; return ['tag'].forEach(((n) => { e[n] && e[n] !== '' || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.deleteTag; const i = e.pristine; const a = e.classes; const s = e.id; return o.a.createElement('form', { onSubmit: t, tagid: s }, o.a.createElement('div', { className: a.flex }, o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        required: !0, name: 'tag', label: 'Tag', component: ht, className: a.textField,
      })))), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: i || n }, 'Save Tag'), '\xa0', o.a.createElement(xe.a, { onClick() { return r(s); }, variant: 'contained' }, 'Delete')));
    })); const mt = Object(G.a)(((e) => ({
      wrapper: { display: 'flex', flex: 1 },
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      formControl: { margin: e.spacing(), flex: 1, minWidth: 120 },
      selectField: { textAlign: 'left' },
      flex: { display: 'flex', flexDirection: 'row' },
    })))(ft); const vt = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d && !0, label: n, ...t, ...c,
      });
    }; const gt = Object(De.a)({ form: 'LearningUnitsTag', validate(e) { const t = {}; return ['tag'].forEach(((n) => { e[n] && e[n] !== '' || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.pristine; const i = e.classes; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: i.flex }, o.a.createElement('div', { className: i.wrapper }, o.a.createElement(Fe.a, { required: !0, className: i.formControl }, o.a.createElement(je.a, {
        required: !0, name: 'tag', label: 'Tag', component: vt, className: i.textField,
      })))), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: r || n }, 'Add Tag')));
    })); const pt = Object(G.a)(((e) => ({
      wrapper: { display: 'flex', flex: 1 },
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      formControl: { margin: e.spacing(), flex: 1, minWidth: 120 },
      selectField: { textAlign: 'left' },
      flex: { display: 'flex', flexDirection: 'row' },
    })))(gt); const kt = function (e) {
      const t = e.tags; const n = e.deleteTag; const r = e.updateTag; if (t.length > 0) {
        const i = t.map(((e) => {
          const t = e.id; const i = { tag: e.tag }; return o.a.createElement(mt, {
            handleSubmit: r, initialValues: i, deleteTag: n, updateTag: r, form: 'tag-edit-'.concat(t), key: t, id: t,
          });
        })); return o.a.createElement('div', { className: 'tags' }, i);
      } return null;
    }; const bt = Object(G.a)((() => ({})))(((e) => {
      const t = e.fetchSuggestions; const n = e.initialValues; const r = e.editTitle; const i = e.addRelation; const a = e.suggestions; const s = e.taxonomies; const l = e.setTarget; const c = e.deleteTag; const u = e.updateTag; const d = e.addTag; const h = e.tags; return o.a.createElement(o.a.Fragment, null, o.a.createElement(dt, { initialValues: n, handleSubmit: r }), o.a.createElement(kt, { tags: h, deleteTag: c, updateTag: u }), o.a.createElement(pt, { handleSubmit: d }), o.a.createElement(lt, {
        fetchSuggestions: t, handleSubmit: i, suggestions: a, taxonomies: s, setTarget: l,
      }));
    })); const yt = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).addRelation = r.addRelation.bind(Object(B.a)(r)), r.editTitle = r.editTitle.bind(Object(B.a)(r)), r.setTarget = r.setTarget.bind(Object(B.a)(r)), r.updateTag = r.updateTag.bind(Object(B.a)(r)), r.deleteTag = r.deleteTag.bind(Object(B.a)(r)), r.addTag = r.addTag.bind(Object(B.a)(r)), r.state = { target: null }, r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { this.fetchItem(); } }, { key: 'componentDidUpdate', value() { this.fetchItem(); } }, { key: 'setTarget', value(e) { this.setState({ target: e }); } }, { key: 'fetchItem', value() { const e = this.props; const t = e.taxonomies; const n = e.taxonomiesFetch; t.fetched || t.fetching || n(); } }, { key: 'addTag', value(e) { e.preventDefault(); const t = this.props; const n = t.learningUnitsAddTag; const r = t.history; const i = t.match; const o = t.items; const a = i.params; const s = a.id; const l = a.languageId; const c = e.target.tag.value; const u = s; n(o.id[s][l].item.id, c, l, u, r); } }, { key: 'deleteTag', value(e) { const t = this.props; const n = t.learningUnitsDeleteTag; const r = t.history; const i = t.match.params; const o = i.id; n(e, i.languageId, o, r); } }, { key: 'updateTag', value(e) { const t = this.props; const n = t.learningUnitsUpdateTag; const r = t.history; const i = t.match.params; const o = i.id; const a = i.languageId; e.preventDefault(), n(e.target.getAttribute('tagid'), e.target.tag.value, a, o, r); } }, { key: 'addRelation', value(e) { e.preventDefault(); const t = this.props; const n = t.learningUnitsAddRelation; const r = t.history; const i = t.match.params; const o = i.id; const a = i.languageId; n(o, this.state.target, e.target.type.value, a, r); } }, { key: 'editTitle', value(e) { e.preventDefault(); const t = this.props; const n = t.learningUnitsEdit; const r = t.history; const i = t.match.params; const o = i.id; const a = i.languageId; const s = o; const l = {}; l[a] = { title: e.target.title.value }, n(s, a, l, r); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.fetchSuggestions; const n = e.suggestions; const r = e.taxonomies; const i = e.errors; const a = e.items; const s = e.match.params; const l = s.id; const c = s.languageId; if (a.id[l]) {
            const u = a.id[l][c].title; const d = a.id[l][c].item.LearningUnitTags; const h = { title: u }; return o.a.createElement(bt, {
              fetchSuggestions: t, addRelation: this.addRelation, initialValues: h, editTitle: this.editTitle, setTarget: this.setTarget, deleteTag: this.deleteTag, updateTag: this.updateTag, suggestions: n, taxonomies: r, addTag: this.addTag, errors: i.add, tags: d,
            });
          } return null;
        },
      }]), n;
    }(i.Component)); const wt = Object(z.g)(yt); const _t = wt; const Et = n(41); const xt = n.n(Et); const Tt = n(195); const Ct = n.n(Tt); const St = Object(G.a)((() => ({})))(((e) => {
      const t = e.markReviewed; const n = e.markLectored; const r = e.item; const i = e.user; const a = r.item.LearningUnit.KnowledgeUnits.map(((e) => o.a.createElement(Oe, {
        markReviewed: t, markLectored: n, key: e.id, unit: e, user: i, link: !0,
      }))); const s = r.item.LearningUnitTags.map(((e) => e.tag)).join(', '); return o.a.createElement(Ct.a, { title: 'Lerndorf | '.concat(r.title) }, o.a.createElement('div', null, o.a.createElement($.a, { variant: 'headline' }, '"', r.title, '"', i.user.id === r.item.User.id && o.a.createElement(Y.a, { 'aria-label': 'Edit', component: d.b, to: '/learning-units/edit/'.concat(r.item.Language.id, '/').concat(r.item.LearningUnit.id) }, o.a.createElement(xt.a, null))), o.a.createElement($.a, { variant: 'caption' }, 'created by ', r.username), o.a.createElement($.a, { variant: 'caption' }, 'Tags: ', s), o.a.createElement(Ce.a, null, o.a.createElement(xe.a, { component: d.b, to: '/knowledge-units/add/'.concat(r.item.LearningUnit.id), variant: 'contained' }, 'Add new Knowledge Unit')), a));
    })); const At = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n() { return Object(F.a)(this, n), t.apply(this, arguments); } return Object(V.a)(n, [{ key: 'componentDidMount', value() { this.fetchItem(); } }, { key: 'componentDidUpdate', value() { this.fetchItem(); } }, { key: 'fetchItem', value() { const e = this.props; const t = e.match; const n = e.items; const r = e.itemFetch; const i = t.params.id; n.id[i] || n.fetchingId === i || r(i); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.markReviewed; const n = e.markLectored; const r = e.items; const i = e.match; const a = e.user; const s = i.params; const l = s.id; const c = s.languageId; let u = r.id[l]; return u ? (u = r.id[l][c], o.a.createElement(St, {
            markReviewed: t, markLectored: n, item: u, user: a,
          })) : null;
        },
      }]), n;
    }(i.Component)); const Pt = Object(z.g)(At); const Ot = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText, delete c.error; let u = n; l && (u = l), i && a && (u = a); let d = i && a; l && (d = !0), d && (d = !0); const h = s.options.map(((e) => o.a.createElement(K.a, { key: e.key, value: e.key }, e.value))); return o.a.createElement(o.a.Fragment, null, o.a.createElement(Ve.a, { htmlFor: 'language', error: d, required: !1 }), o.a.createElement(He.a, {
        name: 'language', value: '', error: d && !0, displayEmpty: !0, ...t, ...c,
      }, h), o.a.createElement(ze.a, { error: d }, u));
    }; const It = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d && !0, label: n, ...t, ...c,
      });
    }; const Mt = Object(De.a)({ form: 'LearningUnitsAdd', validate(e) { const t = {}; return ['title', 'language'].forEach(((n) => { e[n] && e[n] !== '' || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.languages; const i = e.pristine; const a = e.classes; const s = e.errors; const l = r.map(((e) => ({ key: e.id, value: e.name }))); return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: a.flex }, o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        required: !0, name: 'title', label: 'Title', component: It, className: a.textField, errorText: s.errors.title,
      }))), o.a.createElement('div', { className: a.wrapper }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'language', label: 'Language', options: l, component: Ot, className: a.selectField, errorText: s.errors.code,
      })))), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: i || n }, 'Add Learning Unit')));
    })); const Nt = Object(G.a)(((e) => ({
      wrapper: { display: 'flex', flex: 1 },
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      formControl: { margin: e.spacing(), flex: 1, minWidth: 120 },
      selectField: { textAlign: 'left' },
      flex: { display: 'flex', flexDirection: 'row' },
    })))(Mt); const Rt = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.languages; const n = e.languagesFetch; t.fetched || t.fetching || n(); } }, { key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.props; const n = t.history; const r = t.handleSubmit; r({ language: e.target.language.value, title: e.target.title.value }, n); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.languages; const n = e.errors; return o.a.createElement(Nt, {
            handleSubmit: this.handleSubmit, languages: t.languages, initialValues: { language: 1 }, errors: n.add,
          });
        },
      }]), n;
    }(i.Component)); const jt = Object(z.g)(Rt); const Dt = n(397); const Lt = n(42); const zt = n.n(Lt); const Ft = Object(G.a)((() => ({ languageList: { flex: 1 } })))(((e) => { const t = e.learningUnitsDelete; const n = e.learningUnits; const r = e.classes; const i = e.user; let a = null; return n.length > 0 && (a = n.map(((e) => { const n = e.Languages.map(((n) => o.a.createElement(oe.a, { component: d.b, key: ''.concat(e.id).concat(n.id), to: 'learning-units/show/'.concat(n.id, '/').concat(e.id) }, o.a.createElement(ee.a, { primary: ''.concat(n.LearningUnitLanguage.title, ' (').concat(n.name, ')') }), o.a.createElement(Dt.a, null, i.user.id === e.User.id && o.a.createElement(Y.a, { 'aria-label': 'Edit', component: d.b, to: '/learning-units/edit/'.concat(n.id, '/').concat(e.id) }, o.a.createElement(xt.a, null)), i.user.id === e.User.id && o.a.createElement(Y.a, { 'aria-label': 'Delete' }, o.a.createElement(zt.a, { onClick() { return t(e.id); } })))))); return o.a.createElement(oe.a, { key: e.id }, o.a.createElement(ee.a, { primary: '#'.concat(e.id) }), o.a.createElement(ce.a, { className: r.languageList }, n)); }))), o.a.createElement('div', null, o.a.createElement($.a, { variant: 'title', className: r.title }, 'Available Learning Units'), o.a.createElement(ce.a, { dense: !1 }, a)); })); const Vt = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleDelete = r.handleDelete.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.learningUnits; const n = e.learningUnitsFetch; t.fetched || t.fetching || n(); } }, { key: 'componentDidUpdate', value() { const e = this.props; const t = e.learningUnits; const n = e.learningUnitsFetch; t.fetched || t.fetching || n(); } }, { key: 'handleDelete', value(e) { (0, this.props.learningUnitsDelete)(e); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.learningUnits; const n = e.history; const r = e.user; return o.a.createElement('div', null, o.a.createElement(Ft, {
            learningUnitsDelete: this.handleDelete, learningUnits: t.items, history: n, user: r,
          }), de(r.capabilities, ['add_learning_unit']) && o.a.createElement(Ce.a, null, o.a.createElement(xe.a, { onClick() { return n.push('/learning-units/add'); }, variant: 'contained' }, 'Add new Learning Unit')));
        },
      }]), n;
    }(i.Component)); const Bt = Object(z.g)(Vt); const Ut = function (e) {
      const t = e.learningUnits; const n = e.languages; const r = e.actions; const i = e.user; return o.a.createElement(o.a.Fragment, null, o.a.createElement(z.b, {
        exact: !0,
        path: '/learning-units',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'LearningUnitsWrapper',
            logout: r.userLogout,
            active: 'learningUnits',
            title: 'Learning Units',
            user: i,
            element: o.a.createElement(Bt, {
              user: i, learningUnitsDelete: r.learningUnitsDelete, learningUnitsFetch: r.learningUnitsFetch, learningUnits: t,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/learning-units/add',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'LearningUnitsWrapper',
            logout: r.userLogout,
            title: 'Add Learning Unit',
            active: 'learningUnits',
            user: i,
            element: o.a.createElement(jt, {
              handleSubmit: r.learningUnitsAdd, languagesFetch: r.languagesFetch, languages: n, errors: t.errors,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/learning-units/show/:languageId/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'LearningUnitsWrapper',
            logout: r.userLogout,
            title: 'Learning Unit',
            active: 'learningUnits',
            user: i,
            element: o.a.createElement(Pt, {
              markReviewed: r.knowledgeUnitsMarkReviewed, markLectored: r.knowledgeUnitsMarkLectored, user: i, itemFetch: r.learningUnitsItemFetch, handleSubmit: r.learningUnitsEdit, errors: t.errors, items: t,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/learning-units/edit/:languageId/:id',
        render() {
          return o.a.createElement(Xe, {
            itemFetch: r.learningUnitsItemFetch,
            fetchRoles: r.userFetchRoles,
            className: 'LearningUnitsWrapper',
            logout: r.userLogout,
            items: t,
            user: i,
            element: o.a.createElement(_t, {
              learningUnitsAddRelation: r.learningUnitsAddRelation, fetchSuggestions: r.learningUnitsSuggestionsFetch, learningUnitsDeleteTag: r.learningUnitsDeleteTag, learningUnitsUpdateTag: r.learningUnitsUpdateTag, taxonomiesFetch: r.learningUnitsTaxonomiesFetch, learningUnitsAddTag: r.learningUnitsAddTag, learningUnitsEdit: r.learningUnitsEdit, itemFetch: r.learningUnitsItemFetch, handleSubmit: r.learningUnitsEdit, suggestions: t.suggestions, taxonomies: t.taxonomies, errors: t.errors, items: t, user: i,
            }),
          });
        },
      }));
    }; const Ht = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d, label: n, ...t, ...c,
      });
    }; const Wt = Object(De.a)({ form: 'TaxonomiesAdd', validate(e) { const t = {}; return ['type'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.pristine; const i = e.classes; const a = e.errors; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, name: 'type', label: 'Type', component: Ht, className: i.textField, errorText: a.errors.name,
      })), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: r || n }, 'Add Taxonomy')));
    })); const qt = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing.unit, marginRight: e.spacing.unit, marginBottom: e.spacing.unit,
      },
      flex: { display: 'flex' },
    })))(Wt); const Gt = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.props; const n = t.match; const r = t.history; const i = t.handleSubmit; i({ parent: n.params.id, type: e.target.type.value }, r); } }, { key: 'render', value() { const e = this.props.errors; return o.a.createElement(qt, { handleSubmit: this.handleSubmit, errors: e.add }); } }]), n; }(i.Component)); const $t = Object(z.g)(Gt); const Yt = n(196); const Kt = n.n(Yt); const Qt = Object(G.a)((() => ({ wrapper: { marginTop: '10px' } })))(((e) => {
      const t = e.itemsDelete; const n = e.classes; const r = e.history; const i = e.items; let a = null; return i.length > 0 && (a = i.map(((e) => o.a.createElement(oe.a, {
        key: e.id, button: !0, component: d.b, to: '/taxonomies/show/'.concat(e.id),
      }, o.a.createElement(ee.a, { primary: ''.concat(e.type) }), o.a.createElement(Dt.a, null, o.a.createElement(Y.a, { 'aria-label': 'Show' }, o.a.createElement(Kt.a, { onClick() { return r.push('/taxonomies/show/'.concat(e.id)); } })), o.a.createElement(Y.a, { 'aria-label': 'Edit' }, o.a.createElement(xt.a, { onClick() { return r.push('/taxonomies/edit/'.concat(e.id)); } })), o.a.createElement(Y.a, { 'aria-label': 'Delete' }, o.a.createElement(zt.a, { onClick() { return t(e.id); } }))))))), o.a.createElement('div', { className: n.wrapper }, o.a.createElement(ce.a, { dense: !1 }, a));
    })); const Jt = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).fetchItemById = r.fetchItemById.bind(Object(B.a)(r)), r.handleDelete = r.handleDelete.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { this.fetchItemById(); } }, { key: 'componentDidUpdate', value() { this.fetchItemById(); } }, { key: 'fetchItemById', value() { const e = this.props; const t = e.items; const n = e.match; const r = e.itemFetch; const i = n.params.id; t.fetching || t.id[i] || r(i); } }, { key: 'handleDelete', value(e) { (0, this.props.itemsDelete)(e); } }, { key: 'render', value() { const e = this.props; const t = e.history; const n = e.match; const r = e.items; const i = n.params.id; const a = r.id[i]; let s = null; let l = null; return a && (s = o.a.createElement(Qt, { itemsDelete: this.handleDelete, items: a.children, history: t }), l = o.a.createElement($.a, { variant: 'title' }, 'Taxonomy: ', '"', a.type, '"')), o.a.createElement('div', null, l, s, o.a.createElement(Ce.a, null, o.a.createElement(xe.a, { onClick() { return t.push('/taxonomies/'.concat(i, '/add')); }, variant: 'contained' }, 'Add new term'))); } }]), n; }(i.Component)); const Zt = Object(z.g)(Jt); const Xt = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d, label: n, ...t, ...c,
      });
    }; const en = Object(De.a)({ form: 'TaxonomiesEdit', validate(e) { const t = {}; return ['type', 'code'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.pristine; const i = e.classes; const a = e.errors; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, name: 'type', label: 'Type', component: Xt, className: i.textField, errorText: a.errors.name,
      })), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: r || n }, 'Save')));
    })); const tn = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing.unit, marginRight: e.spacing.unit, marginBottom: e.spacing.unit,
      },
      flex: { display: 'flex' },
    })))(en); const nn = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.match; const n = e.items; const r = e.itemFetch; const i = t.params.id; n.fetching || n.id[i] || r(i); } }, { key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.props; const n = t.match; const r = t.history; const i = t.handleSubmit; i(n.params.id, { type: e.target.type.value }, r); } }, { key: 'render', value() { const e = this.props; const t = e.errors; const n = e.items; const r = e.match.params.id; const i = n.id[r]; return o.a.createElement(tn, { handleSubmit: this.handleSubmit, initialValues: i, errors: t.edit }); } }]), n; }(i.Component)); const rn = Object(z.g)(nn); const on = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.props; const n = t.history; const r = t.handleSubmit; r({ parent: 1, type: e.target.type.value }, n); } }, { key: 'render', value() { const e = this.props.errors; return o.a.createElement(qt, { handleSubmit: this.handleSubmit, errors: e.add }); } }]), n; }(i.Component)); const an = Object(z.g)(on); const sn = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleDelete = r.handleDelete.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.items; const n = e.itemsFetch; t.fetched || t.fetching || n(); } }, { key: 'componentDidUpdate', value() { const e = this.props; const t = e.items; const n = e.itemsFetch; t.fetched || t.fetching || n(); } }, { key: 'handleDelete', value(e) { (0, this.props.itemsDelete)(e); } }, { key: 'render', value() { const e = this.props; const t = e.history; const n = e.items; return o.a.createElement('div', null, o.a.createElement($.a, { variant: 'title' }, 'Available taxonomies'), o.a.createElement(Qt, { itemsDelete: this.handleDelete, items: n.items, history: t }), o.a.createElement(Ce.a, null, o.a.createElement(xe.a, { onClick() { return t.push('/taxonomies/add'); }, variant: 'contained' }, 'Add new taxonomy'))); } }]), n; }(i.Component)); const ln = Object(z.g)(sn); const cn = function (e) {
      const t = e.taxonomies; const n = e.actions; const r = e.user; return o.a.createElement(o.a.Fragment, null, o.a.createElement(z.b, {
        exact: !0,
        path: '/taxonomies',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: n.userFetchRoles, className: 'TaxonomiesWrapper', logout: n.userLogout, active: 'taxonomies', title: 'Taxonomies', user: r, element: o.a.createElement(ln, { itemsDelete: n.taxonomiesDelete, itemsFetch: n.taxonomiesFetch, items: t }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/taxonomies/show/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: n.userFetchRoles, className: 'TaxonomiesWrapper', logout: n.userLogout, active: 'taxonomies', title: 'Taxonomies', user: r, element: o.a.createElement(Zt, { itemFetch: n.taxonomiesItemFetch, itemsDelete: n.taxonomiesDelete, items: t }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/taxonomies/add',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: n.userFetchRoles, className: 'TaxonomiesWrapper', logout: n.userLogout, active: 'taxonomies', title: 'Add Taxonomy', user: r, element: o.a.createElement(an, { handleSubmit: n.taxonomiesAdd, errors: t.errors }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/taxonomies/:id/add',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: n.userFetchRoles, className: 'TaxonomiesWrapper', logout: n.userLogout, active: 'taxonomies', title: 'Add Taxonomy', user: r, element: o.a.createElement($t, { handleSubmit: n.taxonomiesAdd, errors: t.errors }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/taxonomies/edit/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: n.userFetchRoles,
            className: 'TaxonomiesWrapper',
            logout: n.userLogout,
            active: 'taxonomies',
            title: 'Edit Taxonomy Term',
            user: r,
            element: o.a.createElement(rn, {
              itemFetch: n.taxonomiesItemFetch, handleSubmit: n.taxonomiesEdit, errors: t.errors, items: t,
            }),
          });
        },
      }));
    }; const un = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d, label: n, ...t, ...c,
      });
    }; const dn = Object(De.a)({ form: 'LanguagesEdit', validate(e) { const t = {}; return ['name', 'code'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.pristine; const i = e.classes; const a = e.errors; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, name: 'name', label: 'Name', component: un, className: i.textField, errorText: a.errors.name,
      })), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: r || n }, 'Save')));
    })); const hn = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing.unit, marginRight: e.spacing.unit, marginBottom: e.spacing.unit,
      },
      flex: { display: 'flex' },
    })))(dn); const fn = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.match; const n = e.languages; const r = e.languagesFetch; const i = t.params.id; n.fetched || n.fetching || n.id[i] || r(); } }, { key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.props; const n = t.match; const r = t.history; const i = t.handleSubmit; i(n.params.id, { name: e.target.name.value }, r); } }, { key: 'render', value() { const e = this.props; const t = e.languages; const n = e.errors; const r = e.match.params.id; const i = t.id[r]; return o.a.createElement(hn, { handleSubmit: this.handleSubmit, initialValues: i, errors: n.edit }); } }]), n; }(i.Component)); const mn = Object(z.g)(fn); const vn = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d, label: n, ...t, ...c,
      });
    }; const gn = Object(De.a)({ form: 'LanguagesAdd', validate(e) { const t = {}; return ['name', 'code'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.pristine; const i = e.classes; const a = e.errors; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, name: 'name', label: 'Name', component: vn, className: i.textField, errorText: a.errors.name,
      })), o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, name: 'code', label: 'Code', component: vn, className: i.textField, errorText: a.errors.code,
      })), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: r || n }, 'Add language')));
    })); const pn = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing.unit, marginRight: e.spacing.unit, marginBottom: e.spacing.unit,
      },
      flex: { display: 'flex' },
    })))(gn); const kn = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.props; const n = t.history; const r = t.handleSubmit; r({ name: e.target.name.value, code: e.target.code.value }, n); } }, { key: 'render', value() { const e = this.props.errors; return o.a.createElement(pn, { handleSubmit: this.handleSubmit, errors: e.add }); } }]), n; }(i.Component)); const bn = Object(z.g)(kn); const yn = Object(G.a)((() => ({})))(((e) => { const t = e.languagesDelete; const n = e.languages; const r = e.classes; const i = e.history; let a = null; return n.length > 0 && (a = n.map(((e) => o.a.createElement(oe.a, { key: e.id }, o.a.createElement(ee.a, { primary: ''.concat(e.name, ' (').concat(e.code, ')') }), o.a.createElement(Dt.a, null, o.a.createElement(Y.a, { 'aria-label': 'Edit' }, o.a.createElement(xt.a, { onClick() { return i.push('/languages/edit/'.concat(e.id)); } })), o.a.createElement(Y.a, { 'aria-label': 'Delete' }, o.a.createElement(zt.a, { onClick() { return t(e.id); } }))))))), o.a.createElement('div', null, o.a.createElement($.a, { variant: 'title', className: r.title }, 'Available languages'), o.a.createElement(ce.a, { dense: !1 }, a)); })); const wn = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleDelete = r.handleDelete.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.languages; const n = e.languagesFetch; t.fetched || t.fetching || n(); } }, { key: 'componentDidUpdate', value() { const e = this.props; const t = e.languages; const n = e.languagesFetch; t.fetched || t.fetching || n(); } }, { key: 'handleDelete', value(e) { (0, this.props.languagesDelete)(e); } }, { key: 'render', value() { const e = this.props; const t = e.languages; const n = e.history; return o.a.createElement('div', null, o.a.createElement(yn, { languagesDelete: this.handleDelete, languages: t.languages, history: n }), o.a.createElement(Ce.a, null, o.a.createElement(xe.a, { onClick() { return n.push('/languages/add'); }, variant: 'contained' }, 'Add new language'))); } }]), n; }(i.Component)); const _n = Object(z.g)(wn); const En = function (e) {
      const t = e.languages; const n = e.actions; const r = e.user; return o.a.createElement(o.a.Fragment, null, o.a.createElement(z.b, {
        exact: !0,
        path: '/languages',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: n.userFetchRoles, className: 'LanguagesWrapper', logout: n.userLogout, active: 'languages', title: 'Languages', user: r, element: o.a.createElement(_n, { languagesDelete: n.languagesDelete, languagesFetch: n.languagesFetch, languages: t }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/languages/add',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: n.userFetchRoles, className: 'LanguagesWrapper', logout: n.userLogout, title: 'Add Language', active: 'languages', user: r, element: o.a.createElement(bn, { handleSubmit: n.languagesAdd, errors: t.errors }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/languages/edit/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: n.userFetchRoles,
            className: 'LanguagesWrapper',
            logout: n.userLogout,
            title: 'Edit Language',
            active: 'languages',
            user: r,
            element: o.a.createElement(mn, {
              languagesFetch: n.languagesFetch, handleSubmit: n.languagesEdit, errors: t.errors, languages: t,
            }),
          });
        },
      }));
    }; const xn = n(151); const Tn = n.n(xn); const Cn = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; return l && (u = l), i && a && (u = a), o.a.createElement(Be.a, {
        helperText: u, error: i && a || l, label: n, value: t.value, ...t, ...c,
      });
    }; const Sn = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s.options; const u = s; delete u.errorText, delete u.error, delete u.options; let d = n; l && (d = l), i && a && (d = a); let h = i && a; l && (h = !0), h && (h = !0); const f = c.map(((e) => o.a.createElement(K.a, { key: e.id, value: e.id }, e.name))); return o.a.createElement(o.a.Fragment, null, o.a.createElement(Ve.a, { htmlFor: 'language', error: h, required: !1 }, 'Language'), o.a.createElement(He.a, {
        style: { marginLeft: 0 }, name: 'language', value: '', error: h && !0, displayEmpty: !0, ...t, ...u,
      }, f), o.a.createElement(ze.a, { error: h }, d));
    }; const An = Object(De.a)({ form: 'Language', validate(e) { const t = {}; return ['email'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), e.password && e.password1 && e.password !== e.password1 && (t.password = 'Passwords do not match', t.password1 = 'Passwords do not match'), t; } })(((e) => {
      const t = e.handlePreferred; const n = e.handleSubmit; const r = e.handleDelete; const i = e.languages; const a = e.classes; const s = e.user; const l = s.Languages; const c = s.preferredLanguage; return o.a.createElement('div', null, o.a.createElement('div', null, (function () { const e = l.map(((e) => { const n = e.UserLanguage; return o.a.createElement(oe.a, { key: n.id }, o.a.createElement(ee.a, { primary: ''.concat(e.name, ' (Level: ').concat(n.level, ')') }), o.a.createElement(Dt.a, null, n.id === c ? o.a.createElement(Y.a, { 'aria-label': 'Favorite' }, o.a.createElement(Tn.a, { style: { color: 'red' } })) : o.a.createElement(Y.a, { 'aria-label': 'Favorite', title: 'Set as preferred language', onClick() { return t(n.id); } }, o.a.createElement(Tn.a, null)), o.a.createElement(Y.a, { 'aria-label': 'Delete', onClick() { return r(n.id); } }, o.a.createElement(zt.a, null)))); })); return o.a.createElement(ce.a, { dense: !1 }, e); }())), o.a.createElement('form', { onSubmit(e) { return n(e); } }, o.a.createElement(Ce.a, { container: !0, className: a.container }, o.a.createElement(Ce.a, { item: !0, xs: 12, sm: 9 }, o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        name: 'language', label: 'Language', component: Sn, options: i, className: a.textField, required: !0,
      })), o.a.createElement(Fe.a, { required: !0, className: a.formControl }, o.a.createElement(je.a, {
        required: !0, name: 'level', label: 'Level', type: 'number', component: Cn, className: a.textField,
      }))), o.a.createElement(Ce.a, { item: !0, xs: 12, sm: 3 }, o.a.createElement('p', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', className: a.fullWidth }, 'Add Language'))))));
    })); const Pn = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      flex: { display: 'flex' },
      label: { marginLeft: '0' },
      labelLink: { marginLeft: '0', marginRight: '0' },
      formControl: {
        margin: 0, flex: 1, minWidth: 120, textAlign: 'left',
      },
      pictureButton: { width: '100%', marginTop: 25 },
      container: { textAlign: 'left' },
      fullWidth: { width: '100%' },
      select: { marginLeft: 0 },
    })))(An); const On = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleLanguageDelete = r.handleLanguageDelete.bind(Object(B.a)(r)), r.handleLanguageAdd = r.handleLanguageAdd.bind(Object(B.a)(r)), r.handlePreferred = r.handlePreferred.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.languages; const n = e.languagesFetch; t.fetching || t.fetching || n(); } }, { key: 'handleLanguageDelete', value(e) { const t = this.props; const n = t.languageDelete; const r = t.history; n(t.user.id, e, r); } }, { key: 'handleLanguageAdd', value(e) { e.preventDefault(); const t = this.props; const n = t.languageAdd; const r = t.history; const i = t.user.id; const o = { id: e.target.language.value, level: e.target.level.value }; e.target.level.value = '', n(i, o, r); } }, { key: 'handlePreferred', value(e) { const t = this.props; const n = t.languagePreferred; const r = t.history; const i = t.user.id; const o = { id: e }; console.log('Set', o, 'as favorite'), n(i, o, r); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.user; const n = e.languages; return o.a.createElement('div', null, o.a.createElement($.a, { variant: 'h5' }, t.username), o.a.createElement(Pn, {
            user: t, handleDelete: this.handleLanguageDelete, handleSubmit: this.handleLanguageAdd, handlePreferred: this.handlePreferred, languages: n.languages,
          }));
        },
      }]), n;
    }(i.Component)); const In = Object(z.g)(On); const Mn = n(400); const Nn = n(399); const Rn = n(401); const jn = n(398); const Dn = n(407); const Ln = function (e) { const t = e.onClose; const n = e.onConfirm; const r = e.title; const i = e.text; const a = e.open; return o.a.createElement(Dn.a, { onClose: t, open: a }, o.a.createElement(jn.a, { id: 'simple-dialog-title' }, r), o.a.createElement(Nn.a, null, o.a.createElement(Mn.a, null, i)), o.a.createElement(Rn.a, null, o.a.createElement(xe.a, { onClick: n, color: 'primary' }, 'Yes'), o.a.createElement(xe.a, { onClick: t, color: 'primary', autoFocus: !0 }, 'No'))); }; const zn = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; return l && (u = l), i && a && (u = a), o.a.createElement(Be.a, {
        helperText: u, error: i && a || l, label: n, value: t.value, ...t, ...c,
      });
    }; const Fn = function (e) { const t = e.input; const n = e.label; const r = Object(Re.a)(e, ['input', 'label']); const i = r; const a = t; return delete a.value, delete i.errorText, o.a.createElement(Le.a, { control: o.a.createElement(Ue.a, { label: n, ...a, ...i }), label: n, className: r.customclasses.label }); }; const Vn = function (e) {
      const t = e.handleImageUpdate; const n = e.input; const r = Object(Re.a)(e, ['handleImageUpdate', 'input']); const i = { image: { float: 'left', maxHeight: '76px' }, wrapper: { display: 'flex' } }; let a = 'Upload Profile Picture'; let s = ''; return r.picture && (a = 'Change Profile Picture', s = o.a.createElement('img', { alt: 'Profile', style: i.image, src: '/uploads/'.concat(r.picture) })), o.a.createElement('div', { style: i.wrapper }, s, o.a.createElement('div', null, o.a.createElement('label', {
        id: 'picture-label', htmlFor: 'picture', nesting: 'asdfasdf', className: r.classes.textField,
      }, o.a.createElement(xe.a, { variant: 'contained', component: 'span', className: r.classes.pictureButton }, a)), o.a.createElement('input', {
        accept: 'image/*', className: r.classes.input, style: { display: 'none' }, name: 'picture', id: 'picture', type: 'file', onChange(e) { const r = e.target.value; n.onChange(r), e.target.files.length > 0 && t(e.target.files[0]); },
      })));
    }; const Bn = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; const u = s.options(); delete c.errorText, delete c.error, delete c.options; let d = n; l && (d = l), i && a && (d = a); let h = i && a; l && (h = !0), h && (h = !0); const f = u.map(((e) => o.a.createElement(K.a, { key: e, value: e }, e))); return o.a.createElement(o.a.Fragment, null, o.a.createElement(Ve.a, { htmlFor: 'country', error: h, required: !1 }, 'Country'), o.a.createElement(He.a, {
        name: 'country', value: '', error: h && !0, displayEmpty: !0, ...t, ...c,
      }, f), o.a.createElement(ze.a, { error: h }, d));
    }; const Un = Object(De.a)({ form: 'UserEdit', validate(e) { const t = {}; return ['email'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), e.password && e.password1 && e.password !== e.password1 && (t.password = 'Passwords do not match', t.password1 = 'Passwords do not match'), e.email && he(e.email) && (t.email = 'Invalid email address'), e.website && fe(e.website) && (t.website = 'Invalid URL'), t; } })(((e) => {
      const t = e.handleImageUpdate; const n = e.closeLogDeletionDialog; const r = e.openLogDeletionDialog; const i = e.logDeletionDialogOpen; const a = e.submitLogDeletion; const s = e.closeAccountDeletionDialog; const l = e.openAccountDeletionDialog; const c = e.accountDeletionDialogOpen; const u = e.submitAccountDeletion; const d = e.handleSubmit; const h = e.submitting; const f = e.pristine; const m = e.invalid; const v = e.classes; const g = e.errors; const p = e.user; return o.a.createElement('form', { onSubmit(e) { return d(e); } }, o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        required: !0, name: 'email', label: 'E-Mail', component: zn, className: v.textField, errorText: g.errors.email,
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        type: 'password', name: 'password', label: 'Password', component: zn, className: v.textField,
      }), o.a.createElement(je.a, {
        type: 'password', name: 'password1', label: 'Repeat Password', component: zn, className: v.textField,
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'titlePrefix', label: 'Title Prefix', component: zn, className: v.textField,
      }), o.a.createElement(je.a, {
        name: 'firstName', label: 'First name', component: zn, className: v.textField,
      }), o.a.createElement(je.a, {
        name: 'lastName', label: 'Last Name', component: zn, className: v.textField,
      }), o.a.createElement(je.a, {
        name: 'titleSuffix', label: 'Title Suffix', component: zn, className: v.textField,
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        type: 'date', name: 'birthdate', label: 'Birthdate', component: zn, className: v.textField, InputLabelProps: { shrink: !0 },
      }), o.a.createElement(je.a, {
        name: 'studyId', label: 'Study ID', component: zn, className: v.textField,
      }), o.a.createElement(je.a, {
        name: 'phone', label: 'Phone', component: zn, className: v.textField,
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'street', label: 'Address', component: zn, className: v.textField,
      }), o.a.createElement(je.a, {
        name: 'zip', label: 'Zip', component: zn, className: v.textField,
      }), o.a.createElement(je.a, {
        name: 'city', label: 'City', component: zn, className: v.textField,
      }), o.a.createElement(je.a, {
        name: 'state', label: 'State', component: zn, className: v.textField,
      }), o.a.createElement('div', { className: v.wrapper }, o.a.createElement(Fe.a, { required: !0, className: v.formControl }, o.a.createElement(je.a, {
        name: 'country', label: 'Country', component: Bn, options: me, className: v.textField, required: !1,
      })))), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'website', label: 'Website', component: zn, className: v.textField, errorText: g.errors.website,
      }), o.a.createElement(je.a, {
        name: 'picture', label: 'Picture', component: Vn, classes: v, picture: p.picture, handleImageUpdate: t,
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        cols: 120, rows: 4, multiline: !0, rowsMax: 4, name: 'description', label: 'Description', component: zn, className: v.textField,
      })), o.a.createElement(Ce.a, { container: !0, className: v.container }, o.a.createElement(Ce.a, { item: !0, xs: 12, sm: 9 }, o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'allowBasicLog', label: 'Record basic log data and use it for improved usability and personal feedback', component: Fn, className: v.checkbox, customclasses: { label: v.labelLink }, type: 'checkbox',
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'allowLogResearch', label: 'Recored my log data and allow anonymised access for researchers', component: Fn, className: v.checkbox, customclasses: { label: v.labelLink }, type: 'checkbox',
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'allowLogSharing', label: 'Share my anonymised log data with others for advanced personal feedback', component: Fn, className: v.checkbox, customclasses: { label: v.labelLink }, type: 'checkbox',
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'allowLogReports', label: 'Record my log data and use it for reports to teachers and administrators', component: Fn, className: v.checkbox, customclasses: { label: v.labelLink }, type: 'checkbox',
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'showProfilePublic', label: 'Show my profile to the public', component: Fn, className: v.checkbox, customclasses: { label: v.labelLink }, type: 'checkbox',
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'showProfileStudents', label: 'Show my profile to other students', component: Fn, className: v.checkbox, customclasses: { label: v.labelLink }, type: 'checkbox',
      })), o.a.createElement('div', { className: v.flex }, o.a.createElement(je.a, {
        name: 'showProfileTeachers', label: 'Show my profile to teachers', component: Fn, className: v.checkbox, customclasses: { label: v.labelLink }, type: 'checkbox',
      }))), o.a.createElement(Ce.a, { item: !0, xs: 12, sm: 3 }, o.a.createElement('p', null, o.a.createElement(xe.a, { variant: 'contained', className: v.fullWidth }, 'Show logged data')), o.a.createElement('p', null, o.a.createElement(xe.a, { variant: 'contained', className: v.fullWidth, onClick: r }, 'Delete logged data')), o.a.createElement('p', null, o.a.createElement(xe.a, { variant: 'contained', className: v.fullWidth, onClick: l }, 'Delete Account')))), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: f || h || m }, 'Save')), o.a.createElement(Ln, {
        open: i, onClose: n, onConfirm: a, submitLogDeletion: a, title: 'Delete Logs', text: 'Are you sure you want to delete your Log files?',
      }), o.a.createElement(Ln, {
        open: c, onClose: s, onConfirm: u, submitLogDeletion: u, title: 'Delete Account', text: 'Are you sure you want to delete your account?',
      }));
    })); const Hn = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      flex: { display: 'flex' },
      label: { marginLeft: '0' },
      labelLink: { marginLeft: '0', marginRight: '0' },
      formControl: {
        margin: 0, flex: 1, minWidth: 120, textAlign: 'left',
      },
      pictureButton: { width: '100%', marginTop: 25 },
      container: { textAlign: 'left' },
      fullWidth: { width: '100%' },
    })))(Un); const Wn = n(116); const qn = n.n(Wn); const Gn = n(117); const $n = n.n(Gn); const Yn = Object(G.a)((() => ({ listing: { marginTop: '20px' } })))(((e) => { const t = e.available; const n = e.classes; const r = e.remove; const i = e.owned; const a = e.add; const s = i.map(((e) => o.a.createElement(oe.a, { key: e.id }, o.a.createElement(ee.a, { primary: ''.concat(e.name) }), o.a.createElement(Dt.a, null, o.a.createElement(Y.a, { 'aria-label': 'Show' }, o.a.createElement(qn.a, { onClick(t) { return r(t, e.id); } })))))); const l = t.map(((e) => o.a.createElement(oe.a, { key: e.id }, o.a.createElement(ee.a, { primary: ''.concat(e.name) }), o.a.createElement(Dt.a, null, o.a.createElement(Y.a, { 'aria-label': 'Show' }, o.a.createElement($n.a, { onClick(t) { return a(t, e.id); } })))))); return o.a.createElement(Ce.a, { container: !0, spacing: 16, className: n.listing }, o.a.createElement(Ce.a, { item: !0, xs: 6 }, o.a.createElement($.a, { variant: 'headline', gutterBottom: !0 }, 'Assigned Roles'), o.a.createElement(ce.a, { dense: !0 }, s)), o.a.createElement(Ce.a, { item: !0, xs: 6 }, o.a.createElement($.a, { variant: 'headline', gutterBottom: !0 }, 'Available Roles'), o.a.createElement(ce.a, { dense: !0 }, l))); })); const Kn = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r.rolesFetch = r.rolesFetch.bind(Object(B.a)(r)), r.userFetch = r.userFetch.bind(Object(B.a)(r)), r.removeRole = r.removeRole.bind(Object(B.a)(r)), r.addRole = r.addRole.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { this.userFetch(), this.rolesFetch(); } }, { key: 'componentDidUpdate', value() { this.userFetch(), this.rolesFetch(); } }, { key: 'rolesFetch', value() { const e = this.props; const t = e.roles; const n = e.rolesFetch; t.fetching || t.fetched || n(); } }, { key: 'userFetch', value() { const e = this.props; const t = e.match; const n = e.items; const r = e.itemFetch; const i = t.params.id; n.fetching || n.id[i] || r(i); } }, {
        key: 'handleSubmit',
        value(e) {
          e.preventDefault(); const t = this.props; const n = t.handleSubmit; const r = t.history; const i = t.match.params.id; const o = {
            showProfileStudents: e.target.showProfileStudents.checked, showProfileTeachers: e.target.showProfileTeachers.checked, showProfilePublic: e.target.showProfilePublic.checked, allowLogResearch: e.target.allowLogResearch.checked, allowLogSharing: e.target.allowLogSharing.checked, allowLogReports: e.target.allowLogReports.checked, allowBasicLog: e.target.allowBasicLog.checked, titlePrefix: e.target.titlePrefix.value, titleSuffix: e.target.titleSuffix.value, description: e.target.description.value, firstName: e.target.firstName.value, birthdate: e.target.birthdate.value, lastName: e.target.lastName.value, studyId: e.target.studyId.value, country: e.target.country.value, website: e.target.website.value, picture: e.target.picture.value, street: e.target.street.value, email: e.target.email.value, phone: e.target.phone.value, state: e.target.state.value, city: e.target.city.value, zip: e.target.zip.value,
          }; e.target.password.value !== '' && (o.password = e.target.password.value), n(i, o, r);
        },
      }, { key: 'addRole', value(e, t) { e.preventDefault(); const n = this.props; const r = n.match; (0, n.add)(r.params.id, t); } }, { key: 'removeRole', value(e, t) { e.preventDefault(); const n = this.props; const r = n.match; (0, n.remove)(r.params.id, t); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.items; const n = e.match; const r = e.roles; const i = e.errors; const a = n.params.id; const s = t.id[a]; if (!t.id[a] || !r.fetched) return null; const l = s.Roles.map(((e) => e.id)); const c = r.items.filter(((e) => l.indexOf(e.id) > -1)); const u = r.items.filter(((e) => l.indexOf(e.id) < 0)); return o.a.createElement('div', null, o.a.createElement($.a, { variant: 'headline' }, s.username), o.a.createElement(Hn, {
            user: s, initialValues: s, errors: i.edit, handleSubmit: this.handleSubmit,
          }), o.a.createElement(Yn, {
            remove: this.removeRole, add: this.addRole, available: u, owned: c,
          }));
        },
      }]), n;
    }(i.Component)); const Qn = Object(z.g)(Kn); const Jn = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n() { return Object(F.a)(this, n), t.apply(this, arguments); } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.activated; const n = e.activate; const r = e.active; const i = e.match.params.hash; t || r || n(i); } }, { key: 'render', value() { const e = this.props; const t = e.active; const n = e.activated; let r = o.a.createElement('div', null, 'Activating User...'); return t && n && (r = o.a.createElement('div', null, 'Successfully activated user.')), !t && n && (r = o.a.createElement('div', null, 'Could not activate user.')), o.a.createElement('div', null, o.a.createElement($.a, { variant: 'headline' }, 'Activation'), r); } }]), n; }(i.Component)); const Zn = Object(z.g)(Jn); const Xn = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; return l && (u = l), i && a && (u = a), o.a.createElement(Be.a, {
        helperText: u, error: i && a || l, label: n, ...t, ...c,
      });
    }; const er = function (e) { const t = e.input; const n = e.label; const r = Object(Re.a)(e, ['input', 'label']); const i = r; const a = t; return delete a.value, delete i.errorText, o.a.createElement(Le.a, { control: o.a.createElement(Ue.a, { label: n, ...a, ...i }), label: n, className: r.classes.label }); }; const tr = Object(De.a)({ form: 'Register', validate(e) { const t = {}; return ['username', 'email', 'password', 'password1'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), e.password && e.password1 && e.password !== e.password1 && (t.password = 'Passwords do not match', t.password1 = 'Passwords do not match'), e.email && he(e.email) && (t.email = 'Invalid email address'), e.website && fe(e.website) && (t.website = 'Invalid URL'), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.pristine; const i = e.classes; const a = e.errors; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, name: 'username', label: 'Username', component: Xn, className: i.textField, errorText: a.errors.username,
      }), o.a.createElement(je.a, {
        required: !0, name: 'email', label: 'E-Mail', component: Xn, className: i.textField, errorText: a.errors.email,
      })), o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, type: 'password', name: 'password', label: 'Password', component: Xn, className: i.textField,
      }), o.a.createElement(je.a, {
        required: !0, type: 'password', name: 'password1', label: 'Repeat Password', component: Xn, className: i.textField,
      })), o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, name: 'acceptPrivacy', label: 'Accept\xa0', component: er, className: i.checkbox, errorText: a.errors.title, classes: { label: i.labelLink },
      }), o.a.createElement(d.b, { to: '/privacy-policy', className: i.link }, 'Privacy Policy')), o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, name: 'acceptTos', label: 'Accept\xa0', component: er, className: i.checkbox, errorText: a.errors.title, classes: { label: i.labelLink },
      }), o.a.createElement(d.b, { to: '/terms-of-service', className: i.link }, 'Terms of Service')), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: r || n }, 'Register')));
    })); const nr = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing.unit, marginRight: e.spacing.unit, marginBottom: e.spacing.unit,
      },
      flex: { display: 'flex' },
      label: { marginLeft: '0' },
      labelLink: { marginLeft: '0', marginRight: '0' },
      link: { alignSelf: 'center' },
      pictureButton: { width: '100%', marginTop: 25 },
    })))(tr); const rr = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.props; const n = t.handleSubmit; const r = t.history; n({ username: e.target.username.value, password: e.target.password.value, email: e.target.email.value }, r); } }, { key: 'render', value() { const e = this.props.errors; return o.a.createElement(nr, { errors: e.registration, handleSubmit: this.handleSubmit }); } }]), n; }(i.Component)); const ir = Object(z.g)(rr); const or = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r.handleImageUpdate = r.handleImageUpdate.bind(Object(B.a)(r)), r.submitLogDeletion = r.submitLogDeletion.bind(Object(B.a)(r)), r.openLogDeletionDialog = r.openLogDeletionDialog.bind(Object(B.a)(r)), r.closeLogDeletionDialog = r.closeLogDeletionDialog.bind(Object(B.a)(r)), r.submitAccountDeletion = r.submitAccountDeletion.bind(Object(B.a)(r)), r.openAccountDeletionDialog = r.openAccountDeletionDialog.bind(Object(B.a)(r)), r.closeAccountDeletionDialog = r.closeAccountDeletionDialog.bind(Object(B.a)(r)), r.state = { logDeletionOpen: !1, accountDeletionOpen: !1 }, r; } return Object(V.a)(n, [{ key: 'openAccountDeletionDialog', value() { this.setState({ accountDeletionOpen: !0 }); } }, { key: 'closeAccountDeletionDialog', value() { this.setState({ accountDeletionOpen: !1 }); } }, { key: 'submitAccountDeletion', value() { this.closeAccountDeletionDialog(); const e = this.props; const t = e.userDelete; const n = e.user; const r = e.history; t(n.id, r); } }, { key: 'openLogDeletionDialog', value() { this.setState({ logDeletionOpen: !0 }); } }, { key: 'closeLogDeletionDialog', value() { this.setState({ logDeletionOpen: !1 }); } }, { key: 'submitLogDeletion', value() { this.closeLogDeletionDialog(), console.log('Confirmed Log Deletion dialog'); } }, { key: 'handleImageUpdate', value(e) { const t = this.props; const n = t.handleSubmit; const r = t.history; n(t.user.id, { picture: e }, r); } }, {
        key: 'handleSubmit',
        value(e) {
          e.preventDefault(); const t = this.props; const n = t.handleSubmit; const r = t.history; const i = t.user.id; const o = {
            showProfileStudents: e.target.showProfileStudents.checked, showProfileTeachers: e.target.showProfileTeachers.checked, showProfilePublic: e.target.showProfilePublic.checked, allowLogResearch: e.target.allowLogResearch.checked, allowLogSharing: e.target.allowLogSharing.checked, allowLogReports: e.target.allowLogReports.checked, allowBasicLog: e.target.allowBasicLog.checked, titlePrefix: e.target.titlePrefix.value, titleSuffix: e.target.titleSuffix.value, description: e.target.description.value, firstName: e.target.firstName.value, birthdate: e.target.birthdate.value, picture: e.target.picture.files[0], lastName: e.target.lastName.value, studyId: e.target.studyId.value, country: e.target.country.value, website: e.target.website.value, street: e.target.street.value, email: e.target.email.value, phone: e.target.phone.value, state: e.target.state.value, city: e.target.city.value, zip: e.target.zip.value,
          }; e.target.password.value !== '' && (o.password = e.target.password.value), n(i, o, r);
        },
      }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.user; const n = e.errors; const r = this.state; const i = r.logDeletionOpen; const a = r.accountDeletionOpen; return o.a.createElement('div', null, o.a.createElement($.a, { variant: 'h5' }, t.username), o.a.createElement(Hn, {
            user: t, initialValues: t, errors: n.edit, handleSubmit: this.handleSubmit, handleImageUpdate: this.handleImageUpdate, openLogDeletionDialog: this.openLogDeletionDialog, closeLogDeletionDialog: this.closeLogDeletionDialog, submitLogDeletion: this.submitLogDeletion, logDeletionDialogOpen: i, openAccountDeletionDialog: this.openAccountDeletionDialog, closeAccountDeletionDialog: this.closeAccountDeletionDialog, submitAccountDeletion: this.submitAccountDeletion, accountDeletionDialogOpen: a,
          }));
        },
      }]), n;
    }(i.Component)); const ar = Object(z.g)(or); const sr = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d, label: n, ...t, ...c,
      });
    }; const lr = Object(De.a)({ form: 'Login', validate(e) { const t = {}; return ['username', 'password'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.pristine; const i = e.classes; const a = e.errors; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, name: 'username', label: 'Username', component: sr, className: i.textField, errorText: a.errorMessage,
      })), o.a.createElement('div', { className: i.flex }, o.a.createElement(je.a, {
        required: !0, type: 'password', name: 'password', label: 'Password', component: sr, className: i.textField, errorText: a.errorMessage,
      })), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: r || n }, 'Login')));
    })); const cr = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      flex: { display: 'flex' },
    })))(lr); const ur = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.props; const n = t.handleSubmit; const r = t.history; n({ username: e.target.username.value, password: e.target.password.value }, r); } }, { key: 'render', value() { const e = this.props.errors; return o.a.createElement(cr, { errors: e.login, handleSubmit: this.handleSubmit }); } }]), n; }(i.Component)); const dr = Object(z.g)(ur); const hr = function (e) { const t = e.itemsDelete; const n = e.history; const r = e.items; let i = null; return r.length > 0 && (i = r.map(((e) => o.a.createElement(oe.a, { key: e.id }, o.a.createElement(ee.a, { primary: ''.concat(e.username) }), o.a.createElement(Dt.a, null, o.a.createElement(Y.a, { 'aria-label': 'Edit' }, o.a.createElement(xt.a, { onClick() { return n.push('/users/edit/'.concat(e.id)); } })), o.a.createElement(Y.a, { 'aria-label': 'Delete' }, o.a.createElement(zt.a, { onClick() { return t(e.id); } }))))))), o.a.createElement(ce.a, { dense: !1 }, i); }; const fr = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleDelete = r.handleDelete.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.items; const n = e.itemsFetch; t.fetched || t.fetching || n(); } }, { key: 'componentDidUpdate', value() { const e = this.props; const t = e.items; const n = e.itemsFetch; t.fetched || t.fetching || n(); } }, { key: 'handleDelete', value(e) { (0, this.props.itemsDelete)(e); } }, { key: 'render', value() { const e = this.props; const t = e.items; const n = e.classes; const r = e.history; return o.a.createElement('div', { className: n.container }, o.a.createElement(hr, { itemsDelete: this.handleDelete, items: t.items, history: r })); } }]), n; }(i.Component)); const mr = Object(z.g)(fr); const vr = Object(G.a)((() => ({ container: { maxWidth: 960, margin: 'auto', marginTop: '10px' } })))(mr); const gr = Object(G.a)({})(((e) => { const t = e.item; const n = t.Capabilities.map(((e) => o.a.createElement(oe.a, { key: e.id }, o.a.createElement(ee.a, { primary: ''.concat(e.name) })))); return o.a.createElement('div', null, 'Capabilities of role ', '"', t.name, '"', o.a.createElement(ce.a, { dense: !0 }, n)); })); const pr = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n() { return Object(F.a)(this, n), t.apply(this, arguments); } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.match; const n = e.items; const r = e.itemFetch; const i = t.params.id; n.fetching || n.id[i] || r(i); } }, { key: 'render', value() { const e = this.props; const t = e.items; const n = e.match.params.id; const r = t.id[n]; return r ? o.a.createElement(gr, { item: r }) : null; } }]), n; }(i.Component)); const kr = Object(z.g)(pr); const br = n(83); const yr = Object(G.a)((() => ({ listing: { marginTop: '20px' } })))(((e) => { const t = e.available; const n = e.classes; const r = e.remove; const i = e.owned; const a = e.add; const s = i.map(((e) => o.a.createElement(oe.a, { key: e.id }, o.a.createElement(ee.a, { primary: ''.concat(e.name) }), o.a.createElement(Dt.a, null, o.a.createElement(Y.a, { 'aria-label': 'Show' }, o.a.createElement(qn.a, { onClick(t) { return r(t, e.id); } })))))); const l = t.map(((e) => o.a.createElement(oe.a, { key: e.id }, o.a.createElement(ee.a, { primary: ''.concat(e.name) }), o.a.createElement(Dt.a, null, o.a.createElement(Y.a, { 'aria-label': 'Show' }, o.a.createElement($n.a, { onClick(t) { return a(t, e.id); } })))))); return o.a.createElement(Ce.a, { container: !0, spacing: 16, className: n.listing }, o.a.createElement(Ce.a, { item: !0, xs: 6 }, o.a.createElement($.a, { variant: 'headline', gutterBottom: !0 }, 'Assigned Capabilities'), o.a.createElement(ce.a, { dense: !0 }, s)), o.a.createElement(Ce.a, { item: !0, xs: 6 }, o.a.createElement($.a, { variant: 'headline', gutterBottom: !0 }, 'Available Capabilities'), o.a.createElement(ce.a, { dense: !0 }, l))); })); const wr = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d, label: n, ...t, ...c,
      });
    }; const _r = Object(De.a)({ form: 'RolesEdit', validate(e) { const t = {}; return ['type', 'code'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), t; } })(((e) => {
      let t; const n = e.initialValues; const r = e.handleSubmit; const i = e.submitting; const a = e.languages; const s = e.pristine; const l = e.classes; const c = e.errors; const u = Object(br.a)(n.Languages); try { for (u.s(); !(t = u.n()).done;) { const d = t.value; n[d.code] = d.RoleLanguage.vocable; } } catch (h) { u.e(h); } finally { u.f(); } return o.a.createElement('form', { onSubmit: r }, o.a.createElement('div', { className: l.flex }, o.a.createElement(je.a, {
        required: !0, name: 'name', label: 'Name', component: wr, className: l.textField, errorText: c.errors.name,
      })), a.map(((e, t) => o.a.createElement('div', { key: e.id, className: l.flex }, o.a.createElement(je.a, {
        required: !0, name: e.code, label: e.name, component: wr, className: l.textField,
      })))), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: s || i }, 'Save')));
    })); const Er = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      flex: { display: 'flex' },
    })))(_r); const xr = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).removeCapability = r.removeCapability.bind(Object(B.a)(r)), r.fetchLanguages = r.fetchLanguages.bind(Object(B.a)(r)), r.addCapability = r.addCapability.bind(Object(B.a)(r)), r.handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.match; const n = e.capabilities; const r = e.capabilitiesFetch; const i = e.items; const o = e.itemFetch; const a = t.params.id; i.fetching || i.id[a] || o(a), n.fetching || n.fetched || r(), this.fetchLanguages(); } }, { key: 'componentDidUpdate', value() { const e = this.props; const t = e.match; const n = e.items; const r = e.itemFetch; const i = t.params.id; n.fetching || n.id[i] || r(i); } }, { key: 'fetchLanguages', value() { const e = this.props; const t = e.languages; const n = e.languagesFetch; t.fetched || t.fetching || n(); } }, { key: 'addCapability', value(e, t) { e.preventDefault(); const n = this.props; const r = n.match; const i = n.addCapability; i(r.params.id, t); } }, { key: 'removeCapability', value(e, t) { e.preventDefault(); const n = this.props; const r = n.match; const i = n.removeCapability; i(r.params.id, t); } }, { key: 'handleSubmit', value(e) { e.preventDefault(); let t; const n = this.props; const r = n.match; const i = n.history; const o = n.languages; const a = n.handleSubmit; const s = r.params.id; const l = { name: e.target.name.value, translations: [] }; const c = Object(br.a)(o.languages); try { for (c.s(); !(t = c.n()).done;) { const u = t.value; const d = u.id; const h = u.code; if (e.target[h]) { const f = { id: d, vocable: e.target[h].value }; l.translations.push(f); } } } catch (m) { c.e(m); } finally { c.f(); }a(s, l, i); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.capabilities; const n = e.languages; const r = e.errors; const i = e.items; const a = e.match.params.id; const s = i.id[a]; if (!s || !t.fetched) return null; const l = s.Capabilities.map(((e) => e.id)); const c = t.items.filter(((e) => l.indexOf(e.id) > -1)); const u = t.items.filter(((e) => l.indexOf(e.id) < 0)); return o.a.createElement('div', null, o.a.createElement(Er, {
            handleSubmit: this.handleSubmit, languages: n.languages, initialValues: s, errors: r.edit,
          }), o.a.createElement(yr, {
            remove: this.removeCapability, add: this.addCapability, available: u, owned: c,
          }));
        },
      }]), n;
    }(i.Component)); const Tr = Object(z.g)(xr); const Cr = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText; let u = n; l && i && (u = l), i && a && (u = a); let d = i && a; return l && (d = !0), o.a.createElement(Be.a, {
        helperText: u, error: d, label: n, ...t, ...c,
      });
    }; const Sr = Object(De.a)({ form: 'RolesAdd', validate(e) { const t = {}; return ['name'].forEach(((n) => { e[n] || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.submitting; const r = e.languages; const i = e.pristine; const a = e.classes; const s = e.errors; return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: a.flex }, o.a.createElement(je.a, {
        required: !0, name: 'name', label: 'Name', component: Cr, className: a.textField, error: s.error, errorText: 'This name has already been used',
      })), r.map(((e, t) => o.a.createElement('div', { key: e.id, className: a.flex }, o.a.createElement(je.a, {
        required: !0, name: e.code, label: e.name, component: Cr, className: a.textField, error: s.error, errorText: 'This name has already been used',
      })))), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: i || n }, 'Add Role')));
    })); const Ar = Object(G.a)(((e) => ({
      textField: {
        flex: 1, marginLeft: e.spacing(), marginRight: e.spacing(), marginBottom: e.spacing(),
      },
      flex: { display: 'flex' },
    })))(Sr); const Pr = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).fetchLanguages = r.fetchLanguages.bind(Object(B.a)(r)), r.handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'handleSubmit', value(e) { e.preventDefault(); let t; const n = this.props; const r = n.history; const i = n.languages; const o = n.handleSubmit; const a = { name: e.target.name.value, translations: [] }; const s = Object(br.a)(i.languages); try { for (s.s(); !(t = s.n()).done;) { const l = t.value; const c = l.id; const u = l.code; if (e.target[u]) { const d = { id: c, vocable: e.target[u].value }; a.translations.push(d); } } } catch (h) { s.e(h); } finally { s.f(); }o(a, r); } }, { key: 'componentDidMount', value() { this.fetchLanguages(); } }, { key: 'fetchLanguages', value() { const e = this.props; const t = e.languages; const n = e.languagesFetch; t.fetched || t.fetching || n(); } }, { key: 'render', value() { const e = this.props; const t = e.errors; const n = e.languages; return o.a.createElement(Ar, { handleSubmit: this.handleSubmit, languages: n.languages, errors: t.add }); } }]), n; }(i.Component)); const Or = Object(z.g)(Pr); const Ir = n(197); const Mr = n.n(Ir); const Nr = Object(G.a)((() => ({})))(((e) => { const t = e.itemsDelete; const n = e.history; const r = e.items; let i = null; return r.length > 0 && (i = r.map(((e) => o.a.createElement(oe.a, { key: e.id }, o.a.createElement(ee.a, { primary: ''.concat(e.name) }), o.a.createElement(Dt.a, null, o.a.createElement(Y.a, { 'aria-label': 'Show' }, o.a.createElement(Mr.a, { onClick() { return n.push('/users/roles/show/'.concat(e.id)); } })), o.a.createElement(Y.a, { 'aria-label': 'Edit' }, o.a.createElement(xt.a, { onClick() { return n.push('/users/roles/edit/'.concat(e.id)); } })), o.a.createElement(Y.a, { 'aria-label': 'Delete' }, o.a.createElement(zt.a, { onClick() { return t(e.id); } }))))))), o.a.createElement('div', null, o.a.createElement(ce.a, { dense: !1 }, i)); })); const Rr = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleDelete = r.handleDelete.bind(Object(B.a)(r)), r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.items; const n = e.itemsFetch; t.fetched || t.fetching || n(); } }, { key: 'componentDidUpdate', value() { const e = this.props; const t = e.items; const n = e.itemsFetch; t.fetched || t.fetching || n(); } }, { key: 'handleDelete', value(e) { (0, this.props.itemsDelete)(e); } }, { key: 'render', value() { const e = this.props; const t = e.items; const n = e.history; return o.a.createElement('div', null, o.a.createElement($.a, { variant: 'headline' }, 'Available roles'), o.a.createElement(Nr, { itemsDelete: this.handleDelete, items: t.items, history: n }), o.a.createElement(Ce.a, null, o.a.createElement(xe.a, { onClick() { return n.push('/users/roles/add'); }, variant: 'contained' }, 'Add new role'))); } }]), n; }(i.Component)); const jr = Object(z.g)(Rr); const Dr = function (e) {
      const t = e.capabilities; const n = e.languages; const r = e.actions; const i = e.roles; const a = e.users; const s = e.user; return o.a.createElement(o.a.Fragment, null, o.a.createElement(z.b, {
        exact: !0,
        path: '/users',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'UsersListWrapper',
            logout: r.userLogout,
            active: 'users',
            title: 'Users',
            user: s,
            element: o.a.createElement(vr, {
              itemFetch: r.usersItemFetch, itemsDelete: r.usersDelete, itemsFetch: r.usersFetch, items: a,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/register',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles, className: 'RegisterWrapper', logout: r.userLogout, active: 'register', title: 'Register', user: s, element: o.a.createElement(ir, { handleSubmit: r.userRegister, errors: s.errors }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/activate/:hash',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'ActivateWrapper',
            logout: r.userLogout,
            active: 'activation',
            title: 'Activation',
            user: s,
            element: o.a.createElement(Zn, {
              activate: r.userActivate, activated: s.activated, errors: s.errors, active: s.active,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/login',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles, className: 'LoginWrapper', logout: r.userLogout, active: 'login', title: 'Login', user: s, element: o.a.createElement(dr, { errors: s.errors, handleSubmit: r.userLogin }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/user/edit',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'UserEditWrapper',
            logout: r.userLogout,
            title: 'Edit your data',
            active: 'user',
            user: s,
            element: o.a.createElement(ar, {
              userDelete: r.userDelete, handleSubmit: r.userEdit, errors: s.errors, user: s.user,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/user/languages',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'UserEditWrapper',
            logout: r.userLogout,
            title: 'Edit your languages',
            active: 'user',
            user: s,
            element: o.a.createElement(In, {
              errors: s.errors, user: s.user, languages: n, languagesFetch: r.languagesFetch, languageAdd: r.userLanguageAdd, languageDelete: r.userLanguageDelete, languagePreferred: r.userLanguagePreferred,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/edit/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'UserEditWrapper',
            logout: r.userLogout,
            title: 'Edit User',
            active: 'user',
            user: s,
            element: o.a.createElement(Qn, {
              itemFetch: r.usersItemFetch, handleSubmit: r.usersEdit, rolesFetch: r.rolesFetch, remove: r.removeRole, add: r.addRole, errors: s.errors, items: a, roles: i,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/roles',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles, className: 'UserRoleWrapper', logout: r.userLogout, title: 'User Roles', active: 'user', user: s, element: o.a.createElement(jr, { itemsDelete: r.rolesDelete, itemsFetch: r.rolesFetch, items: i }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/roles/add',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'RolesWrapper',
            logout: r.userLogout,
            title: 'Add Role',
            active: 'user',
            user: s,
            element: o.a.createElement(Or, {
              languagesFetch: r.languagesFetch, handleSubmit: r.rolesAdd, languages: n, errors: i.errors,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/roles/edit/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'RolesWrapper',
            logout: r.userLogout,
            title: 'Edit Role',
            active: 'user',
            user: s,
            element: o.a.createElement(Tr, {
              capabilitiesFetch: r.capabilitiesFetch, removeCapability: r.removeCapability, languagesFetch: r.languagesFetch, addCapability: r.addCapability, itemFetch: r.rolesItemFetch, handleSubmit: r.rolesEdit, capabilities: t, errors: i.errors, languages: n, items: i,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/users/roles/show/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles, className: 'RolesWrapper', logout: r.userLogout, title: 'Roles', active: 'user', user: s, element: o.a.createElement(kr, { itemFetch: r.rolesItemFetch, items: i }),
          });
        },
      }));
    }; const Lr = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n() { return Object(F.a)(this, n), t.apply(this, arguments); } return Object(V.a)(n, [{ key: 'componentDidMount', value() { this.fetchKnowledgeUnits(); } }, { key: 'componentDidUpdate', value() { this.fetchKnowledgeUnits(); } }, { key: 'fetchKnowledgeUnits', value() { const e = this.props; const t = e.knowledgeUnitsItemFetch; const n = e.knowledgeUnits; const r = e.match.params.KnowledgeUnitId; n.id[r] || n.fetchingId === r || t(r); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.knowledgeUnits; const n = e.fetchRoles; const r = e.element; const i = e.logout; const a = e.user; const s = e.match; const l = e.title; const c = s.params.KnowledgeUnitId; let u = l; if (t.id[c]) { const d = t.id[c].LearningUnit.Translations[0].title; u += '#'.concat(c, ' (').concat(d, ')'); } return o.a.createElement(_e, {
            className: 'LearningUnitsWrapper', fetchRoles: n, active: 'learningUnits', element: r, logout: i, title: u, user: a,
          });
        },
      }]), n;
    }(i.Component)); const zr = Object(z.g)(Lr); const Fr = n(118); const Vr = n.n(Fr); const Br = n(119); const Ur = n.n(Br); const Hr = (function () { function e(t) { Object(F.a)(this, e), console.log(t), this.loader = t; } return Object(V.a)(e, [{ key: 'upload', value() { const e = this; return this.loader.file.then(((t) => new Promise(((n, r) => { e.initRequest(), e.initListeners(n, r, t), e.sendRequest(t); })))); } }, { key: 'abort', value() { this.xhr && this.xhr.abort(); } }, { key: 'initRequest', value() { this.xhr = new XMLHttpRequest(), this.xhr.open('POST', '/api/files/editor-upload', !0), this.xhr.responseType = 'json'; } }, { key: 'initListeners', value(e, t, n) { const r = this.xhr; const i = this.loader; const o = "Couldn't upload file: ".concat(n.name, '.'); r.addEventListener('error', (() => t(o))), r.addEventListener('abort', (() => t())), r.addEventListener('load', (() => { const n = r.response; if (!n || n.error) { const i = n && n.error ? n.errors[0].msg : o; return t(i); } return e({ default: n.url }); })), r.upload && r.upload.addEventListener('progress', ((e) => { e.lengthComputable && (i.uploadTotal = e.total, i.uploaded = e.loaded); })); } }, { key: 'sendRequest', value(e) { const t = new FormData(); console.log(this.loader), t.append('upload', e), t.append('name', e.name), this.xhr.send(t); } }]), e; }()); const Wr = { extraPlugins: [function (e) { e.plugins.get('FileRepository').createUploadAdapter = function (e) { return new Hr(e); }; }], toolbar: { items: ['heading', '|', 'bold', 'italic', 'link', 'bulletedList', 'numberedList', '|', 'indent', 'outdent', '|', 'imageUpload', 'blockQuote', 'insertTable', 'mediaEmbed', 'undo', 'redo'] }, image: { resizeOptions: [{ name: 'imageResize:original', label: 'Original', value: null }, { name: 'imageResize:50', label: '50%', value: '50' }, { name: 'imageResize:75', label: '75%', value: '75' }], styles: ['full', 'side', 'alignLeft', 'alignRight', 'alignCenter'], toolbar: ['imageStyle:full', 'imageStyle:side', 'imageStyle:alignLeft', 'imageStyle:alignRight', '|', 'imageResize', '|', 'imageTextAlternative'] } }; const qr = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText, delete c.error; let u = n; l && (u = l), i && a && (u = a); let d = i && a; l && (d = !0), d && (d = !0); const h = s.options.map(((e) => o.a.createElement(K.a, { key: e.key, value: e.key }, e.value))); return o.a.createElement(o.a.Fragment, null, o.a.createElement(Ve.a, { htmlFor: 'language', error: d, required: !1 }), o.a.createElement(He.a, {
        name: 'language', value: '', error: d && !0, displayEmpty: !0, ...t, ...c,
      }, h), o.a.createElement(ze.a, { error: d }, u));
    }; const Gr = function (e) {
      const t = e.input; const n = Object(Re.a)(e, ['input']); return o.a.createElement(Ur.a, {
        editor: Vr.a, config: Wr, data: t.value, onChange(e, r) { const i = r.getData(); n.updateBody(i), t.onChange(i); },
      });
    }; const $r = Object(De.a)({ form: 'TextsEdit', validate(e) { const t = {}; return ['language'].forEach(((n) => { e[n] && e[n] !== '' || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.updateBody; const r = e.submitting; const i = e.languages; const a = e.pristine; const s = e.classes; const l = e.errors; const c = i.map(((e) => ({ key: e.id, value: e.name }))); return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: s.flex }, o.a.createElement('div', { className: s.wrapper }, o.a.createElement(Fe.a, { required: !0, className: s.formControl }, o.a.createElement(je.a, {
        name: 'language', label: 'Language', options: c, component: qr, className: s.selectField, errorText: l.errors.code,
      })))), o.a.createElement('div', { className: s.wysiwyg }, o.a.createElement(je.a, {
        name: 'text', label: 'Text', component: Gr, updateBody: n,
      })), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: a || r }, 'Save Text')));
    })); const Yr = Object(G.a)(((e) => ({
      wrapper: { display: 'flex', flex: 1 },
      textField: {
        flex: 1, marginLeft: e.spacing.unit, marginRight: e.spacing.unit, marginBottom: e.spacing.unit,
      },
      formControl: { margin: e.spacing.unit, flex: 1, minWidth: 120 },
      selectField: { textAlign: 'left' },
      flex: { display: 'flex', flexDirection: 'row' },
      wysiwyg: { marginTop: e.spacing.unit, marginBottom: e.spacing.unit, textAlign: 'left' },
    })))($r); const Kr = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r.updateBody = r.updateBody.bind(Object(B.a)(r)), r.state = { body: '' }, r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.match; const n = e.items; const r = e.languages; const i = e.itemFetch; const o = e.languagesFetch; const a = t.params.id; r.fetched || r.fetching || o(), n.fetching || n.id[a] || i(a); } }, { key: 'updateBody', value(e) { this.setState({ body: e }); } }, { key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.state.body; const n = this.props; const r = n.history; const i = n.handleSubmit; i(n.match.params.id, { LanguageId: e.target.language.value, content: t }, r); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.languages; const n = e.errors; const r = e.match; const i = e.items; const a = r.params.id; const s = i.id[a]; return s ? o.a.createElement(Yr, {
            handleSubmit: this.handleSubmit, updateBody: this.updateBody, languages: t.languages, initialValues: { language: s.Language.id, text: s.content }, errors: n.add,
          }) : null;
        },
      }]), n;
    }(i.Component)); const Qr = Object(z.g)(Kr); const Jr = Object(G.a)(((e) => ({ button: { marginTop: e.spacing.unit } })))(((e) => {
      const t = e.classes; const n = e.item; return o.a.createElement('div', null, o.a.createElement(Ae, { text: n }), !n.nextId && o.a.createElement(xe.a, {
        className: t.button, variant: 'contained', component: d.b, to: '/texts/edit/'.concat(n.id),
      }, 'Add new version'));
    })); const Zr = (function (e) { Object(U.a)(n, e); const t = Object(H.a)(n); function n() { return Object(F.a)(this, n), t.apply(this, arguments); } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.match; const n = e.items; const r = e.itemFetch; const i = t.params.id; n.fetching || n.id[i] || r(i); } }, { key: 'componentDidUpdate', value() { const e = this.props; const t = e.match; const n = e.items; const r = e.itemFetch; const i = t.params.id; n.fetching || n.id[i] || r(i); } }, { key: 'render', value() { const e = this.props; const t = e.items; const n = e.match.params.id; let r = t.id[n]; return r ? (r = t.id[n], o.a.createElement(Jr, { item: r })) : null; } }]), n; }(i.Component)); const Xr = Object(z.g)(Zr); const ei = function (e) {
      const t = e.input; const n = e.label; const r = e.meta; const i = r.touched; const a = r.error; const s = Object(Re.a)(e, ['input', 'label', 'meta']); const l = s.errorText; const c = s; delete c.errorText, delete c.error; let u = n; l && (u = l), i && a && (u = a); let d = i && a; l && (d = !0), d && (d = !0); const h = s.options.map(((e) => o.a.createElement(K.a, { key: e.key, value: e.key }, e.value))); return o.a.createElement(o.a.Fragment, null, o.a.createElement(Ve.a, { htmlFor: 'language', error: d, required: !1 }), o.a.createElement(He.a, {
        name: 'language', value: '', error: d && !0, displayEmpty: !0, ...t, ...c,
      }, h), o.a.createElement(ze.a, { error: d }, u));
    }; const ti = function (e) {
      const t = e.input; const n = Object(Re.a)(e, ['input']); return o.a.createElement(Ur.a, {
        editor: Vr.a, config: Wr, data: t.value, onChange(e, r) { const i = r.getData(); n.updateBody(i), t.onChange(i); },
      });
    }; const ni = Object(De.a)({ form: 'TextsAdd', validate(e) { const t = {}; return ['language'].forEach(((n) => { e[n] && e[n] !== '' || (t[n] = 'Required'); })), t; } })(((e) => {
      const t = e.handleSubmit; const n = e.updateBody; const r = e.submitting; const i = e.languages; const a = e.pristine; const s = e.classes; const l = e.errors; const c = i.map(((e) => ({ key: e.id, value: e.name }))); return o.a.createElement('form', { onSubmit: t }, o.a.createElement('div', { className: s.flex }, o.a.createElement('div', { className: s.wrapper }, o.a.createElement(Fe.a, { required: !0, className: s.formControl }, o.a.createElement(je.a, {
        name: 'language', label: 'Language', options: c, component: ei, className: s.selectField, errorText: l.errors.code,
      })))), o.a.createElement('div', { className: s.wysiwyg }, o.a.createElement(je.a, {
        name: 'text', label: 'Text', component: ti, updateBody: n,
      })), o.a.createElement('div', null, o.a.createElement(xe.a, { type: 'submit', variant: 'contained', disabled: a || r }, 'Save')));
    })); const ri = Object(G.a)(((e) => ({
      wrapper: { display: 'flex', flex: 1 },
      textField: {
        flex: 1, marginLeft: e.spacing.unit, marginRight: e.spacing.unit, marginBottom: e.spacing.unit,
      },
      formControl: { margin: e.spacing.unit, flex: 1, minWidth: 120 },
      selectField: { textAlign: 'left' },
      flex: { display: 'flex', flexDirection: 'row' },
      wysiwyg: { marginTop: e.spacing.unit, marginBottom: e.spacing.unit, textAlign: 'left' },
    })))(ni); const ii = (function (e) {
      Object(U.a)(n, e); const t = Object(H.a)(n); function n(e) { let r; return Object(F.a)(this, n), (r = t.call(this, e)).handleSubmit = r.handleSubmit.bind(Object(B.a)(r)), r.updateBody = r.updateBody.bind(Object(B.a)(r)), r.state = { body: '' }, r; } return Object(V.a)(n, [{ key: 'componentDidMount', value() { const e = this.props; const t = e.languages; const n = e.languagesFetch; t.fetched || t.fetching || n(); } }, { key: 'updateBody', value(e) { this.setState({ body: e }); } }, { key: 'handleSubmit', value(e) { e.preventDefault(); const t = this.state.body; const n = this.props; const r = n.history; const i = n.handleSubmit; const o = n.match.params.KnowledgeUnitId; i({ LanguageId: e.target.language.value, KnowledgeUnitId: o, content: t }, r); } }, {
        key: 'render',
        value() {
          const e = this.props; const t = e.languages; const n = e.errors; return o.a.createElement(ri, {
            handleSubmit: this.handleSubmit, updateBody: this.updateBody, languages: t.languages, initialValues: { language: 1 }, errors: n.add,
          });
        },
      }]), n;
    }(i.Component)); const oi = Object(z.g)(ii); const ai = function (e) {
      const t = e.knowledgeUnits; const n = e.languages; const r = e.actions; const i = e.texts; const a = e.user; return o.a.createElement(o.a.Fragment, null, o.a.createElement(z.b, {
        exact: !0,
        path: '/texts/add/knowledge-units/:KnowledgeUnitId',
        render() {
          return o.a.createElement(zr, {
            fetchRoles: r.userFetchRoles,
            knowledgeUnitsItemFetch: r.knowledgeUnitsItemFetch,
            title: 'Add Text to Knowledge Unit: ',
            className: 'LearningUnitsWrapper',
            logout: r.userLogout,
            knowledgeUnits: t,
            active: 'texts',
            user: a,
            element: o.a.createElement(oi, {
              languagesFetch: r.languagesFetch, handleSubmit: r.textsAdd, languages: n, errors: i.errors,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/texts/show/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'TextsWrapper',
            logout: r.userLogout,
            title: 'Text',
            active: 'texts',
            user: a,
            element: o.a.createElement(Xr, {
              itemFetch: r.textsItemFetch, handleSubmit: r.textsEdit, errors: i.errors, items: i,
            }),
          });
        },
      }), o.a.createElement(z.b, {
        exact: !0,
        path: '/texts/edit/:id',
        render() {
          return o.a.createElement(_e, {
            fetchRoles: r.userFetchRoles,
            className: 'TextsWrapper',
            logout: r.userLogout,
            title: 'Text',
            active: 'texts',
            user: a,
            element: o.a.createElement(Qr, {
              languagesFetch: r.languagesFetch, itemFetch: r.textsItemFetch, handleSubmit: r.textsEdit, languages: n, errors: i.errors, items: i,
            }),
          });
        },
      }));
    }; const si = n(23); const li = n.n(si); const ci = n(37); var ui = function (e) { return { type: 'KNOWLEDGEUNITS_FETCH_SUCCESS', items: e }; }; var di = function (e, t) { return { type: 'KNOWLEDGEUNITS_ADD_FAILED', error: e, errors: t }; }; var hi = function () { return { type: 'KNOWLEDGEUNITS_ADD_SUCCESS' }; }; var fi = function () { return { type: 'KNOWLEDGEUNITS_EDIT_SUCCESS' }; }; var mi = function () { return { type: 'KNOWLEDGEUNITS_DELETE_SUCCESS' }; }; var vi = function (e) { return { type: 'KNOWLEDGEUNITS_ITEM_FETCH_SUCCESS', item: e }; }; var gi = function (e) { return { type: 'KNOWLEDGEUNITS_TAXONOMIES_FETCH_SUCCESS', items: e }; }; var pi = function () { return function (e) { return fetch('/api/knowledgeUnits', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((t) => { t && (t.error || e(ui(t))); })).catch(((e) => { console.log('Error while fetching knowledge units:', e); })); }; }; var ki = function (e) { return (function () { const t = Object(ci.a)(li.a.mark((function t(n) { let r; let i; return li.a.wrap(((t) => { for (;;) switch (t.prev = t.next) { case 0: return t.next = 2, n({ type: 'KNOWLEDGEUNITS_ITEM_FETCH', id: e }); case 2: return t.prev = 2, t.next = 5, fetch('/api/knowledgeUnits/'.concat(e), { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }); case 5: return r = t.sent, t.next = 8, r.json(); case 8: (i = t.sent) && (i.error || n(vi(i))), t.next = 15; break; case 12: t.prev = 12, t.t0 = t.catch(2), console.log('Error while fetching knowledge units:', t.t0); case 15: case 'end': return t.stop(); } }), t, null, [[2, 12]]); }))); return function (e) { return t.apply(this, arguments); }; }()); }; var bi = function (e, t) {
      return function (n) {
        return fetch('/api/knowledgeUnits', {
          method: 'post', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(e),
        }).then(((e) => e.json())).then(((e) => { e && (e.error ? n(di(e.error, e.errors)) : (n(hi()), t.push('/knowledge-units/show/'.concat(e.id)))); })).catch(((e) => { console.log('Error while adding knowledge unit:', e); }));
      };
    }; var yi = function (e) { return function (t) { return fetch('/api/knowledgeUnits/'.concat(e), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then((() => { t(mi()); })).catch(((e) => { console.log('Error while deleting knowledge unit:', e); })); }; }; var wi = function (e, t, n) {
      return function (r) {
        return fetch('/api/knowledgeUnits/'.concat(e), {
          method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(t),
        }).then(((e) => e.json())).then(((e) => { e && (e.error || (r(fi()), n.push('/knowledgeUnits'))); })).catch(((e) => { console.log('Error while editing knowledge unit:', e); }));
      };
    }; var _i = function () { return function (e) { return fetch('/api/knowledgeUnits/taxonomies', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((t) => { t && (t.error || e(gi(t))); })).catch(((e) => { console.log('Error while fetching knowledge units:', e); })); }; }; var Ei = function (e) { return function (t) { return fetch('/api/knowledgeUnits/markReviewed/'.concat(e), { method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error || t(fi())); })).catch(((e) => { console.log('Error while editing knowledge unit:', e); })); }; }; var xi = function (e) { return function (t) { return fetch('/api/knowledgeUnits/markLectored/'.concat(e), { method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error || t(fi())); })).catch(((e) => { console.log('Error while editing knowledge unit:', e); })); }; }; var Ti = function (e) { return { type: 'LEARNINGUNITS_FETCH_SUCCESS', items: e }; }; var Ci = function (e, t) { return { type: 'LEARNINGUNITS_ADD_FAILED', error: e, errors: t }; }; var Si = function () { return { type: 'LEARNINGUNITS_ADD_SUCCESS' }; }; var Ai = function () { return { type: 'LEARNINGUNITS_EDIT_SUCCESS' }; }; var Pi = function () { return { type: 'LEARNINGUNITS_DELETE_SUCCESS' }; }; var Oi = function (e) { return { type: 'LEARNINGUNITS_ITEM_FETCH_SUCCESS', item: e }; }; var Ii = function (e) { return { type: 'LEARNINGUNITS_SUGGESTIONS_FETCH_SUCCESS', items: e }; }; var Mi = function (e) { return { type: 'LEARNINGUNITS_TAXONOMIES_FETCH_SUCCESS', items: e }; }; var Ni = function () { return function (e) { return fetch('/api/learningUnits', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((t) => { t && (t.error || e(Ti(t))); })).catch(((e) => { console.log('Error while fetching knowledge units:', e); })); }; }; var Ri = function (e) { return (function () { const t = Object(ci.a)(li.a.mark((function t(n) { let r; let i; return li.a.wrap(((t) => { for (;;) switch (t.prev = t.next) { case 0: return t.next = 2, n({ type: 'LEARNINGUNITS_ITEM_FETCH', id: e }); case 2: return t.prev = 2, t.next = 5, fetch('/api/learningUnits/'.concat(e), { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }); case 5: return r = t.sent, t.next = 8, r.json(); case 8: (i = t.sent) && (i.error || n(Oi(i))), t.next = 15; break; case 12: t.prev = 12, t.t0 = t.catch(2), console.log('Error while fetching lerarning units:', t.t0); case 15: case 'end': return t.stop(); } }), t, null, [[2, 12]]); }))); return function (e) { return t.apply(this, arguments); }; }()); }; var ji = function (e) { return function (t) { return fetch('/api/learningUnits/suggestion/'.concat(e), { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error || t(Ii(e))); })).catch(((e) => { console.log('Error while fetching learning unit suggestions:', e); })); }; }; var Di = function (e, t) {
      return function (n) {
        return fetch('/api/learningUnits', {
          method: 'post', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(e),
        }).then(((e) => e.json())).then(((e) => { e && (e.error ? n(Ci(e.error, e.errors)) : (n(Si()), t.push('/learning-units'))); })).catch(((e) => { console.log('Error while adding knowledge unit:', e); }));
      };
    }; var Li = function (e) { return function (t) { return fetch('/api/learningUnits/'.concat(e), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then((() => { t(Pi()); })).catch(((e) => { console.log('Error while deleting knowledge unit:', e); })); }; }; var zi = function (e, t, n, r) {
      return function (i) {
        return fetch('/api/learningUnits/'.concat(e), {
          method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(n),
        }).then(((e) => e.json())).then(((n) => { n && (n.error || (i(Ai()), r.push('/learning-units/edit/'.concat(t, '/').concat(e)))); })).catch(((e) => { console.log('Error while editing knowledge unit:', e); }));
      };
    }; var Fi = function (e, t, n, r, i) {
      return (function () {
        const o = Object(ci.a)(li.a.mark((function o(a) {
          let s; let l; return li.a.wrap(((o) => {
            for (;;) {
              switch (o.prev = o.next) {
                case 0: return o.prev = 0, o.next = 3, fetch('/api/learningUnits/addTag/'.concat(e), {
                  method: 'post', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify({ tag: t }),
                }); case 3: return s = o.sent, o.next = 6, s.json(); case 6: (l = o.sent) && (l.error || (a(Ai()), i.push('/learning-units/edit/'.concat(n, '/').concat(r)))), o.next = 13; break; case 10: o.prev = 10, o.t0 = o.catch(0), console.log('Error while adding knowledge unit:', o.t0); case 13: case 'end': return o.stop();
              }
            }
          }), o, null, [[0, 10]]);
        }))); return function (e) { return o.apply(this, arguments); };
      }());
    }; var Vi = function (e, t, n, r) { return (function () { const i = Object(ci.a)(li.a.mark((function i(o) { let a; let s; return li.a.wrap(((i) => { for (;;) switch (i.prev = i.next) { case 0: return i.prev = 0, i.next = 3, fetch('/api/learningUnits/deleteTag/'.concat(e), { method: 'delete', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }); case 3: return a = i.sent, i.next = 6, a.json(); case 6: (s = i.sent) && (s.error || (o(Ai()), r.push('/learning-units/edit/'.concat(t, '/').concat(n)))), i.next = 13; break; case 10: i.prev = 10, i.t0 = i.catch(0), console.log('Error while adding knowledge unit:', i.t0); case 13: case 'end': return i.stop(); } }), i, null, [[0, 10]]); }))); return function (e) { return i.apply(this, arguments); }; }()); }; var Bi = function (e, t, n, r, i) {
      return (function () {
        const o = Object(ci.a)(li.a.mark((function o(a) {
          let s; let l; return li.a.wrap(((o) => {
            for (;;) {
              switch (o.prev = o.next) {
                case 0: return o.prev = 0, o.next = 3, fetch('/api/learningUnits/tag/'.concat(e), {
                  method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify({ value: t }),
                }); case 3: return s = o.sent, o.next = 6, s.json(); case 6: (l = o.sent) && (l.error || (a(Ai()), i.push('/learning-units/edit/'.concat(n, '/').concat(r)))), o.next = 13; break; case 10: o.prev = 10, o.t0 = o.catch(0), console.log('Error while updating learning unit tag:', o.t0); case 13: case 'end': return o.stop();
              }
            }
          }), o, null, [[0, 10]]);
        }))); return function (e) { return o.apply(this, arguments); };
      }());
    }; var Ui = function (e, t, n, r, i) {
      return function (o) {
        return fetch('/api/learningUnits/addRelation/'.concat(e), {
          method: 'post', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify({ type: n, targetId: t }),
        }).then(((e) => e.json())).then(((t) => { t && (t.error || (o(Ai()), i.push('/learning-units/show/'.concat(r, '/').concat(e)))); })).catch(((e) => { console.log('Error while adding knowledge unit:', e); }));
      };
    }; var Hi = function () { return (function () { const e = Object(ci.a)(li.a.mark((function e(t) { let n; let r; return li.a.wrap(((e) => { for (;;) switch (e.prev = e.next) { case 0: return e.next = 2, t({ type: 'LEARNINGUNITS_TAXONOMIES_FETCH' }); case 2: return e.prev = 2, e.next = 5, fetch('/api/learningUnits/taxonomies', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }); case 5: return n = e.sent, e.next = 8, n.json(); case 8: (r = e.sent) && (r.error || t(Mi(r))), e.next = 15; break; case 12: e.prev = 12, e.t0 = e.catch(2), console.log('Error while fetching knowledge units:', e.t0); case 15: case 'end': return e.stop(); } }), e, null, [[2, 12]]); }))); return function (t) { return e.apply(this, arguments); }; }()); }; var Wi = function (e) { return { type: 'CAPABILITIES_FETCH_SUCCESS', items: e }; }; var qi = function () { return function (e) { return fetch('/api/capabilities', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((t) => { t && (t.error || e(Wi(t))); })).catch(((e) => { console.log('Error while fetching capabilities:', e); })); }; }; var Gi = function (e) { return { type: 'TAXONOMIES_FETCH_SUCCESS', items: e }; }; var $i = function (e, t) { return { type: 'TAXONOMIES_ITEM_FETCH_SUCCESS', item: e, children: t }; }; var Yi = function (e, t) { return { type: 'TAXONOMIES_ADD_FAILES', error: e, errors: t }; }; var Ki = function () { return { type: 'TAXONOMIES_ADD_SUCCESS' }; }; var Qi = function () { return { type: 'TAXONOMIES_EDIT_SUCCESS' }; }; var Ji = function () { return { type: 'TAXONOMIES_DELETE_FAILES' }; }; var Zi = function () { return function (e) { return fetch('/api/taxonomies', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((t) => { t && (t.error || e(Gi(t))); })).catch(((e) => { console.log('Error while fetching taxonomies:', e); })); }; }; var Xi = function (e, t) {
      return function (n) {
        return fetch('/api/taxonomies', {
          method: 'post', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(e),
        }).then(((e) => e.json())).then(((r) => { r && (r.error ? n(Yi(r.error, r.errors)) : (n(Ki()), e.parent && e.parent !== 1 ? t.push('/taxonomies/show/'.concat(e.parent)) : t.push('/taxonomies'))); })).catch(((e) => { console.log('Error during adding language:', e); }));
      };
    }; var eo = function (e) { return function (t) { return fetch('/api/taxonomies/'.concat(e), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then((() => { t(Ji()); })).catch(((e) => { console.log('Error during adding language:', e); })); }; }; var to = function (e, t, n) {
      return function (r) {
        return fetch('/api/taxonomies/'.concat(e), {
          method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(t),
        }).then(((e) => e.json())).then(((e) => { e && (e.error || (r(Qi()), n.push('/taxonomies'))); })).catch(((e) => { console.log('Error during adding language:', e); }));
      };
    }; var no = function (e) { return function (t) { return fetch('/api/taxonomies/'.concat(e), { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error || t($i(e.item, e.children))); })).catch(((e) => { console.log('Error while fetching taxonomies:', e); })); }; }; var ro = function (e) { return { type: 'LANGUAGES_FETCH_SUCCESS', languages: e }; }; var io = function (e, t) { return { type: 'LANGUAGES_ADD_FAILES', error: e, errors: t }; }; var oo = function () { return { type: 'LANGUAGES_ADD_SUCCESS' }; }; var ao = function () { return { type: 'LANGUAGES_EDIT_SUCCESS' }; }; var so = function () { return { type: 'LANGUAGES_DELETE_FAILES' }; }; var lo = function () { return function (e) { return fetch('/api/languages', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((t) => { t && (t.error || e(ro(t))); })).catch(((e) => { console.log('Error while fetching languages:', e); })); }; }; var co = function (e, t) {
      return function (n) {
        return fetch('/api/languages', {
          method: 'post', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(e),
        }).then(((e) => e.json())).then(((e) => { e && (e.error ? n(io(e.error, e.errors)) : (n(oo()), t.push('/languages'))); })).catch(((e) => { console.log('Error during adding language:', e); }));
      };
    }; var uo = function (e) { return function (t) { return fetch('/api/languages/'.concat(e), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then((() => { t(so()); })).catch(((e) => { console.log('Error during adding language:', e); })); }; }; var ho = function (e, t, n) {
      return function (r) {
        return fetch('/api/languages/'.concat(e), {
          method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(t),
        }).then(((e) => e.json())).then(((e) => { e && (e.error || (r(ao()), n.push('/languages'))); })).catch(((e) => { console.log('Error during adding language:', e); }));
      };
    }; var fo = function (e) { return { type: 'ROLES_FETCH_SUCCESS', items: e }; }; var mo = function (e) { return { type: 'ROLES_ITEM_FETCH_SUCCESS', item: e }; }; var vo = function (e, t) { return { type: 'ROLES_ADD_FAILED', error: e, errors: t }; }; var go = function () { return { type: 'ROLES_ADD_SUCCESS' }; }; var po = function () { return { type: 'ROLES_EDIT_SUCCESS' }; }; var ko = function () { return { type: 'ROLES_DELETE_SUCCESS' }; }; var bo = function () { return { type: 'ROLES_CAPABILITIES_UPDATE_SUCCESS' }; }; var yo = function () { return function (e) { return fetch('/api/roles', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((t) => { t && (t.error || e(fo(t))); })).catch(((e) => { console.log('Error while fetching roles:', e); })); }; }; var wo = function (e, t) {
      return function (n) {
        return fetch('/api/roles', {
          method: 'post', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(e),
        }).then(((e) => e.json())).then(((e) => { e && (e.error ? n(vo(e.error, e.errors)) : (n(go()), t.push('/users/roles'))); })).catch(((e) => { console.log('Error during adding language:', e); }));
      };
    }; var _o = function (e) { return function (t) { return fetch('/api/roles/'.concat(e), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then((() => { t(ko()); })).catch(((e) => { console.log('Error during adding language:', e); })); }; }; var Eo = function (e, t, n) {
      return function (r) {
        return fetch('/api/roles/'.concat(e), {
          method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(t),
        }).then(((e) => e.json())).then(((e) => { e && (e.error || (r(po()), n.push('/users/roles'))); })).catch(((e) => { console.log('Error during adding language:', e); }));
      };
    }; var xo = function (e, t) {
      return function (n) {
        return fetch('/api/roles/'.concat(e, '/capability'), {
          method: 'POST', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify({ id: t }),
        }).then(((e) => e.json())).then(((e) => { e && (e.error || n(bo())); })).catch(((e) => { console.log('Error during adding language:', e); }));
      };
    }; var To = function (e, t) { return function (n) { return fetch('/api/roles/'.concat(e, '/capability/').concat(t), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error || n(bo())); })).catch(((e) => { console.log('Error during adding language:', e); })); }; }; var Co = function (e) { return function (t) { return fetch('/api/roles/'.concat(e), { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error || t(mo(e))); })).catch(((e) => { console.log('Error while fetching roles:', e); })); }; }; var So = function (e) { return { type: 'USERS_FETCH_SUCCESS', items: e }; }; var Ao = function () { return { type: 'USER_ACTIVATION_SUCCESS' }; }; var Po = function () { return { type: 'USER_ACTIVATION_FAILED' }; }; var Oo = function (e) { return { type: 'USERS_ITEM_FETCH_SUCCESS', item: e }; }; var Io = function (e) { return { type: 'USERS_EDIT_SUCCESS', id: e }; }; var Mo = function () { return { type: 'USERS_DELETE_SUCCESS' }; }; var No = function () { return { type: 'USERS_ROLES_UPDATE_SUCCESS' }; }; var Ro = function () { return function (e) { return fetch('/api/users', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((t) => { t && (t.error || e(So(t))); })).catch(((e) => { console.log('Error while fetching users:', e); })); }; }; var jo = function (e) { return function (t) { return fetch('/api/users/'.concat(e), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then((() => { t(Mo()); })).catch(((e) => { console.log('Error during adding language:', e); })); }; }; var Do = function (e, t, n) {
      return function (r) {
        return fetch('/api/users/'.concat(e), {
          method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(t),
        }).then(((e) => e.json())).then(((t) => { t && (t.error || (r(Io(e)), n.push('/users/edit/'.concat(e)))); })).catch(((e) => { console.log('Error during adding language:', e); }));
      };
    }; var Lo = function (e) { return function (t) { return fetch('/api/users/'.concat(e), { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error || t(Oo(e))); })).catch(((e) => { console.log('Error while fetching users:', e); })); }; }; var zo = function (e) { return function (t) { return fetch('/api/users/activate/'.concat(e), { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error ? t(Po()) : t(Ao())); })).catch(((e) => { console.log('Error while activating user:', e); })); }; }; var Fo = function (e, t) {
      return function (n) {
        return fetch('/api/users/'.concat(e, '/role'), {
          method: 'POST', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify({ id: t }),
        }).then(((e) => e.json())).then(((e) => { e && (e.error || n(No())); })).catch(((e) => { console.log('Error during adding role:', e); }));
      };
    }; var Vo = function (e, t) { return function (n) { return fetch('/api/users/'.concat(e, '/role/').concat(t), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error || n(No())); })).catch(((e) => { console.log('Error during adding language:', e); })); }; }; var Bo = function (e) { return { type: 'TEXTS_FETCH_SUCCESS', items: e }; }; var Uo = function (e, t) { return { type: 'TEXTS_ADD_FAILED', error: e, errors: t }; }; var Ho = function () { return { type: 'TEXTS_ADD_SUCCESS' }; }; var Wo = function () { return { type: 'TEXTS_EDIT_SUCCESS' }; }; var qo = function () { return { type: 'TEXTS_DELETE_SUCCESS' }; }; var Go = function (e) { return { type: 'TEXTS_ITEM_FETCH_SUCCESS', item: e }; }; var $o = function () { return function (e) { return fetch('/api/texts', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((t) => { t && (t.error || e(Bo(t))); })).catch(((e) => { console.log('Error while fetching knowledge units:', e); })); }; }; var Yo = function (e) { return function (t) { return fetch('/api/texts/'.concat(e), { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => e.json())).then(((e) => { e && (e.error || t(Go(e))); })).catch(((e) => { console.log('Error while fetching knowledge units:', e); })); }; }; var Ko = function (e, t) {
      return function (n) {
        return fetch('/api/texts', {
          method: 'post', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(e),
        }).then(((e) => e.json())).then(((e) => { e && (e.error ? n(Uo(e.error, e.errors)) : (n(Ho()), t.push('/texts/show/'.concat(e.id)))); })).catch(((e) => { console.log('Error while adding knowledge unit:', e); }));
      };
    }; var Qo = function (e) { return function (t) { return fetch('/api/texts/'.concat(e), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then((() => { t(qo()); })).catch(((e) => { console.log('Error while deleting knowledge unit:', e); })); }; }; var Jo = function (e, t, n) {
      return function (r) {
        return fetch('/api/texts/'.concat(e), {
          method: 'PATCH', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(t),
        }).then(((e) => e.json())).then(((e) => { e && (e.error || (r(Wo()), n.push('/texts/show/'.concat(e.id)))); })).catch(((e) => { console.log('Error while editing knowledge unit:', e); }));
      };
    }; var Zo = function (e, t) { return { type: 'USER_REGISTER_FAILED', error: e, errors: t }; }; var Xo = function () { return { type: 'USER_REGISTER_SUCCESS' }; }; var ea = function (e, t) { return { type: 'USER_EDIT_FAILED', error: e, errors: t }; }; var ta = function (e) { return { type: 'USER_EDIT_SUCCESS', user: e }; }; var na = function (e, t) { return { type: 'USER_LOGIN_FAILED', error: e, errors: t }; }; var ra = function (e) { return { type: 'USER_LOGIN_SUCCESS', user: e }; }; var ia = function () { return { type: 'USER_LOGOUT_SUCCESS' }; }; var oa = function (e) { return { type: 'USER_ROLES_FETCH_SUCCESS', roles: e }; }; var aa = function (e, t) { for (var n = new FormData(), r = Object.keys(e), i = 0; i < r.length; i += 1) { const o = r[i]; n.append(o, e[o]); } return function (e) { return fetch('/api/users', { method: 'post', credentials: 'include', body: n }).then(((e) => e.json())).then(((n) => { n && (n.error ? e(Zo(n.error, n.errors)) : (e(Xo()), t.push('/users/login'))); })).catch(((e) => { console.log('Error during registration:', e); })); }; }; var sa = function (e, t) {
      return function (n) {
        return fetch('/api/users/login', {
          method: 'post', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(e),
        }).then(((e) => e.json())).then(((e) => { e && (e.error ? n(na(e.error, e.errors)) : (n(ra(e)), t.push('/'))); })).catch(((e) => { console.log('Error during login:', e); }));
      };
    }; var la = function (e) { return function (t) { return fetch('/api/users/logout', { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then((() => { t(ia()), e.push('/'); })).catch(((e) => { console.log('Error during logout:', e); })); }; }; var ca = function (e, t, n) { for (var r = new FormData(), i = Object.keys(t), o = 0; o < i.length; o += 1) { const a = i[o]; r.append(a, t[a]); } return function (t) { return fetch('/api/users/'.concat(e), { method: 'PATCH', credentials: 'include', body: r }).then(((e) => e.json())).then(((e) => { e && (e.error ? t(ea(e.error, e.errors)) : (t(ta(e)), n.push('/users/user/edit'))); })).catch(((e) => { console.log('Error during editing:', e); })); }; }; var ua = function (e) { return function (t) { return fetch('/api/users/'.concat(e), { method: 'GET', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }).then(((e) => (e.status === 401 && t(ia()), e.json()))).then(((e) => { e && (e.error || t(oa(e))); })).catch(((e) => { console.log('Error during editing:', e); })); }; }; var da = function (e, t, n) { return (function () { const t = Object(ci.a)(li.a.mark((function t(r) { let i; let o; return li.a.wrap(((t) => { for (;;) switch (t.prev = t.next) { case 0: return t.prev = 0, t.next = 3, fetch('/api/users/'.concat(e), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }); case 3: return i = t.sent, t.next = 6, i.json(); case 6: (o = t.sent) && (o.error || (r(ia()), n.push('/'))), t.next = 13; break; case 10: t.prev = 10, t.t0 = t.catch(0), console.log('Error while deleting user:', t.t0); case 13: case 'end': return t.stop(); } }), t, null, [[0, 10]]); }))); return function (e) { return t.apply(this, arguments); }; }()); }; var ha = function (e, t, n) {
      return (function () {
        const r = Object(ci.a)(li.a.mark((function r(i) {
          let o; let a; return li.a.wrap(((r) => {
            for (;;) {
              switch (r.prev = r.next) {
                case 0: return r.prev = 0, r.next = 3, fetch('/api/users/'.concat(e, '/language'), {
                  method: 'POST', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(t),
                }); case 3: return o = r.sent, r.next = 6, o.json(); case 6: (a = r.sent) && (a.error || (i(ta(a)), n.push('/users/user/languages'))), r.next = 13; break; case 10: r.prev = 10, r.t0 = r.catch(0), console.log('Error while fetching knowledge units:', r.t0); case 13: case 'end': return r.stop();
              }
            }
          }), r, null, [[0, 10]]);
        }))); return function (e) { return r.apply(this, arguments); };
      }());
    }; var fa = function (e, t, n) { return (function () { const r = Object(ci.a)(li.a.mark((function r(i) { let o; let a; return li.a.wrap(((r) => { for (;;) switch (r.prev = r.next) { case 0: return r.prev = 0, r.next = 3, fetch('/api/users/'.concat(e, '/language/').concat(t), { method: 'DELETE', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include' }); case 3: return o = r.sent, r.next = 6, o.json(); case 6: (a = r.sent) && (a.error || (i(ta(a)), n.push('/users/user/languages'))), r.next = 13; break; case 10: r.prev = 10, r.t0 = r.catch(0), console.log('Error while fetching knowledge units:', r.t0); case 13: case 'end': return r.stop(); } }), r, null, [[0, 10]]); }))); return function (e) { return r.apply(this, arguments); }; }()); }; var ma = function (e, t, n) {
      return (function () {
        const r = Object(ci.a)(li.a.mark((function r(i) {
          let o; let a; return li.a.wrap(((r) => {
            for (;;) {
              switch (r.prev = r.next) {
                case 0: return r.prev = 0, r.next = 3, fetch('/api/users/'.concat(e, '/language/preferred'), {
                  method: 'POST', headers: { Accept: 'application/json', 'Content-Type': 'application/json' }, credentials: 'include', body: JSON.stringify(t),
                }); case 3: return o = r.sent, r.next = 6, o.json(); case 6: (a = r.sent) && (a.error || (i(ta(a)), n.push('/users/user/languages'))), r.next = 13; break; case 10: r.prev = 10, r.t0 = r.catch(0), console.log('Error setting preferred language:', r.t0); case 13: case 'end': return r.stop();
              }
            }
          }), r, null, [[0, 10]]);
        }))); return function (e) { return r.apply(this, arguments); };
      }());
    }; const va = Object(z.g)(Object(v.b)(((e) => ({
      knowledgeUnits: e.knowledgeUnits, learningUnits: e.learningUnits, capabilities: e.capabilities, taxonomies: e.taxonomies, languages: e.languages, roles: e.roles, users: e.users, texts: e.texts, user: e.user,
    })), ((e) => ({ actions: Object(l.b)(r, e) })))(((e) => {
      const t = e.knowledgeUnits; const n = e.learningUnits; const r = e.capabilities; const i = e.taxonomies; const a = e.languages; const s = e.actions; const l = e.roles; const c = e.users; const u = e.texts; const d = e.user; return o.a.createElement(z.d, null, o.a.createElement(z.b, {
        exact: !0,
        path: '/',
        render() {
          return o.a.createElement('div', { className: 'RegisterWrapper' }, o.a.createElement(ye, {
            title: 'Home', active: 'home', user: d, logout: s.userLogout, fetchRoles: s.userFetchRoles,
          }), o.a.createElement(we, { loggedIn: d.loggedIn }));
        },
      }), o.a.createElement(z.b, { path: '/languages', render() { return o.a.createElement(En, { languages: a, actions: s, user: d }); } }), o.a.createElement(z.b, { path: '/taxonomies', render() { return o.a.createElement(cn, { taxonomies: i, actions: s, user: d }); } }), o.a.createElement(z.b, {
        path: '/users',
        render() {
          return o.a.createElement(Dr, {
            capabilities: r, languages: a, actions: s, roles: l, users: c, user: d,
          });
        },
      }), o.a.createElement(z.b, {
        path: '/learning-units',
        render() {
          return o.a.createElement(Ut, {
            learningUnits: n, capabilities: r, languages: a, actions: s, user: d,
          });
        },
      }), o.a.createElement(z.b, {
        path: '/knowledge-units',
        render() {
          return o.a.createElement(Je, {
            learningUnits: n, knowledgeUnits: t, capabilities: r, languages: a, actions: s, user: d,
          });
        },
      }), o.a.createElement(z.b, {
        path: '/texts',
        render() {
          return o.a.createElement(ai, {
            knowledgeUnits: t, capabilities: r, languages: a, actions: s, texts: u, user: d,
          });
        },
      }), o.a.createElement(z.a, { to: '/' }));
    }))); const ga = (n(339), { key: 'root', storage: f.a, whitelist: ['user'] }); const pa = Object(u.b)(ga, L); const ka = Object(l.e)(pa, void 0, Object(l.d)(Object(l.a)(m.a))); const ba = Object(u.c)(ka); const ya = function () { return o.a.createElement(v.a, { store: ka }, o.a.createElement(c.a, { loading: null, persistor: ba }, o.a.createElement('div', { className: 'App' }, o.a.createElement(d.a, null, o.a.createElement(va, null))))); }; const wa = Boolean(window.location.hostname === 'localhost' || window.location.hostname === '[::1]' || window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)); function _a(e) { navigator.serviceWorker.register(e).then(((e) => { e.onupdatefound = function () { const t = e.installing; t.onstatechange = function () { t.state === 'installed' && (navigator.serviceWorker.controller ? console.log('New content is available; please refresh.') : console.log('Content is cached for offline use.')); }; }; })).catch(((e) => { console.error('Error during service worker registration:', e); })); }s.a.render(o.a.createElement(ya, null), document.getElementById('root')), (function () { if ('serviceWorker' in navigator) { if (new URL('', window.location).origin !== window.location.origin) return; window.addEventListener('load', (() => { const e = ''.concat('', '/service-worker.js'); wa ? (!(function (e) { fetch(e).then(((t) => { t.status === 404 || t.headers.get('content-type').indexOf('javascript') === -1 ? navigator.serviceWorker.ready.then(((e) => { e.unregister().then((() => { window.location.reload(); })); })) : _a(e); })).catch((() => { console.log('No internet connection found. App is running in offline mode.'); })); }(e)), navigator.serviceWorker.ready.then((() => { console.log('This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ'); }))) : _a(e); })); } }());
  },
}, [[210, 1, 2]]]);
// # sourceMappingURL=main.90bf93b9.chunk.js.map
